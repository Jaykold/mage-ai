(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6809,3450],{16045:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(82684);function o(t){var e=t.resource,n=t.stale,o=t.updateLocalContent,i=t.updateServerContent,u=(0,r.useRef)(null),l=e.main,s=e.original,a=(0,r.useCallback)((function(t){var e;i(t,l,{path:(null==u||null===(e=u.current)||void 0===e?void 0:e.value)||(null==l?void 0:l.path)})}),[l,i]),c=(0,r.useCallback)((function(t){return i(t,l,l)}),[l,i]),d=(0,r.useCallback)((function(){return o(s)}),[s,o]);return{inputRef:u,main:l,original:s,overrideLocalContentFromServer:d,overrideServerContentFromLocal:c,saveCurrentContent:a,stale:n}}},32525:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return j}});var r=n(77837),o=n(82394),i=n(38860),u=n.n(i),l=n(82684),s=n(51774),a=n.n(s),c=n(16045),d=n(16831),v=n(46042),p=n(23450),h=n(28598);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g=a()((function(){return n.e(9856).then(n.bind(n,79856))}),{loadableGenerated:{webpack:function(){return[79856]}}}),b=a()((function(){return n.e(1572).then(n.bind(n,61572))}),{ssr:!1,loadableGenerated:{webpack:function(){return[61572]}}});function j(t){var e=(0,l.useRef)(null),o=(0,l.useRef)(null),i=t.app,s=t.editor,a=t.onMountEditor,f=t.skipInitialFetch,j=t.useToolbars;null!=i&&i.uuid||console.error("App UUID is required.");var y,O=(0,l.useMemo)((function(){var t;return null==i||null===(t=i.options)||void 0===t?void 0:t.file}),[i]),_=(0,l.useMemo)((function(){return(0,d.WO)(null==O?void 0:O.path)||{}}),[O]),x=_.client,C=_.server;null===e.current&&(e.current=null==x||null===(y=x.file)||void 0===y?void 0:y.content);var M=(0,l.useState)(m(m({},O),(null==x?void 0:x.file)||{})),w=M[0],R=M[1],S=(0,l.useState)(null==C?void 0:C.file),E=S[0],L=S[1],k=(0,l.useState)((0,d._T)(null==O?void 0:O.path)),D=k[0],P=k[1],Z=(0,l.useRef)(null==x?void 0:x.file),N=(0,l.useRef)(0);function T(){var t,e;return null==o||null===(t=o.current)||void 0===t||null===(e=t.getModel())||void 0===e?void 0:e.getValue()}function U(){var t;return(null==o||null===(t=o.current)||void 0===t?void 0:t.getModel()).uri.path}function A(){(0,d.SX)({client:{content:T(),path:U()}})}function I(){A()}function V(t){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p.e.editor.app&&console.log("updateLocalContent",e),e){t.next=4;break}return p.e.editor.app&&console.log("No item to update.",e),t.abrupt("return");case 4:if(null==o||!o.current){t.next=8;break}r=e.content,i=void 0,null==o||null===(i=o.current)||void 0===i||i.setValue(r),A(),t.next=10;break;case 8:return t.next=10,n.e(3528).then(n.bind(n,3528)).then((function(t){t.Manager.setValue(e)}));case 10:(0,d.SX)({client:e,server:e}),R(e),P((0,d._T)(e.path));case 13:case"end":return t.stop()}var r,i}),t)})))).apply(this,arguments)}var X=(0,v.Tu)({resource:"browser_items"},{handlers:{detail:{onSuccess:function(t){L(t);var n=!1;if(Z.current?(0,d.SX)({server:t}):(V(t),n=!0),null!=x&&x.file||R(t),t){var r,i;if(null===(null==e?void 0:e.current))e.current=t.content,null==o||null===(r=o.current)||void 0===r||null===(i=r.setValue)||void 0===i||i.call(r,e.current);!n&&P((0,d._T)(t.path))}N.current+=1}},update:{onSuccess:function(t){if((0,d.SX)({server:t}),R(t),t){var n,r;if(null===(null==e?void 0:e.current))e.current=t.content,null==o||null===(n=o.current)||void 0===n||null===(r=n.setValue)||void 0===r||r.call(n,e.current);P((0,d._T)(t.path))}N.current+=1}}}});function G(t,e,n){X.update.mutate({event:t,id:e.path,payload:{content:(null==n?void 0:n.content)||T(),path:(null==n?void 0:n.path)||e.path}})}(0,l.useEffect)((function(){var t=null==O?void 0:O.path;0===N.current&&t&&!f&&X.detail.mutate({id:t})}),[x,O,f]);var K=(0,l.useMemo)((function(){var t;return((null==Z?void 0:Z.current)||(null==w?void 0:w.content)||N.current>=1)&&(0,h.jsx)(b,m(m({},s),{},{configurations:null==i||null===(t=i.options)||void 0===t?void 0:t.configurations,eventListeners:{onDidChangeModelContent:I},onMountEditor:function(t){o.current=t,a&&(null==a||a(t))},persistManagerOnUnmount:!0,persistResourceOnUnmount:null==s?void 0:s.persistResourceOnUnmount,resource:{main:w},uuid:null==i?void 0:i.uuid}))}),[i,w,s,a]),W=(0,c.Z)(m(m({},t),{},{resource:{main:w,original:E},stale:D,updateLocalContent:V,updateServerContent:G})),B=W.inputRef,Y=W.overrideLocalContentFromServer,q=W.saveCurrentContent,z=(0,l.useMemo)((function(){return!j&&(0,h.jsx)(g,m(m({},t),{},{loading:X.update.isLoading,resource:{main:w,original:E},stale:D,updateLocalContent:V,updateServerContent:G}))}),[X.update.isLoading,w,E,t,D,j]);return{editor:{getValue:T},main:K,mutate:X,toolbars:j?{inputRef:B,main:w,original:E,overrideLocalContentFromServer:Y,overrideServerContentFromLocal:function(t){G(t,w,{content:T(),path:U()})},saveCurrentContent:q,stale:D}:{top:z}}}},16831:function(t,e,n){"use strict";n.d(e,{SX:function(){return d},WO:function(){return c},_T:function(){return a}});var r=n(82394),o=n(53808);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l="materia-ide";function s(t){return"".concat(l,"-").concat(t)}function a(t){var e,n,r=(0,o.U2)(s(t))||{},i=r.client,u=r.server;return(null==i||null===(e=i.file)||void 0===e?void 0:e.content)!==(null==u||null===(n=u.file)||void 0===n?void 0:n.content)}function c(t){return(0,o.U2)(s(t))}function d(t){var e,n,r,i,l,a,c,d,v,p,h=t.client,f=t.server,m=s((null==h?void 0:h.path)||(null==f?void 0:f.path)),g=Number(new Date),b=(0,o.U2)(m),j=!b;(b=b||{},h)&&(b.client=u(u({},(null===(e=b)||void 0===e?void 0:e.client)||{}),{},{cachedAt:j?g:null===(n=b)||void 0===n||null===(r=n.client)||void 0===r?void 0:r.cachedAt,file:u(u({},(null===(i=b)||void 0===i||null===(l=i.client)||void 0===l?void 0:l.file)||{}),h),updatedAt:g}));f&&(b.server=u(u({},(null===(a=b)||void 0===a?void 0:a.server)||{}),{},{cachedAt:j?g:null===(c=b)||void 0===c||null===(d=c.server)||void 0===d?void 0:d.cachedAt,file:u(u({},(null===(v=b)||void 0===v||null===(p=v.server)||void 0===p?void 0:p.file)||{}),f),updatedAt:g}));return(0,o.t8)(m,b),b}},23450:function(t,e,n){"use strict";n.d(e,{e:function(){return r}});var r={appManager:!1,apps:!1,codeExecution:{manager:!1,node:!1,output:!1,outputManager:!1},dragging:!1,dropping:!1,editor:{app:!1,manager:!1,node:!1},events:!1,header:{navigation:!1},itemManager:!1,keyboard:!1,layout:!1,layoutManager:!1,lines:{manager:!1},node:{block:!1,node:!1},rects:!1,rendering:!1,settings:{manager:!1},state:!1}},46042:function(t,e,n){"use strict";n.d(e,{sp:function(){return S},Tu:function(){return E.T}});var r=n(45795),o=n(89565),i=n.n(o),u=n(82684),l=n(73457),s=n(89635),a=n(66878),c=n(63091),d=n(11611),v=n(28160),p=n(36801),h=n.n(p),f=n(28862),m=n(86735),g=n(28598),b=["bottomLeft","bottomRight","right","topLeft","topRight"],j=(0,u.memo)((function(t){var e,n,r,o,u,p,j,y,O,_,x,C,M=t.dismissError,w=t.errorRef,R=(t.retry,(0,l.o)()),S=(0,m.mp)(b),E=(null!==(e=null==w||null===(n=w.current)||void 0===n||null===(r=n.response)||void 0===r?void 0:r.data)&&void 0!==e?e:{}).error,L=(null!==(o=null==w||null===(u=w.current)||void 0===u?void 0:u.client)&&void 0!==o?o:{}).error,k=null==E?void 0:E.code,D=null!==(p=null==E?void 0:E.errors)&&void 0!==p?p:null==L?void 0:L.errors,P=null!==(j=null==E?void 0:E.message)&&void 0!==j?j:null==L?void 0:L.message,Z=null!==(y=null==E?void 0:E.type)&&void 0!==y?y:null==L?void 0:L.type;return(0,g.jsx)("div",{onPointerDown:function(t){},children:(0,g.jsx)(s.E.div,{className:[h().errorManager,h()[S]].filter(Boolean).join(" "),dragControls:R,children:(0,g.jsxs)(d.Z,{borderColor:"redmd",borders:!0,className:h().errorContainer,rowGap:12,style:{borderWidth:2,padding:24},templateColumns:"auto",templateRows:"auto auto",width:"max-content",children:[(0,g.jsxs)(d.Z,{rowGap:12,templateColumns:"auto",templateRows:"auto auto",children:[(0,g.jsx)(f.uyG,{colorName:"yellow"}),(null==w||null===(O=w.current)||void 0===O?void 0:O.message)&&(0,g.jsx)(v.Z,{monospace:!0,secondary:!0,semibold:!0,small:!0,children:(0,g.jsx)(i(),{children:null==w||null===(_=w.current)||void 0===_?void 0:_.message})}),(null===(x=[k,Z,P,(null==D?void 0:D.length)>=1])||void 0===x?void 0:x.some(Boolean))&&(0,g.jsx)(c.Z,{}),[k,Z,P].map((function(t){return t&&(0,g.jsx)(v.Z,{monospace:!0,small:!0,children:(0,g.jsx)(i(),{children:String(t)})},t)})),(null===(C=[(null==D?void 0:D.length)>0])||void 0===C?void 0:C.some(Boolean))&&(0,g.jsx)(c.Z,{short:!0}),(null==D?void 0:D.length)>=1&&L&&(0,g.jsx)(v.Z,{monospace:!0,small:!0,children:(0,g.jsx)("pre",{style:{whiteSpace:"pre-wrap"},children:(0,g.jsx)(i(),{children:null==D?void 0:D.join("\n")})})}),(null==D?void 0:D.length)>=1&&!L&&(0,g.jsx)("pre",{style:{whiteSpace:"break-spaces"},children:(0,g.jsx)(v.Z,{inline:!0,monospace:!0,small:!0,children:null==D?void 0:D.map((function(t){return(0,g.jsx)(i(),{children:t},t)}))})})]}),(0,g.jsx)(c.Z,{}),(0,g.jsxs)(d.Z,{autoFlow:"column",justifyContent:"space-between",templateColumns:"min-content",children:[(0,g.jsxs)(a.h,{children:[(0,g.jsx)(a.Z,{basic:!0,onClick:M,small:!0,children:"Dismiss error"}),!1]}),(0,g.jsxs)(a.h,{children:[(0,g.jsx)(a.Z,{Icon:f.ugo,basic:!0,disabled:!0,small:!0,children:"Fix error"}),(0,g.jsx)(a.Z,{Icon:f.u$H,basic:!0,disabled:!0,small:!0,children:"Explain error"})]})]})]})})})})),y=n(18735),O=n(85202),_=n(13903),x=n.n(_),C=n(54587),M=n(9518),w=n(78050),R="api-mutation-root",S=function(t){var e=t.children,n=(0,u.useContext)(M.ThemeContext),o=(0,u.useRef)(null),i=(0,u.useRef)(null),l=(0,u.useRef)(null),s=(0,u.useState)(null),a=s[0],c=s[1],d=(0,u.useRef)(null),v=(0,u.useMemo)((function(){var t,e;return null==a||null===(t=a.target)||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.loadingStyle}),[a]);function p(){var t,e;null==a||null===(t=a.target)||void 0===t||null===(e=t.classList)||void 0===e||e.remove(x().loading),c(null)}function f(){p(),o.current=null,(null==l?void 0:l.current)&&l.current.render(null)}return(0,g.jsx)(r.H.Provider,{value:{dismissError:f,dismissTarget:p,renderError:function(t,e){var r,u=(null==i?void 0:i.current)||(i.current=document.getElementById(R));(r=l).current||(r.current=(0,w.createRoot)(u)),f(),o.current=t,l.current.render((0,g.jsx)(M.ThemeProvider,{theme:n,children:(0,g.jsx)(j,{dismissError:f,errorRef:o,retry:e},String(new Date))}))},renderTarget:function(t){var e,n,r,o;c(t),C.i.INLINE===(null==t||null===(e=t.target)||void 0===e||null===(n=e.dataset)||void 0===n?void 0:n.loadingStyle)&&(null==t||null===(r=t.target)||void 0===r||null===(o=r.classList)||void 0===o||o.add(x().loading))}},children:(0,g.jsxs)(g.Fragment,{children:[e,(0,g.jsx)("div",{id:R}),a&&C.i.INLINE!==v&&O.createPortal((0,g.jsxs)("div",{className:h().target,ref:d,style:{height:null!=a&&a.content?"inherit":2,left:a.rect.left,top:a.rect.top+a.rect.height,width:a.rect.width},children:[!a.content&&(0,g.jsx)(y.Z,{}),a.content]}),document.body)]})})},E=n(64524)},63091:function(t,e,n){"use strict";n(82684);var r=n(85059),o=n.n(r),i=n(28598);e.Z=function(t){var e=t.compact,n=t.short,r=t.vertical;return(0,i.jsx)("div",{className:[o().divider,n&&!r?o().short:"",n||r?"":o().full,r?o().vertical:"",e?o().compact:""].join(" ")})}},85059:function(t){t.exports={divider:"Divider_divider__yfOqj",short:"Divider_short__otA5r",full:"Divider_full__gbb3x",vertical:"Divider_vertical__pKs_7",compact:"Divider_compact__VW40b","dashed-divider":"Divider_dashed-divider__2dffa"}},36801:function(t){t.exports={errorManager:"ErrorManager_errorManager__Ndvfo",right:"ErrorManager_right__u08uU",left:"ErrorManager_left__CWjDX",topRight:"ErrorManager_topRight__hhz2A",topLeft:"ErrorManager_topLeft__dpmcp",bottomLeft:"ErrorManager_bottomLeft__X4zMM",bottomRight:"ErrorManager_bottomRight__YPZXk",errorContainer:"ErrorManager_errorContainer__OEePD",target:"ErrorManager_target__nc6_5"}},78379:function(t,e,n){"use strict";n.d(e,{D:function(){return d}});var r=n(82684),o=n(91204),i=n(42034),u=n(5285),l=n(59714),s=class extends u.l{#t;#e=void 0;#n;#r;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,l.VS)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,l.Ym)(e.mutationKey)!==(0,l.Ym)(this.options.mutationKey)?this.reset():"pending"===this.#n?.state.status&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#o(),this.#i(t)}getCurrentResult(){return this.#e}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#o(),this.#i()}mutate(t,e){return this.#r=e,this.#n?.removeObserver(this),this.#n=this.#t.getMutationCache().build(this.#t,this.options),this.#n.addObserver(this),this.#n.execute(t)}#o(){const t=this.#n?.state??(0,o.R)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#i(t){i.V.batch((()=>{if(this.#r&&this.hasListeners()){const e=this.#e.variables,n=this.#e.context;"success"===t?.type?(this.#r.onSuccess?.(t.data,e,n),this.#r.onSettled?.(t.data,null,e,n)):"error"===t?.type&&(this.#r.onError?.(t.error,e,n),this.#r.onSettled?.(void 0,t.error,e,n))}this.listeners.forEach((t=>{t(this.#e)}))}))}},a=n(30210);function c(){}function d(t,e){const n=(0,a.NL)(e),[o]=r.useState((()=>new s(n,t)));r.useEffect((()=>{o.setOptions(t)}),[o,t]);const u=r.useSyncExternalStore(r.useCallback((t=>o.subscribe(i.V.batchCalls(t))),[o]),(()=>o.getCurrentResult()),(()=>o.getCurrentResult())),l=r.useCallback(((t,e)=>{o.mutate(t,e).catch(c)}),[o]);if(u.error&&(d=o.options.throwOnError,v=[u.error],"function"==typeof d?d(...v):d))throw u.error;var d,v;return{...u,mutate:l,mutateAsync:u.mutate}}},73457:function(t,e,n){"use strict";n.d(e,{o:function(){return u}});var r=n(47348);class o{constructor(){this.componentControls=new Set}subscribe(t){return this.componentControls.add(t),()=>this.componentControls.delete(t)}start(t,e){this.componentControls.forEach((n=>{n.start(t.nativeEvent||t,e)}))}}const i=()=>new o;function u(){return(0,r.h)(i)}}}]);