(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1975],{93808:function(n,e,r){"use strict";r.d(e,{Z:function(){return j}});var u=r(77837),t=r(26304),o=r(62243),l=r(29385),i=r(80022),c=r(13692),s=r(93189),a=r(15544),d=r(82394),v=r(38860),f=r.n(v),p=r(82684),b=r(56663),m=r.n(b),h=r(40761),g=r(34661),O=r(36105),E=r(50178),k=r(69419),y=r(28598),w=["auth"];function P(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);e&&(u=u.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.push.apply(r,u)}return r}function R(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){(0,d.Z)(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function N(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,u=(0,a.Z)(n);if(e){var t=(0,a.Z)(this).constructor;r=Reflect.construct(u,arguments,t)}else r=u.apply(this,arguments);return(0,s.Z)(this,r)}}function j(n){return function(e){(0,c.Z)(a,e);var r,s=N(a);function a(){var n;(0,o.Z)(this,a);for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return n=s.call.apply(s,[this].concat(r)),(0,d.Z)((0,i.Z)(n),"state",{auth:new h.Z(n.props.token)}),n}return(0,l.Z)(a,[{key:"componentDidMount",value:function(){this.setState({auth:new h.Z(this.props.token)})}},{key:"render",value:function(){var e=this.props,r=(e.auth,(0,t.Z)(e,w));return(0,y.jsx)(n,R({auth:this.state.auth},r))}}],[{key:"getInitialProps",value:(r=(0,u.Z)(f().mark((function e(r){var u,t,o,l,i,c,s,a,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=m()(r),t=(0,E.ex)(r),o=t.id,l=u[g.Mv],i=u[O.qt],c=new h.Z(l),s=R(R({},r),{},{auth:c,currentGroupId:o,theme:i}),(0,E.YB)(r)&&c.isExpired&&(console.log("OAuth token has expired."),a=R(R({},r.query),{},{redirect_url:r.asPath}),(0,k.nL)("/sign-in?".concat((0,k.uM)(a)),r.res)),!n.getInitialProps){e.next=12;break}return e.next=10,n.getInitialProps(s);case 10:return d=e.sent,e.abrupt("return",R(R({},d),{},{auth:c,currentGroupId:o,theme:i}));case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)}))),function(n){return r.apply(this,arguments)})}]),a}(p.Component)}},47822:function(n,e,r){"use strict";r.d(e,{C:function(){return v}});var u=r(75582),t=r(82394),o=r(21831),l=r(44425),i=r(32080),c=r(86735),s=r(42122);function a(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);e&&(u=u.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.push.apply(r,u)}return r}function d(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){(0,t.Z)(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function v(n,e){for(var r,t,a=[],v=[],p=function(){var e,r=[],u=[],t=0===a.length&&0===v.length,l=t?null!==(e=null==n?void 0:n.pipelines)&&void 0!==e?e:[]:v.shift();null==l||l.forEach((function(e){var l,i,s,a={};null==e||null===(l=e.blocks)||void 0===l||l.forEach((function(n){var e=n.downstream_blocks,r=n.upstream_blocks,u=n.uuid;a[u]={dn:[],up:[]},null==e||e.forEach((function(n){a[u].dn.push(n),a[n]||(a[n]={dn:[],up:[]}),a[n].up.push(u)})),null==r||r.forEach((function(n){a[u].up.push(n),a[n]||(a[n]={dn:[],up:[]}),a[n].dn.push(u)}))}));var v=null!==(i=null==e?void 0:e.pipelines)&&void 0!==i?i:[];(null==v?void 0:v.length)>=1&&v.forEach((function(n){var u,t,l=a[n.uuid]||{},i=l.dn,s=l.up;r.push(d(d({},n),{},{downstream_blocks:(0,c.Nb)(i),groups:(0,c.Nb)([].concat((0,o.Z)(null!==(u=n.groups)&&void 0!==u?u:[]),(0,o.Z)(null!==(t=e.groups)&&void 0!==t?t:[]))).filter((function(e){return e!==n.uuid})),upstream_blocks:(0,c.Nb)(s)}))})),u.push(d(d({},e),{},{groups:(0,c.Nb)([].concat((0,o.Z)(null!==(s=e.groups)&&void 0!==s?s:[]),(0,o.Z)(t?[n.uuid]:[]))).filter((function(n){return n!==e.uuid}))}))})),(null==r?void 0:r.length)>=1&&v.push((0,c.VF)(r)),a.push(u)};v.length>=1||n&&0===a.length;)p();var b=null!==(r=a[a.length-1])&&void 0!==r?r:[],m=(0,c.HK)(b,(function(n){return n.uuid})),h=[];null==b||b.forEach((function(n){var e,r=n.downstream_blocks,u=n.upstream_blocks,t=null!==(e=null==n?void 0:n.blocks)&&void 0!==e?e:[];(null==t?void 0:t.length)>=1&&t.forEach((function(e){(null==e||!e.downstream_blocks)&&(null==r?void 0:r.length)>=1?r.forEach((function(n){var r,u=m[n];null==u||null===(r=u.blocks)||void 0===r||r.forEach((function(n){null!=n&&n.upstream_blocks||(e.downstream_blocks||(e.downstream_blocks=[]),e.downstream_blocks=(0,c.Nb)([].concat((0,o.Z)(e.downstream_blocks),[n.uuid])),n.upstream_blocks||(n.upstream_blocks=[]),n.upstream_blocks=(0,c.Nb)([].concat((0,o.Z)(n.upstream_blocks),[e.uuid])))}))})):null!=e&&e.upstream_blocks||u.forEach((function(n){var r,u=m[n];null==u||null===(r=u.blocks)||void 0===r||r.forEach((function(n){null!=n&&n.downstream_blocks||(e.upstream_blocks||(e.upstream_blocks=[]),e.upstream_blocks=(0,c.Nb)([].concat((0,o.Z)(e.upstream_blocks),[n.uuid])),n.downstream_blocks||(n.downstream_blocks=[]),n.downstream_blocks=(0,c.Nb)([].concat((0,o.Z)(n.downstream_blocks),[e.uuid])))}))})),h.push(d(d({},e),{},{groups:[n.uuid]}))}))})),a.push(h);var g={},O=[];a.forEach((function(n){var e=[];n.forEach((function(n){var r=(0,s.GL)(n,["configuration","description","downstream_blocks","groups","name","upstream_blocks","uuid"]);e.push(r),g[r.uuid]=r})),O.push(e)}));var E=[];O.reverse().forEach((function(n,e){var r=[];n.forEach((function(n){var u=d({},n);if(e>=1){var t,o=E[0];u.children=null==o||null===(t=o.filter)||void 0===t?void 0:t.call(o,(function(n){var e;return null==n||null===(e=n.groups)||void 0===e?void 0:e.includes(u.uuid)}))}r.push(u)})),E.unshift(r)}));var k,y,w=(0,c.HK)(E.flatMap((function(n){return null==n?void 0:n.map((function(n){return d(d({},g[n.uuid]),n)}))})),(function(n){return n.uuid})),P=(0,c.HK)(f(e),(function(n){return n.uuid})),R=(0,i.sV)(e,P,{addPipelineToBlocks:!0,excludeBlockTypes:[l.tf.PIPELINE]}),N=(k=Object.values(R),y={},null==k||k.forEach((function(n){var e;null==n||null===(e=n.groups)||void 0===e||e.forEach((function(e){var r;y[r=e]||(y[r]={}),y[e][n.uuid]=n}))})),y);return null===(t=Object.entries(null!=R?R:{}))||void 0===t||t.forEach((function(n){var e,r=(0,u.Z)(n,2),t=r[0],l=r[1];null==l||null===(e=l.groups)||void 0===e||e.forEach((function(n){var e,r,u=w[n];(null!==(e=null==u?void 0:u.downstream_blocks)&&void 0!==e?e:[]).forEach((function(n){var e=N[n];l.downstream_blocks||(l.downstream_blocks=[]),l.downstream_blocks=(0,c.Nb)([].concat((0,o.Z)(l.downstream_blocks),(0,o.Z)(e?Object.keys(e):[])))})),(null!==(r=null==u?void 0:u.upstream_blocks)&&void 0!==r?r:[]).forEach((function(n){var e=N[n];l.upstream_blocks||(l.upstream_blocks=[]),l.upstream_blocks=(0,c.Nb)([].concat((0,o.Z)(l.upstream_blocks),(0,o.Z)(e?Object.keys(e):[])))})),null!=l&&l.pipeline&&(l.pipeline=(0,s.gR)(l.pipeline,["blocks","pipelines"])),R[t]=l}))})),{blockMapping:R,blocksByGroup:N,groupMapping:w,groupsByLevel:E}}function f(n){var e,r=[];return null==n||null===(e=n.pipelines)||void 0===e||e.forEach((function(n){r.push(n),r.push.apply(r,(0,o.Z)(f(n)))})),r}},27441:function(n,e,r){"use strict";r.d(e,{J:function(){return o},d:function(){return t}});var u=r(69419);function t(n,e,r){var t,o,l=(0,u.$o)(n,"/v2/pipelines/[uuid]/[...slug]").slug,i=(null===(t=Array.isArray(l)?l:[l])||void 0===t||null===(o=t.map((function(n){return(0,u.Uu)(n)})))||void 0===o?void 0:o.filter((function(n){return n!==(null==e?void 0:e.uuid)}))).reduce((function(n,e,u){var t,o=null==r||null===(t=r[u])||void 0===t?void 0:t.find((function(n){return n.uuid===e}));return n.concat(o)}),[]),c=i.findIndex((function(n){return!(null!=n&&n)}));return c>=0&&i.splice(c),i}function o(n,e){for(var r,t,o=[n],l=null!==(r=null===(t=o[0])||void 0===t?void 0:t.groups)&&void 0!==r?r:[];l.length>0;){var i,c,s=null===(i=l.map((function(n){return null==e?void 0:e[n]})))||void 0===i?void 0:i[0];if(s)o.unshift(s),l=null!==(c=null==s?void 0:s.groups)&&void 0!==c?c:[];else l=[]}var a=o.findIndex((function(n){return!(null!=n&&n)}));return a>=0&&o.splice(a),o.filter((function(n){return n.uuid})).map((function(n){return(0,u.wL)(n.uuid)}))}},20256:function(n,e,r){"use strict";r.d(e,{W:function(){return o},x:function(){return t}});var u=r(10360);function t(n){return n&&(null==n||n.close()),u.Wk.CLOSED}function o(n){var e,r,t,o,l,i,c,s=null==n||null===(e=n.result)||void 0===e?void 0:e.status,a=null==n||null===(r=n.result)||void 0===r?void 0:r.type;return null!==(null!==(t=null!==(o=null==n?void 0:n.error)&&void 0!==o?o:null==n||null===(l=n.result)||void 0===l?void 0:l.error)&&void 0!==t?t:null==n||null===(i=n.result)||void 0===i||null===(c=i.process)||void 0===c?void 0:c.exitcode)||[u.YI.ERROR,u.YI.FAILURE,u.YI.INTERRUPTED].includes(s)||u.YI.READY===s&&a===u.XM.STATUS}},10360:function(n,e,r){"use strict";r.d(e,{Vb:function(){return o},Wk:function(){return d},XM:function(){return i},YI:function(){return s},n2:function(){return v},nR:function(){return l}});var u,t,o,l,i,c,s,a=r(82394);!function(n){n.INTERRUPT="interrupt",n.RESTART="restart",n.TERMINATE="terminate"}(o||(o={})),function(n){n[n.CONNECTING=0]="CONNECTING",n[n.OPEN=1]="OPEN",n[n.CLOSED=2]="CLOSED"}(l||(l={})),function(n){n.DATA="data",n.OUTPUT="output",n.STATUS="status",n.STDOUT="stdout"}(i||(i={})),function(n){n.EXECUTION="execution",n.EXECUTION_STATUS="execution_status",n.TASK="task",n.TASK_STATUS="task_status"}(c||(c={})),function(n){n.CANCELLED="cancelled",n.ERROR="error",n.FAILURE="failure",n.INIT="init",n.INTERRUPTED="interrupted",n.READY="ready",n.RESTARTED="restarted",n.RUNNING="running",n.SUCCESS="success",n.TERMINATED="terminated"}(s||(s={}));var d,v=(u={},(0,a.Z)(u,s.CANCELLED,"cancelling"),(0,a.Z)(u,s.INIT,"initializing"),(0,a.Z)(u,s.INTERRUPTED,"interrupting"),(0,a.Z)(u,s.RESTARTED,"restarting"),(0,a.Z)(u,s.SUCCESS,"succeeded"),(0,a.Z)(u,s.TERMINATED,"terminating"),u);!function(n){n.CLOSED="closed",n.CONNECTING="connecting",n.OPEN="open",n.RECONNECTING="reconnecting"}(d||(d={}));t={},(0,a.Z)(t,l.CLOSED,d.CLOSED),(0,a.Z)(t,l.CONNECTING,d.CONNECTING),(0,a.Z)(t,l.OPEN,d.OPEN)},6593:function(n,e,r){"use strict";r.r(e),r.d(e,{default:function(){return L}});var u=r(77837),t=r(38860),o=r.n(t),l=r(10360),i=r(34376),c=r(93808),s=r(82684),a=r(51774),d=r.n(a),v=r(82394),f=r(20256),p=r(4383),b=r(46042),m=r(95924),h=r(42122);function g(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);e&&(u=u.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.push.apply(r,u)}return r}function O(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){(0,v.Z)(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}var E=1e3;function k(n){for(var e=["[CodeExecutionManager] ".concat(n)],r=arguments.length,u=new Array(r>1?r-1:0),t=1;t<r;t++)u[t-1]=arguments[t];Array.isArray(u)&&u.length>0&&e.push.apply(e,u)}function y(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoReconnect:!0,maxConnectionAttempts:10,throttle:1e3},e=n.autoReconnect,r=n.maxConnectionAttempts,u=(n.throttle,n.onError,n.onMessage),t=(n.onSuccess,(0,s.useRef)({})),o=(0,s.useRef)({}),i=(0,s.useRef)(null),c=(0,s.useRef)(null),a=(0,s.useRef)(null),d=(0,s.useRef)({}),v=((0,s.useRef)([]),(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)({})),g=(0,s.useRef)([]),y=(0,b.Tu)({resource:"code_executions"},{handlers:{create:{onError:function(n,e){k("mutants.onError",[n,e]),g.current.push(n)},onSuccess:function(n,e){k("mutants.create.onSuccess",[n,e])}}}});function w(n){var e,r,t,o,l,i,s,a,d,f,p,b,m=function(n){var e,r,u,t,o,l=JSON.parse(null!==(e=n.data)&&void 0!==e?e:"{}");return{channel:null==l?void 0:l.uuid,source:null==l||null===(r=l.result)||void 0===r||null===(u=r.process)||void 0===u?void 0:u.source,stream:null==l||null===(t=l.result)||void 0===t||null===(o=t.process)||void 0===o?void 0:o.stream}}(n),h=m.channel,g=m.stream,O=JSON.parse(n.data);(null==c?void 0:c.current)&&(null==c||null===(e=c.current)||void 0===e||e.call(c,n)),u&&(null==u||u(O)),null==v||null===(r=v.current)||void 0===r||null===(t=r[h])||void 0===t||null===(o=t.streams[g])||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.onMessage)||void 0===i||i.call(l,O);var E=null!==(s=null==v||null===(a=v.current)||void 0===a||null===(d=a[h])||void 0===d||null===(f=d.streams[g])||void 0===f?void 0:f.consumers)&&void 0!==s?s:{};k("useEventStreams.onmessage",n,O,null==v||null===(p=v.current)||void 0===p?void 0:p[h],Object.keys(null!=E?E:{})),null===(b=Object.values(null!=E?E:{}))||void 0===b||b.forEach((function(n){var e,r=n.options;null==r||null===(e=r.onMessage)||void 0===e||e.call(r,O)}))}function P(n,e){var r=R(n);if(r){var u;if(l.nR.OPEN===r.readyState)return clearTimeout(null==o||null===(u=o.current)||void 0===u?void 0:u[n]),r;var t,i,c,s,a,f,b=Object.keys(null!==(t=null===(i=v.current[n])||void 0===i?void 0:i.streams)&&void 0!==t?t:{}).length,m=Object.keys(null!==(c=null===(s=v.current[n])||void 0===s||null===(a=s.streams)||void 0===a||null===(f=a[e])||void 0===f?void 0:f.consumers)&&void 0!==c?c:{}).length;k("Closing inactive connection for channel ".concat(n," with ").concat(b," ")+"streams and ".concat(m," consumers")),j(n),r=null}if(r=R(n))return r;k("Connecting to server..."),function(n){var e=new EventSource((0,p.if)(n));N(e),d.current[n]=e}(n),r=R(n)}function R(n){var e=d.current[n];return N(e),d.current[n]=e,e}function N(n){null!=n&&n&&(n.onerror=function(n){!function(n){var e;(null==i?void 0:i.current)&&(null==i||null===(e=i.current)||void 0===e||e.call(i,n)),k("useEventStreams.onerror",n)}(n)},n.onmessage=function(n){w(n)},n.onopen=function(n){!function(n){var e,r=n.target;(null==a?void 0:a.current)&&(null==a||null===(e=a.current)||void 0===e||e.call(a,n)),k("useEventStreams.onopen",r)}(n)})}function j(n){n in v.current&&delete v.current[n];var e=R(n);e&&((0,f.x)(e),delete d.current[n])}function T(){var n,e;return null===(n=Object.values(null!==(e=null==d?void 0:d.current)&&void 0!==e?e:[]))||void 0===n?void 0:n.filter((function(n){return null!=n&&n&&(null==n?void 0:n.readyState)===l.nR.OPEN}))}return{teardown:function(){Object.keys(null==d?void 0:d.current).length>0&&(k("Tearing down..."),Object.keys(null==d?void 0:d.current).forEach((function(n){j(n),k("Closed event stream connection for ".concat(n))})))},useExecuteCode:function(n,e){return{executeCode:function(r,u,t){var o,l=(0,m.I)();return y.create.mutate({onError:function(n){var e;(null==t?void 0:t.onError)&&(null==t||null===(e=t.onError)||void 0===e||e.call(t,n))},onSuccess:function(n){var e;(null==t?void 0:t.onSuccess)&&(null==t||null===(e=t.onSuccess)||void 0===e||e.call(t,n))},payload:O(O({},u),{},{message:r,message_request_uuid:null!==(o=null==u?void 0:u.message_request_uuid)&&void 0!==o?o:l,stream:e,timestamp:Number(new Date),uuid:n})}),l}}},useRegistration:function(n,u){return{subscribe:function(c,s){var f,p,b,m,g,y,w,N,_,S,I,C,A,Z=Object.keys(null!==(f=null==v||null===(p=v.current)||void 0===p||null===(b=p[n])||void 0===b||null===(m=b.streams)||void 0===m||null===(g=m[u])||void 0===g?void 0:g.consumers)&&void 0!==f?f:{});k("useRegistration.subscribe.before",n,u,c,s,Z),(0,h.mv)(null!==(y=null==v?void 0:v.current)&&void 0!==y?y:{},[n,"options"].join("."),s),(0,h.mv)(null!==(w=null==v?void 0:v.current)&&void 0!==w?w:{},[n,"streams",u,"options"].join("."),s),(0,h.mv)(null!==(N=null==v?void 0:v.current)&&void 0!==N?N:{},[n,"streams",u,"consumers",c,"options"].join("."),s),function(n,u){var c;n in d.current&&u in v.current[n].streams||(T().length>=E?k("Max open connections reached: ".concat(null===(c=T())||void 0===c?void 0:c.length," of ").concat(E)):function c(s){!function(d){var v,f=O(O({},s),d),p=f.onError,b=f.onOpen;a.current=function(n){k("useEventStreams.onopen",m,n);var e=l.Wk.OPEN;b&&(null==b||b(e,n))},i.current=function(l){var i,c;if(console.error("EventSource for channel ".concat(n," and stream ").concat(u," failed with error"),l),j(n),p&&(null==p||p(l)),e){(i=t.current)[n]||(i[n]=r),t.current[n]-=1;var s=t.current[n];s<=0||(clearTimeout(null==o||null===(c=o.current)||void 0===c?void 0:c[n]),o.current[n]=setTimeout((function(){k("Reconnecting to server with ".concat(s," attempt(s) remaining...")),P(n,u)}),1e3*(r-s+1)))}},t.current[n]=null!==(v=t.current[n])&&void 0!==v?v:r,P(n,u);var m=R(n);m?R(n):c()}({onError:function(n){var e;null!=s&&s.onError&&(null==s||null===(e=s.onError)||void 0===e||e.call(s,n))},onOpen:function(n,e){var r;null!=s&&s.onOpen&&(null==s||null===(r=s.onOpen)||void 0===r||r.call(s,n,e))}})}())}(n,u,O(O({},s),{},{onOpen:function(n,e){var r;null!=s&&s.onOpen&&(null==s||null===(r=s.onOpen)||void 0===r||r.call(s,n,e))}}));var D=Object.keys(null!==(_=null==v||null===(S=v.current)||void 0===S||null===(I=S[n])||void 0===I||null===(C=I.streams)||void 0===C||null===(A=C[u])||void 0===A?void 0:A.consumers)&&void 0!==_?_:{});k("useRegistration.subscribe.after",n,u,c,s,D)},unsubscribe:function(e){var r,t,o,l,i;null==v||(null===(r=v.current)||void 0===r||(null===(t=r[n])||void 0===t||(null===(o=t.streams)||void 0===o||(null===(l=o[u])||void 0===l||(null===(i=l.consumers)||void 0===i||delete i[e])))))}}}}}var w=r(28862),P=r(43406),R=r(84104),N=r(78151),j=r(69419),T=r(27441),_=r(47822),S=r(81728);function I(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);e&&(u=u.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.push.apply(r,u)}return r}function C(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?I(Object(r),!0).forEach((function(e){(0,v.Z)(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function A(n,e,r,u,t){for(var o,l,i=(null!=t?t:{}).changeRoute,c={},s=u;s;){var a;c[s.uuid]=s,s=null===(a=s)||void 0===a?void 0:a.parent}var d=C(C({},n),{},{index:r,label:null!==(o=n.name)&&void 0!==o?o:n.uuid,level:e,onClick:function(e){var r,u=(0,T.J)(n,c),t=(null!==(r=null==i?void 0:i.query)&&void 0!==r?r:{}).uuid;i({route:{href:"/v2/pipelines/".concat(t,"/").concat(P.q6.RAG,"/").concat(u.join("/")),query:{slug:[(0,j.wL)(P.q6.RAG)].concat(u).filter(Boolean),uuid:t},pathname:"/v2/pipelines/[uuid]/[...slug]"}},{transitionOnly:!0})},parent:u}),v=null==n||null===(l=n.children)||void 0===l?void 0:l.map((function(n,r){return A(n,e+1,r,(0,h.p$)(d),t)}));return C(C({},d),{},{items:v})}function Z(n){var e=n.changeRoute,r=n.framework,u=[];return(0,_.C)(r).groupsByLevel.forEach((function(n,t){var o=0===t?"".concat(r.name," pipelines"):1===t?"Stages":"Operations",l={Icon:0===t?w.vd:1===t?w.X53:w.pPy,label:o,uuid:(0,S.kE)(o)},i=n.map((function(n,r){return A(n,t,r,(0,h.p$)(l),{changeRoute:e})}));u.push(C(C({},l),{},{items:i}))})),u}var D=r(28598),x=d()((function(){return r.e(2510).then(r.bind(r,12510))}),{ssr:!1,loadableGenerated:{webpack:function(){return[12510]}}});function U(n){var e=n.slug,t=n.uuid,c=((0,i.useRouter)(),(0,s.useContext)(R.VY)),a=c.changeRoute,d=c.header,v=c.page,f=(0,s.useState)(null),p=f[0],m=f[1],h=(0,s.useMemo)((function(){var n=null!=e?e:[];return Array.isArray(n)||(n=[n]),n}),[e])[0],g=(0,b.Tu)({id:t,idParent:h,resource:"pipelines",resourceParent:"execution_frameworks"},{automaticAbort:!1,handlers:{detail:{onSuccess:function(n){var e,r,u,o,l,i,c,s;null==d||null===(e=d.setHeader)||void 0===e||e.call(d,{intraAppNavItems:Z({changeRoute:a,framework:null==n?void 0:n.framework}),buildInterAppNavItems:function(){return[{Icon:w.nbx,route:{pathname:"/pipelines"},uuid:"pipelines"},{Icon:w.IbL,route:{pathname:"/v2/pipelines/[uuid]/[...slug]",query:{slug:[null==n?void 0:n.framework.uuid],uuid:t}},uuid:"frameworks"}]},cacheKey:[n.uuid,null==n?void 0:n.framework.uuid].join(":"),navTag:null!==(r=null==n||null===(u=n.framework)||void 0===u?void 0:u.name)&&void 0!==r?r:null==n||null===(o=n.framework)||void 0===o||null===(l=o.uuid)||void 0===l?void 0:l.toUpperCase(),selectedNavItem:"frameworks",title:null!==(i=n.name)&&void 0!==i?i:n.uuid,version:1}),null==v||null===(c=v.setPage)||void 0===c||c.call(v,{title:null!==(s=P.qN[null==n?void 0:n.framework.uuid])&&void 0!==s?s:null==n?void 0:n.framework.uuid}),m(n)}}}}),O=(0,s.useRef)(0),E=(0,s.useRef)(null),k=(0,s.useRef)(null),N=(0,s.useRef)(null),j=(0,s.useRef)(null),T=y({onMessage:function(n){var e,r,u,t,o;j.current||(j.current=v.title);var i,c=null==n||null===(e=n.result)||void 0===e?void 0:e.status;if(l.YI.INIT===c)return E.current=null,k.current=null,N.current=null,void((null==v?void 0:v.setPage)&&(null==v||null===(i=v.setPage)||void 0===i||i.call(v,{busy:!1,error:!1,notice:!1,success:!1,title:j.current})));var s,a=null==n||null===(r=n.result)||void 0===r?void 0:r.type,d=null==n||null===(u=n.result)||void 0===u||null===(t=u.process)||void 0===t?void 0:t.message_request_uuid;null!=n&&null!==(o=n.result)&&void 0!==o&&o.error&&(E.current=null==n||null===(s=n.result)||void 0===s?void 0:s.error);var f=l.YI.ERROR===c||l.YI.FAILURE===c||E.current,p=l.YI.SUCCESS===c&&[l.XM.DATA,l.XM.OUTPUT].includes(a)&&(!N.current||!N.current.error||k.current!==d),b=[l.YI.CANCELLED,l.YI.INTERRUPTED,l.YI.TERMINATED].includes(c)&&l.XM.STATUS===a,m=l.YI.RUNNING===c&&l.XM.STATUS===a&&(!N.current||!N.current.error&&!N.current.success||k.current!==d);if(f||p||m||b){var h,g={busy:m,error:Boolean(f),notice:b,success:p,title:void 0};E.current&&(g.title=E.current.exception),(null==v?void 0:v.setPage)&&(null==v||null===(h=v.setPage)||void 0===h||h.call(v,g)),N.current=g}k.current=d}}),_=T.teardown,S=T.useExecuteCode,I=T.useRegistration;return(0,s.useEffect)((function(){if(0===O.current&&!p){g.detail.mutate();var n=function(){var n=(0,u.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([r.e(4084),r.e(7563),r.e(3528),r.e(3450)]).then(r.bind(r,3528)).then((function(n){n.Manager.loadServices(),O.current=2}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}var e=function(){var n=(0,u.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([r.e(4084),r.e(7563),r.e(3528),r.e(3450)]).then(r.bind(r,3528)).then((function(n){n.Manager.dispose()}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return function(){e(),_()}}),[p]),(0,D.jsx)(x,{framework:null==p?void 0:p.framework,pipeline:p,useExecuteCode:S,useRegistration:I})}U.getInitialProps=function(){var n=(0,u.Z)(o().mark((function n(e){var r,u,t,l;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=null!==(r=e.query)&&void 0!==r?r:{slug:[],uuid:null},t=u.slug,l=u.uuid,n.abrupt("return",{slug:t,uuid:l,version:N.A.V2});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();var L=(0,c.Z)(U)},78151:function(n,e,r){"use strict";var u;r.d(e,{A:function(){return u}}),function(n){n.V2="v2"}(u||(u={}))},32080:function(n,e,r){"use strict";r.d(e,{nG:function(){return a},sV:function(){return d}});var u=r(75582),t=r(21831),o=r(82394),l=r(44425),i=r(61599);function c(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);e&&(u=u.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.push.apply(r,u)}return r}function s(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){(0,o.Z)(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function a(n){var e,r={};return null==n||null===(e=n.blocks)||void 0===e||e.forEach((function(n){var e=n.catalog,u=n.type,t=n.uuid;if(l.tf.DATA_LOADER===u&&null!=e&&e.streams){var o,c=null==e||null===(o=e.streams)||void 0===o?void 0:o.filter((function(n){var e=n.replication_method;return i._B.INCREMENTAL===e}));(null==c?void 0:c.length)>=1&&(t in r||(r[t]={block:n,streams:[]}),r[t].streams.push(c))}})),r}function d(n,e,r,o){var i,c=r||{},a=c.addBlockDependenciesToNestedPipelineBlocks,v=void 0!==a&&a,f=c.addPipelineGroupsToBlocks,p=void 0!==f&&f,b=c.addPipelineToBlocks,m=void 0!==b&&b,h=c.excludeBlockTypes,g=o||{},O=g.downstreamBlocks,E=g.upstreamBlocks,k={};return null==n||null===(i=n.blocks)||void 0===i||i.forEach((function(o){var i,c,a=s({},o);(!O||null!=a&&a.downstream_blocks?!E||null!=a&&a.upstream_blocks||(a.upstream_blocks=E):a.downstream_blocks=O,m&&(a.pipeline=n),p)&&(a.groups=[].concat((0,t.Z)(null!==(i=n.groups)&&void 0!==i?i:[]),(0,t.Z)(null!==(c=a.groups)&&void 0!==c?c:[])));if(l.tf.PIPELINE===a.type){var f,b=e[a.uuid],g={};if(v)null===(f=[["downstreamBlocks",a.downstream_blocks],["upstreamBlocks",a.upstream_blocks]])||void 0===f||f.forEach((function(n){var r=(0,u.Z)(n,2),t=r[0],o=r[1];null==o||o.forEach((function(n){if(n in e){var r,u=e[n];g[t]||(g[t]=[]),null==u||null===(r=u.blocks)||void 0===r||r.forEach((function(n){var e,r;("downstreamBlocks"!==t||null!=n&&null!==(e=n.upstream_blocks)&&void 0!==e&&e.length)&&("upstreamBlocks"!==t||null!=n&&null!==(r=n.downstream_blocks)&&void 0!==r&&r.length)||g[t].push(null==n?void 0:n.uuid)}))}else g[t]||(g[t]=[]),g[t].push(n)}))}));k=s(s({},k),d(b,e,r,g))}h&&h.includes(a.type)||(k[a.uuid]=a)})),k}},91330:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/v2/pipelines/[uuid]/[...slug]",function(){return r(6593)}])}},function(n){n.O(0,[9635,4500,5070,8082,2339,5317,9774,2888,179],(function(){return e=91330,n(n.s=e);var e}));var e=n.O();_N_E=e}]);