(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1221],{8666:function(e,n,i){"use strict";var u;i.d(n,{b:function(){return u}}),function(e){e.BLOCK="block",e.PIPELINE="pipeline"}(u||(u={}))},55620:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return Re}});var u=i(77837),t=i(75582),o=i(21831),r=i(82394),l=i(38860),c=i.n(l),s=i(12691),a=i.n(s),d=i(69419),p=i(82684),f=i(83455),v=i(34376),h=i(43406),m=i(52749),b=i(60523),g=i(71180),_=i(90299),Z=i(31882),C=i(76111),j=i(94629),x=i(97618),k=i(55485),w=i(68562),P=i(65956),I=i(38276),T=i(30160),y=i(35576),S=i(17488),O=i(28598);var E=function(e){var n=e.description,i=e.isLoading,u=e.maxWidth,t=e.minWidth,o=e.noEmptyValue,r=e.onClose,l=e.onSave,c=e.textArea,s=e.title,a=e.value,d=(0,p.useRef)(null),f=(0,p.useState)(a),v=f[0],h=f[1],m=c?y.Z:S.Z;return(0,p.useEffect)((function(){var e;null==d||null===(e=d.current)||void 0===e||e.focus()}),[]),(0,O.jsxs)(P.Z,{maxWidth:u,minWidth:t,children:[(0,O.jsx)(T.ZP,{bold:!0,children:s}),(0,O.jsx)(I.Z,{mt:1,children:(0,O.jsx)(m,{monospace:!0,onChange:function(e){return h(e.target.value)},ref:d,rows:c?7:null,value:v})}),n&&(0,O.jsx)(I.Z,{mt:2,children:(0,O.jsx)(T.ZP,{muted:!0,small:!0,children:n})}),(0,O.jsx)(I.Z,{mt:3,children:(0,O.jsxs)(k.ZP,{children:[(0,O.jsx)(w.ZP,{bold:!0,inline:!0,loading:i,onClick:function(){v===a||o&&!v?r():l(v)},outline:!0,primary:!0,uuid:"Inputs/InputModal/SaveInput",children:"Save"}),(0,O.jsx)(I.Z,{ml:1}),(0,O.jsx)(g.ZP,{onClick:r,children:"Cancel"})]})})]})},A=i(48670),D=i(55072),R=i(57653),M=i(55729),G=i(93808),L=i(82359),$=i(44085),U=i(4190),N=i(75499),B=i(48381),H=i(85544),F=i(70026),Y=i(22271),q=i(44897),Q=i(77417),z=i(42631),V=i(44425),W=i(72473),K=i(23780),X=i(8666),J=i(46684),ee=i(53808),ne="pipeline_list_filters",ie="pipeline_list_group_bys",ue="pipeline_list_sort_column_index",te="pipeline_list_sort_direction",oe="pipeline_list_selected_tab_uuid";function re(e){return(0,ee.t8)(ne,e),e}function le(e){return(0,ee.t8)(ie,e),e}var ce=i(11498),se=i(32929),ae=i(44898),de=i(70515),pe=i(30229),fe=i(81655),ve=i(31608),he=i(81728),me=i(3917),be=i(72619),ge=i(65458),_e=i(15610),Ze=i(42122),Ce=i(95924),je=i(86735),xe=i(70320),ke=i(89538),we=i(44952);function Pe(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);n&&(u=u.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,u)}return i}function Ie(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Pe(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Pe(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Te={Icon:W.Schedule,label:function(){return"Recently viewed"},uuid:"recent"},ye={Icon:W.PipelineV3,label:function(e){return null!=e&&e.count?"All pipelines â€º ".concat((null==e?void 0:e.count)||0):"All pipelines"},uuid:"all"},Se=[ye,Te],Oe="tab",Ee=[R.$1.SEARCH],Ae={borderRadius:"".concat(z.BG,"px"),iconOnly:!0,noBackground:!0,noBorder:!0,outline:!0,padding:"4px"};function De(){var e,n=(0,v.useRouter)(),i=(0,p.useRef)(null),u=(0,p.useRef)(null),l=(0,p.useRef)(null),c=(0,p.useRef)(null),s=(0,Q.Z)(),w=s.fetchProjects,y=s.project,S=(0,p.useState)(null),G=S[0],z=S[1],Pe=(0,p.useState)(null),De=Pe[0],Re=Pe[1],Me=(0,p.useState)(null),Ge=Me[0],Le=Me[1],$e=(0,p.useCallback)((function(e){Le(e),clearTimeout(c.current),c.current=setTimeout((function(){var n;return(0,_e.u)((n={},(0,r.Z)(n,ce.$D.OFFSET,0),(0,r.Z)(n,R.$1.SEARCH,e),n))}),500)}),[Le]),Ue=(0,p.useState)({}),Ne=Ue[0],Be=Ue[1],He=(0,p.useState)(null),Fe=He[0],Ye=He[1],qe=(0,d.iV)(),Qe=(0,p.useMemo)((function(){return Ie({},(0,d.DQ)(qe,[R.$1.SEARCH,R.$1.STATUS,R.$1.TAG,R.$1.TYPE].concat((0,o.Z)(ce.RG))))}),[qe]),ze=(0,p.useMemo)((function(){return null==qe?void 0:qe[Oe]}),[qe]);(0,p.useEffect)((function(){var e;z(null==i||null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect().height)}),[qe,i]);var Ve=(0,p.useMemo)((function(){var e;return(0,xe.hY)(null==y||null===(e=y.features)||void 0===e?void 0:e[L.d.LOCAL_TIMEZONE])}),[null==y?void 0:y.features]),We=(0,p.useMemo)((function(){var e;return null==y||null===(e=y.features)||void 0===e?void 0:e[L.d.OPERATION_HISTORY]}),[y]),Ke=(0,p.useMemo)((function(){return Ve?fe.O$:{}}),[Ve]),Xe=Y.ZP.pipelines.list(Ie(Ie({},Qe),{},{include_schedules:1}),{revalidateOnFocus:!1}),Je=Xe.data,en=Xe.mutate,nn=(0,p.useMemo)((function(){return(null==qe?void 0:qe[R.$1.HISTORY_DAYS])||7}),[qe]),un=Y.ZP.pipelines.list(Ie(Ie({},Qe),{},(e={},(0,r.Z)(e,R.$1.HISTORY_DAYS,(0,he.HW)(nn)?Number(nn):nn),(0,r.Z)(e,"include_schedules",1),e)),{},{pauseFetch:!We||!ze||Te.uuid!==ze}),tn=un.data,on=un.mutate,rn=(0,p.useCallback)((function(e){return e}),[]),ln=(0,p.useMemo)((function(){var e=rn((null==Je?void 0:Je.pipelines)||[]);if(null!=qe&&qe[R.$1.TAG]){var n=qe[R.$1.TAG];e=e.filter((function(e){var i=e.tags;return i.some((function(e){return n.includes(e)}))||0===i.length&&n.includes(R.$1.NO_TAGS)}))}return e}),[Je,rn,qe]),cn=(0,p.useMemo)((function(){return rn((null==tn?void 0:tn.pipelines)||[])}),[tn,rn]),sn=(0,p.useMemo)((function(){return[1,2,3,4,5,6,8,9]}),[]),an=null==qe?void 0:qe[fe.lG.SORT_COL_IDX],dn=null==qe?void 0:qe[fe.lG.SORT_DIRECTION],pn=(0,p.useMemo)((function(){return an?{columnIndex:+an,sortDirection:dn||fe.sh.ASC}:void 0}),[an,dn]),fn=null==qe?void 0:qe[R.$1.GROUP],vn=(0,f.Db)((function(e){var n=e.pipelineUUID,i=e.filesOnly,u=void 0!==i&&i;return Y.ZP.downloads.pipelines.useCreate(n)({download:{ignore_folder_structure:u}})}),{onSuccess:function(e){return(0,be.wD)(e,{callback:function(){var n=e.data.download.token;(0,we.K)(n)},onErrorCallback:function(e,n){return Ye({errors:n,response:e})}})}}),hn=(0,t.Z)(vn,1)[0];(0,p.useEffect)((function(){null!=Qe&&Qe[R.$1.SEARCH]&&null===Ge&&Le(null==Qe?void 0:Qe[R.$1.SEARCH])}),[Qe,Ge,Le]),(0,p.useEffect)((function(){var e,n={};if(!an){var i=(0,ee.U2)(ue,null),u=(0,ee.U2)(te,fe.sh.ASC);null!==i&&(n[fe.lG.SORT_COL_IDX]=i,n[fe.lG.SORT_DIRECTION]=u)}We&&(ze?(0,ee.t8)(oe,ze):n[Oe]=(0,ee.U2)(oe,null==Se||null===(e=Se[0])||void 0===e?void 0:e.uuid));if(fn)le((0,r.Z)({},fn,!0));else{var o,l=(0,ee.U2)(ie,{});l&&Object.entries(l).forEach((function(e){var n=(0,t.Z)(e,2),i=n[0],u=n[1];!o&&u&&(o=i)})),o&&(n[R.$1.GROUP]=o)}if((0,Ze.Qr)(Qe)){var c=(0,r.Z)({},ce.$D.LIMIT,D.Q),s=(0,ee.U2)(ne,{});s&&Object.entries(s).forEach((function(e){var n=(0,t.Z)(e,2),i=n[0],u=n[1];null!=u&&(ce.RG.includes(i)||Ee.includes(i)?c[i]=u:(c[i]=[],Object.entries(u).forEach((function(e){var n=(0,t.Z)(e,2),u=n[0];n[1]&&c[i].push(u)}))))})),(0,Ze.Qr)(c)||(n={},Object.entries(Ie(Ie({},n),c)||{}).forEach((function(e){var i=(0,t.Z)(e,2),u=i[0],o=i[1];null!=o&&(n[u]=o)})))}else{var a={};Object.entries(Qe).forEach((function(e){var n=(0,t.Z)(e,2),i=n[0],u=n[1];a[i]={};var o,r=u;null!=u&&(ce.RG.includes(i)||Ee.includes(i)?a[i]=r:(Array.isArray(r)||(r=[r]),r&&Array.isArray(r)&&(null===(o=r)||void 0===o||o.forEach((function(e){a[i][e]=!0})))))})),re((0,Ze.hB)(a))}(0,Ze.Qr)(n)||(0,_e.u)((0,Ze.hB)(n),{pushHistory:!1})}),[fn,We,Qe,ze,sn,an,dn]),(0,p.useEffect)((function(){(0,be.bB)(Je,Ye)}),[Je]);var mn=function(e){return(0,f.Db)(Y.ZP.pipelines.useCreate(),{onSuccess:function(n){return(0,be.wD)(n,{callback:function(n){var i=n.pipeline.uuid;null==e||e(i)},onErrorCallback:function(e,n){return Ye({errors:n,response:e})}})}})},bn=mn((function(e){return n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(e,"/edit"))})),gn=(0,t.Z)(bn,2),_n=gn[0],Zn=gn[1].isLoading,Cn=mn((function(){null==en||en(),null==on||on()})),jn=(0,t.Z)(Cn,2),xn=jn[0],kn=jn[1].isLoading,wn=(0,f.Db)((function(e){return Y.ZP.pipelines.useUpdate(e.uuid)({pipeline:e})}),{onSuccess:function(e){return(0,be.wD)(e,{callback:function(e){var n=e.pipeline.uuid;Be((function(e){return Ie(Ie({},e),{},(0,r.Z)({},n,!1))})),en(),null==on||on(),null==Un||Un(),Re(null)},onErrorCallback:function(e,n){var i,u=null==e||null===(i=e.url_parameters)||void 0===i?void 0:i.pk;Be((function(e){return Ie(Ie({},e),{},(0,r.Z)({},u,!1))})),Ye({errors:n,response:e})}})}}),Pn=(0,t.Z)(wn,2),In=Pn[0],Tn=Pn[1].isLoading,yn=(0,f.Db)((function(e){return Y.ZP.pipelines.useDelete(e)()}),{onSuccess:function(e){return(0,be.wD)(e,{callback:function(){null==en||en(),null==on||on()},onErrorCallback:function(e,n){return Ye({errors:n,response:e})}})}}),Sn=(0,t.Z)(yn,2),On=Sn[0],En=Sn[1].isLoading,An=(0,ke.dd)((function(e){var n=e.pipelineType;return(0,O.jsx)(C.Z,{onClose:Mn,onSave:function(e){var i=e.name,u=e.description,t=e.tags;_n({pipeline:{description:u,name:i,tags:t,type:n}})},pipelineType:n})}),{},[_n],{background:!0,disableEscape:!0,uuid:"overview/create_pipeline"}),Dn=(0,t.Z)(An,2),Rn=Dn[0],Mn=Dn[1],Gn=(0,ke.dd)((function(e){var n=e.pipeline,i=e.pipelineDescription,u=e.pipelineName;return(0,O.jsx)(E,{isLoading:Tn,minWidth:55*de.iI,noEmptyValue:!!u,onClose:Un,onSave:function(e){var i=n||De;if(i){var t=i.uuid,o={uuid:t};u?o.name=e:o.description=e,Be((function(e){return Ie(Ie({},e),{},(0,r.Z)({},t,!0))})),In(o)}},textArea:!u,title:u?"Rename pipeline":"Edit description for ".concat(null==n?void 0:n.uuid),value:u||i})}),{},[Tn,De],{background:!0,uuid:"rename_pipeline_and_save"}),Ln=(0,t.Z)(Gn,2),$n=Ln[0],Un=Ln[1],Nn=(0,ke.dd)((function(){return(0,O.jsx)(F.Z,{fetchPipelines:en,onCancel:Fn})}),{},[en],{background:!0,uuid:"upload_pipeline"}),Bn=(0,t.Z)(Nn,2),Hn=Bn[0],Fn=Bn[1],Yn=(0,ke.dd)((function(){return(0,O.jsx)(K.BC,{children:(0,O.jsx)(b.Z,{contained:!0,onClickCustomTemplate:function(e){_n({pipeline:{custom_template_uuid:null==e?void 0:e.template_uuid,name:(0,he.Y6)()}}).then((function(){zn()}))},showBreadcrumbs:!0,tabs:[se.A2]})})}),{},[_n],{background:!0,uuid:"browse_templates"}),qn=(0,t.Z)(Yn,2),Qn=qn[0],zn=qn[1],Vn=(0,ke.dd)((function(e){var n=e.cancelButtonText,i=(e.header,e.onCancel),u=e.onSaveSuccess;return(0,O.jsx)(K.BC,{children:(0,O.jsx)(M.Z,{cancelButtonText:n,contained:!0,header:(0,O.jsx)(I.Z,{mb:de.HN,children:(0,O.jsxs)(P.Z,{children:[(0,O.jsx)(T.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate pipelines using AI."}),(0,O.jsx)(I.Z,{mt:1,children:(0,O.jsxs)(T.ZP,{warning:!0,children:["Read"," ",(0,O.jsx)(A.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAIâ€™s documentation"})," ","to get your API key."]})})]})}),onCancel:function(){null==i||i(),Xn()},onSaveSuccess:function(e){w(),Xn(),null==u||u(e)}})})}),{},[w],{background:!0,uuid:"configure_project"}),Wn=(0,t.Z)(Vn,2),Kn=Wn[0],Xn=Wn[1],Jn=(0,ke.dd)((function(){return(0,O.jsx)(K.BC,{children:(0,O.jsx)(m.Z,{createPipeline:_n,isLoading:Zn,onClose:ii})})}),{},[_n,Zn],{background:!0,disableClickOutside:!0,disableCloseButton:!0,uuid:"AI_modal"}),ei=(0,t.Z)(Jn,2),ni=ei[0],ii=ei[1],ui=(0,f.Db)((function(e){return Y.ZP.pipelines.execution_frameworks.useCreate(h.q6.RAG)(e)}),{onSuccess:function(e){return(0,be.wD)(e,{callback:function(e){var i=e.pipeline;n.push("/v2/pipelines/".concat((0,d.wL)(i.uuid),"/").concat((0,d.wL)(i.execution_framework),"/data-preparation"))},onErrorCallback:function(e,n){return Ye({errors:n,response:e})}})}}),ti=(0,t.Z)(ui,1)[0],oi=(0,p.useMemo)((function(){return(0,ge.d)(_n,{createRAG:ti,showAIModal:function(){null!=y&&y.openai_api_key?ni():Kn({onSaveSuccess:function(){ni()}})},showBrowseTemplates:Qn,showCreatePipelineModal:Rn,showImportPipelineModal:Hn})}),[_n,y,ti,ni,Qn,Kn,Rn,Hn]),ri=Y.ZP.tags.list().data,li=(0,p.useMemo)((function(){return(0,je.YC)((null==ri?void 0:ri.tags)||[],(function(e){return e.uuid}))}),[ri]),ci=(0,p.useMemo)((function(){return(0,O.jsx)(H.Z,{addButtonProps:{isLoading:Zn,label:"New",menuItems:oi},deleteRowProps:{confirmationMessage:"This is irreversible and will immediately delete everything associated           with the pipeline, including its blocks, triggers, runs, logs, and history.",isLoading:En,item:"pipeline",onDelete:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null==De?void 0:De.uuid,"?"))&&On(null==De?void 0:De.uuid)}},extraActionButtonProps:{Icon:W.Clone,confirmationDescription:"Cloning the selected pipeline will create a new pipeline with the same           configuration and code blocks. The blocks use the same block files as the original pipeline.           Pipeline triggers, runs, backfills, and logs are not copied over to the new pipeline.",confirmationMessage:"Do you want to clone the pipeline ".concat(null==De?void 0:De.uuid,"?"),isLoading:kn,onClick:function(){return xn({pipeline:{clone_pipeline_uuid:null==De?void 0:De.uuid}})},openConfirmationDialogue:!0,tooltip:"Clone pipeline"},filterOptions:{status:R.kA,tag:[R.$1.NO_TAGS].concat((0,o.Z)(li.map((function(e){return e.uuid})))),type:Object.values(R.qL)},filterValueLabelMapping:{status:R.kA.reduce((function(e,n){return Ie(Ie({},e),{},(0,r.Z)({},n,(0,he.J3)((0,he.kC)(n))))}),{}),tag:Ie((0,r.Z)({},R.$1.NO_TAGS,"No tags"),li.reduce((function(e,n){var i=n.uuid;return Ie(Ie({},e),{},(0,r.Z)({},i,i))}),{})),type:R.G7},groupButtonProps:{groupByLabel:fn,menuItems:[{beforeIcon:fn===R.r0.STATUS?(0,O.jsx)(W.Check,{fill:q.Z.content.default,size:1.5*de.iI}):(0,O.jsx)(W.Circle,{muted:!0,size:1.5*de.iI}),label:function(){return(0,he.kC)(R.r0.STATUS)},onClick:function(){var e=fn===R.r0.STATUS?null:R.r0.STATUS;e||le({}),(0,_e.u)((0,r.Z)({},R.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Status"},{beforeIcon:fn===R.r0.TAG?(0,O.jsx)(W.Check,{fill:q.Z.content.default,size:1.5*de.iI}):(0,O.jsx)(W.Circle,{muted:!0,size:1.5*de.iI}),label:function(){return(0,he.kC)(R.r0.TAG)},onClick:function(){var e=fn===R.r0.TAG?null:R.r0.TAG;e||le({}),(0,_e.u)((0,r.Z)({},R.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Tag"},{beforeIcon:fn===R.r0.TYPE?(0,O.jsx)(W.Check,{fill:q.Z.content.default,size:1.5*de.iI}):(0,O.jsx)(W.Circle,{muted:!0,size:1.5*de.iI}),label:function(){return(0,he.kC)(R.r0.TYPE)},onClick:function(){var e=fn===R.r0.TYPE?null:R.r0.TYPE;e||le({}),(0,_e.u)((0,r.Z)({},R.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Type"}]},moreActionsMenuItems:[{label:function(){return"Rename pipeline"},onClick:function(){return $n({pipelineName:null==De?void 0:De.name})},uuid:"Pipelines/MoreActionsMenu/Rename"},{label:function(){return"Edit description"},onClick:function(){return $n({pipeline:De,pipelineDescription:null==De?void 0:De.description})},uuid:"Pipelines/MoreActionsMenu/EditDescription"}],onClickFilterDefaults:function(){re({}),Le(""),null==en||en().then((function(){var e;(0,_e.u)((e={},(0,r.Z)(e,ce.$D.LIMIT,(null==Qe?void 0:Qe[ce.$D.LIMIT])||D.Q),(0,r.Z)(e,R.$1.SEARCH,""),e),{replaceParams:!0})}))},onFilterApply:function(e,n){Object.values(n).every((function(e){return!(null!=e&&e.length)}))&&re({})},query:Qe,resetLimitOnFilterApply:!0,searchProps:{onChange:$e,value:Ge},selectedRowId:null==De?void 0:De.uuid,setSelectedRow:Re})}),[xn,On,en,fn,kn,Zn,En,oi,Qe,Ge,De,$e,$n,li]),si=(0,p.useCallback)((function(e){var n={};null==e||e.forEach((function(e,i){var u=null==e?void 0:e[fn];if(R.r0.STATUS===fn){var t=(e||{}).schedules,o=void 0===t?[]:t,r=o.length;u=o.find((function(e){var n=e.status;return pe.fq.ACTIVE===n}))?R.QK.ACTIVE:r>=1?R.QK.INACTIVE:R.QK.NO_SCHEDULES}else if(R.r0.TAG===fn){u=(null==e?void 0:e.tags)?(0,je.YC)(e.tags,(function(e){return e})).join(", "):""}n[u]||(n[u]=[]),n[u].push(i)}));var i=[],u=[];R.r0.STATUS===fn?Object.values(R.QK).forEach((function(e){i.push(n[e]),u.push((0,he.vg)(e))})):R.r0.TAG===fn?(0,je.YC)(Object.keys(n),(function(e){return e})).forEach((function(e){i.push(n[e]),e?u.push(e.split(", ").map((function(e,n){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{style:{marginLeft:n>=1?4:0}},"".concat(e,"-").concat(n,"-spacing")),(0,O.jsx)(Z.Z,{small:!0,children:(0,O.jsx)(T.ZP,{children:e})},"".concat(e,"-").concat(n))]})}))):u.push("No tags")})):R.r0.TYPE===fn&&Object.values(R.qL).forEach((function(e){i.push(n[e]),u.push(R.G7[e])}));var t=[],o=[];return null==i||i.forEach((function(e,n){null!=e&&(null==e?void 0:e.length)>=1&&(o.push(e),t.push(null==u?void 0:u[n]))})),{rowGroupHeaders:t,rowsGroupedByIndex:o}}),[fn]),ai=(0,p.useMemo)((function(){return si(ln)}),[si,ln]),di=ai.rowGroupHeaders,pi=ai.rowsGroupedByIndex,fi=(0,p.useMemo)((function(){return si(cn)}),[si,cn]),vi=fi.rowGroupHeaders,hi=fi.rowsGroupedByIndex,mi=(0,p.useCallback)((function(e,i,t){return(0,O.jsx)(N.Z,{columnFlex:[null,null,null,2,null,null,null,1,null,null,null],columns:[{label:function(){return""},uuid:"action"},{uuid:(0,he.kC)(R.r0.STATUS)},{uuid:"Name"},{uuid:"Description"},{uuid:(0,he.kC)(R.r0.TYPE)},Ie(Ie({},Ke),{},{uuid:"Updated at"}),Ie(Ie({},Ke),{},{uuid:"Created at"}),{uuid:"Tags"},{uuid:"Blocks"},{uuid:"Triggers"},{center:!0,label:function(){return""},uuid:"Actions"}],isSelectedRow:function(n){var i;return(null===(i=e[n])||void 0===i?void 0:i.uuid)===(null==De?void 0:De.uuid)},localStorageKeySortColIdx:ue,localStorageKeySortDirection:te,onClickRow:function(n){return Re((function(i){var u=e[n];return(null==i?void 0:i.uuid)!==(null==u?void 0:u.uuid)?u:null}))},onDoubleClickRow:function(i){var u=e[i];(null==u?void 0:u.execution_framework)===h.q6.RAG?n.push("/v2/pipelines/".concat((0,d.wL)(null==u?void 0:u.uuid),"/").concat((0,d.wL)(null==u?void 0:u.execution_framework))):n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(null==u?void 0:u.uuid,"/edit"))},ref:u,renderRightClickMenuItems:function(i){var u=e[i];return[{label:function(){return"Open pipeline"},onClick:function(){(null==u?void 0:u.execution_framework)===h.q6.RAG?n.push("/v2/pipelines/".concat((0,d.wL)(null==u?void 0:u.uuid),"/").concat((0,d.wL)(null==u?void 0:u.execution_framework))):n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(null==u?void 0:u.uuid,"/edit"))},uuid:"open_pipeline"},{label:function(){return"Edit description"},onClick:function(){return $n({pipeline:u,pipelineDescription:null==u?void 0:u.description})},uuid:"edit_description"},{label:function(){return"Rename"},onClick:function(){return $n({pipeline:u,pipelineName:null==u?void 0:u.name})},uuid:"rename"},{label:function(){return"Clone"},onClick:function(){return xn({pipeline:{clone_pipeline_uuid:null==u?void 0:u.uuid}})},uuid:"clone"},{label:function(){return"Download (keep folder structure)"},onClick:function(){hn({filesOnly:!1,pipelineUUID:null==u?void 0:u.uuid})},uuid:"download_keep_folder_structure"},{label:function(){return"Download (without folder structure)"},onClick:function(){hn({filesOnly:!0,pipelineUUID:null==u?void 0:u.uuid})},uuid:"download_without_folder_structure"},{label:function(){return"Add/Remove tags"},onClick:function(){n.push("/pipelines/[pipeline]/settings","/pipelines/".concat(null==u?void 0:u.uuid,"/settings"))},uuid:"add_tags"},{label:function(){return"Create template"},onClick:function(){n.push("/templates?object_type=".concat(ae.R,"&new=1&pipeline_uuid=").concat(null==u?void 0:u.uuid))},uuid:"create_custom_template"},{label:function(){return"Create global data product"},onClick:function(){n.push("/global-data-products?object_type=".concat(X.b.PIPELINE,"&new=1&object_uuid=").concat(null==u?void 0:u.uuid))},uuid:"create_global_data_product"},{label:function(){return"Delete"},onClick:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null==u?void 0:u.uuid,"?"))&&On(null==u?void 0:u.uuid)},uuid:"delete"}]},rightClickMenuHeight:252,rightClickMenuWidth:30*de.iI,rowGroupHeaders:i,rows:null==e?void 0:e.map((function(e,i){var u=e.blocks,t=e.created_at,o=e.description,l=e.execution_framework,c=e.schedules,s=e.tags,d=e.type,p=e.updated_at,f=e.uuid,v=u.filter((function(e){var n=e.type;return V.tf.SCRATCHPAD!==n})).length,m=c.length,b=c.find((function(e){var n=e.status;return pe.fq.ACTIVE===n})),_=d===R.ad,Z=(0,O.jsx)("div",{children:(0,O.jsx)(B.Z,{tags:null==s?void 0:s.map((function(e){return{uuid:e}}))})},"pipeline_tags_".concat(i));return[m>=1||Ne[f]?(0,O.jsx)(g.ZP,{iconOnly:!0,loading:!!Ne[f],noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,Ce.j)(n),Be((function(e){return Ie(Ie({},e),{},(0,r.Z)({},f,!0))})),In(Ie(Ie({},e),{},{status:b?pe.fq.INACTIVE:pe.fq.ACTIVE}))},children:b?(0,O.jsx)(W.Pause,{muted:!0,size:2*de.iI}):(0,O.jsx)(W.PlayButtonFilled,{default:!0,size:2*de.iI})}):null,(0,O.jsx)(T.ZP,{default:!b,monospace:!0,success:!!b,children:b?pe.fq.ACTIVE:m>=1?pe.fq.INACTIVE:"no schedules"},"pipeline_status_".concat(i)),(0,O.jsx)(a(),{as:"/pipelines/".concat(f),href:"/pipelines/[pipeline]",passHref:!0,children:(0,O.jsx)(A.Z,{sameColorAsText:!0,children:f})},"pipeline_name_".concat(i)),(0,O.jsx)(T.ZP,{default:!0,preWrap:!0,title:o,children:o},"pipeline_description_".concat(i)),(0,O.jsx)(T.ZP,{bold:_,danger:_,children:_?(0,he.kC)(R.ad):l?h.qN[l]:R.G7[d]},"pipeline_type_".concat(i)),(0,O.jsx)(T.ZP,{monospace:!0,small:!0,title:p?(0,me._6)(p):null,children:p?(0,me.XG)((0,me.d$)(p,{includeSeconds:!0,utcFormat:!0}),Ve):(0,O.jsx)(O.Fragment,{children:"â€”"})},"pipeline_updated_at_".concat(i)),(0,O.jsx)(T.ZP,{monospace:!0,small:!0,title:t?(0,me._6)(t):null,children:t?(0,me.XG)(t.slice(0,19),Ve):(0,O.jsx)(O.Fragment,{children:"â€”"})},"pipeline_created_at_".concat(i)),Z,(0,O.jsx)(T.ZP,{default:0===v,monospace:!0,children:v},"pipeline_block_count_".concat(i)),(0,O.jsx)(T.ZP,{default:0===m,monospace:!0,children:m},"pipeline_trigger_count_".concat(i)),(0,O.jsxs)(x.Z,{flex:1,justifyContent:"flex-end",children:[(0,O.jsx)(g.ZP,Ie(Ie({},Ae),{},{onClick:function(){hn({pipelineUUID:f})},title:"Download (keep folder structure)",children:(0,O.jsx)(W.Save,{default:!0,size:2*de.iI})})),(0,O.jsx)(I.Z,{mr:1}),(0,O.jsx)(g.ZP,Ie(Ie({},Ae),{},{onClick:function(){n.push("/pipelines/[pipeline]","/pipelines/".concat(f))},title:"Detail",children:(0,O.jsx)(W.Open,{default:!0,size:2*de.iI})})),(0,O.jsx)(I.Z,{mr:1}),(0,O.jsx)(g.ZP,Ie(Ie({},Ae),{},{onClick:function(){n.push("/pipelines/[pipeline]/logs","/pipelines/".concat(f,"/logs"))},title:"Logs",children:(0,O.jsx)(W.File,{default:!0,size:2*de.iI})}))]},"chevron_icon_".concat(i))]})),rowsGroupedByIndex:t,sortableColumnIndexes:sn,sortedColumn:pn,stickyHeader:!0,uuid:"pipelines_table"})}),[xn,On,hn,Ve,Ne,n,De,Be,Re,$n,sn,pn,Ke,In]),bi=(0,p.useMemo)((function(){return mi(ln,di,pi)}),[ln,mi,di,pi]),gi=(0,p.useMemo)((function(){return mi(cn,vi,hi)}),[cn,mi,vi,hi]),_i=(0,p.useMemo)((function(){return(null==ln?void 0:ln.length)||0}),[ln]),Zi=(0,p.useMemo)((function(){return(null==cn?void 0:cn.length)||0}),[cn]),Ci=(0,p.useMemo)((function(){return(!We||ye.uuid===ze)&&!_i||We&&Te.uuid===ze&&!Zi}),[We,_i,Zi,ze]),ji=(0,p.useMemo)((function(){var e=null==Qe?void 0:Qe[ce.$D.LIMIT];return(0,O.jsxs)(k.ZP,{alignItems:"center",children:[(0,O.jsx)(T.ZP,{muted:!0,small:!0,children:"Per page"}),(0,O.jsx)(I.Z,{mr:1}),(0,O.jsxs)($.Z,{compact:!0,onChange:function(e){var n;return(0,_e.u)((n={},(0,r.Z)(n,ce.$D.LIMIT,e.target.value),(0,r.Z)(n,ce.$D.OFFSET,0),n),{pushHistory:!0})},small:!0,value:e,children:[e&&(e>5*D.Q||e%D.Q)&&(0,O.jsx)("option",{value:e,children:e}),(0,je.w6)(5).map((function(e,n){var i=(n+1)*D.Q;return(0,O.jsx)("option",{value:i,children:i},i)}))]})]})}),[Qe]),xi=(0,p.useMemo)((function(){var e,n,i=Je;We&&Te.uuid===ze&&(i=tn);var u=(null===(e=i)||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.count)||0,t=(null==Qe?void 0:Qe[ce.$D.LIMIT])||D.Q,o=(null==Qe?void 0:Qe[ce.$D.OFFSET])||0,l=Math.ceil(u/t);return(0,O.jsx)(I.Z,{p:de.cd,children:(0,O.jsx)(D.ZP,{maxPages:D.Et,onUpdate:function(e){var n=Number(e);(0,_e.u)((0,r.Z)({},ce.$D.OFFSET,n*t))},page:Math.floor(o/t),totalPages:l})})}),[Je,tn,We,Qe,ze]);return(0,O.jsxs)(j.Z,{errors:Fe,setErrors:Ye,subheaderChildren:(0,O.jsxs)(k.ZP,{alignItems:"center",justifyContent:"space-between",children:[ci,ji]}),title:"Pipelines",uuid:"pipelines/index",children:[We&&(0,O.jsx)(I.Z,{px:de.cd,ref:i,children:(0,O.jsx)(_.Z,{noPadding:!0,onClickTab:function(e){var n,i=e.uuid;return(0,_e.u)((n={},(0,r.Z)(n,Oe,i),(0,r.Z)(n,ce.$D.OFFSET,0),n),{pushHistory:!0})},regularSizeText:!0,selectedTabUUID:ze,tabs:Se.map((function(e){var n=e.Icon,i=e.label;return{Icon:n,label:function(){var e;return i({count:null==Je||null===(e=Je.metadata)||void 0===e?void 0:e.count})},uuid:e.uuid}})),underlineStyle:!0})}),Ci?(0,O.jsx)(I.Z,{p:de.Mq,children:Je?(0,O.jsx)(T.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No pipelines available"}):(0,O.jsx)(U.Z,{inverted:!0,large:!0})}):null,(0,O.jsxs)(ve.cl,{hide:Ci,includePadding:!!fn,maxHeight:"calc(100vh - ".concat(J.Mz+74+(G||44)+68,"px)"),children:[(!We||ye.uuid===ze)&&bi,We&&Te.uuid===ze&&gi]}),(0,O.jsx)("div",{ref:l,children:xi})]})}De.getInitialProps=(0,u.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Re=(0,G.Z)(De)},79274:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines",function(){return i(55620)}])},80022:function(e,n,i){"use strict";function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(n,{Z:function(){return u}})},15544:function(e,n,i){"use strict";function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}i.d(n,{Z:function(){return u}})},13692:function(e,n,i){"use strict";i.d(n,{Z:function(){return t}});var u=i(61049);function t(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,u.Z)(e,n)}},93189:function(e,n,i){"use strict";i.d(n,{Z:function(){return o}});var u=i(12539),t=i(80022);function o(e,n){if(n&&("object"===u(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,t.Z)(e)}}},function(e){e.O(0,[1557,4241,5544,523,3548,5627,9774,2888,179],(function(){return n=79274,e(e.s=n);var n}));var n=e.O();_N_E=n}]);