(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1221],{8666:function(e,n,i){"use strict";var t;i.d(n,{b:function(){return t}}),function(e){e.BLOCK="block",e.PIPELINE="pipeline"}(t||(t={}))},55620:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return Me}});var t=i(77837),u=i(75582),r=i(21831),o=i(82394),l=i(38860),c=i.n(l),s=i(12691),a=i.n(s),d=i(69419),p=i(82684),f=i(83455),v=i(34376),h=i(43406),m=i(52749),b=i(60523),g=i(71180),Z=i(90299),j=i(31882),C=i(76111),_=i(94629),x=i(97618),P=i(55485),k=i(68562),I=i(65956),w=i(38276),T=i(30160),y=i(35576),S=i(17488),O=i(28598);var E=function(e){var n=e.description,i=e.isLoading,t=e.maxWidth,u=e.minWidth,r=e.noEmptyValue,o=e.onClose,l=e.onSave,c=e.textArea,s=e.title,a=e.value,d=(0,p.useRef)(null),f=(0,p.useState)(a),v=f[0],h=f[1],m=c?y.Z:S.Z;return(0,p.useEffect)((function(){var e;null==d||null===(e=d.current)||void 0===e||e.focus()}),[]),(0,O.jsxs)(I.Z,{maxWidth:t,minWidth:u,children:[(0,O.jsx)(T.ZP,{bold:!0,children:s}),(0,O.jsx)(w.Z,{mt:1,children:(0,O.jsx)(m,{monospace:!0,onChange:function(e){return h(e.target.value)},ref:d,rows:c?7:null,value:v})}),n&&(0,O.jsx)(w.Z,{mt:2,children:(0,O.jsx)(T.ZP,{muted:!0,small:!0,children:n})}),(0,O.jsx)(w.Z,{mt:3,children:(0,O.jsxs)(P.ZP,{children:[(0,O.jsx)(k.ZP,{bold:!0,inline:!0,loading:i,onClick:function(){v===a||r&&!v?o():l(v)},outline:!0,primary:!0,uuid:"Inputs/InputModal/SaveInput",children:"Save"}),(0,O.jsx)(w.Z,{ml:1}),(0,O.jsx)(g.ZP,{onClick:o,children:"Cancel"})]})})]})},A=i(48670),D=i(55072),M=i(57653),R=i(55729),G=i(93808),$=i(82359),L=i(44085),U=i(4190),N=i(75499),B=i(48381),H=i(85544),F=i(70026),Y=i(22271),Q=i(44897),z=i(77417),V=i(42631),q=i(44425),W=i(72473),K=i(23780),X=i(8666),J=i(46684),ee=i(53808),ne="pipeline_list_filters",ie="pipeline_list_group_bys",te="pipeline_list_sort_column_index",ue="pipeline_list_sort_direction",re="pipeline_list_selected_tab_uuid";function oe(e){return(0,ee.t8)(ne,e),e}function le(e){return(0,ee.t8)(ie,e),e}var ce=i(11498),se=i(32929),ae=i(44898),de=i(70515),pe=i(30229),fe=i(81655),ve=i(31608),he=i(81728),me=i(3917),be=i(72619),ge=i(65458),Ze=i(15610),je=i(42122),Ce=i(95924),_e=i(86735),xe=i(70320),Pe=i(89538),ke=i(44952);function Ie(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function we(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ie(Object(i),!0).forEach((function(n){(0,o.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ie(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Te={Icon:W.Schedule,label:function(){return"Recently viewed"},uuid:"recent"},ye={Icon:W.PipelineV3,label:function(e){return null!=e&&e.count?"All pipelines â€º ".concat((null==e?void 0:e.count)||0):"All pipelines"},uuid:"all"},Se=[ye,Te],Oe="tab",Ee=[M.$1.SEARCH],Ae={borderRadius:"".concat(V.BG,"px"),iconOnly:!0,noBackground:!0,noBorder:!0,outline:!0,padding:"4px"};function De(){var e,n=(0,v.useRouter)(),i=(0,p.useRef)(null),t=(0,p.useRef)(null),l=(0,p.useRef)(null),c=(0,p.useRef)(null),s=(0,z.Z)(),k=s.fetchProjects,y=s.project,S=(0,p.useState)(null),G=S[0],V=S[1],Ie=(0,p.useState)(null),De=Ie[0],Me=Ie[1],Re=(0,p.useState)(null),Ge=Re[0],$e=Re[1],Le=(0,p.useCallback)((function(e){$e(e),clearTimeout(c.current),c.current=setTimeout((function(){var n;return(0,Ze.u)((n={},(0,o.Z)(n,ce.$D.OFFSET,0),(0,o.Z)(n,M.$1.SEARCH,e),n))}),500)}),[$e]),Ue=(0,p.useState)({}),Ne=Ue[0],Be=Ue[1],He=(0,p.useState)(null),Fe=He[0],Ye=He[1],Qe=(0,d.iV)(),ze=(0,p.useMemo)((function(){return we({},(0,d.DQ)(Qe,[M.$1.SEARCH,M.$1.STATUS,M.$1.TAG,M.$1.TYPE].concat((0,r.Z)(ce.RG))))}),[Qe]),Ve=(0,p.useMemo)((function(){return null==Qe?void 0:Qe[Oe]}),[Qe]);(0,p.useEffect)((function(){var e;V(null==i||null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect().height)}),[Qe,i]);var qe=(0,p.useMemo)((function(){var e;return(0,xe.hY)(null==y||null===(e=y.features)||void 0===e?void 0:e[$.d.LOCAL_TIMEZONE])}),[null==y?void 0:y.features]),We=(0,p.useMemo)((function(){var e;return null==y||null===(e=y.features)||void 0===e?void 0:e[$.d.OPERATION_HISTORY]}),[y]),Ke=(0,p.useMemo)((function(){return qe?fe.O$:{}}),[qe]),Xe=Y.ZP.pipelines.list(we(we({},ze),{},{include_schedules:1}),{revalidateOnFocus:!1}),Je=Xe.data,en=Xe.mutate,nn=(0,p.useMemo)((function(){return(null==Qe?void 0:Qe[M.$1.HISTORY_DAYS])||7}),[Qe]),tn=Y.ZP.pipelines.list(we(we({},ze),{},(e={},(0,o.Z)(e,M.$1.HISTORY_DAYS,(0,he.HW)(nn)?Number(nn):nn),(0,o.Z)(e,"include_schedules",1),e)),{},{pauseFetch:!We||!Ve||Te.uuid!==Ve}),un=tn.data,rn=tn.mutate,on=(0,p.useCallback)((function(e){return e}),[]),ln=(0,p.useMemo)((function(){var e=on((null==Je?void 0:Je.pipelines)||[]);if(null!=Qe&&Qe[M.$1.TAG]){var n=Qe[M.$1.TAG];e=e.filter((function(e){var i=e.tags;return i.some((function(e){return n.includes(e)}))||0===i.length&&n.includes(M.$1.NO_TAGS)}))}return e}),[Je,on,Qe]),cn=(0,p.useMemo)((function(){return on((null==un?void 0:un.pipelines)||[])}),[un,on]),sn=(0,p.useMemo)((function(){return[1,2,3,4,5,6,8,9]}),[]),an=null==Qe?void 0:Qe[fe.lG.SORT_COL_IDX],dn=null==Qe?void 0:Qe[fe.lG.SORT_DIRECTION],pn=(0,p.useMemo)((function(){return an?{columnIndex:+an,sortDirection:dn||fe.sh.ASC}:void 0}),[an,dn]),fn=null==Qe?void 0:Qe[M.$1.GROUP],vn=(0,f.Db)((function(e){var n=e.pipelineUUID,i=e.filesOnly,t=void 0!==i&&i;return Y.ZP.downloads.pipelines.useCreate(n)({download:{ignore_folder_structure:t}})}),{onSuccess:function(e){return(0,be.wD)(e,{callback:function(){var n=e.data.download.token;(0,ke.K)(n)},onErrorCallback:function(e,n){return Ye({errors:n,response:e})}})}}),hn=(0,u.Z)(vn,1)[0];(0,p.useEffect)((function(){null!=ze&&ze[M.$1.SEARCH]&&null===Ge&&$e(null==ze?void 0:ze[M.$1.SEARCH])}),[ze,Ge,$e]),(0,p.useEffect)((function(){var e,n={};if(!an){var i=(0,ee.U2)(te,null),t=(0,ee.U2)(ue,fe.sh.ASC);null!==i&&(n[fe.lG.SORT_COL_IDX]=i,n[fe.lG.SORT_DIRECTION]=t)}We&&(Ve?(0,ee.t8)(re,Ve):n[Oe]=(0,ee.U2)(re,null==Se||null===(e=Se[0])||void 0===e?void 0:e.uuid));if(fn)le((0,o.Z)({},fn,!0));else{var r,l=(0,ee.U2)(ie,{});l&&Object.entries(l).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];!r&&t&&(r=i)})),r&&(n[M.$1.GROUP]=r)}if((0,je.Qr)(ze)){var c=(0,o.Z)({},ce.$D.LIMIT,D.Q),s=(0,ee.U2)(ne,{});s&&Object.entries(s).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];null!=t&&(ce.RG.includes(i)||Ee.includes(i)?c[i]=t:(c[i]=[],Object.entries(t).forEach((function(e){var n=(0,u.Z)(e,2),t=n[0];n[1]&&c[i].push(t)}))))})),(0,je.Qr)(c)||(n={},Object.entries(we(we({},n),c)||{}).forEach((function(e){var i=(0,u.Z)(e,2),t=i[0],r=i[1];null!=r&&(n[t]=r)})))}else{var a={};Object.entries(ze).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];a[i]={};var r,o=t;null!=t&&(ce.RG.includes(i)||Ee.includes(i)?a[i]=o:(Array.isArray(o)||(o=[o]),o&&Array.isArray(o)&&(null===(r=o)||void 0===r||r.forEach((function(e){a[i][e]=!0})))))})),oe((0,je.hB)(a))}(0,je.Qr)(n)||(0,Ze.u)((0,je.hB)(n),{pushHistory:!1})}),[fn,We,ze,Ve,sn,an,dn]),(0,p.useEffect)((function(){(0,be.bB)(Je,Ye)}),[Je]);var mn=function(e){return(0,f.Db)(Y.ZP.pipelines.useCreate(),{onSuccess:function(n){return(0,be.wD)(n,{callback:function(n){var i=n.pipeline.uuid;null==e||e(i)},onErrorCallback:function(e,n){return Ye({errors:n,response:e})}})}})},bn=mn((function(e){return n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(e,"/edit"))})),gn=(0,u.Z)(bn,2),Zn=gn[0],jn=gn[1].isLoading,Cn=mn((function(){null==en||en(),null==rn||rn()})),_n=(0,u.Z)(Cn,2),xn=_n[0],Pn=_n[1].isLoading,kn=(0,f.Db)((function(e){return Y.ZP.pipelines.useUpdate(e.uuid)({pipeline:e})}),{onSuccess:function(e){return(0,be.wD)(e,{callback:function(e){var n=e.pipeline.uuid;Be((function(e){return we(we({},e),{},(0,o.Z)({},n,!1))})),en(),null==rn||rn(),null==Un||Un(),Me(null)},onErrorCallback:function(e,n){var i,t=null==e||null===(i=e.url_parameters)||void 0===i?void 0:i.pk;Be((function(e){return we(we({},e),{},(0,o.Z)({},t,!1))})),Ye({errors:n,response:e})}})}}),In=(0,u.Z)(kn,2),wn=In[0],Tn=In[1].isLoading,yn=(0,f.Db)((function(e){return Y.ZP.pipelines.useDelete(e)()}),{onSuccess:function(e){return(0,be.wD)(e,{callback:function(){null==en||en(),null==rn||rn()},onErrorCallback:function(e,n){return Ye({errors:n,response:e})}})}}),Sn=(0,u.Z)(yn,2),On=Sn[0],En=Sn[1].isLoading,An=(0,Pe.dd)((function(e){var n=e.pipelineType;return(0,O.jsx)(C.Z,{onClose:Rn,onSave:function(e){var i=e.name,t=e.description,u=e.tags;Zn({pipeline:{description:t,name:i,tags:u,type:n}})},pipelineType:n})}),{},[Zn],{background:!0,disableEscape:!0,uuid:"overview/create_pipeline"}),Dn=(0,u.Z)(An,2),Mn=Dn[0],Rn=Dn[1],Gn=(0,Pe.dd)((function(e){var n=e.pipeline,i=e.pipelineDescription,t=e.pipelineName;return(0,O.jsx)(E,{isLoading:Tn,minWidth:55*de.iI,noEmptyValue:!!t,onClose:Un,onSave:function(e){var i=n||De;if(i){var u=i.uuid,r={uuid:u};t?r.name=e:r.description=e,Be((function(e){return we(we({},e),{},(0,o.Z)({},u,!0))})),wn(r)}},textArea:!t,title:t?"Rename pipeline":"Edit description for ".concat(null==n?void 0:n.uuid),value:t||i})}),{},[Tn,De],{background:!0,uuid:"rename_pipeline_and_save"}),$n=(0,u.Z)(Gn,2),Ln=$n[0],Un=$n[1],Nn=(0,Pe.dd)((function(){return(0,O.jsx)(F.Z,{fetchPipelines:en,onCancel:Fn})}),{},[en],{background:!0,uuid:"upload_pipeline"}),Bn=(0,u.Z)(Nn,2),Hn=Bn[0],Fn=Bn[1],Yn=(0,Pe.dd)((function(){return(0,O.jsx)(K.BC,{children:(0,O.jsx)(b.Z,{contained:!0,onClickCustomTemplate:function(e){Zn({pipeline:{custom_template_uuid:null==e?void 0:e.template_uuid,name:(0,he.Y6)()}}).then((function(){Vn()}))},showBreadcrumbs:!0,tabs:[se.A2]})})}),{},[Zn],{background:!0,uuid:"browse_templates"}),Qn=(0,u.Z)(Yn,2),zn=Qn[0],Vn=Qn[1],qn=(0,Pe.dd)((function(e){var n=e.cancelButtonText,i=(e.header,e.onCancel),t=e.onSaveSuccess;return(0,O.jsx)(K.BC,{children:(0,O.jsx)(R.Z,{cancelButtonText:n,contained:!0,header:(0,O.jsx)(w.Z,{mb:de.HN,children:(0,O.jsxs)(I.Z,{children:[(0,O.jsx)(T.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate pipelines using AI."}),(0,O.jsx)(w.Z,{mt:1,children:(0,O.jsxs)(T.ZP,{warning:!0,children:["Read"," ",(0,O.jsx)(A.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAIâ€™s documentation"})," ","to get your API key."]})})]})}),onCancel:function(){null==i||i(),Xn()},onSaveSuccess:function(e){k(),Xn(),null==t||t(e)}})})}),{},[k],{background:!0,uuid:"configure_project"}),Wn=(0,u.Z)(qn,2),Kn=Wn[0],Xn=Wn[1],Jn=(0,Pe.dd)((function(){return(0,O.jsx)(K.BC,{children:(0,O.jsx)(m.Z,{createPipeline:Zn,isLoading:jn,onClose:ii})})}),{},[Zn,jn],{background:!0,disableClickOutside:!0,disableCloseButton:!0,uuid:"AI_modal"}),ei=(0,u.Z)(Jn,2),ni=ei[0],ii=ei[1],ti=(0,f.Db)((function(e){return Y.ZP.pipelines.execution_frameworks.useCreate(h.q6.RAG)(e)}),{onSuccess:function(e){return(0,be.wD)(e,{callback:function(e){var n=e.pipeline;window.location.href="/v2/pipelines/".concat((0,d.wL)(n.uuid),"/builder/").concat(n.execution_framework)},onErrorCallback:function(e,n){return Ye({errors:n,response:e})}})}}),ui=(0,u.Z)(ti,1)[0],ri=(0,p.useMemo)((function(){return(0,ge.d)(Zn,{createRAG:ui,showAIModal:function(){null!=y&&y.openai_api_key?ni():Kn({onSaveSuccess:function(){ni()}})},showBrowseTemplates:zn,showCreatePipelineModal:Mn,showImportPipelineModal:Hn})}),[Zn,y,ui,ni,zn,Kn,Mn,Hn]),oi=Y.ZP.tags.list().data,li=(0,p.useMemo)((function(){return(0,_e.YC)((null==oi?void 0:oi.tags)||[],(function(e){return e.uuid}))}),[oi]),ci=(0,p.useMemo)((function(){return(0,O.jsx)(H.Z,{addButtonProps:{isLoading:jn,label:"New",menuItems:ri},deleteRowProps:{confirmationMessage:"This is irreversible and will immediately delete everything associated           with the pipeline, including its blocks, triggers, runs, logs, and history.",isLoading:En,item:"pipeline",onDelete:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null==De?void 0:De.uuid,"?"))&&On(null==De?void 0:De.uuid)}},extraActionButtonProps:{Icon:W.Clone,confirmationDescription:"Cloning the selected pipeline will create a new pipeline with the same           configuration and code blocks. The blocks use the same block files as the original pipeline.           Pipeline triggers, runs, backfills, and logs are not copied over to the new pipeline.",confirmationMessage:"Do you want to clone the pipeline ".concat(null==De?void 0:De.uuid,"?"),isLoading:Pn,onClick:function(){return xn({pipeline:{clone_pipeline_uuid:null==De?void 0:De.uuid}})},openConfirmationDialogue:!0,tooltip:"Clone pipeline"},filterOptions:{status:M.kA,tag:[M.$1.NO_TAGS].concat((0,r.Z)(li.map((function(e){return e.uuid})))),type:Object.values(M.qL)},filterValueLabelMapping:{status:M.kA.reduce((function(e,n){return we(we({},e),{},(0,o.Z)({},n,(0,he.J3)((0,he.kC)(n))))}),{}),tag:we((0,o.Z)({},M.$1.NO_TAGS,"No tags"),li.reduce((function(e,n){var i=n.uuid;return we(we({},e),{},(0,o.Z)({},i,i))}),{})),type:M.G7},groupButtonProps:{groupByLabel:fn,menuItems:[{beforeIcon:fn===M.r0.STATUS?(0,O.jsx)(W.Check,{fill:Q.Z.content.default,size:1.5*de.iI}):(0,O.jsx)(W.Circle,{muted:!0,size:1.5*de.iI}),label:function(){return(0,he.kC)(M.r0.STATUS)},onClick:function(){var e=fn===M.r0.STATUS?null:M.r0.STATUS;e||le({}),(0,Ze.u)((0,o.Z)({},M.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Status"},{beforeIcon:fn===M.r0.TAG?(0,O.jsx)(W.Check,{fill:Q.Z.content.default,size:1.5*de.iI}):(0,O.jsx)(W.Circle,{muted:!0,size:1.5*de.iI}),label:function(){return(0,he.kC)(M.r0.TAG)},onClick:function(){var e=fn===M.r0.TAG?null:M.r0.TAG;e||le({}),(0,Ze.u)((0,o.Z)({},M.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Tag"},{beforeIcon:fn===M.r0.TYPE?(0,O.jsx)(W.Check,{fill:Q.Z.content.default,size:1.5*de.iI}):(0,O.jsx)(W.Circle,{muted:!0,size:1.5*de.iI}),label:function(){return(0,he.kC)(M.r0.TYPE)},onClick:function(){var e=fn===M.r0.TYPE?null:M.r0.TYPE;e||le({}),(0,Ze.u)((0,o.Z)({},M.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Type"}]},moreActionsMenuItems:[{label:function(){return"Rename pipeline"},onClick:function(){return Ln({pipelineName:null==De?void 0:De.name})},uuid:"Pipelines/MoreActionsMenu/Rename"},{label:function(){return"Edit description"},onClick:function(){return Ln({pipeline:De,pipelineDescription:null==De?void 0:De.description})},uuid:"Pipelines/MoreActionsMenu/EditDescription"}],onClickFilterDefaults:function(){oe({}),$e(""),null==en||en().then((function(){var e;(0,Ze.u)((e={},(0,o.Z)(e,ce.$D.LIMIT,(null==ze?void 0:ze[ce.$D.LIMIT])||D.Q),(0,o.Z)(e,M.$1.SEARCH,""),e),{replaceParams:!0})}))},onFilterApply:function(e,n){Object.values(n).every((function(e){return!(null!=e&&e.length)}))&&oe({})},query:ze,resetLimitOnFilterApply:!0,searchProps:{onChange:Le,value:Ge},selectedRowId:null==De?void 0:De.uuid,setSelectedRow:Me})}),[xn,On,en,fn,Pn,jn,En,ri,ze,Ge,De,Le,Ln,li]),si=(0,p.useCallback)((function(e){var n={};null==e||e.forEach((function(e,i){var t=null==e?void 0:e[fn];if(M.r0.STATUS===fn){var u=(e||{}).schedules,r=void 0===u?[]:u,o=r.length;t=r.find((function(e){var n=e.status;return pe.fq.ACTIVE===n}))?M.QK.ACTIVE:o>=1?M.QK.INACTIVE:M.QK.NO_SCHEDULES}else if(M.r0.TAG===fn){t=(null==e?void 0:e.tags)?(0,_e.YC)(e.tags,(function(e){return e})).join(", "):""}n[t]||(n[t]=[]),n[t].push(i)}));var i=[],t=[];M.r0.STATUS===fn?Object.values(M.QK).forEach((function(e){i.push(n[e]),t.push((0,he.vg)(e))})):M.r0.TAG===fn?(0,_e.YC)(Object.keys(n),(function(e){return e})).forEach((function(e){i.push(n[e]),e?t.push(e.split(", ").map((function(e,n){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{style:{marginLeft:n>=1?4:0}},"".concat(e,"-").concat(n,"-spacing")),(0,O.jsx)(j.Z,{small:!0,children:(0,O.jsx)(T.ZP,{children:e})},"".concat(e,"-").concat(n))]})}))):t.push("No tags")})):M.r0.TYPE===fn&&Object.values(M.qL).forEach((function(e){i.push(n[e]),t.push(M.G7[e])}));var u=[],r=[];return null==i||i.forEach((function(e,n){null!=e&&(null==e?void 0:e.length)>=1&&(r.push(e),u.push(null==t?void 0:t[n]))})),{rowGroupHeaders:u,rowsGroupedByIndex:r}}),[fn]),ai=(0,p.useMemo)((function(){return si(ln)}),[si,ln]),di=ai.rowGroupHeaders,pi=ai.rowsGroupedByIndex,fi=(0,p.useMemo)((function(){return si(cn)}),[si,cn]),vi=fi.rowGroupHeaders,hi=fi.rowsGroupedByIndex,mi=(0,p.useCallback)((function(e,i,u){return(0,O.jsx)(N.Z,{columnFlex:[null,null,null,2,null,null,null,1,null,null,null],columns:[{label:function(){return""},uuid:"action"},{uuid:(0,he.kC)(M.r0.STATUS)},{uuid:"Name"},{uuid:"Description"},{uuid:(0,he.kC)(M.r0.TYPE)},we(we({},Ke),{},{uuid:"Updated at"}),we(we({},Ke),{},{uuid:"Created at"}),{uuid:"Tags"},{uuid:"Blocks"},{uuid:"Triggers"},{center:!0,label:function(){return""},uuid:"Actions"}],isSelectedRow:function(n){var i;return(null===(i=e[n])||void 0===i?void 0:i.uuid)===(null==De?void 0:De.uuid)},localStorageKeySortColIdx:te,localStorageKeySortDirection:ue,onClickRow:function(n){return Me((function(i){var t=e[n];return(null==i?void 0:i.uuid)!==(null==t?void 0:t.uuid)?t:null}))},onDoubleClickRow:function(i){n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(e[i].uuid,"/edit"))},ref:t,renderRightClickMenuItems:function(i){var t=e[i];return[{label:function(){return"Edit description"},onClick:function(){return Ln({pipeline:t,pipelineDescription:null==t?void 0:t.description})},uuid:"edit_description"},{label:function(){return"Rename"},onClick:function(){return Ln({pipeline:t,pipelineName:null==t?void 0:t.name})},uuid:"rename"},{label:function(){return"Clone"},onClick:function(){return xn({pipeline:{clone_pipeline_uuid:null==t?void 0:t.uuid}})},uuid:"clone"},{label:function(){return"Download (keep folder structure)"},onClick:function(){hn({filesOnly:!1,pipelineUUID:null==t?void 0:t.uuid})},uuid:"download_keep_folder_structure"},{label:function(){return"Download (without folder structure)"},onClick:function(){hn({filesOnly:!0,pipelineUUID:null==t?void 0:t.uuid})},uuid:"download_without_folder_structure"},{label:function(){return"Add/Remove tags"},onClick:function(){n.push("/pipelines/[pipeline]/settings","/pipelines/".concat(null==t?void 0:t.uuid,"/settings"))},uuid:"add_tags"},{label:function(){return"Create template"},onClick:function(){n.push("/templates?object_type=".concat(ae.R,"&new=1&pipeline_uuid=").concat(null==t?void 0:t.uuid))},uuid:"create_custom_template"},{label:function(){return"Create global data product"},onClick:function(){n.push("/global-data-products?object_type=".concat(X.b.PIPELINE,"&new=1&object_uuid=").concat(null==t?void 0:t.uuid))},uuid:"create_global_data_product"},{label:function(){return"Delete"},onClick:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null==t?void 0:t.uuid,"?"))&&On(null==t?void 0:t.uuid)},uuid:"delete"}]},rightClickMenuHeight:252,rightClickMenuWidth:30*de.iI,rowGroupHeaders:i,rows:null==e?void 0:e.map((function(e,i){var t=e.blocks,u=e.created_at,r=e.description,l=e.schedules,c=e.tags,s=e.type,d=e.updated_at,p=e.uuid,f=t.filter((function(e){var n=e.type;return q.tf.SCRATCHPAD!==n})).length,v=l.length,h=l.find((function(e){var n=e.status;return pe.fq.ACTIVE===n})),m=s===M.ad,b=(0,O.jsx)("div",{children:(0,O.jsx)(B.Z,{tags:null==c?void 0:c.map((function(e){return{uuid:e}}))})},"pipeline_tags_".concat(i));return[v>=1||Ne[p]?(0,O.jsx)(g.ZP,{iconOnly:!0,loading:!!Ne[p],noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,Ce.j)(n),Be((function(e){return we(we({},e),{},(0,o.Z)({},p,!0))})),wn(we(we({},e),{},{status:h?pe.fq.INACTIVE:pe.fq.ACTIVE}))},children:h?(0,O.jsx)(W.Pause,{muted:!0,size:2*de.iI}):(0,O.jsx)(W.PlayButtonFilled,{default:!0,size:2*de.iI})}):null,(0,O.jsx)(T.ZP,{default:!h,monospace:!0,success:!!h,children:h?pe.fq.ACTIVE:v>=1?pe.fq.INACTIVE:"no schedules"},"pipeline_status_".concat(i)),(0,O.jsx)(a(),{as:"/pipelines/".concat(p),href:"/pipelines/[pipeline]",passHref:!0,children:(0,O.jsx)(A.Z,{sameColorAsText:!0,children:p})},"pipeline_name_".concat(i)),(0,O.jsx)(T.ZP,{default:!0,preWrap:!0,title:r,children:r},"pipeline_description_".concat(i)),(0,O.jsx)(T.ZP,{bold:m,danger:m,children:m?(0,he.kC)(M.ad):M.G7[s]},"pipeline_type_".concat(i)),(0,O.jsx)(T.ZP,{monospace:!0,small:!0,title:d?(0,me._6)(d):null,children:d?(0,me.XG)((0,me.d$)(d,{includeSeconds:!0,utcFormat:!0}),qe):(0,O.jsx)(O.Fragment,{children:"â€”"})},"pipeline_updated_at_".concat(i)),(0,O.jsx)(T.ZP,{monospace:!0,small:!0,title:u?(0,me._6)(u):null,children:u?(0,me.XG)(u.slice(0,19),qe):(0,O.jsx)(O.Fragment,{children:"â€”"})},"pipeline_created_at_".concat(i)),b,(0,O.jsx)(T.ZP,{default:0===f,monospace:!0,children:f},"pipeline_block_count_".concat(i)),(0,O.jsx)(T.ZP,{default:0===v,monospace:!0,children:v},"pipeline_trigger_count_".concat(i)),(0,O.jsxs)(x.Z,{flex:1,justifyContent:"flex-end",children:[(0,O.jsx)(g.ZP,we(we({},Ae),{},{onClick:function(){hn({pipelineUUID:p})},title:"Download (keep folder structure)",children:(0,O.jsx)(W.Save,{default:!0,size:2*de.iI})})),(0,O.jsx)(w.Z,{mr:1}),(0,O.jsx)(g.ZP,we(we({},Ae),{},{onClick:function(){n.push("/pipelines/[pipeline]","/pipelines/".concat(p))},title:"Detail",children:(0,O.jsx)(W.Open,{default:!0,size:2*de.iI})})),(0,O.jsx)(w.Z,{mr:1}),(0,O.jsx)(g.ZP,we(we({},Ae),{},{onClick:function(){n.push("/pipelines/[pipeline]/logs","/pipelines/".concat(p,"/logs"))},title:"Logs",children:(0,O.jsx)(W.File,{default:!0,size:2*de.iI})}))]},"chevron_icon_".concat(i))]})),rowsGroupedByIndex:u,sortableColumnIndexes:sn,sortedColumn:pn,stickyHeader:!0,uuid:"pipelines_table"})}),[xn,On,hn,qe,Ne,n,De,Be,Me,Ln,sn,pn,Ke,wn]),bi=(0,p.useMemo)((function(){return mi(ln,di,pi)}),[ln,mi,di,pi]),gi=(0,p.useMemo)((function(){return mi(cn,vi,hi)}),[cn,mi,vi,hi]),Zi=(0,p.useMemo)((function(){return(null==ln?void 0:ln.length)||0}),[ln]),ji=(0,p.useMemo)((function(){return(null==cn?void 0:cn.length)||0}),[cn]),Ci=(0,p.useMemo)((function(){return(!We||ye.uuid===Ve)&&!Zi||We&&Te.uuid===Ve&&!ji}),[We,Zi,ji,Ve]),_i=(0,p.useMemo)((function(){var e=null==ze?void 0:ze[ce.$D.LIMIT];return(0,O.jsxs)(P.ZP,{alignItems:"center",children:[(0,O.jsx)(T.ZP,{muted:!0,small:!0,children:"Per page"}),(0,O.jsx)(w.Z,{mr:1}),(0,O.jsxs)(L.Z,{compact:!0,onChange:function(e){var n;return(0,Ze.u)((n={},(0,o.Z)(n,ce.$D.LIMIT,e.target.value),(0,o.Z)(n,ce.$D.OFFSET,0),n),{pushHistory:!0})},small:!0,value:e,children:[e&&(e>5*D.Q||e%D.Q)&&(0,O.jsx)("option",{value:e,children:e}),(0,_e.w6)(5).map((function(e,n){var i=(n+1)*D.Q;return(0,O.jsx)("option",{value:i,children:i},i)}))]})]})}),[ze]),xi=(0,p.useMemo)((function(){var e,n,i=Je;We&&Te.uuid===Ve&&(i=un);var t=(null===(e=i)||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.count)||0,u=(null==ze?void 0:ze[ce.$D.LIMIT])||D.Q,r=(null==ze?void 0:ze[ce.$D.OFFSET])||0,l=Math.ceil(t/u);return(0,O.jsx)(w.Z,{p:de.cd,children:(0,O.jsx)(D.ZP,{maxPages:D.Et,onUpdate:function(e){var n=Number(e);(0,Ze.u)((0,o.Z)({},ce.$D.OFFSET,n*u))},page:Math.floor(r/u),totalPages:l})})}),[Je,un,We,ze,Ve]);return(0,O.jsxs)(_.Z,{errors:Fe,setErrors:Ye,subheaderChildren:(0,O.jsxs)(P.ZP,{alignItems:"center",justifyContent:"space-between",children:[ci,_i]}),title:"Pipelines",uuid:"pipelines/index",children:[We&&(0,O.jsx)(w.Z,{px:de.cd,ref:i,children:(0,O.jsx)(Z.Z,{noPadding:!0,onClickTab:function(e){var n,i=e.uuid;return(0,Ze.u)((n={},(0,o.Z)(n,Oe,i),(0,o.Z)(n,ce.$D.OFFSET,0),n),{pushHistory:!0})},regularSizeText:!0,selectedTabUUID:Ve,tabs:Se.map((function(e){var n=e.Icon,i=e.label;return{Icon:n,label:function(){var e;return i({count:null==Je||null===(e=Je.metadata)||void 0===e?void 0:e.count})},uuid:e.uuid}})),underlineStyle:!0})}),Ci?(0,O.jsx)(w.Z,{p:de.Mq,children:Je?(0,O.jsx)(T.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No pipelines available"}):(0,O.jsx)(U.Z,{inverted:!0,large:!0})}):null,(0,O.jsxs)(ve.cl,{hide:Ci,includePadding:!!fn,maxHeight:"calc(100vh - ".concat(J.Mz+74+(G||44)+68,"px)"),children:[(!We||ye.uuid===Ve)&&bi,We&&Te.uuid===Ve&&gi]}),(0,O.jsx)("div",{ref:l,children:xi})]})}De.getInitialProps=(0,t.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Me=(0,G.Z)(De)},79274:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines",function(){return i(55620)}])},80022:function(e,n,i){"use strict";function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(n,{Z:function(){return t}})},15544:function(e,n,i){"use strict";function t(e){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(e)}i.d(n,{Z:function(){return t}})},13692:function(e,n,i){"use strict";i.d(n,{Z:function(){return u}});var t=i(61049);function u(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,t.Z)(e,n)}},93189:function(e,n,i){"use strict";i.d(n,{Z:function(){return r}});var t=i(12539),u=i(80022);function r(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,u.Z)(e)}}},function(e){e.O(0,[1557,4241,5544,523,3548,5627,9774,2888,179],(function(){return n=79274,e(e.s=n);var n}));var n=e.O();_N_E=n}]);