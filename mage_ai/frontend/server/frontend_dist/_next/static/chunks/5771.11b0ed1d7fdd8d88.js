"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5771],{17463:function(e,t,i){i.d(t,{p:function(){return n}});var n={exports:{}}},45493:function(e,t,i){function n(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}function r(e,t){return function(i,n){t(i,n,e)}}i.d(t,{f:function(){return r},g:function(){return n}})},51254:function(e,t,i){i.d(t,{Z:function(){return pe}});var n={exports:{}};function r(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}n.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:r,changeDefaults:function(e){n.exports.defaults=e}};const o=/[&<>"']/,s=/[&<>"']/g,a=/[<>"']|&(?!#?\w+;)/,c=/[<>"']|&(?!#?\w+;)/g,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d=e=>l[e];const u=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function h(e){return e.replace(u,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const p=/(^|[^\[])\^/g;const m=/[^\w:]/g,g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const f={},_=/^[^:]+:\/*[^/]*$/,v=/^([^:]+:)[\s\S]*$/,b=/^([^:]+:\/*[^/]*)[\s\S]*$/;function y(e,t){f[" "+e]||(_.test(e)?f[" "+e]=e+"/":f[" "+e]=w(e,"/",!0));const i=-1===(e=f[" "+e]).indexOf(":");return"//"===t.substring(0,2)?i?t:e.replace(v,"$1")+t:"/"===t.charAt(0)?i?t:e.replace(b,"$1")+t:e+t}function w(e,t,i){const n=e.length;if(0===n)return"";let r=0;for(;r<n;){const o=e.charAt(n-r-1);if(o!==t||i){if(o===t||!i)break;r++}else r++}return e.substr(0,n-r)}var x={escape:function(e,t){if(t){if(o.test(e))return e.replace(s,d)}else if(a.test(e))return e.replace(c,d);return e},unescape:h,edit:function(e,t){e=e.source||e,t=t||"";const i={replace:(t,n)=>(n=(n=n.source||n).replace(p,"$1"),e=e.replace(t,n),i),getRegex:()=>new RegExp(e,t)};return i},cleanUrl:function(e,t,i){if(e){let e;try{e=decodeURIComponent(h(i)).replace(m,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!g.test(i)&&(i=y(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(e){return null}return i},resolveUrl:y,noopTest:{exec:function(){}},merge:function(e){let t,i,n=1;for(;n<arguments.length;n++)for(i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},splitCells:function(e,t){const i=e.replace(/\|/g,((e,t,i)=>{let n=!1,r=t;for(;--r>=0&&"\\"===i[r];)n=!n;return n?"|":" |"})).split(/ \|/);let n=0;if(i[0].trim()||i.shift(),i[i.length-1].trim()||i.pop(),i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i},rtrim:w,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;const i=e.length;let n=0,r=0;for(;r<i;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},repeatString:function(e,t){if(t<1)return"";let i="";for(;t>1;)1&t&&(i+=e),t>>=1,e+=e;return i+e}};const{defaults:C}=n.exports,{rtrim:E,splitCells:S,escape:D,findClosingBracket:T}=x;function k(e,t,i,n){const r=t.href,o=t.title?D(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;const e={type:"link",raw:i,href:r,title:o,text:s,tokens:n.inlineTokens(s,[])};return n.state.inLink=!1,e}return{type:"image",raw:i,href:r,title:o,text:D(s)}}var I=class{constructor(e){this.options=e||C}space(e){const t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:E(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],i=function(e,t){const i=e.match(/^(\s+)(?:```)/);if(null===i)return t;const n=i[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[i]=t;return i.length>=n.length?e.slice(n.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=E(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}const i={type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(e,[]),text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,n,r,o,s,a,c,l,d,u,h=t[1].trim();const p=h.length>1,m={type:"list",raw:"",ordered:p,start:p?+h.slice(0,-1):"",loose:!1,items:[]};h=p?`\\d{1,9}\\${h.slice(-1)}`:`\\${h}`,this.options.pedantic&&(h=p?h:"[*+-]");const g=new RegExp(`^( {0,3}${h})((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))`);for(;e&&!this.rules.block.hr.test(e)&&(t=g.exec(e));){d=t[2].split("\n"),this.options.pedantic?(o=2,u=d[0].trimLeft()):(o=t[2].search(/[^ ]/),o=t[1].length+(o>4?1:o),u=d[0].slice(o-t[1].length)),a=!1,i=t[0],!d[0]&&/^ *$/.test(d[1])&&(i=t[1]+d.slice(0,2).join("\n")+"\n",m.loose=!0,d=[]);const h=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(s=1;s<d.length;s++){if(l=d[s],this.options.pedantic&&(l=l.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),h.test(l)){i=t[1]+d.slice(0,s).join("\n")+"\n";break}if(a){if(!(l.search(/[^ ]/)>=o)&&l.trim()){i=t[1]+d.slice(0,s).join("\n")+"\n";break}u+="\n"+l.slice(o)}else l.trim()||(a=!0),l.search(/[^ ]/)>=o?u+="\n"+l.slice(o):u+="\n"+l}m.loose||(c?m.loose=!0:/\n *\n *$/.test(i)&&(c=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(u),n&&(r="[ ] "!==n[0],u=u.replace(/^\[[ xX]\] +/,""))),m.items.push({type:"list_item",raw:i,task:!!n,checked:r,loose:!1,text:u}),m.raw+=i,e=e.slice(i.length)}m.items[m.items.length-1].raw=i.trimRight(),m.items[m.items.length-1].text=u.trimRight(),m.raw=m.raw.trimRight();const f=m.items.length;for(s=0;s<f;s++)this.lexer.state.top=!1,m.items[s].tokens=this.lexer.blockTokens(m.items[s].text,[]),m.items[s].tokens.some((e=>"space"===e.type))&&(m.loose=!0,m.items[s].loose=!0);return m}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(e.type="paragraph",e.text=this.options.sanitizer?this.options.sanitizer(t[0]):D(t[0]),e.tokens=[],this.lexer.inline(e.text,e.tokens)),e}}def(e){const t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));return{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:S(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let i,n,r,o,s=e.align.length;for(i=0;i<s;i++)/^ *-+: *$/.test(e.align[i])?e.align[i]="right":/^ *:-+: *$/.test(e.align[i])?e.align[i]="center":/^ *:-+ *$/.test(e.align[i])?e.align[i]="left":e.align[i]=null;for(s=e.rows.length,i=0;i<s;i++)e.rows[i]=S(e.rows[i],e.header.length).map((e=>({text:e})));for(s=e.header.length,n=0;n<s;n++)e.header[n].tokens=[],this.lexer.inlineTokens(e.header[n].text,e.header[n].tokens);for(s=e.rows.length,n=0;n<s;n++)for(o=e.rows[n],r=0;r<o.length;r++)o[r].tokens=[],this.lexer.inlineTokens(o[r].text,o[r].tokens);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const e={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}text(e){const t=this.rules.block.text.exec(e);if(t){const e={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:D(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):D(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=E(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=T(t[2],"()");if(e>-1){const i=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let i=t[2],n="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);e&&(i=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(e)?i.slice(1):i.slice(1,-1)),k(t,{href:i?i.replace(this.rules.inline._escapes,"$1"):i,title:n?n.replace(this.rules.inline._escapes,"$1"):n},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let e=(i[2]||i[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e||!e.href){const e=i[0].charAt(0);return{type:"text",raw:e,text:e}}return k(i,e,i[0],this.lexer)}}emStrong(e,t,i=""){let n=this.rules.inline.emStrong.lDelim.exec(e);if(!n)return;if(n[3]&&i.match(/[\p{L}\p{N}]/u))return;const r=n[1]||n[2]||"";if(!r||r&&(""===i||this.rules.inline.punctuation.exec(i))){const i=n[0].length-1;let r,o,s=i,a=0;const c="*"===n[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+i);null!=(n=c.exec(t));){if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!r)continue;if(o=r.length,n[3]||n[4]){s+=o;continue}if((n[5]||n[6])&&i%3&&!((i+o)%3)){a+=o;continue}if(s-=o,s>0)continue;if(o=Math.min(o,o+s+a),Math.min(i,o)%2){const t=e.slice(1,i+n.index+o);return{type:"em",raw:e.slice(0,i+n.index+o+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}const t=e.slice(2,i+n.index+o-1);return{type:"strong",raw:e.slice(0,i+n.index+o+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const i=/[^ ]/.test(e),n=/^ /.test(e)&&/ $/.test(e);return i&&n&&(e=e.substring(1,e.length-1)),e=D(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const i=this.rules.inline.autolink.exec(e);if(i){let e,n;return"@"===i[2]?(e=D(this.options.mangle?t(i[1]):i[1]),n="mailto:"+e):(e=D(i[1]),n=e),{type:"link",raw:i[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let e,n;if("@"===i[2])e=D(this.options.mangle?t(i[0]):i[0]),n="mailto:"+e;else{let t;do{t=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(t!==i[0]);e=D(i[0]),n="www."===i[1]?"http://"+e:e}return{type:"link",raw:i[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const i=this.rules.inline.text.exec(e);if(i){let e;return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):D(i[0]):i[0]:D(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:e}}}};const{noopTest:P,edit:A,merge:R}=x,L={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:P,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};L.def=A(L.def).replace("label",L._label).replace("title",L._title).getRegex(),L.bullet=/(?:[*+-]|\d{1,9}[.)])/,L.listItemStart=A(/^( *)(bull) */).replace("bull",L.bullet).getRegex(),L.list=A(L.list).replace(/bull/g,L.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+L.def.source+")").getRegex(),L._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",L._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,L.html=A(L.html,"i").replace("comment",L._comment).replace("tag",L._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),L.paragraph=A(L._paragraph).replace("hr",L.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",L._tag).getRegex(),L.blockquote=A(L.blockquote).replace("paragraph",L.paragraph).getRegex(),L.normal=R({},L),L.gfm=R({},L.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),L.gfm.table=A(L.gfm.table).replace("hr",L.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",L._tag).getRegex(),L.pedantic=R({},L.normal,{html:A("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",L._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:P,paragraph:A(L.normal._paragraph).replace("hr",L.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",L.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const N={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:P,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:P,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};N.punctuation=A(N.punctuation).replace(/punctuation/g,N._punctuation).getRegex(),N.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,N.escapedEmSt=/\\\*|\\_/g,N._comment=A(L._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),N.emStrong.lDelim=A(N.emStrong.lDelim).replace(/punct/g,N._punctuation).getRegex(),N.emStrong.rDelimAst=A(N.emStrong.rDelimAst,"g").replace(/punct/g,N._punctuation).getRegex(),N.emStrong.rDelimUnd=A(N.emStrong.rDelimUnd,"g").replace(/punct/g,N._punctuation).getRegex(),N._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,N._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,N._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,N.autolink=A(N.autolink).replace("scheme",N._scheme).replace("email",N._email).getRegex(),N._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,N.tag=A(N.tag).replace("comment",N._comment).replace("attribute",N._attribute).getRegex(),N._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,N._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,N._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,N.link=A(N.link).replace("label",N._label).replace("href",N._href).replace("title",N._title).getRegex(),N.reflink=A(N.reflink).replace("label",N._label).getRegex(),N.reflinkSearch=A(N.reflinkSearch,"g").replace("reflink",N.reflink).replace("nolink",N.nolink).getRegex(),N.normal=R({},N),N.pedantic=R({},N.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:A(/^!?\[(label)\]\((.*?)\)/).replace("label",N._label).getRegex(),reflink:A(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",N._label).getRegex()}),N.gfm=R({},N.normal,{escape:A(N.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),N.gfm.url=A(N.gfm.url,"i").replace("email",N.gfm._extended_email).getRegex(),N.breaks=R({},N.gfm,{br:A(N.br).replace("{2,}","*").getRegex(),text:A(N.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var $={block:L,inline:N};const O=I,{defaults:F}=n.exports,{block:M,inline:U}=$,{repeatString:H}=x;function z(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function B(e){let t,i,n="";const r=e.length;for(t=0;t<r;t++)i=e.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),n+="&#"+i+";";return n}const{defaults:W}=n.exports,{cleanUrl:V,escape:q}=x;var j=class{constructor(e){this.options=e||W}code(e,t,i){const n=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,n);null!=t&&t!==e&&(i=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",n?'<pre><code class="'+this.options.langPrefix+q(n,!0)+'">'+(i?e:q(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:q(e,!0))+"</code></pre>\n"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,i,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.slug(i)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,i){const n=t?"ol":"ul";return"<"+n+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+n+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,i){if(null===(e=V(this.options.sanitize,this.options.baseUrl,e)))return i;let n='<a href="'+q(e)+'"';return t&&(n+=' title="'+t+'"'),n+=">"+i+"</a>",n}image(e,t,i){if(null===(e=V(this.options.sanitize,this.options.baseUrl,e)))return i;let n='<img src="'+e+'" alt="'+i+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">",n}text(e){return e}},K=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}},G=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,n=0;if(this.seen.hasOwnProperty(i)){n=this.seen[e];do{n++,i=e+"-"+n}while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=n,this.seen[i]=0),i}slug(e,t={}){const i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}};const Q=j,J=K,Z=G,{defaults:X}=n.exports,{unescape:Y}=x;const ee=class e{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||F,this.options.tokenizer=this.options.tokenizer||new O,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:M.normal,inline:U.normal};this.options.pedantic?(t.block=M.pedantic,t.inline=U.pedantic):this.options.gfm&&(t.block=M.gfm,this.options.breaks?t.inline=U.breaks:t.inline=U.gfm),this.tokenizer.rules=t}static get rules(){return{block:M,inline:U}}static lex(t,i){return new e(i).lex(t)}static lexInline(t,i){return new e(i).inlineTokens(t)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let i,n,r,o;for(this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((n=>!!(i=n.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))))if(i=this.tokenizer.space(e))e=e.substring(i.raw.length),i.type&&t.push(i);else if(i=this.tokenizer.code(e))e=e.substring(i.raw.length),n=t[t.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?t.push(i):(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(i=this.tokenizer.fences(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.heading(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.hr(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.blockquote(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.list(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.html(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.def(e))e=e.substring(i.raw.length),n=t[t.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(n.raw+="\n"+i.raw,n.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(i=this.tokenizer.table(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.lheading(e))e=e.substring(i.raw.length),t.push(i);else{if(r=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const i=e.slice(1);let n;this.options.extensions.startBlock.forEach((function(e){n=e.call({lexer:this},i),"number"==typeof n&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}if(this.state.top&&(i=this.tokenizer.paragraph(r)))n=t[t.length-1],o&&"paragraph"===n.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i),o=r.length!==e.length,e=e.substring(i.raw.length);else if(i=this.tokenizer.text(e))e=e.substring(i.raw.length),n=t[t.length-1],n&&"text"===n.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let i,n,r,o,s,a,c=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(c));)e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,o.index)+"["+H("a",o[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,o.index)+"["+H("a",o[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.escapedEmSt.exec(c));)c=c.slice(0,o.index)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(s||(a=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((n=>!!(i=n.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))))if(i=this.tokenizer.escape(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.tag(e))e=e.substring(i.raw.length),n=t[t.length-1],n&&"text"===i.type&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);else if(i=this.tokenizer.link(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(i.raw.length),n=t[t.length-1],n&&"text"===i.type&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);else if(i=this.tokenizer.emStrong(e,c,a))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.codespan(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.br(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.del(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.autolink(e,B))e=e.substring(i.raw.length),t.push(i);else if(this.state.inLink||!(i=this.tokenizer.url(e,B))){if(r=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const i=e.slice(1);let n;this.options.extensions.startInline.forEach((function(e){n=e.call({lexer:this},i),"number"==typeof n&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}if(i=this.tokenizer.inlineText(r,z))e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(a=i.raw.slice(-1)),s=!0,n=t[t.length-1],n&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(i.raw.length),t.push(i);return t}},te=class e{constructor(e){this.options=e||X,this.options.renderer=this.options.renderer||new Q,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new J,this.slugger=new Z}static parse(t,i){return new e(i).parse(t)}static parseInline(t,i){return new e(i).parseInline(t)}parse(e,t=!0){let i,n,r,o,s,a,c,l,d,u,h,p,m,g,f,_,v,b,y,w="";const x=e.length;for(i=0;i<x;i++)if(u=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[u.type]&&(y=this.options.extensions.renderers[u.type].call({parser:this},u),!1!==y||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)))w+=y||"";else switch(u.type){case"space":continue;case"hr":w+=this.renderer.hr();continue;case"heading":w+=this.renderer.heading(this.parseInline(u.tokens),u.depth,Y(this.parseInline(u.tokens,this.textRenderer)),this.slugger);continue;case"code":w+=this.renderer.code(u.text,u.lang,u.escaped);continue;case"table":for(l="",c="",o=u.header.length,n=0;n<o;n++)c+=this.renderer.tablecell(this.parseInline(u.header[n].tokens),{header:!0,align:u.align[n]});for(l+=this.renderer.tablerow(c),d="",o=u.rows.length,n=0;n<o;n++){for(a=u.rows[n],c="",s=a.length,r=0;r<s;r++)c+=this.renderer.tablecell(this.parseInline(a[r].tokens),{header:!1,align:u.align[r]});d+=this.renderer.tablerow(c)}w+=this.renderer.table(l,d);continue;case"blockquote":d=this.parse(u.tokens),w+=this.renderer.blockquote(d);continue;case"list":for(h=u.ordered,p=u.start,m=u.loose,o=u.items.length,d="",n=0;n<o;n++)f=u.items[n],_=f.checked,v=f.task,g="",f.task&&(b=this.renderer.checkbox(_),m?f.tokens.length>0&&"paragraph"===f.tokens[0].type?(f.tokens[0].text=b+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&"text"===f.tokens[0].tokens[0].type&&(f.tokens[0].tokens[0].text=b+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:b}):g+=b),g+=this.parse(f.tokens,m),d+=this.renderer.listitem(g,v,_);w+=this.renderer.list(d,h,p);continue;case"html":w+=this.renderer.html(u.text);continue;case"paragraph":w+=this.renderer.paragraph(this.parseInline(u.tokens));continue;case"text":for(d=u.tokens?this.parseInline(u.tokens):u.text;i+1<x&&"text"===e[i+1].type;)u=e[++i],d+="\n"+(u.tokens?this.parseInline(u.tokens):u.text);w+=t?this.renderer.paragraph(d):d;continue;default:{const e='Token with "'+u.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return w}parseInline(e,t){t=t||this.renderer;let i,n,r,o="";const s=e.length;for(i=0;i<s;i++)if(n=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]&&(r=this.options.extensions.renderers[n.type].call({parser:this},n),!1!==r||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)))o+=r||"";else switch(n.type){case"escape":case"text":o+=t.text(n.text);break;case"html":o+=t.html(n.text);break;case"link":o+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":o+=t.image(n.href,n.title,n.text);break;case"strong":o+=t.strong(this.parseInline(n.tokens,t));break;case"em":o+=t.em(this.parseInline(n.tokens,t));break;case"codespan":o+=t.codespan(n.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(n.tokens,t));break;default:{const e='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return o}},ie=I,ne=j,re=K,oe=G,{merge:se,checkSanitizeDeprecation:ae,escape:ce}=x,{getDefaults:le,changeDefaults:de,defaults:ue}=n.exports;function he(e,t,i){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(i=t,t=null),t=se({},he.defaults,t||{}),ae(t),i){const n=t.highlight;let r;try{r=ee.lex(e,t)}catch(e){return i(e)}const o=function(e){let o;if(!e)try{t.walkTokens&&he.walkTokens(r,t.walkTokens),o=te.parse(r,t)}catch(t){e=t}return t.highlight=n,e?i(e):i(null,o)};if(!n||n.length<3)return o();if(delete t.highlight,!r.length)return o();let s=0;return he.walkTokens(r,(function(e){"code"===e.type&&(s++,setTimeout((()=>{n(e.text,e.lang,(function(t,i){if(t)return o(t);null!=i&&i!==e.text&&(e.text=i,e.escaped=!0),s--,0===s&&o()}))}),0))})),void(0===s&&o())}try{const i=ee.lex(e,t);return t.walkTokens&&he.walkTokens(i,t.walkTokens),te.parse(i,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ce(e.message+"",!0)+"</pre>";throw e}}he.options=he.setOptions=function(e){return se(he.defaults,e),de(he.defaults),he},he.getDefaults=le,he.defaults=ue,he.use=function(...e){const t=se({},...e),i=he.defaults.extensions||{renderers:{},childTokens:{}};let n;e.forEach((e=>{if(e.extensions&&(n=!0,e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if(e.renderer){const t=i.renderers?i.renderers[e.name]:null;i.renderers[e.name]=t?function(...i){let n=e.renderer.apply(this,i);return!1===n&&(n=t.apply(this,i)),n}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");i[e.level]?i[e.level].unshift(e.tokenizer):i[e.level]=[e.tokenizer],e.start&&("block"===e.level?i.startBlock?i.startBlock.push(e.start):i.startBlock=[e.start]:"inline"===e.level&&(i.startInline?i.startInline.push(e.start):i.startInline=[e.start]))}e.childTokens&&(i.childTokens[e.name]=e.childTokens)}))),e.renderer){const i=he.defaults.renderer||new ne;for(const t in e.renderer){const n=i[t];i[t]=(...r)=>{let o=e.renderer[t].apply(i,r);return!1===o&&(o=n.apply(i,r)),o}}t.renderer=i}if(e.tokenizer){const i=he.defaults.tokenizer||new ie;for(const t in e.tokenizer){const n=i[t];i[t]=(...r)=>{let o=e.tokenizer[t].apply(i,r);return!1===o&&(o=n.apply(i,r)),o}}t.tokenizer=i}if(e.walkTokens){const i=he.defaults.walkTokens;t.walkTokens=t=>{e.walkTokens.call(this,t),i&&i(t)}}n&&(t.extensions=i),he.setOptions(t)}))},he.walkTokens=function(e,t){for(const i of e)switch(t(i),i.type){case"table":for(const e of i.header)he.walkTokens(e.tokens,t);for(const e of i.rows)for(const i of e)he.walkTokens(i.tokens,t);break;case"list":he.walkTokens(i.items,t);break;default:he.defaults.extensions&&he.defaults.extensions.childTokens&&he.defaults.extensions.childTokens[i.type]?he.defaults.extensions.childTokens[i.type].forEach((function(e){he.walkTokens(i[e],t)})):i.tokens&&he.walkTokens(i.tokens,t)}},he.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=se({},he.defaults,t||{}),ae(t);try{const i=ee.lexInline(e,t);return t.walkTokens&&he.walkTokens(i,t.walkTokens),te.parseInline(i,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ce(e.message+"",!0)+"</pre>";throw e}},he.Parser=te,he.parser=te.parse,he.Renderer=ne,he.TextRenderer=re,he.Lexer=ee,he.lexer=ee.lex,he.Tokenizer=ie,he.Slugger=oe,he.parse=he;var pe=he},34032:function(e,t,i){var n;i.d(t,{m:function(){return n}}),function(e){e[e.Null=0]="Null",e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.LineFeed=10]="LineFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.DoubleQuote=34]="DoubleQuote",e[e.Hash=35]="Hash",e[e.DollarSign=36]="DollarSign",e[e.PercentSign=37]="PercentSign",e[e.Ampersand=38]="Ampersand",e[e.SingleQuote=39]="SingleQuote",e[e.OpenParen=40]="OpenParen",e[e.CloseParen=41]="CloseParen",e[e.Asterisk=42]="Asterisk",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Period=46]="Period",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit1=49]="Digit1",e[e.Digit2=50]="Digit2",e[e.Digit3=51]="Digit3",e[e.Digit4=52]="Digit4",e[e.Digit5=53]="Digit5",e[e.Digit6=54]="Digit6",e[e.Digit7=55]="Digit7",e[e.Digit8=56]="Digit8",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.Semicolon=59]="Semicolon",e[e.LessThan=60]="LessThan",e[e.Equals=61]="Equals",e[e.GreaterThan=62]="GreaterThan",e[e.QuestionMark=63]="QuestionMark",e[e.AtSign=64]="AtSign",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.OpenSquareBracket=91]="OpenSquareBracket",e[e.Backslash=92]="Backslash",e[e.CloseSquareBracket=93]="CloseSquareBracket",e[e.Caret=94]="Caret",e[e.Underline=95]="Underline",e[e.BackTick=96]="BackTick",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace",e[e.Tilde=126]="Tilde",e[e.NoBreakSpace=160]="NoBreakSpace",e[e.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",e[e.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",e[e.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",e[e.U_Combining_Tilde=771]="U_Combining_Tilde",e[e.U_Combining_Macron=772]="U_Combining_Macron",e[e.U_Combining_Overline=773]="U_Combining_Overline",e[e.U_Combining_Breve=774]="U_Combining_Breve",e[e.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",e[e.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",e[e.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",e[e.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",e[e.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",e[e.U_Combining_Caron=780]="U_Combining_Caron",e[e.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",e[e.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",e[e.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",e[e.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",e[e.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",e[e.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",e[e.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",e[e.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",e[e.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",e[e.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",e[e.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",e[e.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",e[e.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",e[e.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",e[e.U_Combining_Horn=795]="U_Combining_Horn",e[e.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",e[e.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",e[e.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",e[e.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",e[e.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",e[e.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",e[e.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",e[e.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",e[e.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",e[e.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",e[e.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",e[e.U_Combining_Cedilla=807]="U_Combining_Cedilla",e[e.U_Combining_Ogonek=808]="U_Combining_Ogonek",e[e.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",e[e.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",e[e.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",e[e.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",e[e.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",e[e.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",e[e.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",e[e.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",e[e.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",e[e.U_Combining_Low_Line=818]="U_Combining_Low_Line",e[e.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",e[e.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",e[e.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",e[e.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",e[e.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",e[e.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",e[e.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",e[e.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",e[e.U_Combining_Square_Below=827]="U_Combining_Square_Below",e[e.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",e[e.U_Combining_X_Above=829]="U_Combining_X_Above",e[e.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",e[e.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",e[e.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",e[e.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",e[e.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",e[e.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",e[e.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",e[e.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",e[e.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",e[e.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",e[e.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",e[e.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",e[e.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",e[e.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",e[e.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",e[e.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",e[e.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",e[e.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",e[e.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",e[e.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",e[e.U_Combining_Fermata=850]="U_Combining_Fermata",e[e.U_Combining_X_Below=851]="U_Combining_X_Below",e[e.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",e[e.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",e[e.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",e[e.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",e[e.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",e[e.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",e[e.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",e[e.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",e[e.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",e[e.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",e[e.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",e[e.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",e[e.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",e[e.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",e[e.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",e[e.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",e[e.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",e[e.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",e[e.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",e[e.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",e[e.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",e[e.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",e[e.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",e[e.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",e[e.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",e[e.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",e[e.LINE_SEPARATOR=8232]="LINE_SEPARATOR",e[e.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",e[e.NEXT_LINE=133]="NEXT_LINE",e[e.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",e[e.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",e[e.U_DIAERESIS=168]="U_DIAERESIS",e[e.U_MACRON=175]="U_MACRON",e[e.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",e[e.U_CEDILLA=184]="U_CEDILLA",e[e.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",e[e.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",e[e.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",e[e.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",e[e.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",e[e.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",e[e.U_BREVE=728]="U_BREVE",e[e.U_DOT_ABOVE=729]="U_DOT_ABOVE",e[e.U_RING_ABOVE=730]="U_RING_ABOVE",e[e.U_OGONEK=731]="U_OGONEK",e[e.U_SMALL_TILDE=732]="U_SMALL_TILDE",e[e.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",e[e.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",e[e.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",e[e.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",e[e.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",e[e.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",e[e.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",e[e.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",e[e.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",e[e.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",e[e.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",e[e.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",e[e.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",e[e.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",e[e.U_GREEK_TONOS=900]="U_GREEK_TONOS",e[e.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",e[e.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",e[e.U_GREEK_PSILI=8127]="U_GREEK_PSILI",e[e.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",e[e.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",e[e.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",e[e.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",e[e.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",e[e.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",e[e.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",e[e.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",e[e.U_GREEK_VARIA=8175]="U_GREEK_VARIA",e[e.U_GREEK_OXIA=8189]="U_GREEK_OXIA",e[e.U_GREEK_DASIA=8190]="U_GREEK_DASIA",e[e.U_IDEOGRAPHIC_FULL_STOP=12290]="U_IDEOGRAPHIC_FULL_STOP",e[e.U_LEFT_CORNER_BRACKET=12300]="U_LEFT_CORNER_BRACKET",e[e.U_RIGHT_CORNER_BRACKET=12301]="U_RIGHT_CORNER_BRACKET",e[e.U_LEFT_BLACK_LENTICULAR_BRACKET=12304]="U_LEFT_BLACK_LENTICULAR_BRACKET",e[e.U_RIGHT_BLACK_LENTICULAR_BRACKET=12305]="U_RIGHT_BLACK_LENTICULAR_BRACKET",e[e.U_OVERLINE=8254]="U_OVERLINE",e[e.UTF8_BOM=65279]="UTF8_BOM",e[e.U_FULLWIDTH_SEMICOLON=65307]="U_FULLWIDTH_SEMICOLON",e[e.U_FULLWIDTH_COMMA=65292]="U_FULLWIDTH_COMMA"}(n||(n={}))},5352:function(e,t,i){i.d(t,{T:function(){return r}});var n=i(59215);const r={add:(0,n.z)("add",6e4),plus:(0,n.z)("plus",6e4),gistNew:(0,n.z)("gist-new",6e4),repoCreate:(0,n.z)("repo-create",6e4),lightbulb:(0,n.z)("lightbulb",60001),lightBulb:(0,n.z)("light-bulb",60001),repo:(0,n.z)("repo",60002),repoDelete:(0,n.z)("repo-delete",60002),gistFork:(0,n.z)("gist-fork",60003),repoForked:(0,n.z)("repo-forked",60003),gitPullRequest:(0,n.z)("git-pull-request",60004),gitPullRequestAbandoned:(0,n.z)("git-pull-request-abandoned",60004),recordKeys:(0,n.z)("record-keys",60005),keyboard:(0,n.z)("keyboard",60005),tag:(0,n.z)("tag",60006),gitPullRequestLabel:(0,n.z)("git-pull-request-label",60006),tagAdd:(0,n.z)("tag-add",60006),tagRemove:(0,n.z)("tag-remove",60006),person:(0,n.z)("person",60007),personFollow:(0,n.z)("person-follow",60007),personOutline:(0,n.z)("person-outline",60007),personFilled:(0,n.z)("person-filled",60007),gitBranch:(0,n.z)("git-branch",60008),gitBranchCreate:(0,n.z)("git-branch-create",60008),gitBranchDelete:(0,n.z)("git-branch-delete",60008),sourceControl:(0,n.z)("source-control",60008),mirror:(0,n.z)("mirror",60009),mirrorPublic:(0,n.z)("mirror-public",60009),star:(0,n.z)("star",60010),starAdd:(0,n.z)("star-add",60010),starDelete:(0,n.z)("star-delete",60010),starEmpty:(0,n.z)("star-empty",60010),comment:(0,n.z)("comment",60011),commentAdd:(0,n.z)("comment-add",60011),alert:(0,n.z)("alert",60012),warning:(0,n.z)("warning",60012),search:(0,n.z)("search",60013),searchSave:(0,n.z)("search-save",60013),logOut:(0,n.z)("log-out",60014),signOut:(0,n.z)("sign-out",60014),logIn:(0,n.z)("log-in",60015),signIn:(0,n.z)("sign-in",60015),eye:(0,n.z)("eye",60016),eyeUnwatch:(0,n.z)("eye-unwatch",60016),eyeWatch:(0,n.z)("eye-watch",60016),circleFilled:(0,n.z)("circle-filled",60017),primitiveDot:(0,n.z)("primitive-dot",60017),closeDirty:(0,n.z)("close-dirty",60017),debugBreakpoint:(0,n.z)("debug-breakpoint",60017),debugBreakpointDisabled:(0,n.z)("debug-breakpoint-disabled",60017),debugHint:(0,n.z)("debug-hint",60017),terminalDecorationSuccess:(0,n.z)("terminal-decoration-success",60017),primitiveSquare:(0,n.z)("primitive-square",60018),edit:(0,n.z)("edit",60019),pencil:(0,n.z)("pencil",60019),info:(0,n.z)("info",60020),issueOpened:(0,n.z)("issue-opened",60020),gistPrivate:(0,n.z)("gist-private",60021),gitForkPrivate:(0,n.z)("git-fork-private",60021),lock:(0,n.z)("lock",60021),mirrorPrivate:(0,n.z)("mirror-private",60021),close:(0,n.z)("close",60022),removeClose:(0,n.z)("remove-close",60022),x:(0,n.z)("x",60022),repoSync:(0,n.z)("repo-sync",60023),sync:(0,n.z)("sync",60023),clone:(0,n.z)("clone",60024),desktopDownload:(0,n.z)("desktop-download",60024),beaker:(0,n.z)("beaker",60025),microscope:(0,n.z)("microscope",60025),vm:(0,n.z)("vm",60026),deviceDesktop:(0,n.z)("device-desktop",60026),file:(0,n.z)("file",60027),fileText:(0,n.z)("file-text",60027),more:(0,n.z)("more",60028),ellipsis:(0,n.z)("ellipsis",60028),kebabHorizontal:(0,n.z)("kebab-horizontal",60028),mailReply:(0,n.z)("mail-reply",60029),reply:(0,n.z)("reply",60029),organization:(0,n.z)("organization",60030),organizationFilled:(0,n.z)("organization-filled",60030),organizationOutline:(0,n.z)("organization-outline",60030),newFile:(0,n.z)("new-file",60031),fileAdd:(0,n.z)("file-add",60031),newFolder:(0,n.z)("new-folder",60032),fileDirectoryCreate:(0,n.z)("file-directory-create",60032),trash:(0,n.z)("trash",60033),trashcan:(0,n.z)("trashcan",60033),history:(0,n.z)("history",60034),clock:(0,n.z)("clock",60034),folder:(0,n.z)("folder",60035),fileDirectory:(0,n.z)("file-directory",60035),symbolFolder:(0,n.z)("symbol-folder",60035),logoGithub:(0,n.z)("logo-github",60036),markGithub:(0,n.z)("mark-github",60036),github:(0,n.z)("github",60036),terminal:(0,n.z)("terminal",60037),console:(0,n.z)("console",60037),repl:(0,n.z)("repl",60037),zap:(0,n.z)("zap",60038),symbolEvent:(0,n.z)("symbol-event",60038),error:(0,n.z)("error",60039),stop:(0,n.z)("stop",60039),variable:(0,n.z)("variable",60040),symbolVariable:(0,n.z)("symbol-variable",60040),array:(0,n.z)("array",60042),symbolArray:(0,n.z)("symbol-array",60042),symbolModule:(0,n.z)("symbol-module",60043),symbolPackage:(0,n.z)("symbol-package",60043),symbolNamespace:(0,n.z)("symbol-namespace",60043),symbolObject:(0,n.z)("symbol-object",60043),symbolMethod:(0,n.z)("symbol-method",60044),symbolFunction:(0,n.z)("symbol-function",60044),symbolConstructor:(0,n.z)("symbol-constructor",60044),symbolBoolean:(0,n.z)("symbol-boolean",60047),symbolNull:(0,n.z)("symbol-null",60047),symbolNumeric:(0,n.z)("symbol-numeric",60048),symbolNumber:(0,n.z)("symbol-number",60048),symbolStructure:(0,n.z)("symbol-structure",60049),symbolStruct:(0,n.z)("symbol-struct",60049),symbolParameter:(0,n.z)("symbol-parameter",60050),symbolTypeParameter:(0,n.z)("symbol-type-parameter",60050),symbolKey:(0,n.z)("symbol-key",60051),symbolText:(0,n.z)("symbol-text",60051),symbolReference:(0,n.z)("symbol-reference",60052),goToFile:(0,n.z)("go-to-file",60052),symbolEnum:(0,n.z)("symbol-enum",60053),symbolValue:(0,n.z)("symbol-value",60053),symbolRuler:(0,n.z)("symbol-ruler",60054),symbolUnit:(0,n.z)("symbol-unit",60054),activateBreakpoints:(0,n.z)("activate-breakpoints",60055),archive:(0,n.z)("archive",60056),arrowBoth:(0,n.z)("arrow-both",60057),arrowDown:(0,n.z)("arrow-down",60058),arrowLeft:(0,n.z)("arrow-left",60059),arrowRight:(0,n.z)("arrow-right",60060),arrowSmallDown:(0,n.z)("arrow-small-down",60061),arrowSmallLeft:(0,n.z)("arrow-small-left",60062),arrowSmallRight:(0,n.z)("arrow-small-right",60063),arrowSmallUp:(0,n.z)("arrow-small-up",60064),arrowUp:(0,n.z)("arrow-up",60065),bell:(0,n.z)("bell",60066),bold:(0,n.z)("bold",60067),book:(0,n.z)("book",60068),bookmark:(0,n.z)("bookmark",60069),debugBreakpointConditionalUnverified:(0,n.z)("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:(0,n.z)("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:(0,n.z)("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:(0,n.z)("debug-breakpoint-data-unverified",60072),debugBreakpointData:(0,n.z)("debug-breakpoint-data",60073),debugBreakpointDataDisabled:(0,n.z)("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:(0,n.z)("debug-breakpoint-log-unverified",60074),debugBreakpointLog:(0,n.z)("debug-breakpoint-log",60075),debugBreakpointLogDisabled:(0,n.z)("debug-breakpoint-log-disabled",60075),briefcase:(0,n.z)("briefcase",60076),broadcast:(0,n.z)("broadcast",60077),browser:(0,n.z)("browser",60078),bug:(0,n.z)("bug",60079),calendar:(0,n.z)("calendar",60080),caseSensitive:(0,n.z)("case-sensitive",60081),check:(0,n.z)("check",60082),checklist:(0,n.z)("checklist",60083),chevronDown:(0,n.z)("chevron-down",60084),chevronLeft:(0,n.z)("chevron-left",60085),chevronRight:(0,n.z)("chevron-right",60086),chevronUp:(0,n.z)("chevron-up",60087),chromeClose:(0,n.z)("chrome-close",60088),chromeMaximize:(0,n.z)("chrome-maximize",60089),chromeMinimize:(0,n.z)("chrome-minimize",60090),chromeRestore:(0,n.z)("chrome-restore",60091),circleOutline:(0,n.z)("circle-outline",60092),circle:(0,n.z)("circle",60092),debugBreakpointUnverified:(0,n.z)("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:(0,n.z)("terminal-decoration-incomplete",60092),circleSlash:(0,n.z)("circle-slash",60093),circuitBoard:(0,n.z)("circuit-board",60094),clearAll:(0,n.z)("clear-all",60095),clippy:(0,n.z)("clippy",60096),closeAll:(0,n.z)("close-all",60097),cloudDownload:(0,n.z)("cloud-download",60098),cloudUpload:(0,n.z)("cloud-upload",60099),code:(0,n.z)("code",60100),collapseAll:(0,n.z)("collapse-all",60101),colorMode:(0,n.z)("color-mode",60102),commentDiscussion:(0,n.z)("comment-discussion",60103),creditCard:(0,n.z)("credit-card",60105),dash:(0,n.z)("dash",60108),dashboard:(0,n.z)("dashboard",60109),database:(0,n.z)("database",60110),debugContinue:(0,n.z)("debug-continue",60111),debugDisconnect:(0,n.z)("debug-disconnect",60112),debugPause:(0,n.z)("debug-pause",60113),debugRestart:(0,n.z)("debug-restart",60114),debugStart:(0,n.z)("debug-start",60115),debugStepInto:(0,n.z)("debug-step-into",60116),debugStepOut:(0,n.z)("debug-step-out",60117),debugStepOver:(0,n.z)("debug-step-over",60118),debugStop:(0,n.z)("debug-stop",60119),debug:(0,n.z)("debug",60120),deviceCameraVideo:(0,n.z)("device-camera-video",60121),deviceCamera:(0,n.z)("device-camera",60122),deviceMobile:(0,n.z)("device-mobile",60123),diffAdded:(0,n.z)("diff-added",60124),diffIgnored:(0,n.z)("diff-ignored",60125),diffModified:(0,n.z)("diff-modified",60126),diffRemoved:(0,n.z)("diff-removed",60127),diffRenamed:(0,n.z)("diff-renamed",60128),diff:(0,n.z)("diff",60129),diffSidebyside:(0,n.z)("diff-sidebyside",60129),discard:(0,n.z)("discard",60130),editorLayout:(0,n.z)("editor-layout",60131),emptyWindow:(0,n.z)("empty-window",60132),exclude:(0,n.z)("exclude",60133),extensions:(0,n.z)("extensions",60134),eyeClosed:(0,n.z)("eye-closed",60135),fileBinary:(0,n.z)("file-binary",60136),fileCode:(0,n.z)("file-code",60137),fileMedia:(0,n.z)("file-media",60138),filePdf:(0,n.z)("file-pdf",60139),fileSubmodule:(0,n.z)("file-submodule",60140),fileSymlinkDirectory:(0,n.z)("file-symlink-directory",60141),fileSymlinkFile:(0,n.z)("file-symlink-file",60142),fileZip:(0,n.z)("file-zip",60143),files:(0,n.z)("files",60144),filter:(0,n.z)("filter",60145),flame:(0,n.z)("flame",60146),foldDown:(0,n.z)("fold-down",60147),foldUp:(0,n.z)("fold-up",60148),fold:(0,n.z)("fold",60149),folderActive:(0,n.z)("folder-active",60150),folderOpened:(0,n.z)("folder-opened",60151),gear:(0,n.z)("gear",60152),gift:(0,n.z)("gift",60153),gistSecret:(0,n.z)("gist-secret",60154),gist:(0,n.z)("gist",60155),gitCommit:(0,n.z)("git-commit",60156),gitCompare:(0,n.z)("git-compare",60157),compareChanges:(0,n.z)("compare-changes",60157),gitMerge:(0,n.z)("git-merge",60158),githubAction:(0,n.z)("github-action",60159),githubAlt:(0,n.z)("github-alt",60160),globe:(0,n.z)("globe",60161),grabber:(0,n.z)("grabber",60162),graph:(0,n.z)("graph",60163),gripper:(0,n.z)("gripper",60164),heart:(0,n.z)("heart",60165),home:(0,n.z)("home",60166),horizontalRule:(0,n.z)("horizontal-rule",60167),hubot:(0,n.z)("hubot",60168),inbox:(0,n.z)("inbox",60169),issueReopened:(0,n.z)("issue-reopened",60171),issues:(0,n.z)("issues",60172),italic:(0,n.z)("italic",60173),jersey:(0,n.z)("jersey",60174),json:(0,n.z)("json",60175),kebabVertical:(0,n.z)("kebab-vertical",60176),key:(0,n.z)("key",60177),law:(0,n.z)("law",60178),lightbulbAutofix:(0,n.z)("lightbulb-autofix",60179),linkExternal:(0,n.z)("link-external",60180),link:(0,n.z)("link",60181),listOrdered:(0,n.z)("list-ordered",60182),listUnordered:(0,n.z)("list-unordered",60183),liveShare:(0,n.z)("live-share",60184),loading:(0,n.z)("loading",60185),location:(0,n.z)("location",60186),mailRead:(0,n.z)("mail-read",60187),mail:(0,n.z)("mail",60188),markdown:(0,n.z)("markdown",60189),megaphone:(0,n.z)("megaphone",60190),mention:(0,n.z)("mention",60191),milestone:(0,n.z)("milestone",60192),gitPullRequestMilestone:(0,n.z)("git-pull-request-milestone",60192),mortarBoard:(0,n.z)("mortar-board",60193),move:(0,n.z)("move",60194),multipleWindows:(0,n.z)("multiple-windows",60195),mute:(0,n.z)("mute",60196),noNewline:(0,n.z)("no-newline",60197),note:(0,n.z)("note",60198),octoface:(0,n.z)("octoface",60199),openPreview:(0,n.z)("open-preview",60200),package:(0,n.z)("package",60201),paintcan:(0,n.z)("paintcan",60202),pin:(0,n.z)("pin",60203),play:(0,n.z)("play",60204),run:(0,n.z)("run",60204),plug:(0,n.z)("plug",60205),preserveCase:(0,n.z)("preserve-case",60206),preview:(0,n.z)("preview",60207),project:(0,n.z)("project",60208),pulse:(0,n.z)("pulse",60209),question:(0,n.z)("question",60210),quote:(0,n.z)("quote",60211),radioTower:(0,n.z)("radio-tower",60212),reactions:(0,n.z)("reactions",60213),references:(0,n.z)("references",60214),refresh:(0,n.z)("refresh",60215),regex:(0,n.z)("regex",60216),remoteExplorer:(0,n.z)("remote-explorer",60217),remote:(0,n.z)("remote",60218),remove:(0,n.z)("remove",60219),replaceAll:(0,n.z)("replace-all",60220),replace:(0,n.z)("replace",60221),repoClone:(0,n.z)("repo-clone",60222),repoForcePush:(0,n.z)("repo-force-push",60223),repoPull:(0,n.z)("repo-pull",60224),repoPush:(0,n.z)("repo-push",60225),report:(0,n.z)("report",60226),requestChanges:(0,n.z)("request-changes",60227),rocket:(0,n.z)("rocket",60228),rootFolderOpened:(0,n.z)("root-folder-opened",60229),rootFolder:(0,n.z)("root-folder",60230),rss:(0,n.z)("rss",60231),ruby:(0,n.z)("ruby",60232),saveAll:(0,n.z)("save-all",60233),saveAs:(0,n.z)("save-as",60234),save:(0,n.z)("save",60235),screenFull:(0,n.z)("screen-full",60236),screenNormal:(0,n.z)("screen-normal",60237),searchStop:(0,n.z)("search-stop",60238),server:(0,n.z)("server",60240),settingsGear:(0,n.z)("settings-gear",60241),settings:(0,n.z)("settings",60242),shield:(0,n.z)("shield",60243),smiley:(0,n.z)("smiley",60244),sortPrecedence:(0,n.z)("sort-precedence",60245),splitHorizontal:(0,n.z)("split-horizontal",60246),splitVertical:(0,n.z)("split-vertical",60247),squirrel:(0,n.z)("squirrel",60248),starFull:(0,n.z)("star-full",60249),starHalf:(0,n.z)("star-half",60250),symbolClass:(0,n.z)("symbol-class",60251),symbolColor:(0,n.z)("symbol-color",60252),symbolConstant:(0,n.z)("symbol-constant",60253),symbolEnumMember:(0,n.z)("symbol-enum-member",60254),symbolField:(0,n.z)("symbol-field",60255),symbolFile:(0,n.z)("symbol-file",60256),symbolInterface:(0,n.z)("symbol-interface",60257),symbolKeyword:(0,n.z)("symbol-keyword",60258),symbolMisc:(0,n.z)("symbol-misc",60259),symbolOperator:(0,n.z)("symbol-operator",60260),symbolProperty:(0,n.z)("symbol-property",60261),wrench:(0,n.z)("wrench",60261),wrenchSubaction:(0,n.z)("wrench-subaction",60261),symbolSnippet:(0,n.z)("symbol-snippet",60262),tasklist:(0,n.z)("tasklist",60263),telescope:(0,n.z)("telescope",60264),textSize:(0,n.z)("text-size",60265),threeBars:(0,n.z)("three-bars",60266),thumbsdown:(0,n.z)("thumbsdown",60267),thumbsup:(0,n.z)("thumbsup",60268),tools:(0,n.z)("tools",60269),triangleDown:(0,n.z)("triangle-down",60270),triangleLeft:(0,n.z)("triangle-left",60271),triangleRight:(0,n.z)("triangle-right",60272),triangleUp:(0,n.z)("triangle-up",60273),twitter:(0,n.z)("twitter",60274),unfold:(0,n.z)("unfold",60275),unlock:(0,n.z)("unlock",60276),unmute:(0,n.z)("unmute",60277),unverified:(0,n.z)("unverified",60278),verified:(0,n.z)("verified",60279),versions:(0,n.z)("versions",60280),vmActive:(0,n.z)("vm-active",60281),vmOutline:(0,n.z)("vm-outline",60282),vmRunning:(0,n.z)("vm-running",60283),watch:(0,n.z)("watch",60284),whitespace:(0,n.z)("whitespace",60285),wholeWord:(0,n.z)("whole-word",60286),window:(0,n.z)("window",60287),wordWrap:(0,n.z)("word-wrap",60288),zoomIn:(0,n.z)("zoom-in",60289),zoomOut:(0,n.z)("zoom-out",60290),listFilter:(0,n.z)("list-filter",60291),listFlat:(0,n.z)("list-flat",60292),listSelection:(0,n.z)("list-selection",60293),selection:(0,n.z)("selection",60293),listTree:(0,n.z)("list-tree",60294),debugBreakpointFunctionUnverified:(0,n.z)("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:(0,n.z)("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:(0,n.z)("debug-breakpoint-function-disabled",60296),debugStackframeActive:(0,n.z)("debug-stackframe-active",60297),circleSmallFilled:(0,n.z)("circle-small-filled",60298),debugStackframeDot:(0,n.z)("debug-stackframe-dot",60298),terminalDecorationMark:(0,n.z)("terminal-decoration-mark",60298),debugStackframe:(0,n.z)("debug-stackframe",60299),debugStackframeFocused:(0,n.z)("debug-stackframe-focused",60299),debugBreakpointUnsupported:(0,n.z)("debug-breakpoint-unsupported",60300),symbolString:(0,n.z)("symbol-string",60301),debugReverseContinue:(0,n.z)("debug-reverse-continue",60302),debugStepBack:(0,n.z)("debug-step-back",60303),debugRestartFrame:(0,n.z)("debug-restart-frame",60304),debugAlt:(0,n.z)("debug-alt",60305),callIncoming:(0,n.z)("call-incoming",60306),callOutgoing:(0,n.z)("call-outgoing",60307),menu:(0,n.z)("menu",60308),expandAll:(0,n.z)("expand-all",60309),feedback:(0,n.z)("feedback",60310),gitPullRequestReviewer:(0,n.z)("git-pull-request-reviewer",60310),groupByRefType:(0,n.z)("group-by-ref-type",60311),ungroupByRefType:(0,n.z)("ungroup-by-ref-type",60312),account:(0,n.z)("account",60313),gitPullRequestAssignee:(0,n.z)("git-pull-request-assignee",60313),bellDot:(0,n.z)("bell-dot",60314),debugConsole:(0,n.z)("debug-console",60315),library:(0,n.z)("library",60316),output:(0,n.z)("output",60317),runAll:(0,n.z)("run-all",60318),syncIgnored:(0,n.z)("sync-ignored",60319),pinned:(0,n.z)("pinned",60320),githubInverted:(0,n.z)("github-inverted",60321),serverProcess:(0,n.z)("server-process",60322),serverEnvironment:(0,n.z)("server-environment",60323),pass:(0,n.z)("pass",60324),issueClosed:(0,n.z)("issue-closed",60324),stopCircle:(0,n.z)("stop-circle",60325),playCircle:(0,n.z)("play-circle",60326),record:(0,n.z)("record",60327),debugAltSmall:(0,n.z)("debug-alt-small",60328),vmConnect:(0,n.z)("vm-connect",60329),cloud:(0,n.z)("cloud",60330),merge:(0,n.z)("merge",60331),export:(0,n.z)("export",60332),graphLeft:(0,n.z)("graph-left",60333),magnet:(0,n.z)("magnet",60334),notebook:(0,n.z)("notebook",60335),redo:(0,n.z)("redo",60336),checkAll:(0,n.z)("check-all",60337),pinnedDirty:(0,n.z)("pinned-dirty",60338),passFilled:(0,n.z)("pass-filled",60339),circleLargeFilled:(0,n.z)("circle-large-filled",60340),circleLarge:(0,n.z)("circle-large",60341),circleLargeOutline:(0,n.z)("circle-large-outline",60341),combine:(0,n.z)("combine",60342),gather:(0,n.z)("gather",60342),table:(0,n.z)("table",60343),variableGroup:(0,n.z)("variable-group",60344),typeHierarchy:(0,n.z)("type-hierarchy",60345),typeHierarchySub:(0,n.z)("type-hierarchy-sub",60346),typeHierarchySuper:(0,n.z)("type-hierarchy-super",60347),gitPullRequestCreate:(0,n.z)("git-pull-request-create",60348),runAbove:(0,n.z)("run-above",60349),runBelow:(0,n.z)("run-below",60350),notebookTemplate:(0,n.z)("notebook-template",60351),debugRerun:(0,n.z)("debug-rerun",60352),workspaceTrusted:(0,n.z)("workspace-trusted",60353),workspaceUntrusted:(0,n.z)("workspace-untrusted",60354),workspaceUnknown:(0,n.z)("workspace-unknown",60355),terminalCmd:(0,n.z)("terminal-cmd",60356),terminalDebian:(0,n.z)("terminal-debian",60357),terminalLinux:(0,n.z)("terminal-linux",60358),terminalPowershell:(0,n.z)("terminal-powershell",60359),terminalTmux:(0,n.z)("terminal-tmux",60360),terminalUbuntu:(0,n.z)("terminal-ubuntu",60361),terminalBash:(0,n.z)("terminal-bash",60362),arrowSwap:(0,n.z)("arrow-swap",60363),copy:(0,n.z)("copy",60364),personAdd:(0,n.z)("person-add",60365),filterFilled:(0,n.z)("filter-filled",60366),wand:(0,n.z)("wand",60367),debugLineByLine:(0,n.z)("debug-line-by-line",60368),inspect:(0,n.z)("inspect",60369),layers:(0,n.z)("layers",60370),layersDot:(0,n.z)("layers-dot",60371),layersActive:(0,n.z)("layers-active",60372),compass:(0,n.z)("compass",60373),compassDot:(0,n.z)("compass-dot",60374),compassActive:(0,n.z)("compass-active",60375),azure:(0,n.z)("azure",60376),issueDraft:(0,n.z)("issue-draft",60377),gitPullRequestClosed:(0,n.z)("git-pull-request-closed",60378),gitPullRequestDraft:(0,n.z)("git-pull-request-draft",60379),debugAll:(0,n.z)("debug-all",60380),debugCoverage:(0,n.z)("debug-coverage",60381),runErrors:(0,n.z)("run-errors",60382),folderLibrary:(0,n.z)("folder-library",60383),debugContinueSmall:(0,n.z)("debug-continue-small",60384),beakerStop:(0,n.z)("beaker-stop",60385),graphLine:(0,n.z)("graph-line",60386),graphScatter:(0,n.z)("graph-scatter",60387),pieChart:(0,n.z)("pie-chart",60388),bracket:(0,n.z)("bracket",60175),bracketDot:(0,n.z)("bracket-dot",60389),bracketError:(0,n.z)("bracket-error",60390),lockSmall:(0,n.z)("lock-small",60391),azureDevops:(0,n.z)("azure-devops",60392),verifiedFilled:(0,n.z)("verified-filled",60393),newline:(0,n.z)("newline",60394),layout:(0,n.z)("layout",60395),layoutActivitybarLeft:(0,n.z)("layout-activitybar-left",60396),layoutActivitybarRight:(0,n.z)("layout-activitybar-right",60397),layoutPanelLeft:(0,n.z)("layout-panel-left",60398),layoutPanelCenter:(0,n.z)("layout-panel-center",60399),layoutPanelJustify:(0,n.z)("layout-panel-justify",60400),layoutPanelRight:(0,n.z)("layout-panel-right",60401),layoutPanel:(0,n.z)("layout-panel",60402),layoutSidebarLeft:(0,n.z)("layout-sidebar-left",60403),layoutSidebarRight:(0,n.z)("layout-sidebar-right",60404),layoutStatusbar:(0,n.z)("layout-statusbar",60405),layoutMenubar:(0,n.z)("layout-menubar",60406),layoutCentered:(0,n.z)("layout-centered",60407),target:(0,n.z)("target",60408),indent:(0,n.z)("indent",60409),recordSmall:(0,n.z)("record-small",60410),errorSmall:(0,n.z)("error-small",60411),terminalDecorationError:(0,n.z)("terminal-decoration-error",60411),arrowCircleDown:(0,n.z)("arrow-circle-down",60412),arrowCircleLeft:(0,n.z)("arrow-circle-left",60413),arrowCircleRight:(0,n.z)("arrow-circle-right",60414),arrowCircleUp:(0,n.z)("arrow-circle-up",60415),layoutSidebarRightOff:(0,n.z)("layout-sidebar-right-off",60416),layoutPanelOff:(0,n.z)("layout-panel-off",60417),layoutSidebarLeftOff:(0,n.z)("layout-sidebar-left-off",60418),blank:(0,n.z)("blank",60419),heartFilled:(0,n.z)("heart-filled",60420),map:(0,n.z)("map",60421),mapHorizontal:(0,n.z)("map-horizontal",60421),foldHorizontal:(0,n.z)("fold-horizontal",60421),mapFilled:(0,n.z)("map-filled",60422),mapHorizontalFilled:(0,n.z)("map-horizontal-filled",60422),foldHorizontalFilled:(0,n.z)("fold-horizontal-filled",60422),circleSmall:(0,n.z)("circle-small",60423),bellSlash:(0,n.z)("bell-slash",60424),bellSlashDot:(0,n.z)("bell-slash-dot",60425),commentUnresolved:(0,n.z)("comment-unresolved",60426),gitPullRequestGoToChanges:(0,n.z)("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:(0,n.z)("git-pull-request-new-changes",60428),searchFuzzy:(0,n.z)("search-fuzzy",60429),commentDraft:(0,n.z)("comment-draft",60430),send:(0,n.z)("send",60431),sparkle:(0,n.z)("sparkle",60432),insert:(0,n.z)("insert",60433),mic:(0,n.z)("mic",60434),thumbsdownFilled:(0,n.z)("thumbsdown-filled",60435),thumbsupFilled:(0,n.z)("thumbsup-filled",60436),coffee:(0,n.z)("coffee",60437),snake:(0,n.z)("snake",60438),game:(0,n.z)("game",60439),vr:(0,n.z)("vr",60440),chip:(0,n.z)("chip",60441),piano:(0,n.z)("piano",60442),music:(0,n.z)("music",60443),micFilled:(0,n.z)("mic-filled",60444),repoFetch:(0,n.z)("repo-fetch",60445),copilot:(0,n.z)("copilot",60446),lightbulbSparkle:(0,n.z)("lightbulb-sparkle",60447),robot:(0,n.z)("robot",60448),sparkleFilled:(0,n.z)("sparkle-filled",60449),diffSingle:(0,n.z)("diff-single",60450),diffMultiple:(0,n.z)("diff-multiple",60451),surroundWith:(0,n.z)("surround-with",60452),share:(0,n.z)("share",60453),gitStash:(0,n.z)("git-stash",60454),gitStashApply:(0,n.z)("git-stash-apply",60455),gitStashPop:(0,n.z)("git-stash-pop",60456),vscode:(0,n.z)("vscode",60457),vscodeInsiders:(0,n.z)("vscode-insiders",60458),codeOss:(0,n.z)("code-oss",60459),runCoverage:(0,n.z)("run-coverage",60460),runAllCoverage:(0,n.z)("run-all-coverage",60461),coverage:(0,n.z)("coverage",60462),githubProject:(0,n.z)("github-project",60463),mapVertical:(0,n.z)("map-vertical",60464),foldVertical:(0,n.z)("fold-vertical",60464),mapVerticalFilled:(0,n.z)("map-vertical-filled",60465),foldVerticalFilled:(0,n.z)("fold-vertical-filled",60465),goToSearch:(0,n.z)("go-to-search",60466),percentage:(0,n.z)("percentage",60467),sortPercentage:(0,n.z)("sort-percentage",60467),attach:(0,n.z)("attach",60468)}},59215:function(e,t,i){i.d(t,{u:function(){return s},z:function(){return o}});var n=i(47635);const r=Object.create(null);function o(e,t){if((0,n.HD)(t)){const i=r[t];if(void 0===i)throw new Error(`${e} references an unknown codicon: ${t}`);t=i}return r[e]=t,{id:e}}function s(){return r}},21033:function(e,t,i){function n(e,t){const i=this;let n,r=!1;return function(){if(r)return n;if(r=!0,t)try{n=e.apply(i,arguments)}finally{t()}else n=e.apply(i,arguments);return n}}i.d(t,{M:function(){return n}})},97698:function(e,t,i){var n;i.d(t,{$:function(){return n}}),function(e){function t(e){return e&&"object"==typeof e&&"function"==typeof e[Symbol.iterator]}e.is=t;const i=Object.freeze([]);function*n(e){yield e}e.empty=function(){return i},e.single=n,e.wrap=function(e){return t(e)?e:n(e)},e.from=function(e){return e||i},e.reverse=function*(e){for(let t=e.length-1;t>=0;t--)yield e[t]},e.isEmpty=function(e){return!e||!0===e[Symbol.iterator]().next().done},e.first=function(e){return e[Symbol.iterator]().next().value},e.some=function(e,t){let i=0;for(const n of e)if(t(n,i++))return!0;return!1},e.find=function(e,t){for(const i of e)if(t(i))return i},e.filter=function*(e,t){for(const i of e)t(i)&&(yield i)},e.map=function*(e,t){let i=0;for(const n of e)yield t(n,i++)},e.flatMap=function*(e,t){let i=0;for(const n of e)yield*t(n,i++)},e.concat=function*(...e){for(const t of e)yield*t},e.reduce=function(e,t,i){let n=i;for(const i of e)n=t(n,i);return n},e.slice=function*(e,t,i=e.length){for(t<0&&(t+=e.length),i<0?i+=e.length:i>e.length&&(i=e.length);t<i;t++)yield e[t]},e.consume=function(t,i=Number.POSITIVE_INFINITY){const n=[];if(0===i)return[n,t];const r=t[Symbol.iterator]();for(let t=0;t<i;t++){const t=r.next();if(t.done)return[n,e.empty()];n.push(t.value)}return[n,{[Symbol.iterator](){return r}}]},e.asyncToArray=async function(e){const t=[];for await(const i of e)t.push(i);return Promise.resolve(t)}}(n||(n={}))},40048:function(e,t,i){i.d(t,{o:function(){return n}});class n{constructor(e){this.executor=e,this._didRun=!1}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}},65045:function(e,t,i){var n;i.d(t,{m:function(){return n}}),function(e){e[e.Uri=1]="Uri",e[e.Regexp=2]="Regexp",e[e.ScmResource=3]="ScmResource",e[e.ScmResourceGroup=4]="ScmResourceGroup",e[e.ScmProvider=5]="ScmProvider",e[e.CommentController=6]="CommentController",e[e.CommentThread=7]="CommentThread",e[e.CommentThreadInstance=8]="CommentThreadInstance",e[e.CommentThreadReply=9]="CommentThreadReply",e[e.CommentNode=10]="CommentNode",e[e.CommentThreadNode=11]="CommentThreadNode",e[e.TimelineActionContext=12]="TimelineActionContext",e[e.NotebookCellActionContext=13]="NotebookCellActionContext",e[e.NotebookActionContext=14]="NotebookActionContext",e[e.TerminalContext=15]="TerminalContext",e[e.TestItemContext=16]="TestItemContext",e[e.Date=17]="Date",e[e.TestMessageMenuArgs=18]="TestMessageMenuArgs"}(n||(n={}))},95960:function(e,t,i){i.d(t,{PP:function(){return o},vW:function(){return n}});i(15229);const n=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const r=/^(.+)\/(.+?)(;.+)?$/;function o(e,t){const i=r.exec(e);return i?`${i[1].toLowerCase()}/${i[2].toLowerCase()}${i[3]??""}`:t?void 0:e}},84018:function(e,t,i){i.d(t,{$P:function(){return c},IZ:function(){return n}});class n{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return function(e,t){const i=o.get(e);if(i)return i;const n=function(e,t){const i=o.get(e);if(i)return i;const n=t.owner?function(e){const t=a.get(e);if(t)return t;const i=function(e){const t=e.constructor;if(t)return t.name;return"Object"}(e);let n=s.get(i)??0;n++,s.set(i,n);const r=1===n?i:`${i}#${n}`;return a.set(e,r),r}(t.owner)+".":"";let r;const l=t.debugNameSource;if(void 0!==l){if("function"!=typeof l)return n+l;if(r=l(),void 0!==r)return n+r}const d=t.referenceFn;if(void 0!==d&&(r=c(d),void 0!==r))return n+r;if(void 0!==t.owner){const i=function(e,t){for(const i in e)if(e[i]===t)return i;return}(t.owner,e);if(void 0!==i)return n+i}return}(e,t);if(n){let t=r.get(n)??0;t++,r.set(n,t);const i=1===t?n:`${n}#${t}`;return o.set(e,i),i}return}(e,this)}}const r=new Map,o=new WeakMap;const s=new Map,a=new WeakMap;function c(e){const t=e.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t),n=i?i[1]:void 0;return n?.trim()}},81274:function(e,t,i){let n;function r(){return n}i.d(t,{j:function(){return r}})},61826:function(e,t,i){i.d(t,{B:function(){return n},_:function(){return r}});const n=e=>{performance.mark(e)},r=()=>{let e=performance.timeOrigin;"number"!=typeof e&&(e=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const t=[{name:"code/timeOrigin",startTime:Math.round(e)}];for(const i of performance.getEntriesByType("mark"))t.push({name:i.name,startTime:Math.round(e+i.startTime)});return t}},93293:function(e,t,i){i.d(t,{F:function(){return o}});var n=i(97698);const r=Symbol("unset");class o{constructor(){this.root=new a,this._size=0}get size(){return this._size}get nodes(){return this.root.children?.values()||n.$.empty()}insert(e,t,i){this.opNode(e,(e=>e._value=t),i)}mutate(e,t){this.opNode(e,(e=>e._value=t(e._value===r?void 0:e._value)))}mutatePath(e,t){this.opNode(e,(()=>{}),(e=>t(e)))}delete(e){const t=this.getPathToKey(e);if(!t)return;let i=t.length-1;const n=t[i].node._value;if(n!==r){for(this._size--,t[i].node._value=r;i>0;i--){const{node:e,part:n}=t[i];if(e.children?.size||e._value!==r)break;t[i-1].node.children.delete(n)}return n}}*deleteRecursive(e){const t=this.getPathToKey(e);if(!t)return;const i=t[t.length-1].node;for(let e=t.length-1;e>0;e--){const i=t[e-1];if(i.node.children.delete(t[e].part),i.node.children.size>0||i.node._value!==r)break}for(const e of s(i))e._value!==r&&(this._size--,yield e._value)}find(e){let t=this.root;for(const i of e){const e=t.children?.get(i);if(!e)return;t=e}return t._value===r?void 0:t._value}hasKeyOrParent(e){let t=this.root;for(const i of e){const e=t.children?.get(i);if(!e)return!1;if(e._value!==r)return!0;t=e}return!1}hasKeyOrChildren(e){let t=this.root;for(const i of e){const e=t.children?.get(i);if(!e)return!1;t=e}return!0}hasKey(e){let t=this.root;for(const i of e){const e=t.children?.get(i);if(!e)return!1;t=e}return t._value!==r}getPathToKey(e){const t=[{part:"",node:this.root}];let i=0;for(const n of e){const e=t[i].node.children?.get(n);if(!e)return;t.push({part:n,node:e}),i++}return t}opNode(e,t,i){let n=this.root;for(const t of e){if(n.children)if(n.children.has(t))n=n.children.get(t);else{const e=new a;n.children.set(t,e),n=e}else{const e=new a;n.children=new Map([[t,e]]),n=e}i?.(n)}const o=n._value===r?0:1;t(n);const s=n._value===r?0:1;this._size+=s-o}*values(){for(const{_value:e}of s(this.root))e!==r&&(yield e)}}function*s(e){const t=[e];for(;t.length>0;){const e=t.pop();if(yield e,e.children)for(const i of e.children.values())t.push(i)}}class a{constructor(){this._value=r}get value(){return this._value===r?void 0:this._value}set value(e){this._value=void 0===e?r:e}}},74120:function(e,t,i){i.d(t,{Z:function(){return o}});var n,r=i(88023);!function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(n||(n={})),function(e){const t="error",i="warning",n="info";e.fromValue=function(o){return o?(0,r.qq)(t,o)?e.Error:(0,r.qq)(i,o)||(0,r.qq)("warn",o)?e.Warning:(0,r.qq)(n,o)?e.Info:e.Ignore:e.Ignore},e.toString=function(r){switch(r){case e.Error:return t;case e.Warning:return i;case e.Info:return n;default:return"ignore"}}}(n||(n={}));var o=n},43437:function(e,t,i){var n;function r(e){return e<0?0:e>n.MAX_UINT_8?n.MAX_UINT_8:0|e}function o(e){return e<0?0:e>n.MAX_UINT_32?n.MAX_UINT_32:0|e}i.d(t,{AE:function(){return o},Ki:function(){return r},gT:function(){return n}}),function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"}(n||(n={}))},42731:function(e,t,i){i.d(t,{_9:function(){return m},ov:function(){return p},qP:function(){return y}});var n=i(34032),r=i(65045),o=i(15229),s=i(11547);const a=/^\w[\w\d+.-]*$/,c=/^\//,l=/^\/\//;const d="",u="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class p{static isUri(e){return e instanceof p||!!e&&("string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"string"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString)}constructor(e,t,i,n,r,o=!1){"object"==typeof e?(this.scheme=e.scheme||d,this.authority=e.authority||d,this.path=e.path||d,this.query=e.query||d,this.fragment=e.fragment||d):(this.scheme=function(e,t){return e||t?e:"file"}(e,o),this.authority=t||d,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==u&&(t=u+t):t=u}return t}(this.scheme,i||d),this.query=n||d,this.fragment=r||d,function(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!a.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!c.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,o))}get fsPath(){return y(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:r,fragment:o}=e;return void 0===t?t=this.scheme:null===t&&(t=d),void 0===i?i=this.authority:null===i&&(i=d),void 0===n?n=this.path:null===n&&(n=d),void 0===r?r=this.query:null===r&&(r=d),void 0===o?o=this.fragment:null===o&&(o=d),t===this.scheme&&i===this.authority&&n===this.path&&r===this.query&&o===this.fragment?this:new f(t,i,n,r,o)}static parse(e,t=!1){const i=h.exec(e);return i?new f(i[2]||d,E(i[4]||d),E(i[5]||d),E(i[7]||d),E(i[9]||d),t):new f(d,d,d,d,d)}static file(e){let t=d;if(s.ED&&(e=e.replace(/\\/g,u)),e[0]===u&&e[1]===u){const i=e.indexOf(u,2);-1===i?(t=e.substring(2),e=u):(t=e.substring(2,i),e=e.substring(i)||u)}return new f("file",t,e,d,d)}static from(e,t){return new f(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return i=s.ED&&"file"===e.scheme?p.file(o.Ku.join(y(e,!0),...t)).path:o.KR.join(e.path,...t),e.with({path:i})}toString(e=!1){return w(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof p)return e;{const t=new f(e);return t._formatted=e.external??null,t._fsPath=e._sep===g?e.fsPath??null:null,t}}return e}}function m(e){return!(!e||"object"!=typeof e)&&!("string"!=typeof e.scheme||"string"!=typeof e.authority&&void 0!==e.authority||"string"!=typeof e.path&&void 0!==e.path||"string"!=typeof e.query&&void 0!==e.query||"string"!=typeof e.fragment&&void 0!==e.fragment)}const g=s.ED?1:void 0;class f extends p{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=y(this,!1)),this._fsPath}toString(e=!1){return e?w(this,!0):(this._formatted||(this._formatted=w(this,!1)),this._formatted)}toJSON(){const e={$mid:r.m.Uri};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=g),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const _={[n.m.Colon]:"%3A",[n.m.Slash]:"%2F",[n.m.QuestionMark]:"%3F",[n.m.Hash]:"%23",[n.m.OpenSquareBracket]:"%5B",[n.m.CloseSquareBracket]:"%5D",[n.m.AtSign]:"%40",[n.m.ExclamationMark]:"%21",[n.m.DollarSign]:"%24",[n.m.Ampersand]:"%26",[n.m.SingleQuote]:"%27",[n.m.OpenParen]:"%28",[n.m.CloseParen]:"%29",[n.m.Asterisk]:"%2A",[n.m.Plus]:"%2B",[n.m.Comma]:"%2C",[n.m.Semicolon]:"%3B",[n.m.Equals]:"%3D",[n.m.Space]:"%20"};function v(e,t,i){let r,o=-1;for(let s=0;s<e.length;s++){const a=e.charCodeAt(s);if(a>=n.m.a&&a<=n.m.z||a>=n.m.A&&a<=n.m.Z||a>=n.m.Digit0&&a<=n.m.Digit9||a===n.m.Dash||a===n.m.Period||a===n.m.Underline||a===n.m.Tilde||t&&a===n.m.Slash||i&&a===n.m.OpenSquareBracket||i&&a===n.m.CloseSquareBracket||i&&a===n.m.Colon)-1!==o&&(r+=encodeURIComponent(e.substring(o,s)),o=-1),void 0!==r&&(r+=e.charAt(s));else{void 0===r&&(r=e.substr(0,s));const t=_[a];void 0!==t?(-1!==o&&(r+=encodeURIComponent(e.substring(o,s)),o=-1),r+=t):-1===o&&(o=s)}}return-1!==o&&(r+=encodeURIComponent(e.substring(o))),void 0!==r?r:e}function b(e){let t;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);r===n.m.Hash||r===n.m.QuestionMark?(void 0===t&&(t=e.substr(0,i)),t+=_[r]):void 0!==t&&(t+=e[i])}return void 0!==t?t:e}function y(e,t){let i;return i=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:e.path.charCodeAt(0)===n.m.Slash&&(e.path.charCodeAt(1)>=n.m.A&&e.path.charCodeAt(1)<=n.m.Z||e.path.charCodeAt(1)>=n.m.a&&e.path.charCodeAt(1)<=n.m.z)&&e.path.charCodeAt(2)===n.m.Colon?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,s.ED&&(i=i.replace(/\//g,"\\")),i}function w(e,t){const i=t?b:v;let r="",{scheme:o,authority:s,path:a,query:c,fragment:l}=e;if(o&&(r+=o,r+=":"),(s||"file"===o)&&(r+=u,r+=u),s){let e=s.indexOf("@");if(-1!==e){const t=s.substr(0,e);s=s.substr(e+1),e=t.lastIndexOf(":"),-1===e?r+=i(t,!1,!1):(r+=i(t.substr(0,e),!1,!1),r+=":",r+=i(t.substr(e+1),!1,!0)),r+="@"}s=s.toLowerCase(),e=s.lastIndexOf(":"),-1===e?r+=i(s,!1,!0):(r+=i(s.substr(0,e),!1,!0),r+=s.substr(e))}if(a){if(a.length>=3&&a.charCodeAt(0)===n.m.Slash&&a.charCodeAt(2)===n.m.Colon){const e=a.charCodeAt(1);e>=n.m.A&&e<=n.m.Z&&(a=`/${String.fromCharCode(e+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===n.m.Colon){const e=a.charCodeAt(0);e>=n.m.A&&e<=n.m.Z&&(a=`${String.fromCharCode(e+32)}:${a.substr(2)}`)}r+=i(a,!0,!1)}return c&&(r+="?",r+=i(c,!1,!1)),l&&(r+="#",r+=t?l:v(l,!1,!1)),r}function x(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+x(e.substr(3)):e}}const C=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function E(e){return e.match(C)?e.replace(C,(e=>x(e))):e}},53198:function(e,t,i){i.d(t,{YT:function(){return a}});var n=i(53976),r=i(65045),o=i(42731);new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function s(e,t,i,a){if(!e||a>200)return null;if("object"==typeof e){if(e.$mid===r.m.Uri)return i?o.ov.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof n.KN)return null;for(const n in e)if(Object.hasOwnProperty.call(e,n)){const r=s(e[n],t,i,a+1);null!==r&&(e[n]=r)}}return null}function a(e,t){const i=s(e,t,!1,0);return null===i?e:i}},16184:function(e,t,i){i.d(t,{Q:function(){return o},b:function(){return n}});var n,r=i(34032);function o(e){let t=0,i=0,o=0,s=n.Unknown;for(let a=0,c=e.length;a<c;a++){const l=e.charCodeAt(a);l===r.m.CarriageReturn?(0===t&&(i=a),t++,a+1<c&&e.charCodeAt(a+1)===r.m.LineFeed?(s|=n.CRLF,a++):s|=n.Invalid,o=a+1):l===r.m.LineFeed&&(s|=n.LF,0===t&&(i=a),t++,o=a+1)}return 0===t&&(i=e.length),[t,i,e.length-o,s]}!function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(n||(n={}))},20495:function(e,t,i){i.d(t,{L:function(){return n}});class n{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new n(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return n.equals(this,e)}static equals(e,t){return!e&&!t||!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return n.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<t.column}isBeforeOrEqual(e){return n.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<=t.column}static compare(e,t){const i=0|e.lineNumber,n=0|t.lineNumber;if(i===n){return(0|e.column)-(0|t.column)}return i-n}clone(){return new n(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new n(e.lineNumber,e.column)}static isIPosition(e){return e&&"number"==typeof e.lineNumber&&"number"==typeof e.column}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}}},3918:function(e,t,i){i.d(t,{e:function(){return r}});var n=i(20495);class r{constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}isEmpty(){return r.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return r.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>e.endColumn))}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<=e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>=e.endColumn))}containsRange(e){return r.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)))}strictContainsRange(e){return r.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)))}plusRange(e){return r.plusRange(this,e)}static plusRange(e,t){let i,n,o,s;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,n=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,n=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,n=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new r(i,n,o,s)}intersectRanges(e){return r.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,n=e.startColumn,o=e.endLineNumber,s=e.endColumn;const a=t.startLineNumber,c=t.startColumn,l=t.endLineNumber,d=t.endColumn;return i<a?(i=a,n=c):i===a&&(n=Math.max(n,c)),o>l?(o=l,s=d):o===l&&(s=Math.min(s,d)),i>o||i===o&&n>s?null:new r(i,n,o,s)}equalsRange(e){return r.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t||!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return r.getEndPosition(this)}static getEndPosition(e){return new n.L(e.endLineNumber,e.endColumn)}getStartPosition(){return r.getStartPosition(this)}static getStartPosition(e){return new n.L(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new r(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new r(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return r.collapseToStart(this)}static collapseToStart(e){return new r(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return r.collapseToEnd(this)}static collapseToEnd(e){return new r(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new r(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new r(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new r(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&"number"==typeof e.startLineNumber&&"number"==typeof e.startColumn&&"number"==typeof e.endLineNumber&&"number"==typeof e.endColumn}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const i=0|e.startLineNumber,n=0|t.startLineNumber;if(i===n){const i=0|e.startColumn,n=0|t.startColumn;if(i===n){const i=0|e.endLineNumber,n=0|t.endLineNumber;if(i===n){return(0|e.endColumn)-(0|t.endColumn)}return i-n}return i-n}return i-n}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}}},22057:function(e,t,i){i.d(t,{D:function(){return n}});const n={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}}},71709:function(e,t,i){i.d(t,{G:function(){return o},J:function(){return s}});var n=i(22200),r=i(15229);function o(e,t,i,s,a,c){if(Array.isArray(e)){let n=0;for(const r of e){const e=o(r,t,i,s,a,c);if(10===e)return e;e>n&&(n=e)}return n}if("string"==typeof e)return s?"*"===e?5:e===i?10:0:0;if(e){const{language:o,pattern:l,scheme:d,hasAccessToAllModels:u,notebookType:h}=e;if(!s&&!u)return 0;h&&a&&(t=a);let p=0;if(d)if(d===t.scheme)p=10;else{if("*"!==d)return 0;p=5}if(o)if(o===i)p=10;else{if("*"!==o)return 0;p=Math.max(p,5)}if(h)if(h===c)p=10;else{if("*"!==h||void 0===c)return 0;p=Math.max(p,5)}if(l){let e;if(e="string"==typeof l?l:{...l,base:(0,r.Fv)(l.base)},e!==t.fsPath&&!(0,n.EQ)(e,t.fsPath))return 0;p=10}return p}return 0}function s(e){return"string"!=typeof e&&(Array.isArray(e)?e.some(s):!!e.notebookType)}},17263:function(e,t,i){i.d(t,{v:function(){return s}});var n=i(88023),r=i(20495),o=i(16210);class s{constructor(e,t,i,n){this._uri=e,this._lines=t,this._eol=i,this._versionId=n,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return null===this._cachedTextValue&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const e of t)this._acceptDeleteRange(e.range),this._acceptInsertText(new r.L(e.range.startLineNumber,e.range.startColumn),e.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let n=0;n<t;n++)i[n]=this._lines[n].length+e;this._lineStarts=new o.oQ(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber!==e.endLineNumber)this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber);else{if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1))}}_acceptInsertText(e,t){if(0===t.length)return;const i=(0,n.uq)(t);if(1===i.length)return void this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const r=new Uint32Array(i.length-1);for(let t=1;t<i.length;t++)this._lines.splice(e.lineNumber+t-1,0,i[t]),r[t-1]=i[t].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,r)}}},51968:function(e,t,i){i.d(t,{Lv:function(){return g},Nr:function(){return p},Xp:function(){return h},nD:function(){return v}});var n=i(34032),r=i(20495),o=i(3918),s=i(82416),a=i(79450),c=i(75396);const l=65535;function d(e){let t;return t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length),t.set(e,0),t}class u{constructor(e,t,i,n,r){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=n,this.isBasicASCII=r}}function h(e,t=!0){const i=[0];let r=1;for(let t=0,o=e.length;t<o;t++){const s=e.charCodeAt(t);s===n.m.CarriageReturn?t+1<o&&e.charCodeAt(t+1)===n.m.LineFeed?(i[r++]=t+2,t++):i[r++]=t+1:s===n.m.LineFeed&&(i[r++]=t+1)}return t?d(i):i}function p(e,t){e.length=0,e[0]=0;let i=1,r=0,o=0,s=0,a=!0;for(let c=0,l=t.length;c<l;c++){const d=t.charCodeAt(c);d===n.m.CarriageReturn?c+1<l&&t.charCodeAt(c+1)===n.m.LineFeed?(s++,e[i++]=c+2,c++):(r++,e[i++]=c+1):d===n.m.LineFeed?(o++,e[i++]=c+1):a&&d!==n.m.Tab&&(d<32||d>126)&&(a=!1)}const c=new u(d(e),r,o,s,a);return e.length=0,c}class m{constructor(e,t,i,n,r){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=n,this.length=r}}class g{constructor(e,t){this.buffer=e,this.lineStarts=t}}class f{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==a.Nc&&e.iterate(e.root,(e=>(e!==a.Nc&&this._pieces.push(e.piece),!0)))}read(){return 0===this._pieces.length?0===this._index?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:0===this._index?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class _{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let n=0;n<i.length;n++){const r=i[n];(null===r.node.parent||r.nodeStartOffset>=e)&&(i[n]=null,t=!0)}if(t){const e=[];for(const t of i)null!==t&&e.push(t);this._cache=e}}}class v{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new g("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=a.Nc,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let n=null;for(let t=0,i=e.length;t<i;t++)if(e[t].buffer.length>0){e[t].lineStarts||(e[t].lineStarts=h(e[t].buffer));const i=new m(t+1,{line:0,column:0},{line:e[t].lineStarts.length-1,column:e[t].buffer.length-e[t].lineStarts[e[t].lineStarts.length-1]},e[t].lineStarts.length-1,e[t].buffer.length);this._buffers.push(e[t]),n=this.rbInsertRight(n,i)}this._searchCache=new _(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=l,i=t-Math.floor(21845),n=2*i;let r="",o=0;const s=[];if(this.iterate(this.root,(t=>{const a=this.getNodeContent(t),c=a.length;if(o<=i||o+c<n)return r+=a,o+=c,!0;const l=r.replace(/\r\n|\r|\n/g,e);return s.push(new g(l,h(l))),r=a,o=c,!0})),o>0){const t=r.replace(/\r\n|\r|\n/g,e);s.push(new g(t,h(t)))}this.create(s,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new f(this,e)}equal(e){if(this.getLength()!==e.getLength())return!1;if(this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,(i=>{if(i===a.Nc)return!0;const n=this.getNodeContent(i),r=n.length,o=e.nodeAt(t),s=e.nodeAt(t+r),c=e.getValueInRange2(o,s);return t+=r,n===c}))}getOffsetAt(e,t){let i=0,n=this.root;for(;n!==a.Nc;)if(n.left!==a.Nc&&n.lf_left+1>=e)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt+1>=e){i+=n.size_left;return i+(this.getAccumulatedValue(n,e-n.lf_left-2)+t-1)}e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const n=e;for(;t!==a.Nc;)if(0!==t.size_left&&t.size_left>=e)t=t.left;else{if(t.size_left+t.piece.length>=e){const o=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+o.index,0===o.index){const e=n-this.getOffsetAt(i+1,1);return new r.L(i+1,e+1)}return new r.L(i+1,o.remainder+1)}if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===a.Nc){const t=n-e-this.getOffsetAt(i+1,1);return new r.L(i+1,t+1)}t=t.right}return new r.L(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),n=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(i,n);return t?t===this._EOL&&this._EOLNormalized&&t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){const i=e.node,n=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n.substring(r+e.remainder,r+t.remainder)}let i=e.node;const n=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let o=n.substring(r+e.remainder,r+i.piece.length);for(i=i.next();i!==a.Nc;){const e=this._buffers[i.piece.bufferIndex].buffer,n=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){o+=e.substring(n,n+t.remainder);break}o+=e.substr(n,i.piece.length),i=i.next()}return o}getLinesContent(){const e=[];let t=0,i="",r=!1;return this.iterate(this.root,(o=>{if(o===a.Nc)return!0;const s=o.piece;let c=s.length;if(0===c)return!0;const l=this._buffers[s.bufferIndex].buffer,d=this._buffers[s.bufferIndex].lineStarts,u=s.start.line,h=s.end.line;let p=d[u]+s.start.column;if(r&&(l.charCodeAt(p)===n.m.LineFeed&&(p++,c--),e[t++]=i,i="",r=!1,0===c))return!0;if(u===h)return this._EOLNormalized||l.charCodeAt(p+c-1)!==n.m.CarriageReturn?i+=l.substr(p,c):(r=!0,i+=l.substr(p,c-1)),!0;i+=this._EOLNormalized?l.substring(p,Math.max(p,d[u+1]-this._EOLLength)):l.substring(p,d[u+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let n=u+1;n<h;n++)i=this._EOLNormalized?l.substring(d[n],d[n+1]-this._EOLLength):l.substring(d[n],d[n+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return this._EOLNormalized||l.charCodeAt(d[h]+s.end.column-1)!==n.m.CarriageReturn?i=l.substr(d[h],s.end.column):(r=!0,0===s.end.column?t--:i=l.substr(d[h],s.end.column-1)),!0})),r&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e||(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],n=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(n)}{const t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getCharCode(e){const t=this.nodeAt(e);return this._getCharCode(t)}getNearestChunk(e){const t=this.nodeAt(e);if(t.remainder===t.node.piece.length){const e=t.node.next();if(!e||e===a.Nc)return"";const i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start);return i.buffer.substring(n,n+e.piece.length)}{const e=this._buffers[t.node.piece.bufferIndex],i=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start),n=i+t.remainder,r=i+t.node.piece.length;return e.buffer.substring(n,r)}}findMatchesInNode(e,t,i,n,r,s,a,l,d,u,h){const p=this._buffers[e.piece.bufferIndex],m=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,r),f=this.offsetInBuffer(e.piece.bufferIndex,s);let _;const v={line:0,column:0};let b,y;t._wordSeparators?(b=p.buffer.substring(g,f),y=e=>e+g,t.reset(0)):(b=p.buffer,y=e=>e,t.reset(g));do{if(_=t.next(b),_){if(y(_.index)>=f)return u;this.positionInBuffer(e,y(_.index)-m,v);const t=this.getLineFeedCnt(e.piece.bufferIndex,r,v),s=v.line===r.line?v.column-r.column+n:v.column+1,a=s+_[0].length;if(h[u++]=(0,c.iE)(new o.e(i+t,s,i+t,a),_,l),y(_.index)+_[0].length>=f)return u;if(u>=d)return u}}while(_);return u}findMatchesLineByLine(e,t,i,n){const r=[];let o=0;const s=new c.sz(t.wordSeparators,t.regex);let a=this.nodeAt2(e.startLineNumber,e.startColumn);if(null===a)return[];const l=this.nodeAt2(e.endLineNumber,e.endColumn);if(null===l)return[];let d=this.positionInBuffer(a.node,a.remainder);const u=this.positionInBuffer(l.node,l.remainder);if(a.node===l.node)return this.findMatchesInNode(a.node,s,e.startLineNumber,e.startColumn,d,u,t,i,n,o,r),r;let h=e.startLineNumber,p=a.node;for(;p!==l.node;){const c=this.getLineFeedCnt(p.piece.bufferIndex,d,p.piece.end);if(c>=1){const a=this._buffers[p.piece.bufferIndex].lineStarts,l=this.offsetInBuffer(p.piece.bufferIndex,p.piece.start),u=a[d.line+c],m=h===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(p,s,h,m,d,this.positionInBuffer(p,u-l),t,i,n,o,r),o>=n)return r;h+=c}const l=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const a=this.getLineContent(h).substring(l,e.endColumn-1);return o=this._findMatchesInLine(t,s,a,e.endLineNumber,l,o,r,i,n),r}if(o=this._findMatchesInLine(t,s,this.getLineContent(h).substr(l),h,l,o,r,i,n),o>=n)return r;h++,a=this.nodeAt2(h,1),p=a.node,d=this.positionInBuffer(a.node,a.remainder)}if(h===e.endLineNumber){const a=h===e.startLineNumber?e.startColumn-1:0,c=this.getLineContent(h).substring(a,e.endColumn-1);return o=this._findMatchesInLine(t,s,c,e.endLineNumber,a,o,r,i,n),r}const m=h===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(l.node,s,h,m,d,u,t,i,n,o,r),r}_findMatchesInLine(e,t,i,n,r,a,l,d,u){const h=e.wordSeparators;if(!d&&e.simpleSearch){const t=e.simpleSearch,d=t.length,p=i.length;let m=-d;for(;-1!==(m=i.indexOf(t,m+d));)if((!h||(0,c.cM)(h,i,p,m,d))&&(l[a++]=new s.tk(new o.e(n,m+1+r,n,m+1+d+r),null),a>=u))return a;return a}let p;t.reset(0);do{if(p=t.next(i),p&&(l[a++]=(0,c.iE)(new o.e(n,p.index+1+r,n,p.index+1+p[0].length+r),p,d),a>=u))return a}while(p);return a}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==a.Nc){const{node:i,remainder:n,nodeStartOffset:r}=this.nodeAt(e),o=i.piece,s=o.bufferIndex,a=this.positionInBuffer(i,n);if(0===i.piece.bufferIndex&&o.end.line===this._lastChangeBufferPos.line&&o.end.column===this._lastChangeBufferPos.column&&r+o.length===e&&t.length<l)return this.appendToNode(i,t),void this.computeBufferMetadata();if(r===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(r+i.piece.length>e){const e=[];let r=new m(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),this.offsetInBuffer(s,o.end)-this.offsetInBuffer(s,a));if(this.shouldCheckCRLF()&&this.endWithCR(t)){if(10===this.nodeCharCodeAt(i,n)){const e={line:r.start.line+1,column:0};r=new m(r.bufferIndex,e,r.end,this.getLineFeedCnt(r.bufferIndex,e,r.end),r.length-1),t+="\n"}}if(this.shouldCheckCRLF()&&this.startWithLF(t)){if(13===this.nodeCharCodeAt(i,n-1)){const r=this.positionInBuffer(i,n-1);this.deleteNodeTail(i,r),t="\r"+t,0===i.piece.length&&e.push(i)}else this.deleteNodeTail(i,a)}else this.deleteNodeTail(i,a);const c=this.createNewPieces(t);r.length>0&&this.rbInsertRight(i,r);let l=i;for(let e=0;e<c.length;e++)l=this.rbInsertRight(l,c[e]);this.deleteNodes(e)}else this.insertContentToNodeRight(t,i)}else{const e=this.createNewPieces(t);let i=this.rbInsertLeft(null,e[0]);for(let t=1;t<e.length;t++)i=this.rbInsertRight(i,e[t])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===a.Nc)return;const i=this.nodeAt(e),n=this.nodeAt(e+t),r=i.node,o=n.node;if(r===o){const o=this.positionInBuffer(r,i.remainder),s=this.positionInBuffer(r,n.remainder);if(i.nodeStartOffset===e){if(t===r.piece.length){const e=r.next();return(0,a.KI)(this,r),this.validateCRLFWithPrevNode(e),void this.computeBufferMetadata()}return this.deleteNodeHead(r,s),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),void this.computeBufferMetadata()}return i.nodeStartOffset+r.piece.length===e+t?(this.deleteNodeTail(r,o),this.validateCRLFWithNextNode(r),void this.computeBufferMetadata()):(this.shrinkNode(r,o,s),void this.computeBufferMetadata())}const s=[],c=this.positionInBuffer(r,i.remainder);this.deleteNodeTail(r,c),this._searchCache.validate(e),0===r.piece.length&&s.push(r);const l=this.positionInBuffer(o,n.remainder);this.deleteNodeHead(o,l),0===o.piece.length&&s.push(o);for(let e=r.next();e!==a.Nc&&e!==o;e=e.next())s.push(e);const d=0===r.piece.length?r.prev():r;this.deleteNodes(s),this.validateCRLFWithNextNode(d),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const n=t.piece,r={line:n.start.line+1,column:0},o=new m(n.bufferIndex,r,n.end,this.getLineFeedCnt(n.bufferIndex,r,n.end),n.length-1);t.piece=o,e+="\n",(0,a.Z2)(this,t,-1,-1),0===t.piece.length&&i.push(t)}const n=this.createNewPieces(e);let r=this.rbInsertLeft(t,n[n.length-1]);for(let e=n.length-2;e>=0;e--)r=this.rbInsertLeft(r,n[e]);this.validateCRLFWithPrevNode(r),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+="\n");const i=this.createNewPieces(e),n=this.rbInsertRight(t,i[0]);let r=n;for(let e=1;e<i.length;e++)r=this.rbInsertRight(r,i[e]);this.validateCRLFWithPrevNode(n)}positionInBuffer(e,t,i){const n=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,s=o[n.start.line]+n.start.column+t;let a=n.start.line,c=n.end.line,l=0,d=0,u=0;for(;a<=c&&(l=a+(c-a)/2|0,u=o[l],l!==c);)if(d=o[l+1],s<u)c=l-1;else{if(!(s>=d))break;a=l+1}return i?(i.line=l,i.column=s-u,null):{line:l,column:s-u}}getLineFeedCnt(e,t,i){if(0===i.column)return i.line-t.line;const n=this._buffers[e].lineStarts;if(i.line===n.length-1)return i.line-t.line;const r=n[i.line+1],o=n[i.line]+i.column;if(r>o+1)return i.line-t.line;const s=o-1;return 13===this._buffers[e].buffer.charCodeAt(s)?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)(0,a.KI)(this,e[t])}createNewPieces(e){if(e.length>l){const t=[];for(;e.length>l;){const i=e.charCodeAt(65534);let r;i===n.m.CarriageReturn||i>=55296&&i<=56319?(r=e.substring(0,65534),e=e.substring(65534)):(r=e.substring(0,l),e=e.substring(l));const o=h(r);t.push(new m(this._buffers.length,{line:0,column:0},{line:o.length-1,column:r.length-o[o.length-1]},o.length-1,r.length)),this._buffers.push(new g(r,o))}const i=h(e);return t.push(new m(this._buffers.length,{line:0,column:0},{line:i.length-1,column:e.length-i[i.length-1]},i.length-1,e.length)),this._buffers.push(new g(e,i)),t}let t=this._buffers[0].buffer.length;const i=h(e,!1);let r=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&0!==t&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},r=this._lastChangeBufferPos;for(let e=0;e<i.length;e++)i[e]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(0!==t)for(let e=0;e<i.length;e++)i[e]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const o=this._buffers[0].buffer.length,s=this._buffers[0].lineStarts.length-1,a={line:s,column:o-this._buffers[0].lineStarts[s]},c=new m(0,r,a,this.getLineFeedCnt(0,r,a),o-t);return this._lastChangeBufferPos=a,[c]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e,t=0){let i=this.root,n="";const r=this._searchCache.get2(e);if(r){i=r.node;const o=this.getAccumulatedValue(i,e-r.nodeStartLineNumber-1),s=this._buffers[i.piece.bufferIndex].buffer,a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(r.nodeStartLineNumber+i.piece.lineFeedCnt!==e){const n=this.getAccumulatedValue(i,e-r.nodeStartLineNumber);return s.substring(a+o,a+n-t)}n=s.substring(a+o,a+i.piece.length)}else{let r=0;const o=e;for(;i!==a.Nc;)if(i.left!==a.Nc&&i.lf_left>=e-1)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt>e-1){const n=this.getAccumulatedValue(i,e-i.lf_left-2),s=this.getAccumulatedValue(i,e-i.lf_left-1),a=this._buffers[i.piece.bufferIndex].buffer,c=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return r+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:r,nodeStartLineNumber:o-(e-1-i.lf_left)}),a.substring(c+n,c+s-t)}if(i.lf_left+i.piece.lineFeedCnt===e-1){const t=this.getAccumulatedValue(i,e-i.lf_left-2),r=this._buffers[i.piece.bufferIndex].buffer,o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n=r.substring(o+t,o+i.piece.length);break}e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right}}for(i=i.next();i!==a.Nc;){const e=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const r=this.getAccumulatedValue(i,0),o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n+=e.substring(o,o+r-t),n}{const t=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=e.substr(t,i.piece.length)}i=i.next()}return n}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==a.Nc;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,n=this.positionInBuffer(e,t),r=n.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const t=this.getLineFeedCnt(e.piece.bufferIndex,i.start,n);if(t!==r)return{index:t,remainder:0}}return{index:r,remainder:n.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,n=this._buffers[i.bufferIndex].lineStarts,r=i.start.line+t+1;return r>i.end.line?n[i.end.line]+i.end.column-n[i.start.line]-i.start.column:n[r]-n[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,n=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.end),o=t,s=this.offsetInBuffer(i.bufferIndex,o),c=this.getLineFeedCnt(i.bufferIndex,i.start,o),l=c-n,d=s-r,u=i.length+d;e.piece=new m(i.bufferIndex,i.start,o,c,u),(0,a.Z2)(this,e,d,l)}deleteNodeHead(e,t){const i=e.piece,n=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.start),o=t,s=this.getLineFeedCnt(i.bufferIndex,o,i.end),c=s-n,l=r-this.offsetInBuffer(i.bufferIndex,o),d=i.length+l;e.piece=new m(i.bufferIndex,o,i.end,s,d),(0,a.Z2)(this,e,l,c)}shrinkNode(e,t,i){const n=e.piece,r=n.start,o=n.end,s=n.length,c=n.lineFeedCnt,l=t,d=this.getLineFeedCnt(n.bufferIndex,n.start,l),u=this.offsetInBuffer(n.bufferIndex,t)-this.offsetInBuffer(n.bufferIndex,r);e.piece=new m(n.bufferIndex,n.start,l,d,u),(0,a.Z2)(this,e,u-s,d-c);const h=new m(n.bufferIndex,i,o,this.getLineFeedCnt(n.bufferIndex,i,o),this.offsetInBuffer(n.bufferIndex,o)-this.offsetInBuffer(n.bufferIndex,i)),p=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(p)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+="\n");const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),n=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=h(t,!1);for(let e=0;e<r.length;e++)r[e]+=n;if(i){const e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:n-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const o=this._buffers[0].lineStarts.length-1,s={line:o,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[o]},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,d=this.getLineFeedCnt(0,e.piece.start,s),u=d-l;e.piece=new m(e.piece.bufferIndex,e.piece.start,s,d,c),this._lastChangeBufferPos=s,(0,a.Z2)(this,e,t.length,u)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let n=0;for(;t!==a.Nc;)if(t.size_left>e)t=t.left;else{if(t.size_left+t.piece.length>=e){n+=t.size_left;const i={node:t,remainder:e-t.size_left,nodeStartOffset:n};return this._searchCache.set(i),i}e-=t.size_left+t.piece.length,n+=t.size_left+t.piece.length,t=t.right}return null}nodeAt2(e,t){let i=this.root,n=0;for(;i!==a.Nc;)if(i.left!==a.Nc&&i.lf_left>=e-1)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt>e-1){const r=this.getAccumulatedValue(i,e-i.lf_left-2),o=this.getAccumulatedValue(i,e-i.lf_left-1);return n+=i.size_left,{node:i,remainder:Math.min(r+t-1,o),nodeStartOffset:n}}if(i.lf_left+i.piece.lineFeedCnt===e-1){const r=this.getAccumulatedValue(i,e-i.lf_left-2);if(r+t-1<=i.piece.length)return{node:i,remainder:r+t-1,nodeStartOffset:n};t-=i.piece.length-r;break}e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==a.Nc;){if(i.piece.lineFeedCnt>0){const e=this.getAccumulatedValue(i,0),n=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,e),nodeStartOffset:n}}if(i.piece.length>=t-1){return{node:i,remainder:t-1,nodeStartOffset:this.offsetOfNode(i)}}t-=i.piece.length,i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(n)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&"\n"===this._EOL)}startWithLF(e){if("string"==typeof e)return 10===e.charCodeAt(0);if(e===a.Nc||0===e.piece.lineFeedCnt)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,n=t.start.line,r=i[n]+t.start.column;if(n===i.length-1)return!1;return!(i[n+1]>r+1)&&10===this._buffers[t.bufferIndex].buffer.charCodeAt(r)}endWithCR(e){return"string"==typeof e?13===e.charCodeAt(e.length-1):e!==a.Nc&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],n=this._buffers[e.piece.bufferIndex].lineStarts;let r;r=0===e.piece.end.column?{line:e.piece.end.line-1,column:n[e.piece.end.line]-n[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,s=e.piece.lineFeedCnt-1;e.piece=new m(e.piece.bufferIndex,e.piece.start,r,s,o),(0,a.Z2)(this,e,-1,-1),0===e.piece.length&&i.push(e);const c={line:t.piece.start.line+1,column:0},l=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,c,t.piece.end);t.piece=new m(t.piece.bufferIndex,c,t.piece.end,d,l),(0,a.Z2)(this,t,-1,-1),0===t.piece.length&&i.push(t);const u=this.createNewPieces("\r\n");this.rbInsertRight(e,u[0]);for(let e=0;e<i.length;e++)(0,a.KI)(this,i[e])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+="\n",1===i.piece.length)(0,a.KI)(this,i);else{const e=i.piece,t={line:e.start.line+1,column:0},n=e.length-1,r=this.getLineFeedCnt(e.bufferIndex,t,e.end);i.piece=new m(e.bufferIndex,t,e.end,r,n),(0,a.Z2)(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===a.Nc)return t(a.Nc);const i=this.iterate(e.left,t);return i?t(e)&&this.iterate(e.right,t):i}getNodeContent(e){if(e===a.Nc)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,n=this.offsetInBuffer(i.bufferIndex,i.start),r=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(n,r)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,n)}rbInsertRight(e,t){const i=new a.OF(t,a.dK.Red);i.left=a.Nc,i.right=a.Nc,i.parent=a.Nc,i.size_left=0,i.lf_left=0;if(this.root===a.Nc)this.root=i,i.color=a.dK.Black;else if(e.right===a.Nc)e.right=i,i.parent=e;else{const t=(0,a.xq)(e.right);t.left=i,i.parent=t}return(0,a.h4)(this,i),i}rbInsertLeft(e,t){const i=new a.OF(t,a.dK.Red);if(i.left=a.Nc,i.right=a.Nc,i.parent=a.Nc,i.size_left=0,i.lf_left=0,this.root===a.Nc)this.root=i,i.color=a.dK.Black;else if(e.left===a.Nc)e.left=i,i.parent=e;else{const t=(0,a.Q$)(e.left);t.right=i,i.parent=t}return(0,a.h4)(this,i),i}getContentOfSubTree(e){let t="";return this.iterate(e,(e=>(t+=this.getNodeContent(e),!0))),t}}},52623:function(e,t,i){i.d(t,{A:function(){return u}});var n=i(81557),r=i(88023),o=i(3918),s=i(82416),a=i(51968),c=i(16184),l=i(23949),d=i(7428);class u extends d.JT{constructor(e,t,i,r,o,s,c){super(),this._onDidChangeContent=this._register(new n.Q5),this.onDidChangeContent=this._onDidChangeContent.event,this._BOM=t,this._mightContainNonBasicASCII=!s,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=o,this._pieceTree=new a.nD(e,i,c)}equals(e){return e instanceof u&&(this._BOM===e._BOM&&(this.getEOL()===e.getEOL()&&this._pieceTree.equal(e._pieceTree)))}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,n=this.getPositionAt(e),r=this.getPositionAt(i);return new o.e(n.lineNumber,n.column,r.lineNumber,r.column)}getValueInRange(e,t=s.gm.TextDefined){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=s.gm.TextDefined){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),n=this.getOffsetAt(e.endLineNumber,e.endColumn);let r=0;const o=this._getEndOfLine(t),a=this.getEOL();if(o.length!==a.length){r=(o.length-a.length)*(e.endLineNumber-e.startLineNumber)}return n-i+r}getCharacterCountInRange(e,t=s.gm.TextDefined){if(this._mightContainNonBasicASCII){let i=0;const n=e.startLineNumber,o=e.endLineNumber;for(let t=n;t<=o;t++){const s=this.getLineContent(t),a=t===n?e.startColumn-1:0,c=t===o?e.endColumn-1:s.length;for(let e=a;e<c;e++)(0,r.ZG)(s.charCodeAt(e))?(i+=1,e+=1):i+=1}return i+=this._getEndOfLine(t).length*(o-n),i}return this.getValueLengthInRange(e,t)}getNearestChunk(e){return this._pieceTree.getNearestChunk(e)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getCharCode(e){return this._pieceTree.getCharCode(e)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineMinColumn(e){return 1}getLineMaxColumn(e){return this.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){const t=(0,r.LC)(this.getLineContent(e));return-1===t?0:t+1}getLineLastNonWhitespaceColumn(e){const t=(0,r.ow)(this.getLineContent(e));return-1===t?0:t+2}_getEndOfLine(e){switch(e){case s.gm.LF:return"\n";case s.gm.CRLF:return"\r\n";case s.gm.TextDefined:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let n=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,a=this._mightContainNonBasicASCII,d=!0,h=[];for(let t=0;t<e.length;t++){const i=e[t];d&&i._isTracked&&(d=!1);const s=i.range;if(i.text){let e=!0;a||(e=!(0,r.$i)(i.text),a=e),!n&&e&&(n=(0,r.Ut)(i.text)),!o&&e&&(o=(0,r.ab)(i.text))}let l="",u=0,p=0,m=0;if(i.text){let e;[u,p,m,e]=(0,c.Q)(i.text);const t=this.getEOL(),n="\r\n"===t?c.b.CRLF:c.b.LF;l=e===c.b.Unknown||e===n?i.text:i.text.replace(/\r\n|\r|\n/g,t)}h[t]={sortIndex:t,identifier:i.identifier||null,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s),text:l,eolCount:u,firstLineLength:p,lastLineLength:m,forceMoveMarkers:Boolean(i.forceMoveMarkers),isAutoWhitespaceEdit:i.isAutoWhitespaceEdit||!1}}h.sort(u._sortOpsAscending);let p=!1;for(let e=0,t=h.length-1;e<t;e++){const t=h[e].range.getEndPosition(),i=h[e+1].range.getStartPosition();if(i.isBeforeOrEqual(t)){if(i.isBefore(t))throw new Error("Overlapping ranges are not allowed!");p=!0}}d&&(h=this._reduceOperations(h));const m=i||t?u._getInverseEditRanges(h):[],g=[];if(t)for(let e=0;e<h.length;e++){const t=h[e],i=m[e];if(t.isAutoWhitespaceEdit&&t.range.isEmpty())for(let e=i.startLineNumber;e<=i.endLineNumber;e++){let n="";e===i.startLineNumber&&(n=this.getLineContent(t.range.startLineNumber),-1!==(0,r.LC)(n))||g.push({lineNumber:e,oldContent:n})}}let f=null;if(i){let e=0;f=[];for(let t=0;t<h.length;t++){const i=h[t],n=m[t],r=this.getValueInRange(i.range),o=i.rangeOffset+e;e+=i.text.length-r.length,f[t]={sortIndex:i.sortIndex,identifier:i.identifier,range:n,text:r,textChange:new l.q(i.rangeOffset,r,o,i.text)}}p||f.sort(((e,t)=>e.sortIndex-t.sortIndex))}this._mightContainRTL=n,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=a;const _=this._doApplyEdits(h);let v=null;if(t&&g.length>0){g.sort(((e,t)=>t.lineNumber-e.lineNumber)),v=[];for(let e=0,t=g.length;e<t;e++){const t=g[e].lineNumber;if(e>0&&g[e-1].lineNumber===t)continue;const i=g[e].oldContent,n=this.getLineContent(t);0!==n.length&&n!==i&&-1===(0,r.LC)(n)&&v.push(t)}}return this._onDidChangeContent.fire(),new s.je(f,_,v)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,n=e[e.length-1].range,r=new o.e(i.startLineNumber,i.startColumn,n.endLineNumber,n.endColumn);let a=i.startLineNumber,l=i.startColumn;const d=[];for(let i=0,n=e.length;i<n;i++){const n=e[i],r=n.range;t=t||n.forceMoveMarkers,d.push(this.getValueInRange(new o.e(a,l,r.startLineNumber,r.startColumn))),n.text.length>0&&d.push(n.text),a=r.endLineNumber,l=r.endColumn}const u=d.join(""),[h,p,m]=(0,c.Q)(u);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,s.gm.TextDefined),text:u,eolCount:h,firstLineLength:p,lastLineLength:m,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(u._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const n=e[i],r=n.range.startLineNumber,s=n.range.startColumn,a=n.range.endLineNumber,c=n.range.endColumn;if(r===a&&s===c&&0===n.text.length)continue;n.text?(this._pieceTree.delete(n.rangeOffset,n.rangeLength),this._pieceTree.insert(n.rangeOffset,n.text,!0)):this._pieceTree.delete(n.rangeOffset,n.rangeLength);const l=new o.e(r,s,a,c);t.push({range:l,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,n){return this._pieceTree.findMatchesLineByLine(e,t,i,n)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(e,t){const i=e.startLineNumber,n=e.startColumn,[r,s,a]=(0,c.Q)(t);let l;if(t.length>0){const e=r+1;l=1===e?new o.e(i,n,i,n+s):new o.e(i,n,i+e-1,a+1)}else l=new o.e(i,n,i,n);return l}static _getInverseEditRanges(e){const t=[];let i=0,n=0,r=null;for(let s=0,a=e.length;s<a;s++){const a=e[s];let c,l,d;if(r?r.range.endLineNumber===a.range.startLineNumber?(c=i,l=n+(a.range.startColumn-r.range.endColumn)):(c=i+(a.range.startLineNumber-r.range.endLineNumber),l=a.range.startColumn):(c=a.range.startLineNumber,l=a.range.startColumn),a.text.length>0){const e=a.eolCount+1;d=1===e?new o.e(c,l,c,l+a.firstLineLength):new o.e(c,l,c+e-1,a.lastLineLength+1)}else d=new o.e(c,l,c,l);i=d.endLineNumber,n=d.endColumn,t.push(d),r=a}return t}static _sortOpsAscending(e,t){const i=o.e.compareRangesUsingEnds(e.range,t.range);return 0===i?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=o.e.compareRangesUsingEnds(e.range,t.range);return 0===i?t.sortIndex-e.sortIndex:-i}}},894:function(e,t,i){i.d(t,{M:function(){return l}});var n=i(34032),r=i(88023),o=i(82416),s=i(51968),a=i(52623);class c{constructor(e,t,i,n,r,o,s,a,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=n,this._crlf=r,this._containsRTL=o,this._containsUnusualLineTerminators=s,this._isBasicASCII=a,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return 0===t?e===o._x.LF?"\n":"\r\n":i>t/2?"\r\n":"\n"}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&("\r\n"===t&&(this._cr>0||this._lf>0)||"\n"===t&&(this._cr>0||this._crlf>0)))for(let e=0,n=i.length;e<n;e++){const n=i[e].buffer.replace(/\r\n|\r|\n/g,t),r=(0,s.Xp)(n);i[e]=new s.Lv(n,r)}const n=new a.A(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}getFirstLineText(e){return this._chunks[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}}class l{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(0===e.length)return;0===this.chunks.length&&(0,r.uS)(e)&&(this.BOM=r.c1,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===n.m.CarriageReturn||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){(t||0!==e.length)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=(0,s.Nr)(this._tmpLineStarts,e);this.chunks.push(new s.Lv(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=(0,r.Ut)(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=(0,r.ab)(e)))}finish(e=!0){return this._finish(),new c(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=(0,s.Xp)(e.buffer);e.lineStarts=t,this._previousChar===n.m.CarriageReturn&&this.cr++}}}},9362:function(e,t,i){i.d(t,{C:function(){return a},O:function(){return c}});var n,r=i(53976),o=i(11547);function s(e){for(let t=0,i=e.length;t<i;t+=4){const i=e[t+0],n=e[t+1],r=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=r,e[t+2]=n,e[t+3]=i}}function a(e){const t=new Uint32Array(function(e){let t=0;if(t+=2,"full"===e.type)t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const i of e.deltas)i.data&&(t+=i.data.length)}return t}(e));let i=0;if(t[i++]=e.id,"full"===e.type)t[i++]=n.Full,t[i++]=e.data.length,t.set(e.data,i),i+=e.data.length;else{t[i++]=n.Delta,t[i++]=e.deltas.length;for(const n of e.deltas)t[i++]=n.start,t[i++]=n.deleteCount,n.data?(t[i++]=n.data.length,t.set(n.data,i),i+=n.data.length):t[i++]=0}return function(e){const t=new Uint8Array(e.buffer,e.byteOffset,4*e.length);return(0,o.r)()||s(t),r.KN.wrap(t)}(t)}function c(e){const t=function(e){const t=e.buffer;if((0,o.r)()||s(t),t.byteOffset%4==0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const e=new Uint8Array(t.byteLength);return e.set(t),new Uint32Array(e.buffer,e.byteOffset,e.length/4)}}(e);let i=0;const r=t[i++];if(t[i++]===n.Full){const e=t[i++],n=t.subarray(i,i+e);return i+=e,{id:r,type:"full",data:n}}const a=t[i++],c=[];for(let e=0;e<a;e++){const n=t[i++],r=t[i++],o=t[i++];let s;o>0&&(s=t.subarray(i,i+o),i+=o),c[e]={start:n,deleteCount:r,data:s}}return{id:r,type:"delta",deltas:c}}!function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"}(n||(n={}))},94783:function(e,t,i){i.d(t,{R:function(){return s}});var n=i(81557),r=i(7428),o=i(73864);class s{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new n.Q5,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),(0,r.OF)((()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))}))}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();const i=new a(this,e,t);return this._factories.set(e,i),(0,r.OF)((()=>{const t=this._factories.get(e);t&&t===i&&(this._factories.delete(e),t.dispose())}))}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const t=this._factories.get(e);return!(t&&!t.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>o.$.DefaultBackground?this._colorMap[o.$.DefaultBackground]:null}}class a extends r.JT{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}},67525:function(e,t,i){i.d(t,{C$:function(){return c},OQ:function(){return l},aj:function(){return d}});let n="undefined"!=typeof document&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function r(e,t){let i;return i=0===t.length?e:e.replace(/\{(\d+)\}/g,((e,i)=>{const n=i[0],r=t[n];let o=e;return"string"==typeof r?o=r:"number"!=typeof r&&"boolean"!=typeof r&&null!=r||(o=String(r)),o})),n&&(i="［"+i.replace(/[aouei]/g,"$&$&")+"］"),i}let o,s=!1,a={};function c(e,t,i,...n){s=!0;const o="object"==typeof t?t.key:t;return r((a[e]??{})[o]??i,n)}function l(e,t,i,...n){s=!0;const o="object"==typeof t?t.key:t;return{value:r((a[e]??{})[o]??i,n),original:r(i,n)}}function d(e){return o}},1130:function(e,t,i){i.d(t,{Z:function(){return u},i:function(){return a}});var n=i(34032),r=i(54316),o=i(67525);const s="vs/platform/contextkey/common/scanner";var a;function c(...e){switch(e.length){case 1:return(0,o.C$)(s,0,"Did you mean {0}?",e[0]);case 2:return(0,o.C$)(s,1,"Did you mean {0} or {1}?",e[0],e[1]);case 3:return(0,o.C$)(s,2,"Did you mean {0}, {1} or {2}?",e[0],e[1],e[2]);default:return}}!function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"}(a||(a={}));const l=(0,o.C$)(s,3,"Did you forget to open or close the quote?"),d=(0,o.C$)(s,4,"Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");class u{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case a.LParen:return"(";case a.RParen:return")";case a.Neg:return"!";case a.Eq:return e.isTripleEq?"===":"==";case a.NotEq:return e.isTripleEq?"!==":"!=";case a.Lt:return"<";case a.LtEq:return"<=";case a.Gt:case a.GtEq:return">=";case a.RegexOp:return"=~";case a.RegexStr:return e.lexeme;case a.True:return"true";case a.False:return"false";case a.In:return"in";case a.Not:return"not";case a.And:return"&&";case a.Or:return"||";case a.Str:case a.QuotedStr:case a.Error:return e.lexeme;case a.EOF:return"EOF";default:throw(0,r.L6)(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}static{this._regexFlags=new Set(["i","g","s","m","y","u"].map((e=>e.charCodeAt(0))))}static{this._keywords=new Map([["not",a.Not],["in",a.In],["false",a.False],["true",a.True]])}get errors(){return this._errors}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();){this._start=this._current;switch(this._advance()){case n.m.OpenParen:this._addToken(a.LParen);break;case n.m.CloseParen:this._addToken(a.RParen);break;case n.m.ExclamationMark:if(this._match(n.m.Equals)){const e=this._match(n.m.Equals);this._tokens.push({type:a.NotEq,offset:this._start,isTripleEq:e})}else this._addToken(a.Neg);break;case n.m.SingleQuote:this._quotedString();break;case n.m.Slash:this._regex();break;case n.m.Equals:if(this._match(n.m.Equals)){const e=this._match(n.m.Equals);this._tokens.push({type:a.Eq,offset:this._start,isTripleEq:e})}else this._match(n.m.Tilde)?this._addToken(a.RegexOp):this._error(c("==","=~"));break;case n.m.LessThan:this._addToken(this._match(n.m.Equals)?a.LtEq:a.Lt);break;case n.m.GreaterThan:this._addToken(this._match(n.m.Equals)?a.GtEq:a.Gt);break;case n.m.Ampersand:this._match(n.m.Ampersand)?this._addToken(a.And):this._error(c("&&"));break;case n.m.Pipe:this._match(n.m.Pipe)?this._addToken(a.Or):this._error(c("||"));break;case n.m.Space:case n.m.CarriageReturn:case n.m.Tab:case n.m.LineFeed:case n.m.NoBreakSpace:break;default:this._string()}}return this._start=this._current,this._addToken(a.EOF),Array.from(this._tokens)}_match(e){return!this._isAtEnd()&&(this._input.charCodeAt(this._current)===e&&(this._current++,!0))}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?n.m.Null:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),n={type:a.Error,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(n)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=u._keywords.get(t);i?this._addToken(i):this._tokens.push({type:a.Str,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==n.m.SingleQuote&&!this._isAtEnd();)this._advance();this._isAtEnd()?this._error(l):(this._advance(),this._tokens.push({type:a.QuotedStr,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1}))}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length)return this._current=e,void this._error(d);const r=this._input.charCodeAt(e);if(t)t=!1;else{if(r===n.m.Slash&&!i){e++;break}r===n.m.OpenSquareBracket?i=!0:r===n.m.Backslash?t=!0:r===n.m.CloseSquareBracket&&(i=!1)}e++}for(;e<this._input.length&&u._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const r=this._input.substring(this._start,this._current);this._tokens.push({type:a.RegexStr,lexeme:r,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}}},57220:function(e,t,i){i.d(t,{Y:function(){return n}});const n=(0,i(28019).yh)("environmentService")},29523:function(e,t,i){i.d(t,{S:function(){return o}});var n=i(54316),r=i(26258);const o=new class{constructor(){this._generators=new Map,this._cache=new WeakMap}register(e,t){this._generators.set(e,t)}readActivationEvents(e){return this._cache.has(e)||this._cache.set(e,this._readActivationEvents(e)),this._cache.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const i of e){const e=this.readActivationEvents(i);e.length>0&&(t[r.kP.toKey(i.identifier)]=e)}return t}_readActivationEvents(e){if(void 0===e.main&&void 0===e.browser)return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let i=0;i<t.length;i++)"onUri"===t[i]&&(t[i]=`onUri:${r.kP.toKey(e.identifier)}`);if(!e.contributes)return t;for(const i in e.contributes){const r=this._generators.get(i);if(!r)continue;const o=e.contributes[i],s=Array.isArray(o)?o:[o];try{r(s,t)}catch(e){(0,n.dL)(e)}}return t}}},80165:function(e,t,i){i.d(t,{M:function(){return n}});class n{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}},20658:function(e,t,i){i.d(t,{_Z:function(){return o},dh:function(){return a},zr:function(){return s}});var n=i(80165);const r=[];var o;function s(e,t,i){t instanceof n.M||(t=new n.M(t,[],Boolean(i))),r.push([e,t])}function a(){return r}!function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"}(o||(o={}))},99911:function(e,t,i){i.d(t,{F:function(){return p}});var n=i(35820),r=i(54316),o=i(7428),s=i(80165);class a{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}}class c{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())0===t.outgoing.size&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing.set(n.key,n),n.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const e of this._nodes.values())e.outgoing.delete(t),e.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new a(t,e),this._nodes.set(t,i)),i}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return 0===this._nodes.size}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}\n\t(-> incoming)[${[...i.incoming.keys()].join(", ")}]\n\t(outgoing ->)[${[...i.outgoing.keys()].join(",")}]\n`);return e.join("\n")}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),n=this._findCycle(t,i);if(n)return n}}_findCycle(e,t){for(const[i,n]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const e=this._findCycle(n,t);if(e)return e;t.delete(i)}}}var l=i(28019),d=i(80195),u=i(65161);class h extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: \n${e.toString()}`}}class p{constructor(e=new d.y,t=!1,i,n=false){this._services=e,this._strict=t,this._parent=i,this._enableTracing=n,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(l.TG,this),this._globalGraph=n?i?._globalGraph??new c((e=>e)):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,(0,o.B9)(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)(0,o.Wf)(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const i=this,n=new class extends p{dispose(){i._children.delete(n),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(n),t?.add(n),n}invokeFunction(e,...t){this._throwIfDisposed();const i=g.traceInvocation(this._enableTracing,e);let n=!1;try{return e({get:e=>{if(n)throw(0,r.L6)("service accessor is only valid during the invocation of its target method");const t=this._getOrCreateServiceInstance(e,i);if(!t)throw new Error(`[invokeFunction] unknown service '${e}'`);return t}},...t)}finally{n=!0,i.stop()}}createInstance(e,...t){let i,n;return this._throwIfDisposed(),e instanceof s.M?(i=g.traceCreation(this._enableTracing,e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=g.traceCreation(this._enableTracing,e),n=this._createInstance(e,t,i)),i.stop(),n}_createInstance(e,t=[],i){const n=l.I8.getServiceDependencies(e).sort(((e,t)=>e.index-t.index)),r=[];for(const t of n){const n=this._getOrCreateServiceInstance(t.id,i);n||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`,!1),r.push(n)}const o=n.length>0?n[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const i=o-t.length;t=i>0?t.concat(new Array(i)):t.slice(0,o)}return Reflect.construct(e,t.concat(r))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof s.M)this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setCreatedServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof s.M?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){const n=new c((e=>e.id.toString()));let r=0;const o=[{id:e,desc:t,_trace:i}];for(;o.length;){const t=o.pop();if(n.lookupOrInsertNode(t),r++>1e3)throw new h(n);for(const i of l.I8.getServiceDependencies(t.desc.ctor)){const r=this._getServiceInstanceOrDescriptor(i.id);if(r||this._throwIfStrict(`[createInstance] ${e} depends on ${i.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(t.id),String(i.id)),r instanceof s.M){const e={id:i.id,desc:r,_trace:t._trace.branch(i.id,!0)};n.lookup(e)||o.push(e),n.insertEdge(t,e)}}}for(;;){const e=n.roots();if(0===e.length){if(!n.isEmpty())throw new h(n);break}for(const{data:t}of e){if(this._getServiceInstanceOrDescriptor(t.id)instanceof s.M){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setCreatedServiceInstance(t.id,e)}n.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],n,r){if(this._services.get(e)instanceof s.M)return this._createServiceInstance(e,t,i,n,r,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],r,s,a){if(r){const r=new p(void 0,this._strict,this,this._enableTracing);r._globalGraphImplicitDependency=String(e);const c=new Map,l=new n.R5((()=>{const e=r._createInstance(t,i,s);for(const[t,i]of c){const n=e[t];if("function"==typeof n)for(const t of i)t.disposable=n.apply(e,t.listener)}return c.clear(),a.add(e),e}));return new Proxy(Object.create(null),{get(e,t){if(!l.isInitialized&&"string"==typeof t&&(t.startsWith("onDid")||t.startsWith("onWill"))){let e=c.get(t);e||(e=new u.S,c.set(t,e));return(i,n,r)=>{if(l.isInitialized)return l.value[t](i,n,r);{const t={listener:[i,n,r],disposable:void 0},s=e.push(t);return(0,o.OF)((()=>{s(),t.disposable?.dispose()}))}}}if(t in e)return e[t];const i=l.value;let n=i[t];return"function"!=typeof n||(n=n.bind(i),e[t]=n),n},set(e,t,i){return l.value[t]=i,!0},getPrototypeOf(e){return t.prototype}})}{const e=this._createInstance(t,i,s);return a.add(e),e}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}var m;!function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"}(m||(m={}));class g{static{this.all=new Set}static{this._None=new class extends g{constructor(){super(m.None,null)}stop(){}branch(){return this}}}static traceInvocation(e,t){return e?new g(m.Invocation,t.name||(new Error).stack.split("\n").slice(3,4).join("\n")):g._None}static traceCreation(e,t){return e?new g(m.Creation,t.name):g._None}static{this._totals=0}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new g(m.Branch,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;g._totals+=e;let t=!1;const i=[`${this.type===m.Creation?"CREATE":"CALL"} ${this.name}`,`${function e(i,n){const r=[],o=new Array(i+1).join("\t");for(const[s,a,c]of n._dep)if(a&&c){t=!0,r.push(`${o}CREATES -> ${s}`);const n=e(i+1,c);n&&r.push(n)}else r.push(`${o}uses -> ${s}`);return r.join("\n")}(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${g._totals.toFixed(2)}ms)`];(e>2||t)&&g.all.add(i.join("\n"))}}},80195:function(e,t,i){i.d(t,{y:function(){return n}});class n{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}},8561:function(e,t,i){i.d(t,{I:function(){return o}});var n=i(81557),r=i(88001);const o={JSONContribution:"base.contributions.json"};const s=new class{constructor(){this._onDidChangeSchema=new n.Q5,this.onDidChangeSchema=this._onDidChangeSchema.event,this.schemasById={}}registerSchema(e,t){var i;this.schemasById[(i=e,i.length>0&&"#"===i.charAt(i.length-1)?i.substring(0,i.length-1):i)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}};r.B.add(o.JSONContribution,s)},26713:function(e,t,i){i.d(t,{V:function(){return r},y:function(){return o}});var n=i(28019);const r=(0,n.yh)("logService"),o=(0,n.yh)("loggerService")},80661:function(e,t,i){i.d(t,{$:function(){return o}});var n=i(7428),r=i(525);class o extends n.JT{constructor(e,t=[]){super(),this.logger=new r.qA([e,...t]),this._register(e.onDidChangeLogLevel((e=>this.setLevel(e))))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}flush(){this.logger.flush()}}},39989:function(e,t,i){i.d(t,{h:function(){return n}});const n="vscode://schemas/vscode-product"},42809:function(e,t,i){i.d(t,{a:function(){return n}});const n=(0,i(28019).yh)("productService")},25957:function(e,t,i){i.d(t,{U:function(){return n}});const n=(0,i(28019).yh)("requestService")},92206:function(e,t,i){i.d(t,{$:function(){return n}});class n{constructor(e){this._callback=e,this._terminalBufferMap=new Map}dispose(){for(const e of this._terminalBufferMap.values())e.dispose()}startBuffering(e,t,i=5){const n=t((t=>{const r="string"==typeof t?t:t.data;let o=this._terminalBufferMap.get(e);if(o)return void o.data.push(r);const s=setTimeout((()=>this.flushBuffer(e)),i);o={data:[r],timeoutId:s,dispose:()=>{clearTimeout(s),this.flushBuffer(e),n.dispose()}},this._terminalBufferMap.set(e,o)}));return n}stopBuffering(e){const t=this._terminalBufferMap.get(e);t?.dispose()}flushBuffer(e){const t=this._terminalBufferMap.get(e);t&&(this._terminalBufferMap.delete(e),this._callback(e,t.data.join("")))}}},36810:function(e,t,i){i.d(t,{l:function(){return n}});const n=(0,i(28019).yh)("IUserDataProfilesService")},14375:function(e,t,i){var n;i.d(t,{i:function(){return n}}),function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"}(n||(n={}))},76643:function(e,t,i){var n=i(20658),r=i(92231),o=i(89608),s=i(50365),a=i(63537),c=i(85315),l=i(1663),d=i(82209),u=i(87958),h=i(56687),p=i(28200),m=i(34142),g=i(80974),f=i(43878),_=i(72124),v=i(77600),b=i(52202),y=i(8685),w=i(3560),x=i(53917),C=i(71484),E=i(26713),S=i(98668),D=i(86540),T=i(6263),k=i(11301),I=i(76870),P=i(60192),A=i(55870);(0,n.zr)(D.O,D.I,n._Z.Delayed),(0,n.zr)(E.y,C.m,n._Z.Delayed),(0,n.zr)(f.J,f.H,n._Z.Delayed),(0,n.zr)(c.f7,c.jK,n._Z.Eager),(0,n.zr)(k.E,k.j,n._Z.Eager),(0,n.zr)(I.X,I.Q,n._Z.Eager),(0,n.zr)(a.E1,a.T_,n._Z.Eager),(0,n.zr)(v.a,v.L,n._Z.Eager),(0,n.zr)(A.s7,A.Qp,n._Z.Eager),(0,n.zr)(h.gM,h.uU,n._Z.Eager),(0,n.zr)(s.W,s.w,n._Z.Eager),(0,n.zr)(l.T,l.W,n._Z.Eager),(0,n.zr)(T.W,T.b,n._Z.Eager),(0,n.zr)(b.G,b.J,n._Z.Eager),(0,n.zr)(r.U,r.X,n._Z.Delayed),(0,n.zr)(p.FR,p.dX,n._Z.Eager),(0,n.zr)(m.W,m.Y,n._Z.Eager),(0,n.zr)(u.h2,u.TE,n._Z.Eager),(0,n.zr)(d.$3,d.Ry,n._Z.Eager),(0,n.zr)(P.P,P.C,n._Z.Eager),(0,n.zr)(g.rd,g.Ce,n._Z.Eager),(0,n.zr)(_.V,_.x,n._Z.Eager),(0,n.zr)(o.w,o.M,n._Z.Eager),(0,n.zr)(y.Z,y.p,n._Z.Eager),(0,n.zr)(w.fv,w.wM,n._Z.Eager),(0,n.zr)(x.v,x.y,n._Z.Eager),(0,n.zr)(S.w,S.Y,n._Z.Eager)},43878:function(e,t,i){i.d(t,{H:function(){return l},J:function(){return c}});var n=i(45493),r=i(28019),o=i(26713),s=i(78293),a=i(82722);const c=(0,r.yh)("IExtHostApiDeprecationService");let l=class{constructor(e,t){this._extHostLogService=t,this._reportedUsages=new Set,this._telemetryShape=e.getProxy(s.Tr.MainThreadTelemetry)}report(e,t,i){const n=this.getUsageKey(e,t);this._reportedUsages.has(n)||(this._reportedUsages.add(n),t.isUnderDevelopment&&this._extHostLogService.warn(`[Deprecation Warning] '${e}' is deprecated. ${i}`),this._telemetryShape.$publicLog2("extHostDeprecatedApiUsage",{extensionId:t.identifier.value,apiId:e}))}getUsageKey(e,t){return`${e}-${t.identifier.value}`}};l=(0,n.g)([(0,n.f)(0,a.O),(0,n.f)(1,o.V)],l)},11301:function(e,t,i){i.d(t,{E:function(){return u},j:function(){return h}});var n=i(45493),r=i(81557),o=i(78293),s=i(30874),a=i(26258),c=i(22837),l=i(28019),d=i(82722);const u=(0,l.yh)("IExtHostAuthentication");let h=class{constructor(e){this._authenticationProviders=new Map,this._onDidChangeSessions=new r.Q5,this.onDidChangeSessions=this._onDidChangeSessions.event,this._getSessionTaskSingler=new p,this._proxy=e.getProxy(o.Tr.MainThreadAuthentication)}async getSession(e,t,i,n={}){const r=a.kP.toKey(e.identifier),o=[...i].sort().join(" ");return await this._getSessionTaskSingler.getOrCreate(`${r} ${t} ${o}`,(async()=>{await this._proxy.$ensureProvider(t);const o=e.displayName||e.name;return this._proxy.$getSession(t,i,r,o,n)}))}async getAccounts(e){return await this._proxy.$ensureProvider(e),await this._proxy.$getAccounts(e)}async removeSession(e,t){const i=this._authenticationProviders.get(e);return i?i.provider.removeSession(t):this._proxy.$removeSession(e,t)}registerAuthenticationProvider(e,t,i,n){if(this._authenticationProviders.get(e))throw new Error(`An authentication provider with id '${e}' is already registered.`);this._authenticationProviders.set(e,{label:t,provider:i,options:n??{supportsMultipleAccounts:!1}});const r=i.onDidChangeSessions((t=>this._proxy.$sendDidChangeSessions(e,t)));return this._proxy.$registerAuthenticationProvider(e,t,n?.supportsMultipleAccounts??!1),new s.JTr((()=>{r.dispose(),this._authenticationProviders.delete(e),this._proxy.$unregisterAuthenticationProvider(e)}))}async $createSession(e,t,i){const n=this._authenticationProviders.get(e);if(n)return await n.provider.createSession(t,i);throw new Error(`Unable to find authentication provider with handle: ${e}`)}async $removeSession(e,t){const i=this._authenticationProviders.get(e);if(i)return await i.provider.removeSession(t);throw new Error(`Unable to find authentication provider with handle: ${e}`)}async $getSessions(e,t,i){const n=this._authenticationProviders.get(e);if(n)return await n.provider.getSessions(t,i);throw new Error(`Unable to find authentication provider with handle: ${e}`)}$onDidChangeAuthenticationSessions(e,t){return e.startsWith(c.b)||this._onDidChangeSessions.fire({provider:{id:e,label:t}}),Promise.resolve()}};h=(0,n.g)([(0,n.f)(0,d.O)],h);class p{constructor(){this._inFlightPromises=new Map}getOrCreate(e,t){const i=this._inFlightPromises.get(e);if(i)return i;const n=t().finally((()=>this._inFlightPromises.delete(e)));return this._inFlightPromises.set(e,n),n}}},85315:function(e,t,i){i.d(t,{SF:function(){return I},_m:function(){return P},b9:function(){return A},f7:function(){return T},jK:function(){return D}});var n=i(45493),r=i(47635),o=i(30874),s=i(54487),a=i(82998),c=i(78293),l=i(78074),d=i(26713),u=i(59267),h=i(3918),p=i(20495),m=i(42731),g=i(7428),f=i(28019),_=i(82722),v=i(34472),b=i(53976),y=i(92962),w=i(36994),x=i(43064),C=i(73426),E=i(3560),S=i(92004);let D=class{#e;#t;#i;constructor(e,t,i){this._commands=new Map,this._apiCommands=new Map,this.#e=e.getProxy(c.Tr.MainThreadCommands),this._logService=t,this.#i=i,this.#t=e.getProxy(c.Tr.MainThreadTelemetry),this.converter=new k(this,(e=>{const t=this._apiCommands.get(e);return t?.result===P.Void?t:void 0}),t),this._argumentProcessors=[{processArgument(e){return(0,u.wL)(e)}},{processArgument(e){return(0,a.rs)(e,(function(e){return h.e.isIRange(e)?s.e6.to(e):p.L.isIPosition(e)?s.Ly.to(e):h.e.isIRange(e.range)&&m.ov.isUri(e.uri)?s.xh.to(e):e instanceof b.KN?e.buffer.buffer:Array.isArray(e)?void 0:e}))}}]}registerArgumentProcessor(e){this._argumentProcessors.push(e)}registerApiCommand(e){const t=this.registerCommand(!1,e.id,(async(...t)=>{const i=e.args.map(((i,n)=>{if(!i.validate(t[n]))throw new Error(`Invalid argument '${i.name}' when running '${e.id}', received: ${"object"==typeof t[n]?JSON.stringify(t[n],null,"\t"):t[n]} `);return i.convert(t[n])})),n=await this.executeCommand(e.internalId,...i);return e.result.convert(n,t,this.converter)}),void 0,{description:e.description,args:e.args,returns:e.result.description});return this._apiCommands.set(e.id,e),new o.JTr((()=>{t.dispose(),this._apiCommands.delete(e.id)}))}registerCommand(e,t,i,n,r,s){if(this._logService.trace("ExtHostCommands#registerCommand",t),!t.trim().length)throw new Error("invalid id");if(this._commands.has(t))throw new Error(`command '${t}' already exists`);return this._commands.set(t,{callback:i,thisArg:n,metadata:r,extension:s}),e&&this.#e.$registerCommand(t),new o.JTr((()=>{this._commands.delete(t)&&e&&this.#e.$unregisterCommand(t)}))}executeCommand(e,...t){return this._logService.trace("ExtHostCommands#executeCommand",e),this._doExecuteCommand(e,t,!0)}async _doExecuteCommand(e,t,i){if(this._commands.has(e))return this.#e.$fireCommandActivationEvent(e),this._executeContributedCommand(e,t,!1);{let n=!1;const r=(0,a.rs)(t,(function(e){return e instanceof o.Lyo?s.Ly.from(e):e instanceof o.e6w?s.e6.from(e):e instanceof o.YeX?s.xh.from(e):o.XsU.isNotebookRange(e)?s.Xs.from(e):e instanceof ArrayBuffer?(n=!0,b.KN.wrap(new Uint8Array(e))):e instanceof Uint8Array?(n=!0,b.KN.wrap(e)):e instanceof b.KN?(n=!0,e):Array.isArray(e)?void 0:e}));try{const t=await this.#e.$executeCommand(e,n?new y.ky(r):r,i);return(0,u.wL)(t)}catch(i){if(i instanceof Error&&"$executeCommand:retry"===i.message)return this._doExecuteCommand(e,t,!1);throw i}}}async _executeContributedCommand(e,t,i){const n=this._commands.get(e);if(!n)throw new Error("Unknown command");const{callback:o,thisArg:s,metadata:a}=n;if(a?.args)for(let i=0;i<a.args.length;i++)try{(0,r.Nf)(t[i],a.args[i].constraint)}catch(t){throw new Error(`Running the contributed command: '${e}' failed. Illegal argument '${a.args[i].name}' - ${a.args[i].description}`)}const c=x.G.create();try{return await o.apply(s,t)}catch(r){if(e===this.converter.delegatingCommandId){const i=this.converter.getActualCommand(...t);i&&(e=i.command)}if(this._logService.error(r,e,n.extension?.identifier),!i)throw r;if(n.extension?.identifier){const e=this.#i.onExtensionError(n.extension.identifier,r);this._logService.trace("forwarded error to extension?",e,n.extension?.identifier)}throw new class extends Error{constructor(){super((0,w.yJ)(r)),this.id=e,this.source=n.extension?.displayName??n.extension?.name}}}finally{this._reportTelemetry(n,e,c.elapsed())}}_reportTelemetry(e,t,i){e.extension&&this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:e.extension.identifier.value,id:new C.NE(t),duration:i})}$executeContributedCommand(e,...t){this._logService.trace("ExtHostCommands#$executeContributedCommand",e);const i=this._commands.get(e);return i?(t=t.map((e=>this._argumentProcessors.reduce(((e,t)=>t.processArgument(e,i.extension?.identifier)),e))),this._executeContributedCommand(e,t,!0)):Promise.reject(new Error(`Contributed command '${e}' does not exist.`))}getCommands(e=!1){return this._logService.trace("ExtHostCommands#getCommands",e),this.#e.$getCommands().then((t=>(e&&(t=t.filter((e=>"_"!==e[0]))),t)))}$getContributedCommandMetadata(){const e=Object.create(null);for(const[t,i]of this._commands){const{metadata:n}=i;n&&(e[t]=n)}return Promise.resolve(e)}};D=(0,n.g)([(0,n.f)(0,_.O),(0,n.f)(1,d.V),(0,n.f)(2,E.fv)],D);const T=(0,f.yh)("IExtHostCommands");class k{constructor(e,t,i){this._commands=e,this._lookupApiCommand=t,this._logService=i,this.delegatingCommandId=`__vsc${(0,S.R)()}`,this._cache=new Map,this._cachIdPool=0,this._commands.registerCommand(!0,this.delegatingCommandId,this._executeConvertedCommand,this)}toInternal(e,t){if(!e)return;const i={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return i;const n=this._lookupApiCommand(e.command);if(n)i.id=n.internalId,i.arguments=n.args.map(((t,i)=>t.convert(e.arguments&&e.arguments[i])));else if((0,l.Of)(e.arguments)){const n=`${e.command} /${++this._cachIdPool}`;this._cache.set(n,e),t.add((0,g.OF)((()=>{this._cache.delete(n),this._logService.trace("CommandsConverter#DISPOSE",n)}))),i.$ident=n,i.id=this.delegatingCommandId,i.arguments=[n],this._logService.trace("CommandsConverter#CREATE",e.command,n)}return i}fromInternal(e){return"string"==typeof e.$ident?this._cache.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this._cache.get(e[0])}_executeConvertedCommand(...e){const t=this.getActualCommand(...e);return this._logService.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this._commands.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}}class I{static{this.Uri=new I("uri","Uri of a text document",(e=>m.ov.isUri(e)),(e=>e))}static{this.Position=new I("position","A position in a text document",(e=>o.Lyo.isPosition(e)),s.Ly.from)}static{this.Range=new I("range","A range in a text document",(e=>o.e6w.isRange(e)),s.e6.from)}static{this.Selection=new I("selection","A selection in a text document",(e=>o.Y19.isSelection(e)),s.Y1.from)}static{this.Number=new I("number","",(e=>"number"==typeof e),(e=>e))}static{this.String=new I("string","",(e=>"string"==typeof e),(e=>e))}static{this.StringArray=I.Arr(I.String)}static Arr(e){return new I(`${e.name}_array`,`Array of ${e.name}, ${e.description}`,(t=>Array.isArray(t)&&t.every((t=>e.validate(t)))),(t=>t.map((t=>e.convert(t)))))}static{this.CallHierarchyItem=new I("item","A call hierarchy item",(e=>e instanceof o.llk),s.ll.from)}static{this.TypeHierarchyItem=new I("item","A type hierarchy item",(e=>e instanceof o.fQK),s.fQ.from)}static{this.TestItem=new I("testItem","A VS Code TestItem",(e=>e instanceof v.SJ),s.UK.from)}constructor(e,t,i,n){this.name=e,this.description=t,this.validate=i,this.convert=n}optional(){return new I(this.name,`(optional) ${this.description}`,(e=>null==e||this.validate(e)),(e=>void 0===e?void 0:null===e?null:this.convert(e)))}with(e,t){return new I(e??this.name,t??this.description,this.validate,this.convert)}}class P{static{this.Void=new P("no result",(e=>e))}constructor(e,t){this.description=e,this.convert=t}}class A{constructor(e,t,i,n,r){this.id=e,this.internalId=t,this.description=i,this.args=n,this.result=r}}},63537:function(e,t,i){i.d(t,{E1:function(){return x},T_:function(){return y}});var n=i(45493),r=i(82998),o=i(81557),s=i(89608),a=i(78293),c=i(30874),l=i(4030),d=i(2756),u=i(77264),h=i(47635),p=i(35820),m=i(28019),g=i(82722),f=i(26713),_=i(42731);function v(e,t){if(t){const i=t.split(".");let n=e;for(let e=0;n&&e<i.length;e++)n=n[i[e]];return n}}function b(e){return e instanceof _.ov?{resource:e}:function(e){return e&&e.uri instanceof _.ov&&e.languageId&&"string"==typeof e.languageId}(e)?{resource:e.uri,overrideIdentifier:e.languageId}:function(e){return e&&!e.uri&&e.languageId&&"string"==typeof e.languageId}(e)?{overrideIdentifier:e.languageId}:function(e){return e&&e.uri instanceof _.ov&&(!e.name||"string"==typeof e.name)&&(!e.index||"number"==typeof e.index)}(e)?{resource:e.uri}:null===e?{resource:null}:void 0}let y=class{constructor(e,t,i){this._proxy=e.getProxy(a.Tr.MainThreadConfiguration),this._extHostWorkspace=t,this._logService=i,this._barrier=new p.U8,this._actual=null}getConfigProvider(){return this._barrier.wait().then((e=>this._actual))}$initializeConfiguration(e){this._actual=new w(this._proxy,this._extHostWorkspace,e,this._logService),this._barrier.open()}$acceptConfigurationChanged(e,t){this.getConfigProvider().then((i=>i.$acceptConfigurationChanged(e,t)))}};y=(0,n.g)([(0,n.f)(0,g.O),(0,n.f)(1,s.w),(0,n.f)(2,f.V)],y);class w{constructor(e,t,i,n){this._onDidChangeConfiguration=new o.Q5,this._proxy=e,this._logService=n,this._extHostWorkspace=t,this._configuration=d.VK.parse(i,n),this._configurationScopes=this._toMap(i.configurationScopes)}get onDidChangeConfiguration(){return this._onDidChangeConfiguration&&this._onDidChangeConfiguration.event}$acceptConfigurationChanged(e,t){const i={data:this._configuration.toData(),workspace:this._extHostWorkspace.workspace};this._configuration=d.VK.parse(e,this._logService),this._configurationScopes=this._toMap(e.configurationScopes),this._onDidChangeConfiguration.fire(this._toConfigurationChangeEvent(t,i))}getConfiguration(e,t,i){const n=b(t)||{},o=this._toReadonlyValue(e?v(this._configuration.getValue(void 0,n,this._extHostWorkspace.workspace),e):this._configuration.getValue(void 0,n,this._extHostWorkspace.workspace));e&&this._validateConfigurationAccess(e,n,i?.identifier);const s={has(e){return void 0!==v(o,e)},get:(t,s)=>{this._validateConfigurationAccess(e?`${e}.${t}`:t,n,i?.identifier);let a=v(o,t);if(void 0===a)a=s;else{let e;const i=(t,n)=>{if((0,h.Kn)(t)){let s;const a=()=>{e=e||(0,r.I8)(o),s=s||v(e,n)};return new Proxy(t,{get:(t,r)=>{if("string"==typeof r&&"tojson"===r.toLowerCase())return a(),()=>s;if(e)return s=s||v(e,n),s[r];const o=t[r];return"string"==typeof r?i(o,`${n}.${r}`):o},set:(e,t,i)=>(a(),s&&(s[t]=i),!0),deleteProperty:(e,t)=>(a(),s&&delete s[t],!0),defineProperty:(e,t,i)=>(a(),s&&Object.defineProperty(s,t,i),!0)})}return Array.isArray(t)?(0,r.I8)(t):t};a=i(a,t)}return a},update:(t,i,r,o)=>{t=e?`${e}.${t}`:t;const s=function(e){if(null==e)return null;if("boolean"==typeof e)return e?l.JD.USER:l.JD.WORKSPACE;switch(e){case c.JDx.Global:return l.JD.USER;case c.JDx.Workspace:return l.JD.WORKSPACE;case c.JDx.WorkspaceFolder:return l.JD.WORKSPACE_FOLDER}}(r);return void 0!==i?this._proxy.$updateConfigurationOption(s,t,i,n,o):this._proxy.$removeConfigurationOption(s,t,n,o)},inspect:t=>{t=e?`${e}.${t}`:t;const i=this._configuration.inspect(t,n,this._extHostWorkspace.workspace);if(i)return{key:t,defaultValue:(0,r.I8)(i.policy?.value??i.default?.value),globalValue:(0,r.I8)(i.user?.value??i.application?.value),workspaceValue:(0,r.I8)(i.workspace?.value),workspaceFolderValue:(0,r.I8)(i.workspaceFolder?.value),defaultLanguageValue:(0,r.I8)(i.default?.override),globalLanguageValue:(0,r.I8)(i.user?.override??i.application?.override),workspaceLanguageValue:(0,r.I8)(i.workspace?.override),workspaceFolderLanguageValue:(0,r.I8)(i.workspaceFolder?.override),languageIds:(0,r.I8)(i.overrideIdentifiers)}}};return"object"==typeof o&&(0,r.jB)(s,o,!1),Object.freeze(s)}_toReadonlyValue(e){const t=e=>(0,h.Kn)(e)?new Proxy(e,{get:(e,i)=>t(e[i]),set:(e,t,i)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(t)}' of object`)},deleteProperty:(e,t)=>{throw new Error(`TypeError: Cannot delete read only property '${String(t)}' of object`)},defineProperty:(e,t)=>{throw new Error(`TypeError: Cannot define property '${String(t)}' for a readonly object`)},setPrototypeOf:e=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):e;return t(e)}_validateConfigurationAccess(e,t,i){const n=u.eU.test(e)?u.ue.RESOURCE:this._configurationScopes.get(e),r=i?`[${i.value}] `:"";u.ue.RESOURCE!==n?u.ue.WINDOW!==n||t?.resource&&this._logService.warn(`${r}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`):void 0===t?.resource&&this._logService.warn(`${r}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`)}_toConfigurationChangeEvent(e,t){const i=new d.YX(e,t,this._configuration,this._extHostWorkspace.workspace,this._logService);return Object.freeze({affectsConfiguration:(e,t)=>i.affectsConfiguration(e,b(t))})}_toMap(e){return e.reduce(((e,t)=>(e.set(t[0],t[1]),e)),new Map)}}const x=(0,m.yh)("IExtHostConfiguration")},56687:function(e,t,i){i.d(t,{gM:function(){return D},uU:function(){return R}});var n=i(45493),r=i(35820),o=i(81557),s=i(42731),a=i(7428),c=i(26258),l=i(28019),d=i(78293),u=i(53917),h=i(26841),p=i(82722),m=i(30874),g=i(89608),f=i(47862),_=i(13973),v=i(37358),b=i(63537),y=i(98668),w=i(27528),x=i(85315),C=i(54487),E=i(78074),S=i(55870);const D=(0,l.yh)("IExtHostDebugService");let T=class extends a.JT{get onDidStartDebugSession(){return this._onDidStartDebugSession.event}get onDidTerminateDebugSession(){return this._onDidTerminateDebugSession.event}get onDidChangeActiveDebugSession(){return this._onDidChangeActiveDebugSession.event}get activeDebugSession(){return this._activeDebugSession?.api}get onDidReceiveDebugSessionCustomEvent(){return this._onDidReceiveDebugSessionCustomEvent.event}get activeDebugConsole(){return this._activeDebugConsole.value}constructor(e,t,i,n,r,s,a,c){super(),this._workspaceService=t,this._extensionService=i,this._configurationService=n,this._editorTabs=r,this._variableResolver=s,this._commands=a,this._testing=c,this._debugSessions=new Map,this._debugVisualizationTreeItemIdsCounter=0,this._debugVisualizationProviders=new Map,this._debugVisualizationTrees=new Map,this._debugVisualizationTreeItemIds=new WeakMap,this._debugVisualizationElements=new Map,this._visualizers=new Map,this._visualizerIdCounter=0,this._configProviderHandleCounter=0,this._configProviders=[],this._adapterFactoryHandleCounter=0,this._adapterFactories=[],this._trackerFactoryHandleCounter=0,this._trackerFactories=[],this._debugAdapters=new Map,this._debugAdaptersTrackers=new Map,this._onDidStartDebugSession=this._register(new o.Q5),this._onDidTerminateDebugSession=this._register(new o.Q5),this._onDidChangeActiveDebugSession=this._register(new o.Q5),this._onDidReceiveDebugSessionCustomEvent=this._register(new o.Q5),this._debugServiceProxy=e.getProxy(d.Tr.MainThreadDebugService),this._onDidChangeBreakpoints=this._register(new o.Q5),this._onDidChangeActiveStackItem=this._register(new o.Q5),this._activeDebugConsole=new I(this._debugServiceProxy),this._breakpoints=new Map,this._extensionService.getExtensionRegistry().then((e=>{this._register(e.onDidChange((t=>{this.registerAllDebugTypes(e)}))),this.registerAllDebugTypes(e)}))}async $getVisualizerTreeItem(e,t){const i=this.hydrateVisualizationContext(t);if(!i)return;const n=await(this._debugVisualizationTrees.get(e)?.getTreeItem?.(i));return n?this.convertVisualizerTreeItem(e,n):void 0}registerDebugVisualizationTree(e,t,i){const n=c.kP.toKey(e.identifier),r=this.extensionVisKey(n,t);if(this._debugVisualizationProviders.has(r))throw new Error(`A debug visualization provider with id '${t}' is already registered`);return this._debugVisualizationTrees.set(r,i),this._debugServiceProxy.$registerDebugVisualizerTree(r,!!i.editItem),(0,a.OF)((()=>{this._debugServiceProxy.$unregisterDebugVisualizerTree(r),this._debugVisualizationTrees.delete(t)}))}async $getVisualizerTreeItemChildren(e,t){const i=this._debugVisualizationElements.get(t)?.item;if(!i)return[];const n=await(this._debugVisualizationTrees.get(e)?.getChildren?.(i));return n?.map((t=>this.convertVisualizerTreeItem(e,t)))||[]}async $editVisualizerTreeItem(e,t){const i=this._debugVisualizationElements.get(e);if(!i)return;const n=await(this._debugVisualizationTrees.get(i.provider)?.editItem?.(i.item,t));return this.convertVisualizerTreeItem(i.provider,n||i.item)}$disposeVisualizedTree(e){const t=this._debugVisualizationElements.get(e);if(!t)return;const i=[t.children];for(const e of i)if(e)for(const t of e)i.push(this._debugVisualizationElements.get(t)?.children),this._debugVisualizationElements.delete(t)}convertVisualizerTreeItem(e,t){let i=this._debugVisualizationTreeItemIds.get(t);return i||(i=this._debugVisualizationTreeItemIdsCounter++,this._debugVisualizationTreeItemIds.set(t,i),this._debugVisualizationElements.set(i,{provider:e,item:t})),C.rT.from(t,i)}asDebugSourceUri(e,t){const i=e;if("number"==typeof i.sourceReference&&i.sourceReference>0){let e=`debug:${encodeURIComponent(i.path||"")}`,n="?";return t&&(e+=`${n}session=${encodeURIComponent(t.id)}`,n="&"),e+=`${n}ref=${i.sourceReference}`,s.ov.parse(e)}if(i.path)return s.ov.file(i.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}registerAllDebugTypes(e){const t=[];for(const i of e.getAllExtensionDescriptions())if(i.contributes){const e=i.contributes.debuggers;if(e&&e.length>0)for(const i of e)(0,v.b3)(i)&&t.push(i.type)}this._debugServiceProxy.$registerDebugTypes(t)}get activeStackItem(){return this._activeStackItem}get onDidChangeActiveStackItem(){return this._onDidChangeActiveStackItem.event}get onDidChangeBreakpoints(){return this._onDidChangeBreakpoints.event}get breakpoints(){const e=[];return this._breakpoints.forEach((t=>e.push(t))),e}async $resolveDebugVisualizer(e,t){const i=this._visualizers.get(e);if(!i)throw new Error(`No debug visualizer found with id '${e}'`);let{v:n,provider:r,extensionId:o}=i;if(n.visualization||(n=await(r.resolveDebugVisualization?.(n,t))||n,i.v=n),!n.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${r}'`);return this.serializeVisualization(o,n.visualization)}async $executeDebugVisualizerCommand(e){const t=this._visualizers.get(e);if(!t)throw new Error(`No debug visualizer found with id '${e}'`);const i=t.v.visualization;i&&"command"in i&&this._commands.executeCommand(i.command,...i.arguments||[])}hydrateVisualizationContext(e){const t=this._debugSessions.get(e.sessionId);return t&&{session:t.api,variable:e.variable,containerId:e.containerId,frameId:e.frameId,threadId:e.threadId}}async $provideDebugVisualizers(e,t,i,n){const r=this.hydrateVisualizationContext(i),o=this.extensionVisKey(e,t),s=this._debugVisualizationProviders.get(o);if(!r||!s)return[];const a=await s.provideDebugVisualization(r,n);return a?a.map((t=>{const i=++this._visualizerIdCounter;this._visualizers.set(i,{v:t,provider:s,extensionId:e});const n=t.iconPath?this.getIconPathOrClass(t.iconPath):void 0;return{id:i,name:t.name,iconClass:n?.iconClass,iconPath:n?.iconPath,visualization:this.serializeVisualization(e,t.visualization)}})):[]}$disposeDebugVisualizers(e){for(const t of e)this._visualizers.delete(t)}registerDebugVisualizationProvider(e,t,i){if(!e.contributes?.debugVisualizers?.some((e=>e.id===t)))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${t})`);const n=c.kP.toKey(e.identifier),r=this.extensionVisKey(n,t);if(this._debugVisualizationProviders.has(r))throw new Error(`A debug visualization provider with id '${t}' is already registered`);return this._debugVisualizationProviders.set(r,i),this._debugServiceProxy.$registerDebugVisualizer(n,t),(0,a.OF)((()=>{this._debugServiceProxy.$unregisterDebugVisualizer(n,t),this._debugVisualizationProviders.delete(t)}))}addBreakpoints(e){const t=e.filter((e=>{const t=e.id;return!this._breakpoints.has(t)&&(this._breakpoints.set(t,e),!0)}));this.fireBreakpointChanges(t,[],[]);const i=[],n=new Map;for(const e of t)if(e instanceof m.TGJ){let t=n.get(e.location.uri.toString());t||(t={type:"sourceMulti",uri:e.location.uri,lines:[]},n.set(e.location.uri.toString(),t),i.push(t)),t.lines.push({id:e.id,enabled:e.enabled,condition:e.condition,hitCondition:e.hitCondition,logMessage:e.logMessage,line:e.location.range.start.line,character:e.location.range.start.character,mode:e.mode})}else e instanceof m.TpX&&i.push({type:"function",id:e.id,enabled:e.enabled,hitCondition:e.hitCondition,logMessage:e.logMessage,condition:e.condition,functionName:e.functionName,mode:e.mode});return this._debugServiceProxy.$registerBreakpoints(i)}removeBreakpoints(e){const t=e.filter((e=>this._breakpoints.delete(e.id)));this.fireBreakpointChanges([],t,[]);const i=t.filter((e=>e instanceof m.TGJ)).map((e=>e.id)),n=t.filter((e=>e instanceof m.TpX)).map((e=>e.id)),r=t.filter((e=>e instanceof m.K1l)).map((e=>e.id));return this._debugServiceProxy.$unregisterBreakpoints(i,n,r)}startDebugging(e,t,i){const n=i.testRun&&this._testing.getMetadataForRun(i.testRun);return this._debugServiceProxy.$startDebugging(e?e.uri:void 0,t,{parentSessionID:i.parentSession?i.parentSession.id:void 0,lifecycleManagedByParent:i.lifecycleManagedByParent,repl:i.consoleMode===m.lZM.MergeWithParent?"mergeWithParent":"separate",noDebug:i.noDebug,compact:i.compact,suppressSaveBeforeStart:i.suppressSaveBeforeStart,testRun:n&&{runId:n.runId,taskId:n.taskId},suppressDebugStatusbar:i.suppressDebugStatusbar??i.debugUI?.simple,suppressDebugToolbar:i.suppressDebugToolbar??i.debugUI?.simple,suppressDebugView:i.suppressDebugView??i.debugUI?.simple})}stopDebugging(e){return this._debugServiceProxy.$stopDebugging(e?e.id:void 0)}registerDebugConfigurationProvider(e,t,i){if(!t)return new m.JTr((()=>{}));const n=this._configProviderHandleCounter++;return this._configProviders.push({type:e,handle:n,provider:t}),this._debugServiceProxy.$registerDebugConfigurationProvider(e,i,!!t.provideDebugConfigurations,!!t.resolveDebugConfiguration,!!t.resolveDebugConfigurationWithSubstitutedVariables,n),new m.JTr((()=>{this._configProviders=this._configProviders.filter((e=>e.provider!==t)),this._debugServiceProxy.$unregisterDebugConfigurationProvider(n)}))}registerDebugAdapterDescriptorFactory(e,t,i){if(!i)return new m.JTr((()=>{}));if(!this.definesDebugType(e,t))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${t}' debugger.`);if(this.getAdapterDescriptorFactoryByType(t))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const n=this._adapterFactoryHandleCounter++;return this._adapterFactories.push({type:t,handle:n,factory:i}),this._debugServiceProxy.$registerDebugAdapterDescriptorFactory(t,n),new m.JTr((()=>{this._adapterFactories=this._adapterFactories.filter((e=>e.factory!==i)),this._debugServiceProxy.$unregisterDebugAdapterDescriptorFactory(n)}))}registerDebugAdapterTrackerFactory(e,t){if(!t)return new m.JTr((()=>{}));const i=this._trackerFactoryHandleCounter++;return this._trackerFactories.push({type:e,handle:i,factory:t}),new m.JTr((()=>{this._trackerFactories=this._trackerFactories.filter((e=>e.factory!==t))}))}async $runInTerminal(e,t){return Promise.resolve(void 0)}async $substituteVariables(e,t){let i;const n=await this.getFolder(e);n&&(i={uri:n.uri,name:n.name,index:n.index,toResource:()=>{throw new Error("Not implemented")}});return(await this._variableResolver.getResolver()).resolveAnyAsync(i,t)}createDebugAdapter(e,t){if("implementation"===e.type)return new A(e.implementation)}createSignService(){}async $startDASession(e,t){const i=this,n=await this.getSession(t);return this.getAdapterDescriptor(this.getAdapterDescriptorFactoryByType(n.type),n).then((t=>{if(!t)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${n.type}' (extension might have failed to activate)`);const r=this.convertToDto(t),o=this.createDebugAdapter(r,n);if(!o)throw new Error(`Couldn't create a debug adapter for type '${n.type}'.`);const s=o;return this._debugAdapters.set(e,s),this.getDebugAdapterTrackers(n).then((t=>(t&&this._debugAdaptersTrackers.set(e,t),s.onMessage((async n=>{if("request"===n.type&&"handshake"===n.command){const e=n,t={type:"response",seq:0,command:e.command,request_seq:e.seq,success:!0};this._signService||(this._signService=this.createSignService());try{if(!this._signService)throw new Error("no signer");{const i=await this._signService.sign(e.arguments.value);t.body={signature:i},s.sendResponse(t)}}catch(e){t.success=!1,t.message=e.message,s.sendResponse(t)}}else t&&t.onDidSendMessage&&t.onDidSendMessage(n),n=(0,v.p0)(n,!0),i._debugServiceProxy.$acceptDAMessage(e,n)})),s.onError((i=>{t&&t.onError&&t.onError(i),this._debugServiceProxy.$acceptDAError(e,i.name,i.message,i.stack)})),s.onExit((i=>{t&&t.onExit&&t.onExit(i??void 0,void 0),this._debugServiceProxy.$acceptDAExit(e,i??void 0,void 0)})),t&&t.onWillStartSession&&t.onWillStartSession(),s.startSession())))}))}$sendDAMessage(e,t){t=(0,v.lv)(t,!1);const i=this._debugAdaptersTrackers.get(e);i&&i.onWillReceiveMessage&&i.onWillReceiveMessage(t);const n=this._debugAdapters.get(e);n?.sendMessage(t)}$stopDASession(e){const t=this._debugAdaptersTrackers.get(e);this._debugAdaptersTrackers.delete(e),t&&t.onWillStopSession&&t.onWillStopSession();const i=this._debugAdapters.get(e);return this._debugAdapters.delete(e),i?i.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(e){const t=[],i=[],n=[];if(e.added)for(const i of e.added){const e=i.id;if(e&&!this._breakpoints.has(e)){let n;if("function"===i.type)n=new m.TpX(i.functionName,i.enabled,i.condition,i.hitCondition,i.logMessage,i.mode);else if("data"===i.type)n=new m.K1l(i.label,i.dataId,i.canPersist,i.enabled,i.hitCondition,i.condition,i.logMessage,i.mode);else{const e=s.ov.revive(i.uri);n=new m.TGJ(new m.YeX(e,new m.Lyo(i.line,i.character)),i.enabled,i.condition,i.hitCondition,i.logMessage,i.mode)}(0,m.YL6)(n,e),this._breakpoints.set(e,n),t.push(n)}}if(e.removed)for(const t of e.removed){const e=this._breakpoints.get(t);e&&(this._breakpoints.delete(t),i.push(e))}if(e.changed)for(const t of e.changed)if(t.id){const e=this._breakpoints.get(t.id);if(e){if(e instanceof m.TpX&&"function"===t.type){const i=e;i.enabled=t.enabled,i.condition=t.condition,i.hitCondition=t.hitCondition,i.logMessage=t.logMessage,i.functionName=t.functionName}else if(e instanceof m.TGJ&&"source"===t.type){const i=e;i.enabled=t.enabled,i.condition=t.condition,i.hitCondition=t.hitCondition,i.logMessage=t.logMessage,i.location=new m.YeX(s.ov.revive(t.uri),new m.Lyo(t.line,t.character))}n.push(e)}}this.fireBreakpointChanges(t,i,n)}async $acceptStackFrameFocus(e){let t;if(e){const i=await this.getSession(e.sessionId);t="thread"===e.kind?new m.hNq(i.api,e.threadId):new m.U07(i.api,e.threadId,e.frameId)}this._activeStackItem=t,this._onDidChangeActiveStackItem.fire(this._activeStackItem)}$provideDebugConfigurations(e,t,i){return(0,r.OH)((async()=>{const n=this.getConfigProviderByHandle(e);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const r=await this.getFolder(t);return n.provideDebugConfigurations(r,i)})).then((e=>{if(!e)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return e}))}$resolveDebugConfiguration(e,t,i,n){return(0,r.OH)((async()=>{const r=this.getConfigProviderByHandle(e);if(!r)throw new Error("no DebugConfigurationProvider found");if(!r.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.getFolder(t);return r.resolveDebugConfiguration(o,i,n)}))}$resolveDebugConfigurationWithSubstitutedVariables(e,t,i,n){return(0,r.OH)((async()=>{const r=this.getConfigProviderByHandle(e);if(!r)throw new Error("no DebugConfigurationProvider found");if(!r.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.getFolder(t);return r.resolveDebugConfigurationWithSubstitutedVariables(o,i,n)}))}async $provideDebugAdapter(e,t){const i=this.getAdapterDescriptorFactoryByHandle(e);if(!i)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const n=await this.getSession(t);return this.getAdapterDescriptor(i,n).then((e=>{if(!e)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${n.type}'`);return this.convertToDto(e)}))}async $acceptDebugSessionStarted(e){const t=await this.getSession(e);this._onDidStartDebugSession.fire(t.api)}async $acceptDebugSessionTerminated(e){const t=await this.getSession(e);t&&(this._onDidTerminateDebugSession.fire(t.api),this._debugSessions.delete(t.id))}async $acceptDebugSessionActiveChanged(e){this._activeDebugSession=e?await this.getSession(e):void 0,this._onDidChangeActiveDebugSession.fire(this._activeDebugSession?.api)}async $acceptDebugSessionNameChanged(e,t){const i=await this.getSession(e);i?._acceptNameChanged(t)}async $acceptDebugSessionCustomEvent(e,t){const i={session:(await this.getSession(e)).api,event:t.event,body:t.body};this._onDidReceiveDebugSessionCustomEvent.fire(i)}convertToDto(e){if(e instanceof m.FLm)return{type:"executable",command:e.command,args:e.args,options:e.options};if(e instanceof m.cZI)return{type:"server",port:e.port,host:e.host};if(e instanceof m.HGt)return{type:"pipeServer",path:e.path};if(e instanceof m.yr7)return{type:"implementation",implementation:e.implementation};throw new Error("convertToDto unexpected type")}getAdapterDescriptorFactoryByType(e){const t=this._adapterFactories.filter((t=>t.type===e));if(t.length>0)return t[0].factory}getAdapterDescriptorFactoryByHandle(e){const t=this._adapterFactories.filter((t=>t.handle===e));if(t.length>0)return t[0].factory}getConfigProviderByHandle(e){const t=this._configProviders.filter((t=>t.handle===e));if(t.length>0)return t[0].provider}definesDebugType(e,t){if(e.contributes){const i=e.contributes.debuggers;if(i&&i.length>0)for(const e of i)if(e.label&&e.type&&e.type===t)return!0}return!1}getDebugAdapterTrackers(e){const t=e.configuration.type,i=this._trackerFactories.filter((e=>e.type===t||"*"===e.type)).map((t=>(0,r.OH)((()=>t.factory.createDebugAdapterTracker(e.api))).then((e=>e),(e=>null))));return Promise.race([Promise.all(i).then((e=>{const t=(0,E.kX)(e);if(t.length>0)return new P(t)})),new Promise((e=>setTimeout((()=>e(void 0)),1e3)))]).catch((e=>{}))}async getAdapterDescriptor(e,t){const i=t.configuration.debugServer;if("number"==typeof i)return Promise.resolve(new m.cZI(i));if(e){const i=await this._extensionService.getExtensionRegistry();return(0,r.OH)((()=>e.createDebugAdapterDescriptor(t.api,this.daExecutableFromPackage(t,i)))).then((e=>{if(e)return e}))}const n=await this._extensionService.getExtensionRegistry();return Promise.resolve(this.daExecutableFromPackage(t,n))}daExecutableFromPackage(e,t){}fireBreakpointChanges(e,t,i){(e.length>0||t.length>0||i.length>0)&&this._onDidChangeBreakpoints.fire(Object.freeze({added:e,removed:t,changed:i}))}async getSession(e){if(e){if("string"!=typeof e){let t=this._debugSessions.get(e.id);if(!t){const i=await this.getFolder(e.folderUri),n=e.parent?this._debugSessions.get(e.parent):void 0;t=new k(this._debugServiceProxy,e.id,e.type,e.name,i,e.configuration,n?.api),this._debugSessions.set(t.id,t),this._debugServiceProxy.$sessionCached(t.id)}return t}{const t=this._debugSessions.get(e);if(t)return t}}throw new Error("cannot find session")}getFolder(e){if(e){const t=s.ov.revive(e);return this._workspaceService.resolveWorkspaceFolder(t)}return Promise.resolve(void 0)}extensionVisKey(e,t){return`${e}\0${t}`}serializeVisualization(e,t){if(t){if("title"in t&&"command"in t)return{type:_.dJ.Command};if("treeId"in t)return{type:_.dJ.Tree,id:`${e}\0${t.treeId}`};throw new Error("Unsupported debug visualization type")}}getIconPathOrClass(e){const t=this.getIconUris(e);let i,n;return"id"in t?n=w.kS.asClassName(t):i=t,{iconPath:i,iconClass:n}}getIconUris(e){if(e instanceof m.kS8)return{id:e.id};const t="object"==typeof e&&"dark"in e?e.dark:e,i="object"==typeof e&&"light"in e?e.light:e;return{dark:"string"==typeof t?s.ov.file(t):t,light:"string"==typeof i?s.ov.file(i):i}}};T=(0,n.g)([(0,n.f)(0,p.O),(0,n.f)(1,g.w),(0,n.f)(2,h.k2),(0,n.f)(3,b.E1),(0,n.f)(4,u.v),(0,n.f)(5,y.w),(0,n.f)(6,x.f7),(0,n.f)(7,S.s7)],T);class k{constructor(e,t,i,n,r,o,s){this._debugServiceProxy=e,this._id=t,this._type=i,this._name=n,this._workspaceFolder=r,this._configuration=o,this._parentSession=s}get api(){const e=this;return this.apiSession??=Object.freeze({id:e._id,type:e._type,get name(){return e._name},set name(t){e._name=t,e._debugServiceProxy.$setDebugSessionName(e._id,t)},parentSession:e._parentSession,workspaceFolder:e._workspaceFolder,configuration:e._configuration,customRequest(t,i){return e._debugServiceProxy.$customDebugAdapterRequest(e._id,t,i)},getDebugProtocolBreakpoint(t){return e._debugServiceProxy.$getDebugProtocolBreakpoint(e._id,t.id)}})}get id(){return this._id}get type(){return this._type}_acceptNameChanged(e){this._name=e}get configuration(){return this._configuration}}class I{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(e){this.append(e+"\n")}})}}class P{constructor(e){this.trackers=e}onWillStartSession(){this.trackers.forEach((e=>e.onWillStartSession?e.onWillStartSession():void 0))}onWillReceiveMessage(e){this.trackers.forEach((t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0))}onDidSendMessage(e){this.trackers.forEach((t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0))}onWillStopSession(){this.trackers.forEach((e=>e.onWillStopSession?e.onWillStopSession():void 0))}onError(e){this.trackers.forEach((t=>t.onError?t.onError(e):void 0))}onExit(e,t){this.trackers.forEach((i=>i.onExit?i.onExit(e,t):void 0))}}class A extends f.o{constructor(e){super(),this.implementation=e,e.onDidSendMessage((e=>{this.acceptMessage(e)}))}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.implementation.handleMessage(e)}stopSession(){return this.implementation.dispose(),Promise.resolve(void 0)}}let R=class extends T{constructor(e,t,i,n,r,o,s,a){super(e,t,i,n,r,o,s,a)}};R=(0,n.g)([(0,n.f)(0,p.O),(0,n.f)(1,g.w),(0,n.f)(2,h.k2),(0,n.f)(3,b.E1),(0,n.f)(4,u.v),(0,n.f)(5,y.w),(0,n.f)(6,x.f7),(0,n.f)(7,S.s7)],R)},50365:function(e,t,i){i.d(t,{W:function(){return f},w:function(){return g}});var n,r=i(45493),o=i(42731),s=i(78293),a=i(30874),c=i(28019),l=i(82722),d=i(26713),u=i(78074),h=i(88023),p=i(15229),m=i(22423);let g=class{static{n=this}static{this._handlePool=0}static{this._maxEventSize=250}constructor(e,t){this._logService=t,this._provider=new Map,this._proxy=e.getProxy(s.Tr.MainThreadDecorations)}registerFileDecorationProvider(e,t){const i=n._handlePool++;this._provider.set(i,{provider:e,extensionDescription:t}),this._proxy.$registerDecorationProvider(i,t.identifier.value);const r=e.onDidChangeFileDecorations&&e.onDidChangeFileDecorations((e=>{if(!e)return void this._proxy.$onDidChange(i,null);const r=(0,u._2)(e);if(r.length<=n._maxEventSize)return void this._proxy.$onDidChange(i,r);this._logService.warn("[Decorations] CAPPING events from decorations provider",t.identifier.value,r.length);const o=r.map((e=>({uri:e,rank:(0,h.QX)(e.path,"/")}))),s=(0,u.vM)(o,((e,t)=>e.rank-t.rank||(0,h.qu)(e.uri.path,t.uri.path))),a=[];e:for(const e of s){let t;for(const i of e){const e=(0,p.XX)(i.uri.path);if(t!==e&&(t=e,a.push(i.uri)>=n._maxEventSize))break e}}this._proxy.$onDidChange(i,a)}));return new a.JTr((()=>{r?.dispose(),this._proxy.$unregisterDecorationProvider(i),this._provider.delete(i)}))}async $provideDecorations(e,t,i){if(!this._provider.has(e))return Object.create(null);const n=Object.create(null),{provider:r,extensionDescription:s}=this._provider.get(e);return await Promise.all(t.map((async e=>{try{const{uri:t,id:c}=e,l=await Promise.resolve(r.provideFileDecoration(o.ov.revive(t),i));if(!l)return;try{a.unW.validate(l),l.badge&&"string"!=typeof l.badge&&(0,m.H5)(s,"codiconDecoration"),n[c]=[l.propagate,l.tooltip,l.badge,l.color]}catch(e){this._logService.warn(`INVALID decoration from extension '${s.identifier.value}': ${e}`)}}catch(e){this._logService.error(e)}}))),n}};g=n=(0,r.g)([(0,r.f)(0,l.O),(0,r.f)(1,d.V)],g);const f=(0,c.yh)("IExtHostDecorations")},10456:function(e,t,i){i.d(t,{T7:function(){return u},gR:function(){return h}});var n=i(23088),r=i(59301),o=i(88023),s=i(17263),a=i(17936),c=i(30874),l=i(78074);const d=new Map;function u(e,t){t?d.set(e,t):d.delete(e)}class h extends s.v{constructor(e,t,i,n,r,o,s){super(t,i,n,r),this._proxy=e,this._languageId=o,this._isDirty=s,this._isDisposed=!1}dispose(){(0,n.ok)(!this._isDisposed),this._isDisposed=!0,this._isDirty=!1}equalLines(e){return(0,l.fS)(this._lines,e)}get document(){if(!this._document){const e=this;this._document={get uri(){return e._uri},get fileName(){return e._uri.fsPath},get isUntitled(){return e._uri.scheme===r.lg.untitled},get languageId(){return e._languageId},get version(){return e._versionId},get isClosed(){return e._isDisposed},get isDirty(){return e._isDirty},save(){return e._save()},getText(t){return t?e._getTextInRange(t):e.getText()},get eol(){return"\n"===e._eol?c.b6q.LF:c.b6q.CRLF},get lineCount(){return e._lines.length},lineAt(t){return e._lineAt(t)},offsetAt(t){return e._offsetAt(t)},positionAt(t){return e._positionAt(t)},validateRange(t){return e._validateRange(t)},validatePosition(t){return e._validatePosition(t)},getWordRangeAtPosition(t,i){return e._getWordRangeAtPosition(t,i)}}}return Object.freeze(this._document)}_acceptLanguageId(e){(0,n.ok)(!this._isDisposed),this._languageId=e}_acceptIsDirty(e){(0,n.ok)(!this._isDisposed),this._isDirty=e}_save(){return this._isDisposed?Promise.reject(new Error("Document has been closed")):this._proxy.$trySaveDocument(this._uri)}_getTextInRange(e){const t=this._validateRange(e);if(t.isEmpty)return"";if(t.isSingleLine)return this._lines[t.start.line].substring(t.start.character,t.end.character);const i=this._eol,n=t.start.line,r=t.end.line,o=[];o.push(this._lines[n].substring(t.start.character));for(let e=n+1;e<r;e++)o.push(this._lines[e]);return o.push(this._lines[r].substring(0,t.end.character)),o.join(i)}_lineAt(e){let t;if(e instanceof c.Lyo?t=e.line:"number"==typeof e&&(t=e),"number"!=typeof t||t<0||t>=this._lines.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new p(t,this._lines[t],t===this._lines.length-1)}_offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}_positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return new c.Lyo(t.index,Math.min(t.remainder,i))}_validateRange(e){if(!(e instanceof c.e6w))throw new Error("Invalid argument");const t=this._validatePosition(e.start),i=this._validatePosition(e.end);return t===e.start&&i===e.end?e:new c.e6w(t.line,t.character,i.line,i.character)}_validatePosition(e){if(!(e instanceof c.Lyo))throw new Error("Invalid argument");if(0===this._lines.length)return e.with(0,0);let{line:t,character:i}=e,n=!1;if(t<0)t=0,i=0,n=!0;else if(t>=this._lines.length)t=this._lines.length-1,i=this._lines[t].length,n=!0;else{const e=this._lines[t].length;i<0?(i=0,n=!0):i>e&&(i=e,n=!0)}return n?new c.Lyo(t,i):e}_getWordRangeAtPosition(e,t){const i=this._validatePosition(e);if(t){if((0,o.IO)(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`)}else n=this._languageId,t=d.get(n);var n;const r=(0,a.t2)(i.character+1,(0,a.eq)(t),this._lines[i.line],0);if(r)return new c.e6w(i.line,r.startColumn-1,i.line,r.endColumn-1)}}class p{constructor(e,t,i){this._line=e,this._text=t,this._isLastLine=i}get lineNumber(){return this._line}get text(){return this._text}get range(){return new c.e6w(this._line,0,this._line,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new c.e6w(this._line,0,this._line+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this._text)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this._text.length}}},1663:function(e,t,i){i.d(t,{T:function(){return w},W:function(){return y}});var n=i(45493),r=i(23088),o=i(81557),s=i(7428),a=i(42731),c=i(28019),l=i(78293),d=i(10456),u=i(82722),h=i(45107),p=i(54487),m=i(26713),g=i(18910),f=i(59301),_=i(97698),v=i(40048);class b{constructor(e){this.value=e,this._count=0}ref(){this._count++}unref(){return 0==--this._count}}let y=class{constructor(e,t){this._extHostRpc=e,this._logService=t,this._activeEditorId=null,this._editors=new Map,this._documents=new g.Y9,this._onDidAddDocuments=new o.Q5,this._onDidRemoveDocuments=new o.Q5,this._onDidChangeVisibleTextEditors=new o.Q5,this._onDidChangeActiveTextEditor=new o.Q5,this.onDidAddDocuments=this._onDidAddDocuments.event,this.onDidRemoveDocuments=this._onDidRemoveDocuments.event,this.onDidChangeVisibleTextEditors=this._onDidChangeVisibleTextEditors.event,this.onDidChangeActiveTextEditor=this._onDidChangeActiveTextEditor.event}$acceptDocumentsAndEditorsDelta(e){this.acceptDocumentsAndEditorsDelta(e)}acceptDocumentsAndEditorsDelta(e){const t=[],i=[],n=[];if(e.removedDocuments)for(const i of e.removedDocuments){const e=a.ov.revive(i),n=this._documents.get(e);n?.unref()&&(this._documents.delete(e),t.push(n.value))}if(e.addedDocuments)for(const t of e.addedDocuments){const e=a.ov.revive(t.uri);let n=this._documents.get(e);if(n&&e.scheme!==f.lg.vscodeNotebookCell&&e.scheme!==f.lg.vscodeInteractiveInput)throw new Error(`document '${e} already exists!'`);n||(n=new b(new d.gR(this._extHostRpc.getProxy(l.Tr.MainThreadDocuments),e,t.lines,t.EOL,t.versionId,t.languageId,t.isDirty)),this._documents.set(e,n),i.push(n.value)),n.ref()}if(e.removedEditors)for(const t of e.removedEditors){const e=this._editors.get(t);this._editors.delete(t),e&&n.push(e)}if(e.addedEditors)for(const t of e.addedEditors){const e=a.ov.revive(t.documentUri);(0,r.ok)(this._documents.has(e),`document '${e}' does not exist`),(0,r.ok)(!this._editors.has(t.id),`editor '${t.id}' already exists!`);const i=this._documents.get(e).value,n=new h.aQ(t.id,this._extHostRpc.getProxy(l.Tr.MainThreadTextEditors),this._logService,new v.o((()=>i.document)),t.selections.map(p.Y1.to),t.options,t.visibleRanges.map((e=>p.e6.to(e))),"number"==typeof t.editorPosition?p.eI.to(t.editorPosition):void 0);this._editors.set(t.id,n)}void 0!==e.newActiveEditor&&((0,r.ok)(null===e.newActiveEditor||this._editors.has(e.newActiveEditor),`active editor '${e.newActiveEditor}' does not exist`),this._activeEditorId=e.newActiveEditor),(0,s.B9)(t),(0,s.B9)(n),e.removedDocuments&&this._onDidRemoveDocuments.fire(t),e.addedDocuments&&this._onDidAddDocuments.fire(i),(e.removedEditors||e.addedEditors)&&this._onDidChangeVisibleTextEditors.fire(this.allEditors().map((e=>e.value))),void 0!==e.newActiveEditor&&this._onDidChangeActiveTextEditor.fire(this.activeEditor())}getDocument(e){return this._documents.get(e)?.value}allDocuments(){return _.$.map(this._documents.values(),(e=>e.value))}getEditor(e){return this._editors.get(e)}activeEditor(e){if(!this._activeEditorId)return;const t=this._editors.get(this._activeEditorId);return e?t:t?.value}allEditors(){return[...this._editors.values()]}};y=(0,n.g)([(0,n.f)(0,u.O),(0,n.f)(1,m.V)],y);const w=(0,c.yh)("IExtHostDocumentsAndEditors")},53917:function(e,t,i){i.d(t,{v:function(){return p},y:function(){return f}});var n=i(45493),r=i(39841),o=i(81557),s=i(47635),a=i(42731),c=i(28019),l=i(78293),d=i(82722),u=i(54487),h=i(30874);const p=(0,c.yh)("IExtHostEditorTabs");class m{constructor(e,t,i){this._activeTabIdGetter=i,this._parentGroup=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this._apiObject){const e=this,t={get isActive(){return e._dto.id===e._activeTabIdGetter()},get label(){return e._dto.label},get input(){return e._input},get isDirty(){return e._dto.isDirty},get isPinned(){return e._dto.isPinned},get isPreview(){return e._dto.isPreview},get group(){return e._parentGroup.apiObject}};this._apiObject=Object.freeze(t)}return this._apiObject}get tabId(){return this._dto.id}acceptDtoUpdate(e){this._dto=e,this._input=this._initInput()}_initInput(){switch(this._dto.input.kind){case l.LJ.TextInput:return new h.Y_o(a.ov.revive(this._dto.input.uri));case l.LJ.TextDiffInput:return new h.lF4(a.ov.revive(this._dto.input.original),a.ov.revive(this._dto.input.modified));case l.LJ.TextMergeInput:return new h.kiP(a.ov.revive(this._dto.input.base),a.ov.revive(this._dto.input.input1),a.ov.revive(this._dto.input.input2),a.ov.revive(this._dto.input.result));case l.LJ.CustomEditorInput:return new h.zwE(a.ov.revive(this._dto.input.uri),this._dto.input.viewType);case l.LJ.WebviewEditorInput:return new h.kU2(this._dto.input.viewType);case l.LJ.NotebookInput:return new h.IAb(a.ov.revive(this._dto.input.uri),this._dto.input.notebookType);case l.LJ.NotebookDiffInput:return new h.ogl(a.ov.revive(this._dto.input.original),a.ov.revive(this._dto.input.modified),this._dto.input.notebookType);case l.LJ.TerminalEditorInput:return new h.UyC;case l.LJ.InteractiveEditorInput:return new h.Ngc(a.ov.revive(this._dto.input.uri),a.ov.revive(this._dto.input.inputBoxUri));case l.LJ.ChatEditorInput:return new h.XgO;case l.LJ.MultiDiffEditorInput:return new h.UwW(this._dto.input.diffEditors.map((e=>new h.lF4(a.ov.revive(e.original),a.ov.revive(e.modified)))));default:return}}}class g{constructor(e,t){this._tabs=[],this._activeTabId="",this._dto=e,this._activeGroupIdGetter=t;for(const t of e.tabs)t.isActive&&(this._activeTabId=t.id),this._tabs.push(new m(t,this,(()=>this.activeTabId())))}get apiObject(){if(!this._apiObject){const e=this,t={get isActive(){return e._dto.groupId===e._activeGroupIdGetter()},get viewColumn(){return u.eI.to(e._dto.viewColumn)},get activeTab(){return e._tabs.find((t=>t.tabId===e._activeTabId))?.apiObject},get tabs(){return Object.freeze(e._tabs.map((e=>e.apiObject)))}};this._apiObject=Object.freeze(t)}return this._apiObject}get groupId(){return this._dto.groupId}get tabs(){return this._tabs}acceptGroupDtoUpdate(e){this._dto=e}acceptTabOperation(e){if(e.kind===l._o.TAB_OPEN){const t=new m(e.tabDto,this,(()=>this.activeTabId()));return this._tabs.splice(e.index,0,t),e.tabDto.isActive&&(this._activeTabId=t.tabId),t}if(e.kind===l._o.TAB_CLOSE){const t=this._tabs.splice(e.index,1)[0];if(!t)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return t.tabId===this._activeTabId&&(this._activeTabId=""),t}if(e.kind===l._o.TAB_MOVE){if(void 0===e.oldIndex)throw new Error("Invalid old index on move IPC");const t=this._tabs.splice(e.oldIndex,1)[0];if(!t)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this._tabs.splice(e.index,0,t),t}const t=this._tabs.find((t=>t.tabId===e.tabDto.id));if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this._activeTabId=e.tabDto.id:this._activeTabId!==e.tabDto.id||e.tabDto.isActive||(this._activeTabId=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this._activeTabId}}let f=class{constructor(e){this._onDidChangeTabs=new o.Q5,this._onDidChangeTabGroups=new o.Q5,this._extHostTabGroups=[],this._proxy=e.getProxy(l.Tr.MainThreadEditorTabs)}get tabGroups(){if(!this._apiObject){const e=this,t={onDidChangeTabGroups:e._onDidChangeTabGroups.event,onDidChangeTabs:e._onDidChangeTabs.event,get all(){return Object.freeze(e._extHostTabGroups.map((e=>e.apiObject)))},get activeTabGroup(){const t=e._activeGroupId;return(0,s.cW)(e._extHostTabGroups.find((e=>e.groupId===t))?.apiObject)},close:async(e,t)=>{const i=Array.isArray(e)?e:[e];return!i.length||(function(e){const t=e;if(void 0!==t.tabs)return!0;return!1}(i[0])?this._closeGroups(i,t):this._closeTabs(i,t))}};this._apiObject=Object.freeze(t)}return this._apiObject}$acceptEditorTabModel(e){const t=new Set(this._extHostTabGroups.map((e=>e.groupId))),i=new Set(e.map((e=>e.groupId))),n=(0,r.qP)(t,i),o=this._extHostTabGroups.filter((e=>n.removed.includes(e.groupId))).map((e=>e.apiObject)),a=[],c=[];this._extHostTabGroups=e.map((e=>{const t=new g(e,(()=>this._activeGroupId));return n.added.includes(t.groupId)?a.push(t.apiObject):c.push(t.apiObject),t}));const l=(0,s.cW)(e.find((e=>!0===e.isActive))?.groupId);void 0!==l&&this._activeGroupId!==l&&(this._activeGroupId=l),this._onDidChangeTabGroups.fire(Object.freeze({opened:a,closed:o,changed:c}))}$acceptTabGroupUpdate(e){const t=this._extHostTabGroups.find((t=>t.groupId===e.groupId));if(!t)throw new Error("Update Group IPC call received before group creation.");t.acceptGroupDtoUpdate(e),e.isActive&&(this._activeGroupId=e.groupId),this._onDidChangeTabGroups.fire(Object.freeze({changed:[t.apiObject],opened:[],closed:[]}))}$acceptTabOperation(e){const t=this._extHostTabGroups.find((t=>t.groupId===e.groupId));if(!t)throw new Error("Update Tabs IPC call received before group creation.");const i=t.acceptTabOperation(e);switch(e.kind){case l._o.TAB_OPEN:return void this._onDidChangeTabs.fire(Object.freeze({opened:[i.apiObject],closed:[],changed:[]}));case l._o.TAB_CLOSE:return void this._onDidChangeTabs.fire(Object.freeze({opened:[],closed:[i.apiObject],changed:[]}));case l._o.TAB_MOVE:case l._o.TAB_UPDATE:return void this._onDidChangeTabs.fire(Object.freeze({opened:[],closed:[],changed:[i.apiObject]}))}}_findExtHostTabFromApi(e){for(const t of this._extHostTabGroups)for(const i of t.tabs)if(i.apiObject===e)return i}_findExtHostTabGroupFromApi(e){return this._extHostTabGroups.find((t=>t.apiObject===e))}async _closeTabs(e,t){const i=[];for(const t of e){const e=this._findExtHostTabFromApi(t);if(!e)throw new Error("Tab close: Invalid tab not found!");i.push(e.tabId)}return this._proxy.$closeTab(i,t)}async _closeGroups(e,t){const i=[];for(const t of e){const e=this._findExtHostTabGroupFromApi(t);if(!e)throw new Error("Group close: Invalid group not found!");i.push(e.groupId)}return this._proxy.$closeGroup(i,t)}};f=(0,n.g)([(0,n.f)(0,d.O)],f)},26841:function(e,t,i){i.d(t,{Qx:function(){return ee},hj:function(){return oe},k2:function(){return re},vM:function(){return Y}});var n=i(45493),r=i(67525),o=i(15229),s=i(61826),a=i(81647),c=i(35820),l=i(7428),d=i(57386),u=i(42731),h=i(26713),p=i(78293),m=i(63537),g=i(54316),f=i(90466),_=i(26258),v=i(22423);class b{static{this.NONE=new b(!1,-1,-1,-1)}constructor(e,t,i,n){this.startup=e,this.codeLoadingTime=t,this.activateCallTime=i,this.activateResolvedTime=n}}class y{constructor(e){this._startup=e,this._codeLoadingStart=-1,this._codeLoadingStop=-1,this._activateCallStart=-1,this._activateCallStop=-1,this._activateResolveStart=-1,this._activateResolveStop=-1}_delta(e,t){return-1===e||-1===t?-1:t-e}build(){return new b(this._startup,this._delta(this._codeLoadingStart,this._codeLoadingStop),this._delta(this._activateCallStart,this._activateCallStop),this._delta(this._activateResolveStart,this._activateResolveStop))}codeLoadingStart(){this._codeLoadingStart=Date.now()}codeLoadingStop(){this._codeLoadingStop=Date.now()}activateCallStart(){this._activateCallStart=Date.now()}activateCallStop(){this._activateCallStop=Date.now()}activateResolveStart(){this._activateResolveStart=Date.now()}activateResolveStop(){this._activateResolveStop=Date.now()}}class w{constructor(e,t,i,n,r,o){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=i,this.module=n,this.exports=r,this.subscriptions=o}}class x extends w{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,[])}}class C extends w{constructor(){super(!1,null,b.NONE,{activate:void 0,deactivate:void 0},void 0,[])}}class E extends w{constructor(e){super(!0,e,b.NONE,{activate:void 0,deactivate:void 0},void 0,[])}}let S=class{constructor(e,t,i,n){this._logService=n,this._registry=e,this._globalRegistry=t,this._host=i,this._operations=new _.C1,this._alreadyActivatedEvents=Object.create(null)}dispose(){for(const[e,t]of this._operations)t.dispose()}async waitForActivatingExtensions(){const e=[];for(const[t,i]of this._operations)e.push(i.wait());await Promise.all(e)}isActivated(e){const t=this._operations.get(e);return Boolean(t&&t.value)}getActivatedExtension(e){const t=this._operations.get(e);if(!t||!t.value)throw new Error(`Extension '${e.value}' is not known or not activated`);return t.value}async activateByEvent(e,t){if(this._alreadyActivatedEvents[e])return;const i=this._registry.getExtensionDescriptionsForActivationEvent(e);await this._activateExtensions(i.map((i=>({id:i.identifier,reason:{startup:t,extensionId:i.identifier,activationEvent:e}})))),this._alreadyActivatedEvents[e]=!0}activateById(e,t){const i=this._registry.getExtensionDescription(e);if(!i)throw new Error(`Extension '${e.value}' is not known`);return this._activateExtensions([{id:i.identifier,reason:t}])}async _activateExtensions(e){const t=e.filter((e=>!this.isActivated(e.id))).map((e=>this._handleActivationRequest(e)));await Promise.all(t.map((e=>e.wait())))}_handleActivationRequest(e){if(this._operations.has(e.id))return this._operations.get(e.id);if(this._isHostExtension(e.id))return this._createAndSaveOperation(e,null,[],null);const t=this._registry.getExtensionDescription(e.id);if(!t){const t=new Error(`Cannot activate unknown extension '${e.id.value}'`),i=this._createAndSaveOperation(e,null,[],new E(t));return this._host.onExtensionActivationError(e.id,t,new v.$V(e.id.value)),i}const i=[],n=void 0===t.extensionDependencies?[]:t.extensionDependencies;for(const r of n){if(this._isResolvedExtension(r))continue;const n=this._operations.get(r);if(n){i.push(n);continue}if(this._isHostExtension(r)){i.push(this._handleActivationRequest({id:this._globalRegistry.getExtensionDescription(r).identifier,reason:e.reason}));continue}const o=this._registry.getExtensionDescription(r);if(o){if(!o.main&&!o.browser)continue;i.push(this._handleActivationRequest({id:o.identifier,reason:e.reason}));continue}const s=t.displayName||t.identifier.value,a=new Error(`Cannot activate the '${s}' extension because it depends on unknown extension '${r}'`),c=this._createAndSaveOperation(e,t.displayName,[],new E(a));return this._host.onExtensionActivationError(t.identifier,a,new v.$V(r)),c}return this._createAndSaveOperation(e,t.displayName,i,null)}_createAndSaveOperation(e,t,i,n){const r=new D(e.id,t,e.reason,i,n,this._host,this._logService);return this._operations.set(e.id,r),r}_isHostExtension(e){return f.ci.isHostExtension(e,this._registry,this._globalRegistry)}_isResolvedExtension(e){const t=this._globalRegistry.getExtensionDescription(e);return!!t&&(!t.main&&!t.browser)}};S=(0,n.g)([(0,n.f)(3,h.V)],S);let D=class{get value(){return this._value}get friendlyName(){return this._displayName||this._id.value}constructor(e,t,i,n,r,o,s){this._id=e,this._displayName=t,this._reason=i,this._deps=n,this._value=r,this._host=o,this._logService=s,this._barrier=new c.U8,this._isDisposed=!1,this._initialize()}dispose(){this._isDisposed=!0}wait(){return this._barrier.wait()}async _initialize(){await this._waitForDepsThenActivate(),this._barrier.open()}async _waitForDepsThenActivate(){if(!this._value){for(;this._deps.length>0;){for(let e=0;e<this._deps.length;e++){const t=this._deps[e];if(!t.value||t.value.activationFailed){if(t.value&&t.value.activationFailed){const e=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${t.friendlyName}' failed to activate`);return e.detail=t.value.activationFailedError,this._value=new E(e),void this._host.onExtensionActivationError(this._id,e,null)}}else this._deps.splice(e,1),e--}this._deps.length>0&&await Promise.race(this._deps.map((e=>e.wait())))}await this._activate()}}async _activate(){try{this._value=await this._host.actualActivateExtension(this._id,this._reason)}catch(e){const t=new Error;if(e&&e.name&&(t.name=e.name),e&&e.message?t.message=`Activating extension '${this._id.value}' failed: ${e.message}.`:t.message=`Activating extension '${this._id.value}' failed: ${e}.`,e&&e.stack&&(t.stack=e.stack),this._value=new E(t),this._isDisposed&&(0,g.n2)(e))return;this._host.onExtensionActivationError(this._id,t,null),this._logService.error(`Activating extension ${this._id.value} failed due to an error:`),this._logService.error(e)}}};D=(0,n.g)([(0,n.f)(6,h.V)],D);var T=i(34142),k=i(89608),I=i(53976);class P{constructor(e,t,i){this._deferredPromises=new Map,this._id=e,this._shared=t,this._storage=i,this._init=this._storage.initializeExtensionStorage(this._shared,this._id,Object.create(null)).then((e=>(this._value=e,this))),this._storageListener=this._storage.onDidChangeStorage((e=>{e.shared===this._shared&&e.key===this._id&&(this._value=e.value)})),this._scheduler=new c.pY((()=>{const e=this._deferredPromises;this._deferredPromises=new Map,(async()=>{try{await this._storage.setValue(this._shared,this._id,this._value);for(const t of e.values())t.complete()}catch(t){for(const i of e.values())i.error(t)}})()}),0)}keys(){return Object.entries(this._value??{}).filter((([,e])=>void 0!==e)).map((([e])=>e))}get whenReady(){return this._init}get(e,t){let i=this._value[e];return void 0===i&&(i=t),i}update(e,t){this._value[e]=t;const i=this._deferredPromises.get(e);if(void 0!==i)return i.p;const n=new c.CR;return this._deferredPromises.set(e,n),this._scheduler.isScheduled()||this._scheduler.schedule(),n.p}dispose(){this._storageListener.dispose()}}class A extends P{setKeysForSync(e){this._storage.registerExtensionStorageKeysToSync({id:this._id,version:this._extension.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this._extension=e}}var R=i(30874),L=i(59822),N=i(28019),$=i(73820),O=i(3621),F=i(82722),M=i(80195),U=i(80974),H=i(82209),z=i(76870),B=i(81557),W=i(83704),V=i(8685);class q{#n;constructor(e,t){this.disposables=new l.SL,this._id=_.kP.toKey(e.identifier),this.#n=t,this.onDidChange=B.ju.map(B.ju.filter(this.#n.onDidChangePassword,(e=>e.extensionId===this._id)),(e=>({key:e.key})),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#n.get(this._id,e)}store(e,t){return this.#n.store(this._id,e,t)}delete(e){return this.#n.delete(this._id,e)}}var j,K=i(59301),G=i(86540),Q=i(43064),J=i(11547),Z=i(6263);const X="vs/workbench/api/common/extHostExtensionService",Y=(0,N.yh)("IHostUtils");let ee=j=class extends l.JT{constructor(e,t,i,n,r,o,s,a,l,d,u,h,m){super(),this._extHostManagedSockets=h,this._extHostLanguageModels=m,this._onDidChangeRemoteConnectionData=this._register(new B.Q5),this.onDidChangeRemoteConnectionData=this._onDidChangeRemoteConnectionData.event,this._realPathCache=new Map,this._isTerminating=!1,this._hostUtils=t,this._extHostContext=i,this._initData=s,this._extHostWorkspace=n,this._extHostConfiguration=r,this._logService=o,this._extHostTunnelService=l,this._extHostTerminalService=d,this._extHostLocalizationService=u,this._mainThreadWorkspaceProxy=this._extHostContext.getProxy(p.Tr.MainThreadWorkspace),this._mainThreadTelemetryProxy=this._extHostContext.getProxy(p.Tr.MainThreadTelemetry),this._mainThreadExtensionsProxy=this._extHostContext.getProxy(p.Tr.MainThreadExtensionService),this._almostReadyToRunExtensions=new c.U8,this._readyToStartExtensionHost=new c.U8,this._readyToRunExtensions=new c.U8,this._eagerExtensionsActivated=new c.U8,this._activationEventsReader=new ce(this._initData.extensions.activationEvents),this._globalRegistry=new f.ci(this._activationEventsReader,this._initData.extensions.allExtensions);const v=new _.o$(this._initData.extensions.myExtensions);this._myRegistry=new f.ci(this._activationEventsReader,se(this._globalRegistry,v)),J.yg&&(this._logService.info(`Creating extension host with the following global extensions: ${ne(this._globalRegistry)}`),this._logService.info(`Creating extension host with the following local extensions: ${ne(this._myRegistry)}`)),this._storage=new T.Y(this._extHostContext,this._logService),this._secretState=new V.p(this._extHostContext),this._storagePath=a,this._instaService=e.createChild(new M.y([T.W,this._storage],[V.Z,this._secretState])),this._activator=this._register(new S(this._myRegistry,this._globalRegistry,{onExtensionActivationError:(e,t,i)=>{this._mainThreadExtensionsProxy.$onExtensionActivationError(e,(0,g.ri)(t),i)},actualActivateExtension:async(e,t)=>{if(f.ci.isHostExtension(e,this._myRegistry,this._globalRegistry))return await this._mainThreadExtensionsProxy.$activateExtension(e,t),new C;const i=this._myRegistry.getExtensionDescription(e);return this._activateExtension(i,t)}},this._logService)),this._extensionPathIndex=null,this._resolvers=Object.create(null),this._started=!1,this._remoteConnectionData=this._initData.remote.connectionData}getRemoteConnectionData(){return this._remoteConnectionData}async initialize(){try{await this._beforeAlmostReadyToRunExtensions(),this._almostReadyToRunExtensions.open(),await this._extHostWorkspace.waitForInitializeCall(),(0,s.B)("code/extHost/ready"),this._readyToStartExtensionHost.open(),this._initData.autoStart&&this._startExtensionHost()}catch(e){(0,g.dL)(e)}}async _deactivateAll(){this._storagePath.onWillDeactivateAll();let e=[];try{const t=this._myRegistry.getAllExtensionDescriptions().map((e=>e.identifier));e=t.filter((e=>this.isActivated(e))).map((e=>this._deactivate(e)))}catch(e){}await Promise.all(e)}terminate(e,t=0){if(this._isTerminating)return;this._isTerminating=!0,this._logService.info(`Extension host terminating: ${e}`),this._logService.flush(),this._extHostTerminalService.dispose(),this._activator.dispose(),J.n2&&(0,g.sH)((e=>{this._logService.error(e)})),this._extHostContext.dispose();const i=this._deactivateAll();Promise.race([(0,c.Vs)(5e3),i]).finally((()=>{this._hostUtils.pid?this._logService.info(`Extension host with pid ${this._hostUtils.pid} exiting with code ${t}`):this._logService.info(`Extension host exiting with code ${t}`),this._logService.flush(),this._logService.dispose(),this._hostUtils.exit(t)}))}isActivated(e){return!!this._readyToRunExtensions.isOpen()&&this._activator.isActivated(e)}async getExtension(e){const t=await this._mainThreadExtensionsProxy.$getExtension(e);return t&&{...t,identifier:new _.kP(t.identifier.value),extensionLocation:u.ov.revive(t.extensionLocation)}}_activateByEvent(e,t){return this._activator.activateByEvent(e,t)}_activateById(e,t){return this._activator.activateById(e,t)}activateByIdWithErrors(e,t){return this._activateById(e,t).then((()=>{const t=this._activator.getActivatedExtension(e);if(t.activationFailed)return Promise.reject(t.activationFailedError)}))}getExtensionRegistry(){return this._readyToRunExtensions.wait().then((e=>this._myRegistry))}getExtensionExports(e){if(this._readyToRunExtensions.isOpen())return this._activator.getActivatedExtension(e).exports;try{return this._activator.getActivatedExtension(e).exports}catch(e){return null}}async _realPathExtensionUri(e){if(e.scheme===K.lg.file&&this._hostUtils.fsRealpath){const t=e.fsPath;this._realPathCache.has(t)||this._realPathCache.set(t,this._hostUtils.fsRealpath(t));const i=await this._realPathCache.get(t);return u.ov.file(i)}return e}async getExtensionPathIndex(){return this._extensionPathIndex||(this._extensionPathIndex=this._createExtensionPathIndex(this._myRegistry.getAllExtensionDescriptions()).then((e=>new ae(e)))),this._extensionPathIndex}async _createExtensionPathIndex(e){const t=d.Id.forUris((e=>a.wi.ignorePathCasing(e)));return await Promise.all(e.map((async e=>{if(this._getEntryPoint(e)){const i=await this._realPathExtensionUri(e.extensionLocation);t.set(i,e)}}))),t}_deactivate(e){let t=Promise.resolve(void 0);if(!this._readyToRunExtensions.isOpen())return t;if(!this._activator.isActivated(e))return t;const i=this._activator.getActivatedExtension(e);if(!i)return t;try{"function"==typeof i.module.deactivate&&(t=Promise.resolve(i.module.deactivate()).then(void 0,(e=>(this._logService.error(e),Promise.resolve(void 0)))))}catch(t){this._logService.error(`An error occurred when deactivating the extension '${e.value}':`),this._logService.error(t)}try{(0,l.B9)(i.subscriptions)}catch(t){this._logService.error(`An error occurred when deactivating the subscriptions for extension '${e.value}':`),this._logService.error(t)}return t}async _activateExtension(e,t){return this._initData.remote.isRemote?this._mainThreadExtensionsProxy.$onWillActivateExtension(e.identifier):await this._mainThreadExtensionsProxy.$onWillActivateExtension(e.identifier),this._doActivateExtension(e,t).then((i=>{const n=i.activationTimes;return this._mainThreadExtensionsProxy.$onDidActivateExtension(e.identifier,n.codeLoadingTime,n.activateCallTime,n.activateResolvedTime,t),this._logExtensionActivationTimes(e,t,"success",n),i}),(i=>{throw this._logExtensionActivationTimes(e,t,"failure"),i}))}_logExtensionActivationTimes(e,t,i,n){const r=ie(e,t);this._mainThreadTelemetryProxy.$publicLog2("extensionActivationTimes",{...r,...n||{},outcome:i})}_doActivateExtension(e,t){const i=ie(e,t);this._mainThreadTelemetryProxy.$publicLog2("activatePlugin",i);const n=this._getEntryPoint(e);if(!n)return Promise.resolve(new x(b.NONE));this._logService.info(`ExtensionService#_doActivateExtension ${e.identifier.value}, startup: ${t.startup}, activationEvent: '${t.activationEvent}'${e.identifier.value!==t.extensionId.value?`, root cause: ${t.extensionId.value}`:""}`),this._logService.flush();const r=new y(t.startup);return Promise.all([this._loadCommonJSModule(e,(0,a.Vo)(e.extensionLocation,n),r),this._loadExtensionContext(e)]).then((t=>((0,s.B)(`code/extHost/willActivateExtension/${e.identifier.value}`),j._callActivate(this._logService,e.identifier,t[0],t[1],r)))).then((t=>((0,s.B)(`code/extHost/didActivateExtension/${e.identifier.value}`),t)))}_loadExtensionContext(e){const t=this._extHostLanguageModels.createLanguageModelAccessInformation(e),i=this._register(new A(e,this._storage)),n=this._register(new P(e.identifier.value,!1,this._storage)),r=this._register(new q(e,this._secretState)),s=e.isUnderDevelopment?this._initData.environment.extensionTestsLocationURI?R.UCC.Test:R.UCC.Development:R.UCC.Production,a=this._initData.remote.isRemote?R.TPH.Workspace:R.TPH.UI;return this._logService.trace(`ExtensionService#loadExtensionContext ${e.identifier.value}`),Promise.all([i.whenReady,n.whenReady,this._storagePath.whenReady]).then((()=>{const c=this;let l,d;const h=(0,v.$x)(e,"ipc")?this._initData.messagePorts?.get(_.kP.toKey(e.identifier)):void 0;return Object.freeze({globalState:i,workspaceState:n,secrets:r,subscriptions:[],get languageModelAccessInformation(){return t},get extensionUri(){return e.extensionLocation},get extensionPath(){return e.extensionLocation.fsPath},asAbsolutePath(t){return(0,o.v_)(e.extensionLocation.fsPath,t)},get storagePath(){return c._storagePath.workspaceValue(e)?.fsPath},get globalStoragePath(){return c._storagePath.globalValue(e).fsPath},get logPath(){return(0,o.v_)(c._initData.logsLocation.fsPath,e.identifier.value)},get logUri(){return u.ov.joinPath(c._initData.logsLocation,e.identifier.value)},get storageUri(){return c._storagePath.workspaceValue(e)},get globalStorageUri(){return c._storagePath.globalValue(e)},get extensionMode(){return s},get extension(){return void 0===l&&(l=new oe(c,e.identifier,e,a,!1)),l},get extensionRuntime(){return(0,v.H5)(e,"extensionRuntime"),c.extensionRuntime},get environmentVariableCollection(){return c._extHostTerminalService.getEnvironmentVariableCollection(e)},get messagePassingProtocol(){if(!d){if(!h)return;const e=B.ju.buffer(B.ju.fromDOMEventEmitter(h,"message",(e=>e.data)));h.start(),d={onDidReceiveMessage:e,postMessage:h.postMessage.bind(h)}}return d}})}))}static _callActivate(e,t,i,n,r){return i=i||{activate:void 0,deactivate:void 0},this._callActivateOptional(e,t,i,n,r).then((e=>new w(!1,null,r.build(),i,e,n.subscriptions)))}static _callActivateOptional(e,t,i,n,r){if("function"!=typeof i.activate)return Promise.resolve(i);try{r.activateCallStart(),e.trace(`ExtensionService#_callActivateOptional ${t.value}`);const o="object"==typeof global?global:self,s=i.activate.apply(o,[n]);return r.activateCallStop(),r.activateResolveStart(),Promise.resolve(s).then((e=>(r.activateResolveStop(),e)))}catch(e){return Promise.reject(e)}}_activateOneStartupFinished(e,t){this._activateById(e.identifier,{startup:!1,extensionId:e.identifier,activationEvent:t}).then(void 0,(e=>{this._logService.error(e)}))}_activateAllStartupFinishedDeferred(e,t=0){const i=Date.now();(0,J.fn)((()=>{for(let n=t;n<e.length;n+=1){const t=e[n];for(const r of t.activationEvents??[])if("onStartupFinished"===r){if(Date.now()-i>50){this._activateAllStartupFinishedDeferred(e,n);break}this._activateOneStartupFinished(t,r)}}}))}_activateAllStartupFinished(){this._mainThreadExtensionsProxy.$setPerformanceMarks((0,s._)()),this._extHostConfiguration.getConfigProvider().then((e=>{const t=e.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),i=this._myRegistry.getAllExtensionDescriptions();if(t)this._activateAllStartupFinishedDeferred(i);else for(const e of i)if(e.activationEvents)for(const t of e.activationEvents)"onStartupFinished"===t&&this._activateOneStartupFinished(e,t)}))}_handleEagerExtensions(){const e=this._activateByEvent("*",!0).then(void 0,(e=>{this._logService.error(e)}));this._register(this._extHostWorkspace.onDidChangeWorkspace((e=>this._handleWorkspaceContainsEagerExtensions(e.added))));const t=this._extHostWorkspace.workspace?this._extHostWorkspace.workspace.folders:[],i=this._handleWorkspaceContainsEagerExtensions(t),n=this._handleRemoteResolverEagerExtensions(),r=Promise.all([n,e,i]).then((()=>{}));return Promise.race([r,(0,c.Vs)(1e4)]).then((()=>{this._activateAllStartupFinished()})),r}_handleWorkspaceContainsEagerExtensions(e){return 0===e.length?Promise.resolve(void 0):Promise.all(this._myRegistry.getAllExtensionDescriptions().map((t=>this._handleWorkspaceContainsEagerExtension(e,t)))).then((()=>{}))}async _handleWorkspaceContainsEagerExtension(e,t){if(this.isActivated(t.identifier))return;const i=!this._initData.remote.isRemote&&!!this._initData.remote.authority,n={logService:this._logService,folders:e.map((e=>e.uri)),forceUsingSearch:i||!this._hostUtils.fsExists,exists:e=>this._hostUtils.fsExists(e.fsPath),checkExists:(e,t,i)=>this._mainThreadWorkspaceProxy.$checkExists(e,t,i)},r=await(0,W.U)(n,t);return r?this._activateById(t.identifier,{startup:!0,extensionId:t.identifier,activationEvent:r.activationEvent}).then(void 0,(e=>this._logService.error(e))):void 0}async _handleRemoteResolverEagerExtensions(){if(this._initData.remote.authority)return this._activateByEvent(`onResolveRemoteAuthority:${this._initData.remote.authority}`,!1)}async $extensionTestsExecute(){await this._eagerExtensionsActivated.wait();try{return await this._doHandleExtensionTests()}catch(e){throw console.error(e),e}}async _doHandleExtensionTests(){const{extensionDevelopmentLocationURI:e,extensionTestsLocationURI:t}=this._initData.environment;if(!e||!t)throw new Error((0,r.C$)(X,0,"Cannot load test runner."));const i=await this._loadCommonJSModule(null,t,new y(!1));if(!i||"function"!=typeof i.run)throw new Error((0,r.C$)(X,1,"Path {0} does not point to a valid extension test runner.",t.toString()));return new Promise(((e,n)=>{const r=(0,a.z_)(t),o=i.run(r,((t,i)=>{t?(J.yg&&this._logService.error("Test runner called back with error",t),n(t)):(J.yg&&(i?this._logService.info(`Test runner called back with ${i} failures.`):this._logService.info("Test runner called back with successful outcome.")),e("number"==typeof i&&i>0?1:0))}));o&&o.then&&o.then((()=>{J.yg&&this._logService.info("Test runner finished successfully."),e(0)})).catch((e=>{J.yg&&this._logService.error("Test runner finished with error",e),n(e instanceof Error&&e.stack?e.stack:String(e))}))}))}_startExtensionHost(){if(this._started)throw new Error("Extension host is already started!");return this._started=!0,this._readyToStartExtensionHost.wait().then((()=>this._readyToRunExtensions.open())).then((()=>Promise.race([this._activator.waitForActivatingExtensions(),(0,c.Vs)(1e3)]))).then((()=>this._handleEagerExtensions())).then((()=>{this._eagerExtensionsActivated.open(),this._logService.info("Eager extensions activated")}))}registerRemoteAuthorityResolver(e,t){return this._resolvers[e]=t,(0,l.OF)((()=>{delete this._resolvers[e]}))}async getRemoteExecServer(e){const{resolver:t}=await this._activateAndGetResolver(e);return t?.resolveExecServer?.(e,{resolveAttempt:0})}async _activateAndGetResolver(e){const t=e.indexOf("+");if(-1===t)throw new R.qaI("Not an authority that can be resolved!",L.XP.InvalidAuthority);const i=e.substr(0,t);return await this._almostReadyToRunExtensions.wait(),await this._activateByEvent(`onResolveRemoteAuthority:${i}`,!1),{authorityPrefix:i,resolver:this._resolvers[i]}}async $resolveAuthority(e,t){const i=Q.G.create(!1),n=()=>`[resolveAuthority(${(0,L.lt)(e)},${t})][${i.elapsed()}ms] `,r=e=>this._logService.info(`${n()}${e}`),o=e=>this._logService.warn(`${n()}${e}`),a=(e,t=void 0)=>this._logService.error(`${n()}${e}`,t),l=e=>{if(e instanceof R.qaI)return{type:"error",error:{code:e._code,message:e._message,detail:e._detail}};throw e},d=async e=>{r(`activating resolver for ${e}...`);const{resolver:t,authorityPrefix:i}=await this._activateAndGetResolver(e);if(!t)throw a(`no resolver for ${i}`),new R.qaI(`No remote extension installed to resolve ${i}.`,L.XP.NoResolverFound);return{resolver:t,authorityPrefix:i,remoteAuthority:e}},u=e.split(/@|%40/g).reverse();let h;r(`activating remote resolvers ${u.join(" -> ")}`);try{h=await Promise.all(u.map(d)).catch((async t=>{if(!(t instanceof R.qaI)||t._code!==L.XP.InvalidAuthority)throw t;return o(`resolving nested authorities failed: ${t.message}`),[await d(e)]}))}catch(e){return l(e)}const p=new c.zh;let m,g;p.cancelAndSet((()=>r("waiting...")),1e3);for(const[e,{authorityPrefix:i,resolver:n,remoteAuthority:o}]of h.entries())try{if(e===h.length-1)r("invoking final resolve()..."),(0,s.B)(`code/extHost/willResolveAuthority/${i}`),m=await n.resolve(o,{resolveAttempt:t,execServer:g}),(0,s.B)(`code/extHost/didResolveAuthorityOK/${i}`),r("setting tunnel factory..."),this._register(await this._extHostTunnelService.setTunnelFactory(n,R.ryi.isManagedResolvedAuthority(m)?m:void 0));else{if(r(`invoking resolveExecServer() for ${o}`),(0,s.B)(`code/extHost/willResolveExecServer/${i}`),g=await(n.resolveExecServer?.(o,{resolveAttempt:t,execServer:g})),!g)throw new R.qaI(`Exec server was not available for ${o}`,L.XP.NoResolverFound);(0,s.B)(`code/extHost/didResolveExecServerOK/${i}`)}}catch(e){return(0,s.B)(`code/extHost/didResolveAuthorityError/${i}`),a("returned an error",e),p.dispose(),l(e)}p.dispose();const f={environmentTunnels:m.environmentTunnels,features:m.tunnelFeatures?{elevation:m.tunnelFeatures.elevation,privacyOptions:m.tunnelFeatures.privacyOptions,protocol:void 0===m.tunnelFeatures.protocol||m.tunnelFeatures.protocol}:void 0},_={extensionHostEnv:m.extensionHostEnv,isTrusted:m.isTrusted,authenticationSession:m.authenticationSessionForInitializingExtensions?{id:m.authenticationSessionForInitializingExtensions.id,providerId:m.authenticationSessionForInitializingExtensions.providerId}:void 0};let v;if(r("returned "+(R.ryi.isManagedResolvedAuthority(m)?"managed authority":`${m.host}:${m.port}`)),R.ryi.isManagedResolvedAuthority(m)){const i=t;this._extHostManagedSockets.setFactory(i,m.makeConnection),v={authority:e,connectTo:new L.xf(i),connectionToken:m.connectionToken}}else v={authority:e,connectTo:new L.JE(m.host,m.port),connectionToken:m.connectionToken};return{type:"ok",value:{authority:v,options:_,tunnelInformation:f}}}async $getCanonicalURI(e,t){this._logService.info(`$getCanonicalURI invoked for authority (${(0,L.lt)(e)})`);const{resolver:i}=await this._activateAndGetResolver(e);if(!i)return null;const n=u.ov.revive(t);if(void 0===i.getCanonicalURI)return n;const r=await(0,c.OH)((()=>i.getCanonicalURI(n)));return r||n}async $startExtensionHost(e){e.toAdd.forEach((e=>e.extensionLocation=u.ov.revive(e.extensionLocation)));const{globalRegistry:t,myExtensions:i}=te(this._activationEventsReader,this._globalRegistry,this._myRegistry,e),n=await this._createExtensionPathIndex(i);return(await this.getExtensionPathIndex()).setSearchTree(n),this._globalRegistry.set(t.getAllExtensionDescriptions()),this._myRegistry.set(i),J.yg&&(this._logService.info(`$startExtensionHost: global extensions: ${ne(this._globalRegistry)}`),this._logService.info(`$startExtensionHost: local extensions: ${ne(this._myRegistry)}`)),this._startExtensionHost()}$activateByEvent(e,t){return t===v.mF.Immediate?this._almostReadyToRunExtensions.wait().then((t=>this._activateByEvent(e,!1))):this._readyToRunExtensions.wait().then((t=>this._activateByEvent(e,!1)))}async $activate(e,t){return await this._readyToRunExtensions.wait(),!!this._myRegistry.getExtensionDescription(e)&&(await this._activateById(e,t),!0)}async $deltaExtensions(e){e.toAdd.forEach((e=>e.extensionLocation=u.ov.revive(e.extensionLocation)));const{globalRegistry:t,myExtensions:i}=te(this._activationEventsReader,this._globalRegistry,this._myRegistry,e),n=await this._createExtensionPathIndex(i);return(await this.getExtensionPathIndex()).setSearchTree(n),this._globalRegistry.set(t.getAllExtensionDescriptions()),this._myRegistry.set(i),J.yg&&(this._logService.info(`$deltaExtensions: global extensions: ${ne(this._globalRegistry)}`),this._logService.info(`$deltaExtensions: local extensions: ${ne(this._myRegistry)}`)),Promise.resolve(void 0)}async $test_latency(e){return e}async $test_up(e){return e.byteLength}async $test_down(e){const t=I.KN.alloc(e),i=Math.random()%256;for(let n=0;n<e;n++)t.writeUInt8(i,n);return t}async $updateRemoteConnectionData(e){this._remoteConnectionData=e,this._onDidChangeRemoteConnectionData.fire()}};function te(e,t,i,n){e.addActivationEvents(n.addActivationEvents);const r=new f.ci(e,t.getAllExtensionDescriptions());r.deltaExtensions(n.toAdd,n.toRemove);const o=new _.o$(i.getAllExtensionDescriptions().map((e=>e.identifier)));for(const e of n.myToRemove)o.delete(e);for(const e of n.myToAdd)o.add(e);return{globalRegistry:r,myExtensions:se(r,o)}}function ie(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function ne(e){return e.getAllExtensionDescriptions().map((e=>e.identifier.value)).join(",")}ee=j=(0,n.g)([(0,n.f)(0,N.TG),(0,n.f)(1,Y),(0,n.f)(2,F.O),(0,n.f)(3,k.w),(0,n.f)(4,m.E1),(0,n.f)(5,h.V),(0,n.f)(6,$.$),(0,n.f)(7,O.L),(0,n.f)(8,U.rd),(0,n.f)(9,H.$3),(0,n.f)(10,G.O),(0,n.f)(11,Z.W),(0,n.f)(12,z.X)],ee);const re=(0,N.yh)("IExtHostExtensionService");class oe{#r;#o;#s;constructor(e,t,i,n,r){this.#r=e,this.#o=t,this.#s=i.identifier,this.id=i.identifier.value,this.extensionUri=i.extensionLocation,this.extensionPath=(0,o.Fv)((0,a.z_)(i.extensionLocation)),this.packageJSON=i,this.extensionKind=n,this.isFromDifferentExtensionHost=r}get isActive(){return this.#r.isActivated(this.#s)}get exports(){if("none"!==this.packageJSON.api&&!this.isFromDifferentExtensionHost)return this.#r.getExtensionExports(this.#s)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#r.activateByIdWithErrors(this.#s,{startup:!1,extensionId:this.#o,activationEvent:"api"}),this.exports}}function se(e,t){return e.getAllExtensionDescriptions().filter((e=>t.has(e.identifier)))}class ae{constructor(e){this._searchTree=e}setSearchTree(e){this._searchTree=e}findSubstr(e){return this._searchTree.findSubstr(e)}forEach(e){return this._searchTree.forEach(e)}}class ce{constructor(e){this._map=new _.C1,this.addActivationEvents(e)}readActivationEvents(e){return this._map.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this._map.set(t,e[t])}}},77600:function(e,t,i){i.d(t,{L:function(){return f},a:function(){return _}});var n,r=i(45493),o=i(78293),s=i(28698),a=i(30874),c=i(53976),l=i(28019),d=i(82722),u=i(52202),h=i(7428),p=i(35820),m=i(81647),g=i(59301);let f=n=class{constructor(e,t){this._fileSystemProvider=new Map,this._writeQueue=new p.sW,this._proxy=e.getProxy(o.Tr.MainThreadFileSystem);const i=this;this.value=Object.freeze({async stat(e){try{let t;const n=i._fileSystemProvider.get(e.scheme);return n?(await i._proxy.$ensureActivation(e.scheme),t=await n.impl.stat(e)):t=await i._proxy.$stat(e),{type:t.type,ctime:t.ctime,mtime:t.mtime,size:t.size,permissions:t.permissions===s.rM.Readonly?1:void 0}}catch(e){n._handleError(e)}},async readDirectory(e){try{const t=i._fileSystemProvider.get(e.scheme);return t?(await i._proxy.$ensureActivation(e.scheme),(await t.impl.readDirectory(e)).slice()):await i._proxy.$readdir(e)}catch(e){return n._handleError(e)}},async createDirectory(e){try{const t=i._fileSystemProvider.get(e.scheme);return t&&!t.isReadonly?(await i._proxy.$ensureActivation(e.scheme),await i.mkdirp(t.impl,t.extUri,e)):await i._proxy.$mkdir(e)}catch(e){return n._handleError(e)}},async readFile(e){try{const t=i._fileSystemProvider.get(e.scheme);if(t)return await i._proxy.$ensureActivation(e.scheme),(await t.impl.readFile(e)).slice();return(await i._proxy.$readFile(e)).buffer}catch(e){return n._handleError(e)}},async writeFile(e,t){try{const n=i._fileSystemProvider.get(e.scheme);return n&&!n.isReadonly?(await i._proxy.$ensureActivation(e.scheme),await i.mkdirp(n.impl,n.extUri,n.extUri.dirname(e)),await i._writeQueue.queueFor(e,(()=>Promise.resolve(n.impl.writeFile(e,t,{create:!0,overwrite:!0}))))):await i._proxy.$writeFile(e,c.KN.wrap(t))}catch(e){return n._handleError(e)}},async delete(e,t){try{const n=i._fileSystemProvider.get(e.scheme);return!n||n.isReadonly||t?.useTrash?await i._proxy.$delete(e,{recursive:!1,useTrash:!1,atomic:!1,...t}):(await i._proxy.$ensureActivation(e.scheme),await n.impl.delete(e,{recursive:!1,...t}))}catch(e){return n._handleError(e)}},async rename(e,t,r){try{return await i._proxy.$rename(e,t,{overwrite:!1,...r})}catch(e){return n._handleError(e)}},async copy(e,t,r){try{return await i._proxy.$copy(e,t,{overwrite:!1,...r})}catch(e){return n._handleError(e)}},isWritableFileSystem(e){const i=t.getCapabilities(e);if("number"==typeof i)return!(i&s.Bb.Readonly)}})}async mkdirp(e,t,i){const n=[];for(;!t.isEqual(i,t.dirname(i));)try{if(!((await e.stat(i)).type&s.Tv.Directory))throw a.yNx.FileExists(`Unable to create folder '${i.scheme===g.lg.file?i.fsPath:i.toString(!0)}' that already exists but is not a directory`);break}catch(e){if((0,s.q9)(e)!==s.bH.FileNotFound)throw e;n.push(t.basename(i)),i=t.dirname(i)}for(let r=n.length-1;r>=0;r--){i=t.joinPath(i,n[r]);try{await e.createDirectory(i)}catch(e){if((0,s.q9)(e)!==s.bH.FileExists)throw e}}}static _handleError(e){if(e instanceof a.yNx)throw e;if(e instanceof s.lR)switch(e.code){case s.bH.FileExists:throw a.yNx.FileExists(e.message);case s.bH.FileNotFound:throw a.yNx.FileNotFound(e.message);case s.bH.FileNotADirectory:throw a.yNx.FileNotADirectory(e.message);case s.bH.FileIsADirectory:throw a.yNx.FileIsADirectory(e.message);case s.bH.NoPermissions:throw a.yNx.NoPermissions(e.message);case s.bH.Unavailable:throw a.yNx.Unavailable(e.message);default:throw new a.yNx(e.message,e.name)}if(!(e instanceof Error))throw new a.yNx(String(e));if("ENOPRO"===e.name||e.message.includes("ENOPRO"))throw a.yNx.Unavailable(e.message);switch(e.name){case s.bH.FileExists:throw a.yNx.FileExists(e.message);case s.bH.FileNotFound:throw a.yNx.FileNotFound(e.message);case s.bH.FileNotADirectory:throw a.yNx.FileNotADirectory(e.message);case s.bH.FileIsADirectory:throw a.yNx.FileIsADirectory(e.message);case s.bH.NoPermissions:throw a.yNx.NoPermissions(e.message);case s.bH.Unavailable:throw a.yNx.Unavailable(e.message);default:throw new a.yNx(e.message,e.name)}}addFileSystemProvider(e,t,i){return this._fileSystemProvider.set(e,{impl:t,extUri:i?.isCaseSensitive?m.SF:m.F_,isReadonly:!!i?.isReadonly}),(0,h.OF)((()=>this._fileSystemProvider.delete(e)))}getFileSystemProviderExtUri(e){return this._fileSystemProvider.get(e)?.extUri??m.SF}};f=n=(0,r.g)([(0,r.f)(0,d.O),(0,r.f)(1,u.G)],f);const _=(0,l.yh)("IExtHostConsumerFileSystem")},52202:function(e,t,i){i.d(t,{G:function(){return c},J:function(){return a}});var n=i(59301),r=i(81647),o=i(28698),s=i(28019);class a{constructor(){this._systemSchemes=new Set(Object.keys(n.lg)),this._providerInfo=new Map,this.extUri=new r.U9((e=>{const t=this._providerInfo.get(e.scheme);return void 0!==t&&!(t&o.Bb.PathCaseSensitive)}))}$acceptProviderInfos(e,t){null===t?this._providerInfo.delete(e.scheme):this._providerInfo.set(e.scheme,t)}isFreeScheme(e){return!this._providerInfo.has(e)&&!this._systemSchemes.has(e)}getCapabilities(e){return this._providerInfo.get(e)}}const c=(0,s.yh)("IExtHostFileSystemInfo")},73820:function(e,t,i){i.d(t,{$:function(){return n}});const n=(0,i(28019).yh)("IExtHostInitDataService")},76870:function(e,t,i){i.d(t,{Q:function(){return T},X:function(){return E}});var n,r=i(45493),o=i(35820),s=i(17126),a=i(36994),c=i(54316),l=i(81557),d=i(97698),u=i(7428),h=i(67525),p=i(26258),m=i(28019),g=i(26713),f=i(28855),_=i(78293),v=i(11301),b=i(82722),y=i(54487),w=i(30874),x=i(22837),C=i(22423);const E=(0,m.yh)("IExtHostLanguageModels");class S{constructor(e,t){this.option=e,this.stream=new o.lK,this.stream=t??new o.lK}}class D{constructor(){this._responseStreams=new Map,this._defaultStream=new o.lK,this._isDone=!1;const e=this;this.apiObject={get stream(){return e._defaultStream.asyncIterable},get text(){return o.Aq.map(e._defaultStream.asyncIterable,(e=>e instanceof w.NEU?e.value:void 0)).coalesce()}}}*_streams(){if(this._responseStreams.size>0)for(const[,e]of this._responseStreams)yield e.stream;else yield this._defaultStream}handleFragment(e){if(this._isDone)return;let t,i=this._responseStreams.get(e.index);i||(i=0===this._responseStreams.size?new S(e.index,this._defaultStream):new S(e.index),this._responseStreams.set(e.index,i)),t="text"===e.part.type?new w.NEU(e.part.value):new w._n6(e.part.name,e.part.parameters),i.stream.emitOne(t)}reject(e){this._isDone=!0;for(const t of this._streams())t.reject(e)}resolve(){this._isDone=!0;for(const e of this._streams())e.resolve()}}let T=class{static{n=this}static{this._idPool=1}constructor(e,t,i){this._logService=t,this._extHostAuthentication=i,this._onDidChangeModelAccess=new l.Q5,this._onDidChangeProviders=new l.Q5,this.onDidChangeProviders=this._onDidChangeProviders.event,this._languageModels=new Map,this._allLanguageModelData=new Map,this._modelAccessList=new p.C1,this._pendingRequest=new Map,this._languageAccessInformationExtensions=new Set,this._proxy=e.getProxy(_.Tr.MainThreadLanguageModels)}dispose(){this._onDidChangeModelAccess.dispose(),this._onDidChangeProviders.dispose()}registerLanguageModel(e,t,i,r){const o=n._idPool++;let s;this._languageModels.set(o,{extension:e.identifier,provider:i,languageModelId:t}),r.auth&&(s={providerLabel:e.displayName||e.name,accountLabel:"object"==typeof r.auth?r.auth.label:void 0}),this._proxy.$registerLanguageModelProvider(o,`${p.kP.toKey(e.identifier)}/${o}/${t}`,{extension:e.identifier,id:t,vendor:r.vendor??p.kP.toKey(e.identifier),name:r.name??"",family:r.family??"",version:r.version,maxInputTokens:r.maxInputTokens,maxOutputTokens:r.maxOutputTokens,auth:s,targetExtensions:r.extensions});const a=i.onDidReceiveLanguageModelResponse2?.((({extensionId:e,participant:i,tokenCount:n})=>{this._proxy.$whenLanguageModelChatRequestMade(t,new p.kP(e),i,n)}));return(0,u.OF)((()=>{this._languageModels.delete(o),this._proxy.$unregisterProvider(o),a?.dispose()}))}async $startChatRequest(e,t,i,n,r,o){const s=this._languageModels.get(e);if(!s)throw new Error("Provider not found");const a=new f.Ex((async e=>{if(o.isCancellationRequested)return void this._logService.warn(`[CHAT](${s.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);let i;e.part instanceof w._n6?i={type:"function_use",name:e.part.name,parameters:e.part.parameters}:e.part instanceof w.NEU&&(i={type:"text",value:e.part.value}),i?this._proxy.$reportResponsePart(t,{index:e.index,part:i}):this._logService.warn(`[CHAT](${s.extension.value}) UNKNOWN part ${JSON.stringify(e)}`)}));let l;if(s.provider.provideLanguageModelResponse2)l=Promise.resolve(s.provider.provideLanguageModelResponse2(n.map(y.xf.to),r,p.kP.toKey(i),a,o));else{const e=new f.Ex((async e=>{a.report({index:e.index,part:new w.NEU(e.part)})}));l=Promise.resolve(s.provider.provideLanguageModelResponse(n.map(y.xf.to),r?.modelOptions??{},p.kP.toKey(i),e,o))}l.then((()=>{this._proxy.$reportResponseDone(t,void 0)}),(e=>{this._proxy.$reportResponseDone(t,(0,c.ri)(e))}))}$provideTokenLength(e,t,i){const n=this._languageModels.get(e);return n?Promise.resolve(n.provider.provideTokenCount(t,i)):Promise.resolve(0)}$acceptChatModelMetadata(e){if(e.added)for(const{identifier:t,metadata:i}of e.added)this._allLanguageModelData.set(t,{metadata:i,apiObjects:new p.C1});if(e.removed)for(const t of e.removed){this._allLanguageModelData.delete(t);for(const[e,i]of this._pendingRequest)i.languageModelId===t&&(i.res.reject(new c.FU),this._pendingRequest.delete(e))}e.added?.forEach((e=>this._fakeAuthPopulate(e.metadata))),this._onDidChangeProviders.fire(void 0)}async selectLanguageModels(e,t){const i=await this._proxy.$selectChatModels({...t,extension:e.identifier}),n=[],r=this;for(const t of i){const i=this._allLanguageModelData.get(t);if(!i)continue;this._isUsingAuth(e.identifier,i.metadata)&&await this._fakeAuthPopulate(i.metadata);let o=i.apiObjects.get(e.identifier);o||(o={id:t,vendor:i.metadata.vendor,family:i.metadata.family,version:i.metadata.version,name:i.metadata.name,maxInputTokens:i.metadata.maxInputTokens,countTokens(e,i){if(!r._allLanguageModelData.has(t))throw w.tHl.NotFound(t);return r._computeTokenLength(t,e,i??s.Ts.None)},sendRequest(i,n,o){if(!r._allLanguageModelData.has(t))throw w.tHl.NotFound(t);return r._sendChatRequest(e,t,i,n??{},o??s.Ts.None)}},i.apiObjects.set(e.identifier,o)),n.push(o)}return n}async _sendChatRequest(e,t,i,n,r){const o=this._convertMessages(e,i),s=e.identifier,c=this._allLanguageModelData.get(t)?.metadata;if(!c||!this._allLanguageModelData.has(t))throw w.tHl.NotFound(`Language model '${t}' is unknown.`);if(this._isUsingAuth(s,c)){if(!await this._getAuthAccess(e,{identifier:c.extension,displayName:c.auth.providerLabel},n.justification,!1)||!this._modelAccessList.get(s)?.has(c.extension))throw w.tHl.NoPermissions(`Language model '${t}' cannot be used by '${s.value}'.`)}try{const e=1e6*Math.random()|0,i=new D;this._pendingRequest.set(e,{languageModelId:t,res:i});try{await this._proxy.$tryStartChatRequest(s,t,e,o,n,r)}catch(t){throw this._pendingRequest.delete(e),t}return i.apiObject}catch(e){if(e.name===w.tHl.name)throw e;throw new w.tHl(`Language model '${t}' errored: ${(0,a.yJ)(e)}`,"Unknown",e)}}_convertMessages(e,t){const i=[];for(const n of t)n.role===w.grl.System&&(0,C.H5)(e,"languageModelSystem"),n.content2 instanceof w.DHf&&(0,C.H5)(e,"lmTools"),i.push(y.xf.from(n));return i}async $acceptResponsePart(e,t){const i=this._pendingRequest.get(e);i&&i.res.handleFragment(t)}async $acceptResponseDone(e,t){const i=this._pendingRequest.get(e);i&&(this._pendingRequest.delete(e),t?i.res.reject((0,c.vr)(t)):i.res.resolve())}async _getAuthAccess(e,t,i,n){const r=x.b+t.identifier.value;if(await this._extHostAuthentication.getSession(e,r,[],{silent:!0}))return this.$updateModelAccesslist([{from:e.identifier,to:t.identifier,enabled:!0}]),!0;if(n)return!1;try{const n=i?(0,h.C$)("vs/workbench/api/common/extHostLanguageModels",0,"Justification: {1}",t.displayName,i):void 0;return await this._extHostAuthentication.getSession(e,r,[],{forceNewSession:{detail:n}}),this.$updateModelAccesslist([{from:e.identifier,to:t.identifier,enabled:!0}]),!0}catch(e){return!1}}_isUsingAuth(e,t){return!!t.auth&&!p.kP.equals(t.extension,e)}async _fakeAuthPopulate(e){if(e.auth)for(const t of this._languageAccessInformationExtensions)try{await this._getAuthAccess(t,{identifier:e.extension,displayName:""},void 0,!0)}catch(e){this._logService.error("Fake Auth request failed"),this._logService.error(e)}}async _computeTokenLength(e,t,i){if(!this._allLanguageModelData.get(e))throw w.tHl.NotFound(`Language model '${e}' is unknown.`);const n=d.$.find(this._languageModels.values(),(t=>t.languageModelId===e));return n?n.provider.provideTokenCount(t,i):this._proxy.$countTokens(e,"string"==typeof t?t:y.xf.from(t),i)}$updateModelAccesslist(e){const t=new Array;for(const{from:i,to:n,enabled:r}of e){const e=this._modelAccessList.get(i)??new p.o$;if(e.has(n)!==r){r?e.add(n):e.delete(n),this._modelAccessList.set(i,e);const o={from:i,to:n};t.push(o),this._onDidChangeModelAccess.fire(o)}}}createLanguageModelAccessInformation(e){this._languageAccessInformationExtensions.add(e);const t=this,i=l.ju.signal(l.ju.filter(this._onDidChangeModelAccess.event,(t=>p.kP.equals(t.from,e.identifier)))),n=l.ju.signal(this._onDidChangeProviders.event);return{get onDidChange(){return l.ju.any(i,n)},canSendRequest(i){let n;e:for(const[e,r]of t._allLanguageModelData)for(const e of r.apiObjects.values())if(e===i){n=r.metadata;break e}if(!n)return;if(!t._isUsingAuth(e.identifier,n))return!0;const r=t._modelAccessList.get(e.identifier);return r?r.has(n.extension):void 0}}}};T=n=(0,r.g)([(0,r.f)(0,b.O),(0,r.f)(1,g.V),(0,r.f)(2,v.E)],T)},86540:function(e,t,i){i.d(t,{I:function(){return h},O:function(){return p}});var n=i(45493),r=i(11547),o=i(88023),s=i(42731),a=i(28019),c=i(26713),l=i(78293),d=i(73820),u=i(82722);let h=class{constructor(e,t,i){this.logService=i,this.bundleCache=new Map,this._proxy=t.getProxy(l.Tr.MainThreadLocalization),this.currentLanguage=e.environment.appLanguage,this.isDefaultLanguage=this.currentLanguage===r.cr}getMessage(e,t){const{message:i,args:n,comment:r}=t;if(this.isDefaultLanguage)return(0,o.F9)(i,n??{});let s=i;r&&r.length>0&&(s+=`/${Array.isArray(r)?r.join(""):r}`);const a=this.bundleCache.get(e)?.contents[s];return a||this.logService.warn(`Using default string since no string found in i18n bundle that has the key: ${s}`),(0,o.F9)(a??i,n??{})}getBundle(e){return this.bundleCache.get(e)?.contents}getBundleUri(e){return this.bundleCache.get(e)?.uri}async initializeLocalizedMessages(e){if(this.isDefaultLanguage||!e.l10n&&!e.isBuiltin)return;if(this.bundleCache.has(e.identifier.value))return;let t;const i=await this.getBundleLocation(e);if(i){try{const n=await this._proxy.$fetchBundleContents(i),r=JSON.parse(n);t=e.isBuiltin?r.contents?.bundle:r}catch(t){return void this.logService.error(`Failed to load translations for ${e.identifier.value} from ${i}: ${t.message}`)}t&&this.bundleCache.set(e.identifier.value,{contents:t,uri:i})}else this.logService.error(`No bundle location found for extension ${e.identifier.value}`)}async getBundleLocation(e){if(e.isBuiltin){const t=await this._proxy.$fetchBuiltInBundleUri(e.identifier.value,this.currentLanguage);return s.ov.revive(t)}return e.l10n?s.ov.joinPath(e.extensionLocation,e.l10n,`bundle.l10n.${this.currentLanguage}.json`):void 0}};h=(0,n.g)([(0,n.f)(0,d.$),(0,n.f)(1,u.O),(0,n.f)(2,c.V)],h);const p=(0,a.yh)("IExtHostLocalizationService")},71484:function(e,t,i){i.d(t,{m:function(){return d}});var n=i(45493),r=i(525),o=i(78293),s=i(73820),a=i(82722),c=i(42731),l=i(59267);let d=class extends r.sc{constructor(e,t){super(t.logLevel,t.logsLocation,t.loggers.map((e=>(0,l.wL)(e)))),this._proxy=e.getProxy(o.Tr.MainThreadLogger)}$setLogLevel(e,t){t?this.setLogLevel(c.ov.revive(t),e):this.setLogLevel(e)}setVisibility(e,t){super.setVisibility(e,t),this._proxy.$setVisibility(e,t)}doCreateLogger(e,t,i){return new u(this._proxy,e,t,i)}};d=(0,n.g)([(0,n.f)(0,a.O),(0,n.f)(1,s.$)],d);class u extends r.Li{constructor(e,t,i,n){super("always"===n?.logLevel),this.proxy=e,this.file=t,this.isLoggerCreated=!1,this.buffer=[],this.setLevel(i),this.proxy.$createLogger(t,n).then((()=>{this.doLog(this.buffer),this.isLoggerCreated=!0}))}log(e,t){const i=[[e,t]];this.isLoggerCreated?this.doLog(i):this.buffer.push(...i)}doLog(e){this.proxy.$log(this.file,e)}flush(){this.proxy.$flush(this.file)}}},6263:function(e,t,i){i.d(t,{W:function(){return l},b:function(){return d}});var n=i(45493),r=i(78293),o=i(28019),s=i(7428),a=i(82722),c=i(53976);const l=(0,o.yh)("IExtHostManagedSockets");let d=class{constructor(e){this._remoteSocketIdCounter=0,this._factory=null,this._managedRemoteSockets=new Map,this._proxy=e.getProxy(r.Tr.MainThreadManagedSockets)}setFactory(e,t){for(const e of this._managedRemoteSockets.values())e.dispose();this._factory&&this._proxy.$unregisterSocketFactory(this._factory.socketFactoryId),this._factory=new u(e,t),this._proxy.$registerSocketFactory(this._factory.socketFactoryId)}async $openRemoteSocket(e){if(!this._factory||this._factory.socketFactoryId!==e)throw new Error(`No socket factory with id ${e}`);const t=++this._remoteSocketIdCounter,i=await this._factory.makeConnection(),n=new s.SL;return this._managedRemoteSockets.set(t,new h(t,i,n)),n.add((0,s.OF)((()=>this._managedRemoteSockets.delete(t)))),n.add(i.onDidEnd((()=>{this._proxy.$onDidManagedSocketEnd(t),n.dispose()}))),n.add(i.onDidClose((e=>{this._proxy.$onDidManagedSocketClose(t,e?.stack??e?.message),n.dispose()}))),n.add(i.onDidReceiveMessage((e=>this._proxy.$onDidManagedSocketHaveData(t,c.KN.wrap(e))))),t}$remoteSocketWrite(e,t){this._managedRemoteSockets.get(e)?.actual.send(t.buffer)}$remoteSocketEnd(e){const t=this._managedRemoteSockets.get(e);t&&(t.actual.end(),t.dispose())}async $remoteSocketDrain(e){await(this._managedRemoteSockets.get(e)?.actual.drain?.())}};d=(0,n.g)([(0,n.f)(0,a.O)],d);class u{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}}class h extends s.JT{constructor(e,t,i){super(),this.socketId=e,this.actual=t,this._register(i)}}},92231:function(e,t,i){i.d(t,{U:function(){return C},X:function(){return x}});var n=i(45493),r=i(78293),o=i(28019),s=i(82722),a=i(26258),c=i(525),l=i(26713),d=i(43179),u=i(77600),h=i(73820),p=i(52202),m=i(8210),g=i(53976),f=i(47635),_=i(28698),v=i(81557),b=i(7428);class y extends c.Li{get disposed(){return this._disposed}constructor(e,t,i,n,r){super(),this.id=e,this.name=t,this.logger=i,this.proxy=n,this.extension=r,this.offset=0,this._disposed=!1,this.visible=!1,this.setLevel(i.getLevel()),this._register(i.onDidChangeLogLevel((e=>this.setLevel(e))))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+"\n")}append(e){this.info(e)}clear(){const e=this.offset;this.logger.flush(),this.proxy.$update(this.id,d.Ed.Clear,e)}replace(e){const t=this.offset;this.info(e),this.proxy.$update(this.id,d.Ed.Replace,t),this.visible&&this.logger.flush()}show(e,t){this.logger.flush(),this.proxy.$reveal(this.id,!!("boolean"==typeof e?e:t))}hide(){this.proxy.$close(this.id)}log(e,t){this.offset+=g.KN.fromString(t).byteLength,(0,c.cM)(this.logger,e,t),this.visible&&(this.logger.flush(),this.proxy.$update(this.id,d.Ed.Append))}dispose(){super.dispose(),this._disposed||(this.proxy.$dispose(this.id),this._disposed=!0)}}class w extends y{appendLine(e){this.append(e)}}let x=class{constructor(e,t,i,n,o,s){this.initData=t,this.extHostFileSystem=i,this.extHostFileSystemInfo=n,this.loggerService=o,this.logService=s,this.extensionLogDirectoryPromise=new Map,this.namePool=1,this.channels=new Map,this.visibleChannelId=null,this.proxy=e.getProxy(r.Tr.MainThreadOutputService),this.outputsLocation=this.extHostFileSystemInfo.extUri.joinPath(t.logsLocation,`output_logging_${(0,m.rL)(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(e){this.visibleChannelId=e;for(const[e,t]of this.channels)t.visible=e===this.visibleChannelId}createOutputChannel(e,t,i){if(!(e=e.trim()))throw new Error("illegal argument `name`. must not be falsy");const n="object"==typeof t&&t.log,r=(0,f.HD)(t)?t:void 0;if((0,f.HD)(r)&&!r.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const s=this.initData.environment.extensionLogLevel?.find((([e])=>a.kP.equals(i.identifier,e)))?.[1];s&&(o=(0,c.AW)(s));const l=n?this.doCreateLogOutputChannel(e,o,i):this.doCreateOutputChannel(e,r,i);return l.then((e=>{this.channels.set(e.id,e),e.visible=e.id===this.visibleChannelId})),n?this.createExtHostLogOutputChannel(e,o??this.logService.getLevel(),l):this.createExtHostOutputChannel(e,l)}async doCreateOutputChannel(e,t,i){this.outputDirectoryPromise||(this.outputDirectoryPromise=this.extHostFileSystem.value.createDirectory(this.outputsLocation).then((()=>this.outputsLocation)));const n=await this.outputDirectoryPromise,r=this.extHostFileSystemInfo.extUri.joinPath(n,`${this.namePool++}-${e.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),o=this.loggerService.createLogger(r,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0}),s=await this.proxy.$register(e,r,t,i.identifier.value);return new y(s,e,o,this.proxy,i)}async doCreateLogOutputChannel(e,t,i){const n=await this.createExtensionLogDirectory(i),r=e.replace(/[\\/:\*\?"<>\|]/g,""),o=this.extHostFileSystemInfo.extUri.joinPath(n,`${r}.log`),s=`${i.identifier.value}.${r}`,a=this.loggerService.createLogger(o,{id:s,name:e,logLevel:t,extensionId:i.identifier.value});return new w(s,e,a,this.proxy,i)}createExtensionLogDirectory(e){let t=this.extensionLogDirectoryPromise.get(e.identifier.value);if(!t){const i=this.extHostFileSystemInfo.extUri.joinPath(this.initData.logsLocation,e.identifier.value);this.extensionLogDirectoryPromise.set(e.identifier.value,t=(async()=>{try{await this.extHostFileSystem.value.createDirectory(i)}catch(e){if((0,_.q9)(e)!==_.bH.FileExists)throw e}return i})())}return t}createExtHostOutputChannel(e,t){let i=!1;const n=()=>{if(i)throw new Error("Channel has been closed")};return{get name(){return e},append(e){n(),t.then((t=>t.append(e)))},appendLine(e){n(),t.then((t=>t.appendLine(e)))},clear(){n(),t.then((e=>e.clear()))},replace(e){n(),t.then((t=>t.replace(e)))},show(e,i){n(),t.then((t=>t.show(e,i)))},hide(){n(),t.then((e=>e.hide()))},dispose(){i=!0,t.then((e=>e.dispose()))}}}createExtHostLogOutputChannel(e,t,i){const n=new b.SL,r=()=>{if(n.isDisposed)throw new Error("Channel has been closed")},o=n.add(new v.Q5);function s(e){t=e,o.fire(e)}return i.then((e=>{n.add(e),e.logLevel!==t&&s(e.logLevel),n.add(e.onDidChangeLogLevel((e=>s(e))))})),{...this.createExtHostOutputChannel(e,i),get logLevel(){return t},onDidChangeLogLevel:o.event,trace(e,...t){r(),i.then((i=>i.trace(e,...t)))},debug(e,...t){r(),i.then((i=>i.debug(e,...t)))},info(e,...t){r(),i.then((i=>i.info(e,...t)))},warn(e,...t){r(),i.then((i=>i.warn(e,...t)))},error(e,...t){r(),i.then((i=>i.error(e,...t)))},dispose(){n.dispose()}}}};x=(0,n.g)([(0,n.f)(0,s.O),(0,n.f)(1,h.$),(0,n.f)(2,u.a),(0,n.f)(3,p.G),(0,n.f)(4,l.y),(0,n.f)(5,l.V)],x);const C=(0,o.yh)("IExtHostOutputService")},82722:function(e,t,i){i.d(t,{O:function(){return n},i:function(){return r}});const n=(0,i(28019).yh)("IExtHostRpcService");class r{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}}},28200:function(e,t,i){i.d(t,{dX:function(){return k},FR:function(){return T}});var n=i(45493),r=i(7428),o=i(78293),s=i(28019),a=i(15229),c=i(17126),l=i(36994),d=i(22200),u=i(81647),h=i(43064),p=i(45630);class m{constructor(e,t,i){this.config=e,this.provider=t,this.sessionToken=i,this.isLimitHit=!1,this.resultCount=0,this.isCanceled=!1,this.filePattern=e.filePattern,this.includePattern=e.includePattern&&(0,d.Qc)(e.includePattern),this.maxResults=e.maxResults||void 0,this.exists=e.exists,this.activeCancellationTokens=new Set,this.globalExcludePattern=e.excludePattern&&(0,d.Qc)(e.excludePattern)}cancel(){this.isCanceled=!0,this.activeCancellationTokens.forEach((e=>e.cancel())),this.activeCancellationTokens=new Set}search(e){const t=this.config.folderQueries||[];return new Promise(((i,n)=>{const r=t=>{this.resultCount++,e(t)};if(this.isCanceled)return i({limitHit:this.isLimitHit});this.config.extraFileResources&&this.config.extraFileResources.forEach((e=>{const t=e.toString(),i=(0,a.EZ)(t);this.globalExcludePattern&&this.globalExcludePattern(t,i)||this.matchFile(r,{base:e,basename:i})})),Promise.all(t.map((e=>this.searchInFolder(e,r)))).then((e=>{i({limitHit:this.isLimitHit,stats:e[0]||void 0})}),(e=>{n(new Error((0,l.yJ)(e)))}))}))}async searchInFolder(e,t){const i=new c.AU,n=this.getSearchOptionsForFolder(e),r=this.initDirectoryTree(),o=new p.u2(this.config,e),s=!o.hasSiblingExcludeClauses();let l;try{this.activeCancellationTokens.add(i),l=h.G.create();const c=await this.provider.provideFileSearchResults({pattern:this.config.filePattern||""},n,i.token),d=l.elapsed(),u=h.G.create();return this.isCanceled&&!this.isLimitHit?null:(c&&c.forEach((i=>{const n=a.KR.relative(e.folder.path,i.path);if(s){const r=(0,a.EZ)(i.path);this.matchFile(t,{base:e.folder,relativePath:n,basename:r})}else this.addDirectoryEntries(r,e.folder,n,t)})),this.isCanceled&&!this.isLimitHit?null:(this.matchDirectoryTree(r,o,t),{providerTime:d,postProcessTime:u.elapsed()}))}finally{i.dispose(),this.activeCancellationTokens.delete(i)}}getSearchOptionsForFolder(e){const t=(0,p.fV)(this.config.includePattern,e.includePattern),i=(0,p.fV)(this.config.excludePattern,e.excludePattern);return{folder:e.folder,excludes:i,includes:t,useIgnoreFiles:!e.disregardIgnoreFiles,useGlobalIgnoreFiles:!e.disregardGlobalIgnoreFiles,useParentIgnoreFiles:!e.disregardParentIgnoreFiles,followSymlinks:!e.ignoreSymlinks,maxResults:this.config.maxResults,session:this.sessionToken}}initDirectoryTree(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}addDirectoryEntries({pathToEntries:e},t,i,n){if(i===this.filePattern){const e=(0,a.EZ)(this.filePattern);this.matchFile(n,{base:t,relativePath:this.filePattern,basename:e})}!function i(n){const r=(0,a.EZ)(n),o=(0,a.XX)(n);let s=e[o];s||(s=e[o]=[],i(o)),s.push({base:t,relativePath:n,basename:r})}(i)}matchDirectoryTree({rootEntries:e,pathToEntries:t},i,n){const r=this,o=this.filePattern;!function e(s){const a=(0,p.x2)((()=>s.map((e=>e.basename))));for(let c=0,l=s.length;c<l;c++){const l=s[c],{relativePath:d,basename:u}=l;if(i.matchesExcludesSync(d,u,o!==u?a:void 0))continue;const h=t[d];if(h)e(h);else{if(d===o)continue;r.matchFile(n,l)}if(r.isLimitHit)break}}(e)}matchFile(e,t){(!this.includePattern||t.relativePath&&this.includePattern(t.relativePath,t.basename))&&((this.exists||this.maxResults&&this.resultCount>=this.maxResults)&&(this.isLimitHit=!0,this.cancel()),this.isLimitHit||e(t))}}class g{constructor(){this.sessions=new Map}static{this.BATCH_SIZE=512}fileSearch(e,t,i,n){const r=this.getSessionTokenSource(e.cacheKey),o=new m(e,t,r&&r.token);let s=0;return this.doSearch(o,g.BATCH_SIZE,(e=>{s+=e.length,i(e.map((e=>this.rawMatchToSearchItem(e))))}),n).then((e=>({limitHit:e.limitHit,stats:e.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:s,detailStats:e.stats}:void 0,messages:[]})))}clearCache(e){const t=this.getSessionTokenSource(e);t?.cancel()}getSessionTokenSource(e){if(e)return this.sessions.has(e)||this.sessions.set(e,new c.AU),this.sessions.get(e)}rawMatchToSearchItem(e){return e.relativePath?{resource:(0,u.Vo)(e.base,e.relativePath)}:{resource:e.base}}doSearch(e,t,i,n){const r=n.onCancellationRequested((()=>{e.cancel()}));let o=[];return e.search((e=>{e&&(o.push(e),t>0&&o.length>=t&&(i(o),o=[]))})).then((e=>(o.length&&i(o),r.dispose(),e)),(e=>(o.length&&i(o),r.dispose(),Promise.reject(e))))}}var f=i(82722),_=i(76221),v=i(26713),b=i(42731),y=i(78074),w=i(35820),x=i(59301);class C{constructor(e,t,i){this.queryProviderPair=e,this.fileUtils=t,this.processType=i,this.collector=null,this.isLimitHit=!1,this.resultCount=0}get query(){return this.queryProviderPair.query}search(e,t){const i=this.query.folderQueries||[],n=new c.AU(t);return new Promise(((t,r)=>{this.collector=new E(e);let o=!1;const s=(e,t)=>{if(!o&&!this.isLimitHit){const i=this.resultSize(e);S(e)&&"number"==typeof this.query.maxResults&&this.resultCount+i>this.query.maxResults&&(this.isLimitHit=!0,o=!0,n.cancel(),e=this.trimResultToSize(e,this.query.maxResults-this.resultCount));const r=this.resultSize(e);this.resultCount+=r,(r>0||!S(e))&&this.collector.add(e,t)}};Promise.all(i.map(((e,t)=>this.searchInFolder(e,(e=>s(e,t)),n.token)))).then((e=>{n.dispose(),this.collector.flush();const i=e.some((e=>!!e&&!!e.limitHit));t({limitHit:this.isLimitHit||i,messages:e.flatMap((e=>e?.message?Array.isArray(e.message)?e.message:[e.message]:[])),stats:{type:this.processType}})}),(e=>{n.dispose();const t=(0,l.yJ)(e);r(new Error(t))}))}))}resultSize(e){return S(e)?Array.isArray(e.ranges)?e.ranges.length:1:0}trimResultToSize(e,t){const i=Array.isArray(e.ranges)?e.ranges:[e.ranges],n=Array.isArray(e.preview.matches)?e.preview.matches:[e.preview.matches];return{ranges:i.slice(0,t),preview:{matches:n.slice(0,t),text:e.preview.text},uri:e.uri}}async searchInFolder(e,t,i){const n=new p.u2(this.query,e),r=[],o={report:i=>{if(!this.validateProviderResult(i))return;const o=e.folder.scheme===x.lg.file?(0,p.tZ)((()=>this.fileUtils.readdir((0,u.XX)(i.uri)))):void 0,s=(0,u.lX)(e.folder,i.uri);if(s){const e=n.includedInQuery(s,(0,a.EZ)(s),o);(0,w.J8)(e)?r.push(e.then((e=>{e&&t(i)}))):e&&t(i)}}},s=this.getSearchOptionsForFolder(e);let c;var l;return c=this.queryProviderPair.query.type===p.xL.aiText?await this.queryProviderPair.provider.provideAITextSearchResults(this.queryProviderPair.query.contentPattern,s,o,i):await this.queryProviderPair.provider.provideTextSearchResults((l=this.queryProviderPair.query.contentPattern,{isCaseSensitive:l.isCaseSensitive||!1,isRegExp:l.isRegExp||!1,isWordMatch:l.isWordMatch||!1,isMultiline:l.isMultiline||!1,pattern:l.pattern}),s,o,i),r.length&&await Promise.all(r),c}validateProviderResult(e){if(S(e))if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1;return!0}getSearchOptionsForFolder(e){const t=(0,p.fV)(this.query.includePattern,e.includePattern),i=(0,p.fV)(this.query.excludePattern,e.excludePattern),n={folder:b.ov.from(e.folder),excludes:i,includes:t,useIgnoreFiles:!e.disregardIgnoreFiles,useGlobalIgnoreFiles:!e.disregardGlobalIgnoreFiles,useParentIgnoreFiles:!e.disregardParentIgnoreFiles,followSymlinks:!e.ignoreSymlinks,encoding:e.fileEncoding&&this.fileUtils.toCanonicalName(e.fileEncoding),maxFileSize:this.query.maxFileSize,maxResults:this.query.maxResults??p.KR,previewOptions:this.query.previewOptions,afterContext:this.query.afterContext,beforeContext:this.query.beforeContext};return"usePCRE2"in this.query&&(n.usePCRE2=this.query.usePCRE2),n}}class E{constructor(e){this._onResult=e,this._currentFolderIdx=-1,this._currentFileMatch=null,this._batchedCollector=new D(512,(e=>this.sendItems(e)))}add(e,t){!this._currentFileMatch||this._currentFolderIdx===t&&(0,u.Xy)(this._currentUri,e.uri)||(this.pushToCollector(),this._currentFileMatch=null),this._currentFileMatch||(this._currentFolderIdx=t,this._currentFileMatch={resource:e.uri,results:[]}),this._currentFileMatch.results.push(function(e){return S(e)?{preview:{matches:(0,y.Gb)(e.preview.matches,(e=>({startLineNumber:e.start.line,startColumn:e.start.character,endLineNumber:e.end.line,endColumn:e.end.character}))),text:e.preview.text},ranges:(0,y.Gb)(e.ranges,(e=>({startLineNumber:e.start.line,startColumn:e.start.character,endLineNumber:e.end.line,endColumn:e.end.character})))}:{text:e.text,lineNumber:e.lineNumber}}(e))}pushToCollector(){const e=this._currentFileMatch&&this._currentFileMatch.results?this._currentFileMatch.results.length:0;this._batchedCollector.addItem(this._currentFileMatch,e)}flush(){this.pushToCollector(),this._batchedCollector.flush()}sendItems(e){this._onResult(e)}}function S(e){return!!e.preview}class D{static{this.TIMEOUT=4e3}static{this.START_BATCH_AFTER_COUNT=50}constructor(e,t){this.maxBatchSize=e,this.cb=t,this.totalNumberCompleted=0,this.batch=[],this.batchSize=0}addItem(e,t){e&&this.addItemToBatch(e,t)}addItems(e,t){e&&this.addItemsToBatch(e,t)}addItemToBatch(e,t){this.batch.push(e),this.batchSize+=t,this.onUpdate()}addItemsToBatch(e,t){this.batch=this.batch.concat(e),this.batchSize+=t,this.onUpdate()}onUpdate(){this.totalNumberCompleted<D.START_BATCH_AFTER_COUNT||this.batchSize>=this.maxBatchSize?this.flush():this.timeoutHandle||(this.timeoutHandle=setTimeout((()=>{this.flush()}),D.TIMEOUT))}flush(){this.batchSize&&(this.totalNumberCompleted+=this.batchSize,this.cb(this.batch),this.batch=[],this.batchSize=0,this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=0))}}const T=(0,s.yh)("IExtHostSearch");let k=class{constructor(e,t,i){this.extHostRpc=e,this._uriTransformer=t,this._logService=i,this._proxy=this.extHostRpc.getProxy(o.Tr.MainThreadSearch),this._handlePool=0,this._textSearchProvider=new Map,this._textSearchUsedSchemes=new Set,this._aiTextSearchProvider=new Map,this._aiTextSearchUsedSchemes=new Set,this._fileSearchProvider=new Map,this._fileSearchUsedSchemes=new Set,this._fileSearchManager=new g}_transformScheme(e){return this._uriTransformer.transformOutgoingScheme(e)}registerTextSearchProvider(e,t){if(this._textSearchUsedSchemes.has(e))throw new Error(`a text search provider for the scheme '${e}' is already registered`);this._textSearchUsedSchemes.add(e);const i=this._handlePool++;return this._textSearchProvider.set(i,t),this._proxy.$registerTextSearchProvider(i,this._transformScheme(e)),(0,r.OF)((()=>{this._textSearchUsedSchemes.delete(e),this._textSearchProvider.delete(i),this._proxy.$unregisterProvider(i)}))}registerAITextSearchProvider(e,t){if(this._aiTextSearchUsedSchemes.has(e))throw new Error(`an AI text search provider for the scheme '${e}'is already registered`);this._aiTextSearchUsedSchemes.add(e);const i=this._handlePool++;return this._aiTextSearchProvider.set(i,t),this._proxy.$registerAITextSearchProvider(i,this._transformScheme(e)),(0,r.OF)((()=>{this._aiTextSearchUsedSchemes.delete(e),this._aiTextSearchProvider.delete(i),this._proxy.$unregisterProvider(i)}))}registerFileSearchProvider(e,t){if(this._fileSearchUsedSchemes.has(e))throw new Error(`a file search provider for the scheme '${e}' is already registered`);this._fileSearchUsedSchemes.add(e);const i=this._handlePool++;return this._fileSearchProvider.set(i,t),this._proxy.$registerFileSearchProvider(i,this._transformScheme(e)),(0,r.OF)((()=>{this._fileSearchUsedSchemes.delete(e),this._fileSearchProvider.delete(i),this._proxy.$unregisterProvider(i)}))}$provideFileSearchResults(e,t,i,n){const r=I(i),o=this._fileSearchProvider.get(e);if(o)return this._fileSearchManager.fileSearch(r,o,(i=>{this._proxy.$handleFileMatch(e,t,i.map((e=>e.resource)))}),n);throw new Error("3 unknown provider: "+e)}async doInternalFileSearchWithCustomCallback(e,t,i){return{messages:[]}}$clearCache(e){return this._fileSearchManager.clearCache(e),Promise.resolve(void 0)}$provideTextSearchResults(e,t,i,n){const r=this._textSearchProvider.get(e);if(!r||!r.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${e}`);const o=I(i);return this.createTextSearchManager(o,r).search((i=>this._proxy.$handleTextMatch(e,t,i)),n)}$provideAITextSearchResults(e,t,i,n){const r=this._aiTextSearchProvider.get(e);if(!r||!r.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${e}`);const o=I(i);return this.createAITextSearchManager(o,r).search((i=>this._proxy.$handleTextMatch(e,t,i)),n)}$enableExtensionHostSearch(){}createTextSearchManager(e,t){return new C({query:e,provider:t},{readdir:e=>Promise.resolve([]),toCanonicalName:e=>e},"textSearchProvider")}createAITextSearchManager(e,t){return new C({query:e,provider:t},{readdir:e=>Promise.resolve([]),toCanonicalName:e=>e},"aiTextSearchProvider")}};function I(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(P),extraFileResources:e.extraFileResources&&e.extraFileResources.map((e=>b.ov.revive(e)))}}function P(e){return{...e,folder:b.ov.revive(e.folder)}}k=(0,n.g)([(0,n.f)(0,f.O),(0,n.f)(1,_.F),(0,n.f)(2,v.V)],k)},8685:function(e,t,i){i.d(t,{Z:function(){return a},p:function(){return s}});var n=i(78293),r=i(81557),o=i(28019);class s{constructor(e){this._onDidChangePassword=new r.Q5,this.onDidChangePassword=this._onDidChangePassword.event,this._proxy=e.getProxy(n.Tr.MainThreadSecretState)}async $onDidChangePassword(e){this._onDidChangePassword.fire(e)}get(e,t){return this._proxy.$getPassword(e,t)}store(e,t,i){return this._proxy.$setPassword(e,t,i)}delete(e,t){return this._proxy.$deletePassword(e,t)}}const a=(0,o.yh)("IExtHostSecretState")},34142:function(e,t,i){i.d(t,{W:function(){return a},Y:function(){return s}});var n=i(78293),r=i(81557),o=i(28019);class s{constructor(e,t){this._logService=t,this._onDidChangeStorage=new r.Q5,this.onDidChangeStorage=this._onDidChangeStorage.event,this._proxy=e.getProxy(n.Tr.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this._proxy.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,i){const n=await this._proxy.$initializeExtensionStorage(e,t);let r;return n&&(r=this.safeParseValue(e,t,n)),r||i}setValue(e,t,i){return this._proxy.$setValue(e,t,i)}$acceptValue(e,t,i){const n=this.safeParseValue(e,t,i);n&&this._onDidChangeStorage.fire({shared:e,key:t,value:n})}safeParseValue(e,t,i){try{return JSON.parse(i)}catch(i){this._logService.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${i}`)}}}const a=(0,o.yh)("IExtHostStorage")},3621:function(e,t,i){i.d(t,{L:function(){return l},j:function(){return d}});var n=i(45493),r=i(28019),o=i(73820),s=i(26713),a=i(77600),c=i(42731);const l=(0,r.yh)("IExtensionStoragePaths");let d=class{constructor(e,t,i){this._logService=t,this._extHostFileSystem=i,this._workspace=e.workspace??void 0,this._environment=e.environment,this.whenReady=this._getOrCreateWorkspaceStoragePath().then((e=>this._value=e))}async _getWorkspaceStorageURI(e){return c.ov.joinPath(this._environment.workspaceStorageHome,e)}async _getOrCreateWorkspaceStoragePath(){if(!this._workspace)return Promise.resolve(void 0);const e=this._workspace.id,t=await this._getWorkspaceStorageURI(e);try{return await this._extHostFileSystem.value.stat(t),this._logService.trace("[ExtHostStorage] storage dir already exists",t),t}catch{}try{return this._logService.trace("[ExtHostStorage] creating dir and metadata-file",t),await this._extHostFileSystem.value.createDirectory(t),await this._extHostFileSystem.value.writeFile(c.ov.joinPath(t,"meta.json"),(new TextEncoder).encode(JSON.stringify({id:this._workspace.id,configuration:c.ov.revive(this._workspace.configuration)?.toString(),name:this._workspace.name},void 0,2))),t}catch(e){return void this._logService.error("[ExtHostStorage]",e)}}workspaceValue(e){if(this._value)return c.ov.joinPath(this._value,e.identifier.value)}globalValue(e){return c.ov.joinPath(this._environment.globalStorageHome,e.identifier.value.toLowerCase())}onWillDeactivateAll(){}};d=(0,n.g)([(0,n.f)(0,o.$),(0,n.f)(1,s.V),(0,n.f)(2,a.a)],d)},87958:function(e,t,i){i.d(t,{TE:function(){return N},h2:function(){return $}});var n,r,o,s,a,c,l,d,u,h,p=i(45493),m=i(42731),g=i(35820),f=i(81557),_=i(78293),v=i(30874),b=i(89608),y=i(1663),w=i(63537),x=i(17126),C=i(82209),E=i(82722),S=i(73820),D=i(28019),T=i(59301),k=i(11547),I=i(26713),P=i(43878),A=(i(81048),i(54316));!function(e){e.from=function(e){if(null!=e)return e},e.to=function(e){if(null!=e)return e}}(n||(n={})),function(e){e.from=function(e){if(null!=e)return e},e.to=function(e){if(null!=e)return e}}(r||(r={})),function(e){e.from=function(e){if(null!=e)return e},e.to=function(e){if(null!=e)return e}}(o||(o={})),function(e){e.is=function(e){if(e){return e&&!!e.process}return!1},e.from=function(e){if(null==e)return;const t={process:e.process,args:e.args};return e.options&&(t.options=o.from(e.options)),t},e.to=function(e){if(null!=e)return new v.OLe(e.process,e.args,e.options)}}(s||(s={})),function(e){e.from=function(e){if(null!=e)return e},e.to=function(e){if(null!=e)return e}}(a||(a={})),function(e){e.is=function(e){if(e){const t=e;return t&&(!!t.commandLine||!!t.command)}return!1},e.from=function(e){if(null==e)return;const t={};return void 0!==e.commandLine?t.commandLine=e.commandLine:(t.command=e.command,t.args=e.args),e.options&&(t.options=a.from(e.options)),t},e.to=function(e){if(null!=e&&(void 0!==e.command||void 0!==e.commandLine))return e.commandLine?new v.yGk(e.commandLine,e.options):new v.yGk(e.command,e.args?e.args:[],e.options)}}(c||(c={})),function(e){e.is=function(e){if(e){return e&&"customExecution"===e.customExecution}return!1},e.from=function(e){return{customExecution:"customExecution"}},e.to=function(e,t){return t.get(e)}}(l||(l={})),function(e){e.from=function(e){if(null!=e)return{_id:e.id,isDefault:e.isDefault}}}(d||(d={})),function(e){function t(e,t){if(null==e)return;let i;e.execution instanceof v.OLe?i=s.from(e.execution):e.execution instanceof v.yGk?i=c.from(e.execution):e.execution&&e.execution instanceof v.mgN&&(i=l.from(e.execution));const o=n.from(e.definition);let a;if(a=e.scope?"number"==typeof e.scope?e.scope:e.scope.uri:v.qNe.Workspace,!o||!a)return;return{_id:e._id,definition:o,name:e.name,source:{extensionId:t.identifier.value,label:e.source,scope:a},execution:i,isBackground:e.isBackground,group:d.from(e.group),presentationOptions:r.from(e.presentationOptions),problemMatchers:e.problemMatchers,hasDefinedMatchers:e.hasDefinedMatchers,runOptions:e.runOptions?e.runOptions:{reevaluateOnRerun:!0},detail:e.detail}}e.fromMany=function(e,i){if(null==e)return[];const n=[];for(const r of e){const e=t(r,i);e&&n.push(e)}return n},e.from=t,e.to=async function(e,t,i){if(null==e)return;let o;s.is(e.execution)?o=s.to(e.execution):c.is(e.execution)?o=c.to(e.execution):l.is(e.execution)&&(o=l.to(e._id,i));const a=n.to(e.definition);let d;if(e.source&&(d=void 0!==e.source.scope?"number"==typeof e.source.scope?e.source.scope:await t.resolveWorkspaceFolder(m.ov.revive(e.source.scope)):v.qNe.Workspace),!a||!d)return;const u=new v.iQE(a,d,e.name,e.source.label,o,e.problemMatchers);return void 0!==e.isBackground&&(u.isBackground=e.isBackground),void 0!==e.group&&(u.group=v.p5U.from(e.group._id),u.group&&e.group.isDefault&&(u.group=new v.p5U(u.group.id,u.group.label),!0===e.group.isDefault&&(u.group.isDefault=e.group.isDefault))),e.presentationOptions&&(u.presentationOptions=r.to(e.presentationOptions)),e._id&&(u._id=e._id),e.detail&&(u.detail=e.detail),u}}(u||(u={})),function(e){e.from=function(e){return e},e.to=function(e){if(e)return Object.assign(Object.create(null),e)}}(h||(h={}));class R{#a;constructor(e,t,i){this._id=t,this._task=i,this.#a=e}get task(){return this._task}terminate(){this.#a.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}}let L=class{constructor(e,t,i,n,r,o,s,a){this._onDidExecuteTask=new f.Q5,this._onDidTerminateTask=new f.Q5,this._onDidTaskProcessStarted=new f.Q5,this._onDidTaskProcessEnded=new f.Q5,this._proxy=e.getProxy(_.Tr.MainThreadTask),this._workspaceProvider=i,this._editorService=n,this._configurationService=r,this._terminalService=o,this._handleCounter=0,this._handlers=new Map,this._taskExecutions=new Map,this._taskExecutionPromises=new Map,this._providedCustomExecutions2=new Map,this._notProvidedCustomExecutions=new Set,this._activeCustomExecutions2=new Map,this._logService=s,this._deprecationService=a,this._proxy.$registerSupportedExecutions(!0)}registerTaskProvider(e,t,i){if(!i)return new v.JTr((()=>{}));const n=this.nextHandle();return this._handlers.set(n,{type:t,provider:i,extension:e}),this._proxy.$registerTaskProvider(n,t),new v.JTr((()=>{this._handlers.delete(n),this._proxy.$unregisterTaskProvider(n)}))}registerTaskSystem(e,t){this._proxy.$registerTaskSystem(e,t)}fetchTasks(e){return this._proxy.$fetchTasks(h.from(e)).then((async e=>{const t=[];for(const i of e){const e=await u.to(i,this._workspaceProvider,this._providedCustomExecutions2);e&&t.push(e)}return t}))}get taskExecutions(){const e=[];return this._taskExecutions.forEach((t=>e.push(t))),e}terminateTask(e){if(!(e instanceof R))throw new Error("No valid task execution provided");return this._proxy.$terminateTask(e._id)}get onDidStartTask(){return this._onDidExecuteTask.event}async $onDidStartTask(e,t,i){const n=this._providedCustomExecutions2.get(e.id);n&&(this._activeCustomExecutions2.set(e.id,n),this._terminalService.attachPtyToTerminal(t,await n.callback(i))),this._lastStartedTask=e.id,this._onDidExecuteTask.fire({execution:await this.getTaskExecution(e)})}get onDidEndTask(){return this._onDidTerminateTask.event}async $OnDidEndTask(e){if(!this._taskExecutionPromises.has(e.id))return;const t=await this.getTaskExecution(e);this._taskExecutionPromises.delete(e.id),this._taskExecutions.delete(e.id),this.customExecutionComplete(e),this._onDidTerminateTask.fire({execution:t})}get onDidStartTaskProcess(){return this._onDidTaskProcessStarted.event}async $onDidStartTaskProcess(e){const t=await this.getTaskExecution(e.id);this._onDidTaskProcessStarted.fire({execution:t,processId:e.processId})}get onDidEndTaskProcess(){return this._onDidTaskProcessEnded.event}async $onDidEndTaskProcess(e){const t=await this.getTaskExecution(e.id);this._onDidTaskProcessEnded.fire({execution:t,exitCode:e.exitCode})}$provideTasks(e,t){const i=this._handlers.get(e);if(!i)return Promise.reject(new Error("no handler found"));const n=[],r=(0,g.OH)((()=>i.provider.provideTasks(x.Ts.None))).then((e=>this.provideTasksInternal(t,n,i,e)));return new Promise((e=>{r.then((t=>{Promise.all(n).then((()=>{e(t)}))}))}))}async $resolveTask(e,t){const i=this._handlers.get(e);if(!i)return Promise.reject(new Error("no handler found"));if(t.definition.type!==i.type)throw new Error(`Unexpected: Task of type [${t.definition.type}] cannot be resolved by provider of type [${i.type}].`);const n=await u.to(t,this._workspaceProvider,this._providedCustomExecutions2);if(!n)throw new Error("Unexpected: Task cannot be resolved.");const r=await i.provider.resolveTask(n,x.Ts.None);if(!r)return;this.checkDeprecation(r,i);const o=u.from(r,i.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(r.definition!==n.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return l.is(o.execution)&&await this.addCustomExecution(o,r,!0),await this.resolveTaskInternal(o)}nextHandle(){return this._handleCounter++}async addCustomExecution(e,t,i){const n=await this._proxy.$createTaskId(e);i||this._providedCustomExecutions2.has(n)||(this._notProvidedCustomExecutions.add(n),this._activeCustomExecutions2.set(n,t.execution)),this._providedCustomExecutions2.set(n,t.execution)}async getTaskExecution(e,t){if("string"==typeof e){const t=this._taskExecutionPromises.get(e);if(!t)throw new A.QD("Unexpected: The specified task is missing an execution");return t}const i=this._taskExecutionPromises.get(e.id);if(i)return i;let n;return n=t?Promise.resolve(new R(this,e.id,t)):u.to(e.task,this._workspaceProvider,this._providedCustomExecutions2).then((t=>{if(!t)throw new A.QD("Unexpected: Task does not exist.");return new R(this,e.id,t)})),this._taskExecutionPromises.set(e.id,n),n.then((t=>(this._taskExecutions.set(e.id,t),t)))}checkDeprecation(e,t){e._deprecated&&this._deprecationService.report("Task.constructor",t.extension,"Use the Task constructor that takes a `scope` instead.")}customExecutionComplete(e){this._activeCustomExecutions2.get(e.id)&&this._activeCustomExecutions2.delete(e.id),this._notProvidedCustomExecutions.has(e.id)&&this._lastStartedTask!==e.id&&(this._providedCustomExecutions2.delete(e.id),this._notProvidedCustomExecutions.delete(e.id));const t=this._notProvidedCustomExecutions.values();let i=t.next();for(;!i.done;)this._activeCustomExecutions2.has(i.value)||this._lastStartedTask===i.value||(this._providedCustomExecutions2.delete(i.value),this._notProvidedCustomExecutions.delete(i.value)),i=t.next()}};L=(0,p.g)([(0,p.f)(0,E.O),(0,p.f)(1,S.$),(0,p.f)(2,b.w),(0,p.f)(3,y.T),(0,p.f)(4,w.E1),(0,p.f)(5,C.$3),(0,p.f)(6,I.V),(0,p.f)(7,P.J)],L);let N=class extends L{constructor(e,t,i,n,r,o,s,a){super(e,t,i,n,r,o,s,a),this.registerTaskSystem(T.lg.vscodeRemote,{scheme:T.lg.vscodeRemote,authority:"",platform:(0,k.PW)(k.t4.Web)})}async executeTask(e,t){if(!t.execution)throw new Error("Tasks to execute must include an execution");const i=u.from(t,e);if(void 0===i)throw new Error("Task is not valid");if(!l.is(i.execution))throw new A.B8;await this.addCustomExecution(i,t,!1);const n=await this.getTaskExecution(await this._proxy.$getTaskExecution(i),t);return this._proxy.$executeTask(i).catch((e=>{throw new Error(e)})),n}provideTasksInternal(e,t,i,n){const r=[];if(n)for(const o of n){if(this.checkDeprecation(o,i),!o.definition||!e[o.definition.type]){const e=o.source?o.source:"No task source";this._logService.warn(`The task [${e}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const n=u.from(o,i.extension);n&&l.is(n.execution)?(r.push(n),t.push(this.addCustomExecution(n,o,!0))):this._logService.warn("Only custom execution tasks supported.")}return{tasks:r,extension:i.extension}}async resolveTaskInternal(e){if(l.is(e.execution))return e;this._logService.warn("Only custom execution tasks supported.")}async $resolveVariables(e,t){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(e,t,i){}};N=(0,p.g)([(0,p.f)(0,E.O),(0,p.f)(1,S.$),(0,p.f)(2,b.w),(0,p.f)(3,y.T),(0,p.f)(4,w.E1),(0,p.f)(5,C.$3),(0,p.f)(6,I.V),(0,p.f)(7,P.J)],N);const $=(0,D.yh)("IExtHostTask")},3560:function(e,t,i){i.d(t,{fv:function(){return y},jQ:function(){return v},oI:function(){return b},wM:function(){return _}});var n=i(45493),r=i(28019),o=i(81557),s=i(16515),a=i(525),c=i(26713),l=i(73820),d=i(14879),u=i(16585),h=i(73426),p=i(82998),m=i(42731),g=i(7428),f=i(67525);let _=class extends g.JT{constructor(e,t){super(),this.initData=e,this.loggerService=t,this._onDidChangeTelemetryEnabled=this._register(new o.Q5),this.onDidChangeTelemetryEnabled=this._onDidChangeTelemetryEnabled.event,this._onDidChangeTelemetryConfiguration=this._register(new o.Q5),this.onDidChangeTelemetryConfiguration=this._onDidChangeTelemetryConfiguration.event,this._productConfig={usage:!0,error:!0},this._level=s.g3.NONE,this._telemetryIsSupported=!1,this._inLoggingOnlyMode=!1,this._telemetryLoggers=new Map,this.extHostTelemetryLogFile=m.ov.revive(this.initData.environment.extensionTelemetryLogResource),this._inLoggingOnlyMode=this.initData.environment.isExtensionTelemetryLoggingOnly,this._outputLogger=t.createLogger(this.extHostTelemetryLogFile,{id:h.kG,name:(0,f.C$)("vs/workbench/api/common/extHostTelemetry",0,"Extension Telemetry{0}",this._inLoggingOnlyMode?" (Not Sent)":""),hidden:!0}),this._register(this._outputLogger),this._register(t.onDidChangeLogLevel((e=>{(0,a.w7)(e)&&this.updateLoggerVisibility()}))),this._outputLogger.info("Below are logs for extension telemetry events sent to the telemetry output channel API once the log level is set to trace."),this._outputLogger.info("===========================================================")}updateLoggerVisibility(){this.loggerService.setVisibility(this.extHostTelemetryLogFile,this._telemetryIsSupported&&this.loggerService.getLogLevel()===a.in.Trace)}getTelemetryConfiguration(){return this._level===s.g3.USAGE}getTelemetryDetails(){return{isCrashEnabled:this._level>=s.g3.CRASH,isErrorsEnabled:!!this._productConfig.error&&this._level>=s.g3.ERROR,isUsageEnabled:!!this._productConfig.usage&&this._level>=s.g3.USAGE}}instantiateLogger(e,t,i){const n=this.getTelemetryDetails(),r=new v(t,i,e,this._outputLogger,this._inLoggingOnlyMode,this.getBuiltInCommonProperties(e),{isUsageEnabled:n.isUsageEnabled,isErrorsEnabled:n.isErrorsEnabled}),o=this._telemetryLoggers.get(e.identifier.value)??[];return this._telemetryLoggers.set(e.identifier.value,[...o,r]),r.apiTelemetryLogger}$initializeTelemetryLevel(e,t,i){this._level=e,this._telemetryIsSupported=t,this._productConfig=i??{usage:!0,error:!0},this.updateLoggerVisibility()}getBuiltInCommonProperties(e){const t=Object.create(null);switch(t["common.extname"]=`${e.publisher}.${e.name}`,t["common.extversion"]=e.version,t["common.vscodemachineid"]=this.initData.telemetryInfo.machineId,t["common.vscodesessionid"]=this.initData.telemetryInfo.sessionId,t["common.sqmid"]=this.initData.telemetryInfo.sqmId,t["common.devDeviceId"]=this.initData.telemetryInfo.devDeviceId,t["common.vscodeversion"]=this.initData.version,t["common.isnewappinstall"]=b(this.initData.telemetryInfo.firstSessionDate),t["common.product"]=this.initData.environment.appHost,this.initData.uiKind){case d.D$.Web:t["common.uikind"]="web";break;case d.D$.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}return t["common.remotename"]=(0,u.WX)((0,h.x0)(this.initData.remote.authority)),t}$onDidChangeTelemetryLevel(e){this._oldTelemetryEnablement=this.getTelemetryConfiguration(),this._level=e;const t=this.getTelemetryDetails();this._telemetryLoggers.forEach(((e,t)=>{const i=e.filter((e=>!e.isDisposed));0===i.length?this._telemetryLoggers.delete(t):this._telemetryLoggers.set(t,i)})),this._telemetryLoggers.forEach((e=>{for(const i of e)i.updateTelemetryEnablements(t.isUsageEnabled,t.isErrorsEnabled)})),this._oldTelemetryEnablement!==this.getTelemetryConfiguration()&&this._onDidChangeTelemetryEnabled.fire(this.getTelemetryConfiguration()),this._onDidChangeTelemetryConfiguration.fire(this.getTelemetryDetails()),this.updateLoggerVisibility()}onExtensionError(e,t){const i=this._telemetryLoggers.get(e.value),n=i?.filter((e=>!e.isDisposed));if(!n)return this._telemetryLoggers.delete(e.value),!1;let r=!1;for(const e of n)e.ignoreUnhandledExtHostErrors||(e.logError(t),r=!0);return r}};_=(0,n.g)([(0,n.f)(0,l.$),(0,n.f)(1,c.y)],_);class v{static validateSender(e){if("object"!=typeof e)throw new TypeError("TelemetrySender argument is invalid");if("function"!=typeof e.sendEventData)throw new TypeError("TelemetrySender.sendEventData must be a function");if("function"!=typeof e.sendErrorData)throw new TypeError("TelemetrySender.sendErrorData must be a function");if(void 0!==e.flush&&"function"!=typeof e.flush)throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,i,n,r,s,a){this._extension=i,this._logger=n,this._inLoggingOnlyMode=r,this._commonProperties=s,this._onDidChangeEnableStates=new o.Q5,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this._ignoreBuiltinCommonProperties=t?.ignoreBuiltInCommonProperties??!1,this._additionalCommonProperties=t?.additionalCommonProperties,this._sender=e,this._telemetryEnablements={isUsageEnabled:a.isUsageEnabled,isErrorsEnabled:a.isErrorsEnabled}}updateTelemetryEnablements(e,t){this._apiObject&&(this._telemetryEnablements={isUsageEnabled:e,isErrorsEnabled:t},this._onDidChangeEnableStates.fire(this._apiObject))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=(0,h.cG)(t,[]),this._additionalCommonProperties&&(t=(0,p.jB)(t,this._additionalCommonProperties)),this._ignoreBuiltinCommonProperties||(t=(0,p.jB)(t,this._commonProperties)),"properties"in e?e.properties=t:e=t,e}logEvent(e,t){this._sender&&(e="vscode"===this._extension.publisher?this._extension.name+"/"+e:this._extension.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this._inLoggingOnlyMode||this._sender?.sendEventData(e,t),this._logger.trace(e,t))}logUsage(e,t){this._telemetryEnablements.isUsageEnabled&&this.logEvent(e,t)}logError(e,t){if(this._telemetryEnablements.isErrorsEnabled&&this._sender)if("string"==typeof e)this.logEvent(e,t);else{const i={name:e.name,message:e.message,stack:e.stack,cause:e.cause},n=(0,h.cG)(i,[]),r=new Error(n.message,{cause:n.cause});r.stack=n.stack,r.name=n.name,t=this.mixInCommonPropsAndCleanData(t||{}),this._inLoggingOnlyMode||this._sender.sendErrorData(r,t),this._logger.trace("exception",t)}}get apiTelemetryLogger(){if(!this._apiObject){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e._telemetryEnablements.isUsageEnabled},get isErrorsEnabled(){return e._telemetryEnablements.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e._onDidChangeEnableStates.event.bind(e)};this._apiObject=Object.freeze(t)}return this._apiObject}get isDisposed(){return!this._sender}dispose(){if(this._sender?.flush){let e=this._sender;this._sender=void 0,Promise.resolve(e.flush()).then(e=void 0),this._apiObject=void 0}else this._sender=void 0}}function b(e){const t=Date.now()-new Date(e).getTime();return!isNaN(t)&&t<864e5}const y=(0,r.yh)("IExtHostTelemetry")},82209:function(e,t,i){i.d(t,{$3:function(){return C},Ry:function(){return P}});var n=i(45493),r=i(81557),o=i(78293),s=i(28019),a=i(42731),c=i(82722),l=i(7428),d=i(30874),u=i(67525),h=i(54316),p=i(83856),m=i(17126),g=i(92004),f=i(54377),_=i(92206),v=i(27528),b=i(35820),y=i(54487),w=i(85315),x=i(65045);const C=(0,s.yh)("IExtHostTerminalService");class E extends l.JT{constructor(e,t,i,n){super(),this._proxy=e,this._id=t,this._creationOptions=i,this._name=n,this._disposed=!1,this._state={isInteractedWith:!1},this.isOpen=!1,this._onWillDispose=this._register(new r.Q5),this.onWillDispose=this._onWillDispose.event,this._creationOptions=Object.freeze(this._creationOptions),this._pidPromise=new Promise((e=>this._pidPromiseComplete=e));const o=this;this.value={get name(){return o._name||""},get processId(){return o._pidPromise},get creationOptions(){return o._creationOptions},get exitStatus(){return o._exitStatus},get state(){return o._state},get selection(){return o._selection},get shellIntegration(){return o.shellIntegration},sendText(e,t=!0){o._checkDisposed(),o._proxy.$sendText(o._id,e,t)},show(e){o._checkDisposed(),o._proxy.$show(o._id,e)},hide(){o._checkDisposed(),o._proxy.$hide(o._id)},dispose(){o._disposed||(o._disposed=!0,o._proxy.$dispose(o._id))},get dimensions(){if(void 0!==o._cols&&void 0!==o._rows)return{columns:o._cols,rows:o._rows}}}}dispose(){this._onWillDispose.fire(),super.dispose()}async create(e,t){if("string"!=typeof this._id)throw new Error("Terminal has already been created");await this._proxy.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:A(e.iconPath)??void 0,color:v.tP.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this._serializeParentTerminal(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,i,n,r){if("string"!=typeof this._id)throw new Error("Terminal has already been created");if(await this._proxy.$createTerminal(this._id,{name:this._name,isExtensionCustomPtyTerminal:!0,icon:n,color:v.tP.isThemeColor(r)?r.id:void 0,location:t?.location||this._serializeParentTerminal(e,i),isTransient:!0}),"string"==typeof this._id)throw new Error("Terminal creation failed");return this._id}_serializeParentTerminal(e,t){return"object"==typeof e?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:y.eI.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}_checkDisposed(){if(this._disposed)throw new Error("Terminal has already been disposed")}set name(e){this._name=e}setExitStatus(e,t){this._exitStatus=Object.freeze({code:e,reason:t})}setDimensions(e,t){return(e!==this._cols||t!==this._rows)&&(0!==e&&0!==t&&(this._cols=e,this._rows=t,!0))}setInteractedWith(){return!this._state.isInteractedWith&&(this._state={isInteractedWith:!0},!0)}setSelection(e){this._selection=e}_setProcessId(e){this._pidPromiseComplete?(this._pidPromiseComplete(e),this._pidPromiseComplete=void 0):this._pidPromise.then((t=>{t!==e&&(this._pidPromise=Promise.resolve(e))}))}}class S{get onProcessReady(){return this._onProcessReady.event}constructor(e){this._pty=e,this.id=0,this.shouldPersist=!1,this._onProcessData=new r.Q5,this.onProcessData=this._onProcessData.event,this._onProcessReady=new r.Q5,this._onDidChangeProperty=new r.Q5,this.onDidChangeProperty=this._onDidChangeProperty.event,this._onProcessExit=new r.Q5,this.onProcessExit=this._onProcessExit.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this._pty.close()}input(e){this._pty.handleInput?.(e)}resize(e,t){this._pty.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this._pty.onDidWrite((e=>this._onProcessData.fire(e))),this._pty.onDidClose?.(((e=void 0)=>{this._onProcessExit.fire(void 0===e?void 0:e)})),this._pty.onDidOverrideDimensions?.((e=>{e&&this._onDidChangeProperty.fire({type:f.EX.OverrideDimensions,value:{cols:e.columns,rows:e.rows}})})),this._pty.onDidChangeName?.((e=>{this._onDidChangeProperty.fire({type:f.EX.Title,value:e})})),this._pty.open(e||void 0),e&&this._pty.setDimensions?.(e),this._onProcessReady.fire({pid:-1,cwd:"",windowsPty:void 0})}}let D=1,T=class extends l.JT{get activeTerminal(){return this._activeTerminal?.value}get terminals(){return this._terminals.map((e=>e.value))}constructor(e,t,i){super(),this._extHostCommands=t,this._terminals=[],this._terminalProcesses=new Map,this._terminalProcessDisposables={},this._extensionTerminalAwaitingStart={},this._getTerminalPromises={},this._environmentVariableCollections=new Map,this._lastQuickFixCommands=this._register(new l.XK),this._linkProviders=new Set,this._profileProviders=new Map,this._quickFixProviders=new Map,this._terminalLinkCache=new Map,this._terminalLinkCancellationSource=new Map,this._onDidCloseTerminal=new r.Q5,this.onDidCloseTerminal=this._onDidCloseTerminal.event,this._onDidOpenTerminal=new r.Q5,this.onDidOpenTerminal=this._onDidOpenTerminal.event,this._onDidChangeActiveTerminal=new r.Q5,this.onDidChangeActiveTerminal=this._onDidChangeActiveTerminal.event,this._onDidChangeTerminalDimensions=new r.Q5,this.onDidChangeTerminalDimensions=this._onDidChangeTerminalDimensions.event,this._onDidChangeTerminalState=new r.Q5,this.onDidChangeTerminalState=this._onDidChangeTerminalState.event,this._onDidChangeShell=new r.Q5,this.onDidChangeShell=this._onDidChangeShell.event,this._onDidWriteTerminalData=new r.Q5({onWillAddFirstListener:()=>this._proxy.$startSendingDataEvents(),onDidRemoveLastListener:()=>this._proxy.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this._onDidWriteTerminalData.event,this._onDidExecuteCommand=new r.Q5({onWillAddFirstListener:()=>this._proxy.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this._proxy.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this._onDidExecuteCommand.event,this._proxy=i.getProxy(o.Tr.MainThreadTerminalService),this._bufferer=new _.$(this._proxy.$sendProcessData),this._proxy.$registerProcessSupport(e),this._extHostCommands.registerArgumentProcessor({processArgument:e=>{const t=e=>{const t=e;return this.getTerminalById(t.instanceId)?.value};if(e?.$mid===x.m.TerminalContext)return t(e);if(Array.isArray(e))for(let i=0;i<e.length&&e[i].$mid===x.m.TerminalContext;i++)e[i]=t(e[i]);return e}}),this._register({dispose:()=>{for(const[e,t]of this._terminalProcesses)t.shutdown(!0)}})}getDefaultShell(e){const t=e?this._defaultAutomationProfile:this._defaultProfile;return t?.path||""}getDefaultShellArgs(e){const t=e?this._defaultAutomationProfile:this._defaultProfile;return t?.args||[]}createExtensionTerminal(e,t){const i=new E(this._proxy,(0,g.R)(),e,e.name),n=new S(e.pty);var r;return i.createExtensionTerminal(e.location,t,this._serializeParentTerminal(e,t).resolvedExtHostIdentifier,A(e.iconPath),(r=e.color,v.tP.isThemeColor(r)?r:void 0)).then((e=>{const t=this._setupExtHostProcessListeners(e,n);this._terminalProcessDisposables[e]=t})),this._terminals.push(i),i.value}_serializeParentTerminal(e,t){if(t=t||{},e.location&&"object"==typeof e.location&&"parentTerminal"in e.location){const i=e.location.parentTerminal;if(i){const e=this._terminals.find((e=>e.value===i));e&&(t.resolvedExtHostIdentifier=e._id)}}else e.location&&"object"!=typeof e.location?t.location=e.location:t.location&&"object"==typeof t.location&&"splitActiveTerminal"in t.location&&(t.location={splitActiveTerminal:!0});return t}attachPtyToTerminal(e,t){if(!this.getTerminalById(e))throw new Error(`Cannot resolve terminal with id ${e} for virtual process`);const i=new S(t),n=this._setupExtHostProcessListeners(e,i);this._terminalProcessDisposables[e]=n}async $acceptActiveTerminalChanged(e){const t=this._activeTerminal;if(null===e)return this._activeTerminal=void 0,void(t!==this._activeTerminal&&this._onDidChangeActiveTerminal.fire(this._activeTerminal));const i=this.getTerminalById(e);i&&(this._activeTerminal=i,t!==this._activeTerminal&&this._onDidChangeActiveTerminal.fire(this._activeTerminal.value))}async $acceptTerminalProcessData(e,t){const i=this.getTerminalById(e);i&&this._onDidWriteTerminalData.fire({terminal:i.value,data:t})}async $acceptTerminalDimensions(e,t,i){const n=this.getTerminalById(e);n&&n.setDimensions(t,i)&&this._onDidChangeTerminalDimensions.fire({terminal:n.value,dimensions:n.value.dimensions})}async $acceptDidExecuteCommand(e,t){const i=this.getTerminalById(e);i&&this._onDidExecuteCommand.fire({terminal:i.value,...t})}async $acceptTerminalMaximumDimensions(e,t,i){this._terminalProcesses.get(e)?.resize(t,i)}async $acceptTerminalTitleChange(e,t){const i=this.getTerminalById(e);i&&(i.name=t)}async $acceptTerminalClosed(e,t,i){const n=this._getTerminalObjectIndexById(this._terminals,e);if(null!==n){const e=this._terminals.splice(n,1)[0];e.setExitStatus(t,i),this._onDidCloseTerminal.fire(e.value)}}$acceptTerminalOpened(e,t,i,n){if(t){const i=this._getTerminalObjectIndexById(this._terminals,t);if(null!==i)return this._terminals[i]._id=e,this._onDidOpenTerminal.fire(this.terminals[i]),void(this._terminals[i].isOpen=!0)}const r={name:n.name,shellPath:n.executable,shellArgs:n.args,cwd:"string"==typeof n.cwd?n.cwd:a.ov.revive(n.cwd),env:n.env,hideFromUser:n.hideFromUser},o=new E(this._proxy,e,r,i);this._terminals.push(o),this._onDidOpenTerminal.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(e,t){const i=this.getTerminalById(e);i?._setProcessId(t)}async $startExtensionTerminal(e,t){const i=this.getTerminalById(e);if(!i)return{message:(0,u.C$)("vs/workbench/api/common/extHostTerminalService",0,"Could not find the terminal with id {0} on the extension host",e)};i.isOpen||await new Promise((e=>{const t=this.onDidOpenTerminal((async n=>{n===i.value&&(t.dispose(),e())}))}));const n=this._terminalProcesses.get(e);n?n.startSendingEvents(t):this._extensionTerminalAwaitingStart[e]={initialDimensions:t}}_setupExtHostProcessListeners(e,t){const i=new l.SL;i.add(t.onProcessReady((t=>this._proxy.$sendProcessReady(e,t.pid,t.cwd,t.windowsPty)))),i.add(t.onDidChangeProperty((t=>this._proxy.$sendProcessProperty(e,t)))),this._bufferer.startBuffering(e,t.onProcessData),i.add(t.onProcessExit((t=>this._onProcessExit(e,t)))),this._terminalProcesses.set(e,t);const n=this._extensionTerminalAwaitingStart[e];return n&&t instanceof S&&(t.startSendingEvents(n.initialDimensions),delete this._extensionTerminalAwaitingStart[e]),i}$acceptProcessAckDataEvent(e,t){this._terminalProcesses.get(e)?.acknowledgeDataEvent(t)}$acceptProcessInput(e,t){this._terminalProcesses.get(e)?.input(t)}$acceptTerminalInteraction(e){const t=this.getTerminalById(e);t?.setInteractedWith()&&this._onDidChangeTerminalState.fire(t.value)}$acceptTerminalSelection(e,t){this.getTerminalById(e)?.setSelection(t)}$acceptProcessResize(e,t,i){try{this._terminalProcesses.get(e)?.resize(t,i)}catch(e){if("EPIPE"!==e.code&&"ERR_IPC_CHANNEL_CLOSED"!==e.code)throw e}}$acceptProcessShutdown(e,t){this._terminalProcesses.get(e)?.shutdown(t)}$acceptProcessRequestInitialCwd(e){this._terminalProcesses.get(e)?.getInitialCwd().then((t=>this._proxy.$sendProcessProperty(e,{type:f.EX.InitialCwd,value:t})))}$acceptProcessRequestCwd(e){this._terminalProcesses.get(e)?.getCwd().then((t=>this._proxy.$sendProcessProperty(e,{type:f.EX.Cwd,value:t})))}$acceptProcessRequestLatency(e){return Promise.resolve(e)}registerLinkProvider(e){return this._linkProviders.add(e),1===this._linkProviders.size&&this._proxy.$startLinkProvider(),new d.JTr((()=>{this._linkProviders.delete(e),0===this._linkProviders.size&&this._proxy.$stopLinkProvider()}))}registerProfileProvider(e,t,i){if(this._profileProviders.has(t))throw new Error(`Terminal profile provider "${t}" already registered`);return this._profileProviders.set(t,i),this._proxy.$registerProfileProvider(t,e.identifier.value),new d.JTr((()=>{this._profileProviders.delete(t),this._proxy.$unregisterProfileProvider(t)}))}registerTerminalQuickFixProvider(e,t,i){if(this._quickFixProviders.has(e))throw new Error(`Terminal quick fix provider "${e}" is already registered`);return this._quickFixProviders.set(e,i),this._proxy.$registerQuickFixProvider(e,t),new d.JTr((()=>{this._quickFixProviders.delete(e),this._proxy.$unregisterQuickFixProvider(e)}))}async $provideTerminalQuickFixes(e,t){const i=(new m.AU).token;if(i.isCancellationRequested)return;const n=this._quickFixProviders.get(e);if(!n)return;const r=await n.provideTerminalQuickFixes(t,i);if(null===r||Array.isArray(r)&&0===r.length)return;const o=new l.SL;if(this._lastQuickFixCommands.value=o,!Array.isArray(r))return r?y.w7.from(r,this._extHostCommands.converter,o):void 0;const s=[];for(const e of r){const t=y.w7.from(e,this._extHostCommands.converter,o);t&&s.push(t)}return s}async $createContributedProfileTerminal(e,t){const i=(new m.AU).token;let n=await(this._profileProviders.get(e)?.provideTerminalProfile(i));if(!i.isCancellationRequested){if(n&&!("options"in n)&&(n={options:n}),!n||!("options"in n))throw new Error(`No terminal profile options provided for id "${e}"`);"pty"in n.options?this.createExtensionTerminal(n.options,t):this.createTerminalFromOptions(n.options,t)}}async $provideLinks(e,t){const i=this.getTerminalById(e);if(!i)return[];this._terminalLinkCache.delete(e);const n=this._terminalLinkCancellationSource.get(e);n?.dispose(!0);const r=new m.AU;this._terminalLinkCancellationSource.set(e,r);const o=[],s={terminal:i.value,line:t},a=[];for(const e of this._linkProviders)a.push(b.jT.withAsyncBody((async t=>{r.token.onCancellationRequested((()=>t({provider:e,links:[]})));const i=await e.provideTerminalLinks(s,r.token)||[];r.token.isCancellationRequested||t({provider:e,links:i})})));const c=await Promise.all(a);if(r.token.isCancellationRequested)return[];const l=new Map;for(const e of c)e&&e.links.length>0&&o.push(...e.links.map((t=>{const i={id:D++,startIndex:t.startIndex,length:t.length,label:t.tooltip};return l.set(i.id,{provider:e.provider,link:t}),i})));return this._terminalLinkCache.set(e,l),o}$activateLink(e,t){const i=this._terminalLinkCache.get(e)?.get(t);i&&i.provider.handleTerminalLink(i.link)}_onProcessExit(e,t){this._bufferer.stopBuffering(e),this._terminalProcesses.delete(e),delete this._extensionTerminalAwaitingStart[e];const i=this._terminalProcessDisposables[e];i&&(i.dispose(),delete this._terminalProcessDisposables[e]),this._proxy.$sendProcessExit(e,t)}getTerminalById(e){return this._getTerminalObjectById(this._terminals,e)}getTerminalIdByApiObject(e){const t=this._terminals.findIndex((t=>t.value===e));return t>=0?t:null}_getTerminalObjectById(e,t){const i=this._getTerminalObjectIndexById(e,t);return null!==i?e[i]:null}_getTerminalObjectIndexById(e,t){const i=e.findIndex((e=>e._id===t));return i>=0?i:null}getEnvironmentVariableCollection(e){let t=this._environmentVariableCollections.get(e.identifier.value);return t||(t=this._register(new k),this._setEnvironmentVariableCollection(e.identifier.value,t)),t.getScopedEnvironmentVariableCollection(void 0)}_syncEnvironmentVariableCollection(e,t){const i=(0,p.Fi)(t.map),n=(0,p.hd)(t.descriptionMap);this._proxy.$setEnvironmentVariableCollection(e,t.persistent,0===i.length?void 0:i,n)}$initEnvironmentVariableCollections(e){e.forEach((e=>{const t=e[0],i=this._register(new k(e[1]));this._setEnvironmentVariableCollection(t,i)}))}$acceptDefaultProfile(e,t){const i=this._defaultProfile;this._defaultProfile=e,this._defaultAutomationProfile=t,i?.path!==e.path&&this._onDidChangeShell.fire(e.path)}_setEnvironmentVariableCollection(e,t){this._environmentVariableCollections.set(e,t),this._register(t.onDidChangeCollection((()=>{this._syncEnvironmentVariableCollection(e,t)})))}};T=(0,n.g)([(0,n.f)(1,w.f7),(0,n.f)(2,c.O)],T);class k extends l.JT{get persistent(){return this._persistent}set persistent(e){this._persistent=e,this._onDidChangeCollection.fire()}get onDidChangeCollection(){return this._onDidChangeCollection&&this._onDidChangeCollection.event}constructor(e){super(),this.map=new Map,this.scopedCollections=new Map,this.descriptionMap=new Map,this._persistent=!0,this._onDidChangeCollection=new r.Q5,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.getScopeKey(e);let i=this.scopedCollections.get(t);return i||(i=new I(this,e),this.scopedCollections.set(t,i),this._register(i.onDidChangeCollection((()=>this._onDidChangeCollection.fire())))),i}replace(e,t,i,n){this._setIfDiffers(e,{value:t,type:d.vGG.Replace,options:i??{applyAtProcessCreation:!0},scope:n})}append(e,t,i,n){this._setIfDiffers(e,{value:t,type:d.vGG.Append,options:i??{applyAtProcessCreation:!0},scope:n})}prepend(e,t,i,n){this._setIfDiffers(e,{value:t,type:d.vGG.Prepend,options:i??{applyAtProcessCreation:!0},scope:n})}_setIfDiffers(e,t){if(t.options&&!1===t.options.applyAtProcessCreation&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const i=this.getKey(e,t.scope),n=this.map.get(i),r=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!n||n.value!==t.value||n.type!==t.type||n.options?.applyAtProcessCreation!==r.applyAtProcessCreation||n.options?.applyAtShellIntegration!==r.applyAtShellIntegration||n.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const i=this.getKey(e,t.scope),n={variable:e,...t,options:r};this.map.set(i,n),this._onDidChangeCollection.fire()}}get(e,t){const i=this.getKey(e,t),n=this.map.get(i);return n?R(n):void 0}getKey(e,t){const i=this.getScopeKey(t);return i.length?`${e}:::${i}`:e}getScopeKey(e){return this.getWorkspaceKey(e?.workspaceFolder)??""}getWorkspaceKey(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[i,n]of this.map)this.getScopeKey(n.scope)===this.getScopeKey(e)&&t.set(n.variable,R(n));return t}delete(e,t){const i=this.getKey(e,t);this.map.delete(i),this._onDidChangeCollection.fire()}clear(e){if(e?.workspaceFolder){for(const[t,i]of this.map)i.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.clearDescription(e)}else this.map.clear(),this.descriptionMap.clear();this._onDidChangeCollection.fire()}setDescription(e,t){const i=this.getScopeKey(t),n=this.descriptionMap.get(i);if(!n||n.description!==e){let n;n="string"==typeof e?e:e?.value.split("\n\n")[0];const r={description:n,scope:t};this.descriptionMap.set(i,r),this._onDidChangeCollection.fire()}}getDescription(e){const t=this.getScopeKey(e);return this.descriptionMap.get(t)?.description}clearDescription(e){const t=this.getScopeKey(e);this.descriptionMap.delete(t)}}class I{get persistent(){return this.collection.persistent}set persistent(e){this.collection.persistent=e}get onDidChangeCollection(){return this._onDidChangeCollection&&this._onDidChangeCollection.event}constructor(e,t){this.collection=e,this.scope=t,this._onDidChangeCollection=new r.Q5}getScoped(e){return this.collection.getScopedEnvironmentVariableCollection(e)}replace(e,t,i){this.collection.replace(e,t,i,this.scope)}append(e,t,i){this.collection.append(e,t,i,this.scope)}prepend(e,t,i){this.collection.prepend(e,t,i,this.scope)}get(e){return this.collection.get(e,this.scope)}forEach(e,t){this.collection.getVariableMap(this.scope).forEach(((i,n)=>e.call(t,n,i,this)),this.scope)}[Symbol.iterator](){return this.collection.getVariableMap(this.scope).entries()}delete(e){this.collection.delete(e,this.scope),this._onDidChangeCollection.fire(void 0)}clear(){this.collection.clear(this.scope)}set description(e){this.collection.setDescription(e,this.scope)}get description(){return this.collection.getDescription(this.scope)}}let P=class extends T{constructor(e,t){super(!1,e,t)}createTerminal(e,t,i){throw new h.B8}createTerminalFromOptions(e,t){throw new h.B8}};function A(e){if(e&&"string"!=typeof e)return"id"in e?{id:e.id,color:e.color}:e}function R(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}P=(0,n.g)([(0,n.f)(0,w.f7),(0,n.f)(1,c.O)],P)},60192:function(e,t,i){i.d(t,{C:function(){return m},P:function(){return p}});var n=i(45493),r=i(30874),o=i(7428),s=i(28019),a=i(78293),c=i(82722),l=i(82209),d=i(81557),u=i(42731),h=i(35820);const p=(0,s.yh)("IExtHostTerminalShellIntegration");let m=class extends o.JT{constructor(e,t){super(),this._extHostTerminalService=t,this._activeShellIntegrations=new Map,this._onDidChangeTerminalShellIntegration=new d.Q5,this.onDidChangeTerminalShellIntegration=this._onDidChangeTerminalShellIntegration.event,this._onDidStartTerminalShellExecution=new d.Q5,this.onDidStartTerminalShellExecution=this._onDidStartTerminalShellExecution.event,this._onDidEndTerminalShellExecution=new d.Q5,this.onDidEndTerminalShellExecution=this._onDidEndTerminalShellExecution.event,this._proxy=e.getProxy(a.Tr.MainThreadTerminalShellIntegration),this._register((0,o.OF)((()=>{for(const[e,t]of this._activeShellIntegrations)t.dispose();this._activeShellIntegrations.clear()})))}$shellIntegrationChange(e){const t=this._extHostTerminalService.getTerminalById(e);if(!t)return;const i=t.value;let n=this._activeShellIntegrations.get(e);n||(n=new g(t.value,this._onDidStartTerminalShellExecution),this._activeShellIntegrations.set(e,n),n.store.add(t.onWillDispose((()=>this._activeShellIntegrations.get(e)?.dispose()))),n.store.add(n.onDidRequestShellExecution((t=>this._proxy.$executeCommand(e,t)))),n.store.add(n.onDidRequestEndExecution((e=>this._onDidEndTerminalShellExecution.fire(e)))),n.store.add(n.onDidRequestChangeShellIntegration((e=>this._onDidChangeTerminalShellIntegration.fire(e)))),t.shellIntegration=n.value),this._onDidChangeTerminalShellIntegration.fire({terminal:i,shellIntegration:n.value})}$shellExecutionStart(e,t,i,n,r){this._activeShellIntegrations.has(e)||this.$shellIntegrationChange(e);const o={value:t,confidence:i,isTrusted:n};this._activeShellIntegrations.get(e)?.startShellExecution(o,r)}$shellExecutionEnd(e,t,i,n,r){const o={value:t,confidence:i,isTrusted:n};this._activeShellIntegrations.get(e)?.endShellExecution(o,r)}$shellExecutionData(e,t){this._activeShellIntegrations.get(e)?.emitData(t)}$cwdChange(e,t){this._activeShellIntegrations.get(e)?.setCwd((0,u._9)(t)?u.ov.revive(t):t)}$closeTerminal(e){this._activeShellIntegrations.get(e)?.dispose(),this._activeShellIntegrations.delete(e)}};m=(0,n.g)([(0,n.f)(0,c.O),(0,n.f)(1,l.$3)],m);class g extends o.JT{get currentExecution(){return this._currentExecution}constructor(e,t){super(),this._terminal=e,this._onDidStartTerminalShellExecution=t,this._ignoreNextExecution=!1,this.store=this._register(new o.SL),this._onDidRequestChangeShellIntegration=this._register(new d.Q5),this.onDidRequestChangeShellIntegration=this._onDidRequestChangeShellIntegration.event,this._onDidRequestShellExecution=this._register(new d.Q5),this.onDidRequestShellExecution=this._onDidRequestShellExecution.event,this._onDidRequestEndExecution=this._register(new d.Q5),this.onDidRequestEndExecution=this._onDidRequestEndExecution.event;const i=this;this.value={get cwd(){return i._cwd},executeCommand(e,t){let n=e;t&&(n+=` "${t.map((e=>`${e.replaceAll('"','\\"')}`)).join('" "')}"`),i._onDidRequestShellExecution.fire(n);const o={value:n,confidence:r.I82.High,isTrusted:!0},s=i.startShellExecution(o,i._cwd,!0).value;return i._ignoreNextExecution=!0,s}}}startShellExecution(e,t,i){if(this._ignoreNextExecution&&this._currentExecution)this._ignoreNextExecution=!1;else{this._currentExecution&&(this._currentExecution.endExecution(void 0),this._onDidRequestEndExecution.fire({terminal:this._terminal,shellIntegration:this.value,execution:this._currentExecution.value,exitCode:void 0}));const n=this._currentExecution=new f(e,t);i?queueMicrotask((()=>this._onDidStartTerminalShellExecution.fire({terminal:this._terminal,shellIntegration:this.value,execution:n.value}))):this._onDidStartTerminalShellExecution.fire({terminal:this._terminal,shellIntegration:this.value,execution:this._currentExecution.value})}return this._currentExecution}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){this._currentExecution&&(this._currentExecution.endExecution(e),this._onDidRequestEndExecution.fire({terminal:this._terminal,shellIntegration:this.value,execution:this._currentExecution.value,exitCode:t}),this._currentExecution=void 0)}setCwd(e){let t=!1;u.ov.isUri(this._cwd)?t=!u.ov.isUri(e)||this._cwd.toString()!==e.toString():this._cwd!==e&&(t=!0),t&&(this._cwd=e,this._onDidRequestChangeShellIntegration.fire({terminal:this._terminal,shellIntegration:this.value}))}}class f{constructor(e,t){this._commandLine=e,this.cwd=t,this._ended=!1;const i=this;this.value={get commandLine(){return i._commandLine},get cwd(){return i.cwd},read(){return i._createDataStream()}}}_createDataStream(){if(!this._dataStream){if(this._ended)return h.Aq.EMPTY;this._dataStream=new _}return this._dataStream.createIterable()}emitData(e){this._dataStream?.emitData(e)}endExecution(e){e&&(this._commandLine=e),this._dataStream?.endExecution(),this._dataStream=void 0,this._ended=!0}}class _ extends o.JT{constructor(){super(...arguments),this._emitters=[]}createIterable(){this._barrier||(this._barrier=new h.U8);const e=this._barrier;return new h.Aq((async t=>{this._emitters.push(t),await e.wait()}))}emitData(e){for(const t of this._emitters)t.emitOne(e)}endExecution(){this._barrier?.open(),this._barrier=void 0}}},34472:function(e,t,i){i.d(t,{Hb:function(){return D},SJ:function(){return E},n2:function(){return C},qN:function(){return S}});var n=i(3918),r=i(60411),o=i(45675),s=i(44383),a=i(33089),c=i(54487),l=i(42731);const d=(e,t,i,n)=>{let r=t;return{enumerable:!0,configurable:!1,get(){return r},set(t){if(!i(r,t)){const i=r;r=t,e.listener?.(n(t,i))}}}},u=(e,t)=>e===t,h=(e,t)=>e===t||!(!e||!t)&&e.isEqual(t),p=u,m=u,g=u,f=u,_=u,v=u,b=(e,t)=>e.length===t.length&&!e.some((e=>!t.find((t=>e.id===t.id)))),y=e=>t=>({op:s.NU.SetProp,update:e(t)}),w=(e,t)=>({range:(()=>{let t;const i=y((e=>({range:n.e.lift(c.e6.from(e))})));return{enumerable:!0,configurable:!1,get(){return t},set(n){e.listener?.({op:s.NU.DocumentSynced}),h(t,n)||(t=n,e.listener?.(i(n)))}}})(),label:d(e,t,p,y((e=>({label:e})))),description:d(e,void 0,m,y((e=>({description:e})))),sortText:d(e,void 0,g,y((e=>({sortText:e})))),canResolveChildren:d(e,!1,v,(e=>({op:s.NU.UpdateCanResolveChildren,state:e}))),busy:d(e,!1,f,y((e=>({busy:e})))),error:d(e,void 0,_,y((e=>({error:c.W5.fromStrict(e)||null})))),tags:d(e,[],b,((e,t)=>({op:s.NU.SetTags,new:e.map(c.Ld.from),old:t.map(c.Ld.from)})))}),x=e=>{const t=o.u0.fromString(e.extId),i=new E(t.controllerId,t.localId,e.label,l.ov.revive(e.uri)||void 0);return i.range=c.e6.to(e.range||void 0),i.description=e.description||void 0,i.sortText=e.sortText||void 0,i.tags=e.tags.map((e=>c.Ld.to({id:(0,a._v)(e).tagId}))),i},C=e=>{let t;for(const i of e.tests){const e=x(i.item);(0,r.l)(e).parent=t,t=e}return t};class E{constructor(e,t,i,n){if(t.includes(o.nc.Delimiter))throw new Error(`Test IDs may not include the ${JSON.stringify(t)} symbol`);const a=(0,r.b)(this,e);Object.defineProperties(this,{id:{value:t,enumerable:!0,writable:!1},uri:{value:n,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return a.parent instanceof S?void 0:a.parent}},children:{value:(0,s.Hx)(a,r.l,E),enumerable:!0,writable:!1},...w(a,i)})}}class S extends E{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}}class D extends s.$z{constructor(e,t,i){super({controllerId:e,getDocumentVersion:e=>e&&i.getDocument(e)?.version,getApiFor:r.l,getChildren:e=>e.children,root:new S(e,t),toITestItem:c.UK.from})}}},55870:function(e,t,i){i.d(t,{Qp:function(){return O},s7:function(){return $}});var n=i(45493),r=i(35820),o=i(53976),s=i(17126),a=i(81557),c=i(21033),l=i(87884),d=i(7428),u=i(65045),h=i(47635),p=i(92004),m=i(28019),g=i(26713),f=i(78293),_=i(85315),v=i(1663),b=i(82722),y=i(34472),w=i(54487),x=i(30874),C=(i(22792),i(67525)),E=i(33089);const S="vs/workbench/contrib/testing/common/constants";var D,T,k;!function(e){e.ViewletId="workbench.view.extension.test",e.ExplorerViewId="workbench.view.testing",e.OutputPeekContributionId="editor.contrib.testingOutputPeek",e.DecorationsContributionId="editor.contrib.testingDecorations",e.CoverageDecorationsContributionId="editor.contrib.coverageDecorations",e.CoverageViewId="workbench.view.testCoverage",e.ResultsPanelId="workbench.panel.testResults",e.ResultsViewId="workbench.panel.testResults.view",e.MessageLanguageId="vscodeInternalTestMessage"}(D||(D={})),function(e){e.List="list",e.Tree="true"}(T||(T={})),function(e){e.ByLocation="location",e.ByStatus="status",e.ByDuration="duration"}(k||(k={}));E.ZM.Errored,(0,C.C$)(S,0,"Errored"),E.ZM.Failed,(0,C.C$)(S,1,"Failed"),E.ZM.Passed,(0,C.C$)(S,2,"Passed"),E.ZM.Queued,(0,C.C$)(S,3,"Queued"),E.ZM.Running,(0,C.C$)(S,4,"Running"),E.ZM.Skipped,(0,C.C$)(S,5,"Skipped"),E.ZM.Unset,(0,C.C$)(S,6,"Not yet run"),E.Fj.Debug,(0,C.C$)(S,8,"Debug"),E.Fj.Run,(0,C.C$)(S,9,"Run"),E.Fj.Coverage,(0,C.C$)(S,10,"Coverage");var I;!function(e){e.CancelTestRefreshAction="testing.cancelTestRefresh",e.CancelTestRunAction="testing.cancelRun",e.ClearTestResultsAction="testing.clearTestResults",e.CollapseAllAction="testing.collapseAll",e.ConfigureTestProfilesAction="testing.configureProfile",e.ContinousRunUsingForTest="testing.continuousRunUsingForTest",e.CoverageAtCursor="testing.coverageAtCursor",e.CoverageByUri="testing.coverage.uri",e.CoverageClear="testing.coverage.close",e.CoverageCurrentFile="testing.coverageCurrentFile",e.CoverageFilterToTest="testing.coverageFilterToTest",e.CoverageFilterToTestInEditor="testing.coverageFilterToTestInEditor",e.CoverageLastRun="testing.coverageLastRun",e.CoverageSelectedAction="testing.coverageSelected",e.CoverageToggleToolbar="testing.coverageToggleToolbar",e.CoverageViewChangeSorting="testing.coverageViewChangeSorting",e.DebugAction="testing.debug",e.DebugAllAction="testing.debugAll",e.DebugAtCursor="testing.debugAtCursor",e.DebugByUri="testing.debug.uri",e.DebugCurrentFile="testing.debugCurrentFile",e.DebugFailedTests="testing.debugFailTests",e.DebugLastRun="testing.debugLastRun",e.DebugSelectedAction="testing.debugSelected",e.FilterAction="workbench.actions.treeView.testExplorer.filter",e.GetExplorerSelection="_testing.getExplorerSelection",e.GetSelectedProfiles="testing.getSelectedProfiles",e.GoToTest="testing.editFocusedTest",e.HideTestAction="testing.hideTest",e.OpenCoverage="testing.openCoverage",e.OpenOutputPeek="testing.openOutputPeek",e.RefreshTestsAction="testing.refreshTests",e.ReRunFailedTests="testing.reRunFailTests",e.ReRunLastRun="testing.reRunLastRun",e.RunAction="testing.run",e.RunAllAction="testing.runAll",e.RunAllWithCoverageAction="testing.coverageAll",e.RunAtCursor="testing.runAtCursor",e.RunByUri="testing.run.uri",e.RunCurrentFile="testing.runCurrentFile",e.RunSelectedAction="testing.runSelected",e.RunUsingProfileAction="testing.runUsing",e.RunWithCoverageAction="testing.coverage",e.SearchForTestExtension="testing.searchForTestExtension",e.SelectDefaultTestProfiles="testing.selectDefaultTestProfiles",e.ShowMostRecentOutputAction="testing.showMostRecentOutput",e.StartContinousRun="testing.startContinuousRun",e.StopContinousRun="testing.stopContinuousRun",e.TestingSortByDurationAction="testing.sortByDuration",e.TestingSortByLocationAction="testing.sortByLocation",e.TestingSortByStatusAction="testing.sortByStatus",e.TestingViewAsListAction="testing.viewAsList",e.TestingViewAsTreeAction="testing.viewAsTree",e.ToggleContinousRunForTest="testing.toggleContinuousRunForTest",e.ToggleInlineTestOutput="testing.toggleInlineTestOutput",e.UnhideAllTestsAction="testing.unhideAllTests",e.UnhideTestAction="testing.unhideTest"}(I||(I={}));var P=i(45675),A=i(44383),R=i(22423);let L=0;const N=new WeakMap,$=(0,m.yh)("IExtHostTesting");let O=class extends d.JT{constructor(e,t,i,n){super(),this.logService=t,this.commands=i,this.editors=n,this.resultsChangedEmitter=this._register(new a.Q5),this.controllers=new Map,this.defaultProfilesChangedEmitter=this._register(new a.Q5),this.followupProviders=new Set,this.testFollowups=new Map,this.onResultsChanged=this.resultsChangedEmitter.event,this.results=[],this.proxy=e.getProxy(f.Tr.MainThreadTesting),this.observer=new V(this.proxy),this.runTracker=new U(this.proxy,t),i.registerArgumentProcessor({processArgument:e=>{switch(e?.$mid){case u.m.TestItemContext:{const t=e,i=t.tests[t.tests.length-1].item.extId,n=this.controllers.get(P.u0.root(i));return n?.collection.tree.get(i)?.actual??(0,y.n2)(e)}case u.m.TestMessageMenuArgs:{const{test:t,message:i}=e,n=t.item.extId;return{test:this.controllers.get(P.u0.root(n))?.collection.tree.get(n)?.actual??(0,y.n2)({$mid:u.m.TestItemContext,tests:[t]}),message:w.lt.to(i)}}default:return e}}}),i.registerCommand(!1,"testing.getExplorerSelection",(async()=>{const e=await i.executeCommand(I.GetExplorerSelection),t=e=>{const t=this.controllers.get(P.u0.root(e));if(t)return P.u0.isRoot(e)?t.controller:t.collection.tree.get(e)?.actual};return{include:e?.include.map(t).filter(h.$K)||[],exclude:e?.exclude.map(t).filter(h.$K)||[]}}))}createTestController(e,t,i,n){if(this.controllers.has(t))throw new Error(`Attempt to insert a duplicate controller with ID "${t}"`);const r=new d.SL,o=r.add(new y.Hb(t,i,this.editors));o.root.label=i;const s=new Map,a=new Set,c=this.proxy,u={items:o.root.children,get label(){return i},set label(e){i=e,o.root.label=e,c.$updateController(t,{label:i})},get refreshHandler(){return n},set refreshHandler(e){n=e,c.$updateController(t,{canRefresh:!!e})},get id(){return t},createRunProfile:(e,i,n,r,o,c)=>{let d=(0,l.vp)(e);for(;s.has(d);)d++;return new j(this.proxy,s,a,this.defaultProfilesChangedEmitter.event,t,d,e,i,n,r,o,c)},createTestItem(e,i,n){return new y.SJ(t,e,i,n)},createTestRun:(i,n,r=!0)=>this.runTracker.createTestRun(e,t,o,i,n,r),invalidateTestResults:e=>{if(void 0===e)this.proxy.$markTestRetired(void 0);else{const i=e instanceof Array?e:[e];this.proxy.$markTestRetired(i.map((e=>P.u0.fromExtHostTestItem(e,t).toString())))}},set resolveHandler(e){o.resolveHandler=e},get resolveHandler(){return o.resolveHandler},dispose:()=>{r.dispose()}};c.$registerTestController(t,i,!!n),r.add((0,d.OF)((()=>c.$unregisterTestController(t))));const h={controller:u,collection:o,profiles:s,extension:e,activeProfiles:a};return this.controllers.set(t,h),r.add((0,d.OF)((()=>this.controllers.delete(t)))),r.add(o.onDidGenerateDiff((e=>c.$publishDiff(t,e.map(E.cZ.serialize))))),u}createTestObserver(){return this.observer.checkout()}async runTests(e,t=s.Ts.None){const i=H(e);if(!i)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const n=this.controllers.get(i.controllerId);if(!n)throw new Error("Controller not found");await this.proxy.$runTests({preserveFocus:e.preserveFocus??!0,group:K[i.kind],targets:[{testIds:e.include?.map((e=>P.u0.fromExtHostTestItem(e,n.collection.root.id).toString()))??[n.collection.root.id],profileId:i.profileId,controllerId:i.controllerId}],exclude:e.exclude?.map((e=>e.id))},t)}registerTestFollowupProvider(e){return this.followupProviders.add(e),{dispose:()=>{this.followupProviders.delete(e)}}}$syncTests(){for(const{collection:e}of this.controllers.values())e.flushDiff();return Promise.resolve()}async $getCoverageDetails(e,t,i){const n=await this.runTracker.getCoverageDetails(e,t,i);return n?.map(w.xC.fromDetails)}async $disposeRun(e){this.runTracker.disposeTestRun(e)}$configureRunProfile(e,t){this.controllers.get(e)?.profiles.get(t)?.configureHandler?.()}$setDefaultRunProfiles(e){const t=new Map;for(const[i,n]of Object.entries(e)){const e=this.controllers.get(i);if(!e)continue;const r=new Map,o=n.filter((t=>!e.activeProfiles.has(t))),s=[...e.activeProfiles].filter((e=>!n.includes(e)));for(const t of o)r.set(t,!0),e.activeProfiles.add(t);for(const t of s)r.set(t,!1),e.activeProfiles.delete(t);r.size&&t.set(i,r)}this.defaultProfilesChangedEmitter.fire(t)}async $refreshTests(e,t){await(this.controllers.get(e)?.controller.refreshHandler?.(t))}$publishTestResults(e){this.results=Object.freeze(e.map((e=>{const t=w.P1.to(e);return N.set(t,e.id),t})).concat(this.results).sort(((e,t)=>t.completedAt-e.completedAt)).slice(0,32)),this.resultsChangedEmitter.fire()}async $expandTest(e,t){const i=this.controllers.get(P.u0.fromString(e).controllerId)?.collection;i&&(await i.expand(e,t<0?1/0:t),i.flushDiff())}$acceptDiff(e){this.observer.applyDiff(e.map((e=>E.cZ.deserialize({asCanonicalUri:e=>e},e))))}async $runControllerTests(e,t){return Promise.all(e.map((e=>this.runControllerTestRequest(e,!1,t))))}async $startContinuousRun(e,t){const i=new s.AU(t),n=await Promise.all(e.map((e=>this.runControllerTestRequest(e,!0,i.token))));return t.isCancellationRequested||n.some((e=>e.error))||await new Promise((e=>t.onCancellationRequested(e))),i.dispose(!0),n}async $provideTestFollowups(e,t){const i=this.results.find((t=>N.get(t)===e.resultId)),n=i&&function(e,t){for(let i=0;i<e.path.length;i++){const n=t.find((t=>t.id===e.path[i]));if(!n)return;if(i===e.path.length-1)return n;t=n.children}return}(P.u0.fromString(e.extId),i?.results);if(!n)return[];let r=[];return await Promise.all([...this.followupProviders].map((async o=>{try{const s=await o.provideFollowup(i,n,e.taskIndex,e.messageIndex,t);s&&(r=r.concat(s))}catch(e){this.logService.error("Error thrown while providing followup for test message",e)}}))),t.isCancellationRequested?[]:r.map((e=>{const t=L++;return this.testFollowups.set(t,e),{title:e.title,id:t}}))}$disposeTestFollowups(e){for(const t of e)this.testFollowups.delete(t)}$executeTestFollowup(e){const t=this.testFollowups.get(e);return t?this.commands.executeCommand(t.command,...t.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(e){void 0===e?this.runTracker.cancelAllRuns():this.runTracker.cancelRunById(e)}getMetadataForRun(e){for(const t of this.runTracker.trackers){const i=t.getTaskIdForRun(e);if(i)return{taskId:i,runId:t.id}}}async runControllerTestRequest(e,t,i){const n=this.controllers.get(e.controllerId);if(!n)return{};const{collection:r,profiles:o,extension:s}=n,c=o.get(e.profileId);if(!c)return{};const l=e.testIds.map((e=>r.tree.get(e))).filter(h.$K),d=e.excludeExtIds.map((e=>n.collection.tree.get(e))).filter(h.$K).filter((e=>l.some((t=>t.fullId.compare(e.fullId)===P.Y5.IsChild))));if(!l.length)return{};const u=new x.$hL(l.some((e=>e.actual instanceof y.qN))?void 0:l.map((e=>e.actual)),d.map((e=>e.actual)),c,t),p=(0,E.Gc)(e)&&this.runTracker.prepareForMainThreadTestRun(s,u,z.fromInternal(e,n.collection),c,i);try{return await c.runHandler(u,i),{}}catch(e){return{error:String(e)}}finally{p&&p.hasRunningTasks&&!i.isCancellationRequested&&await a.ju.toPromise(p.onEnd)}}};O=(0,n.g)([(0,n.f)(0,b.O),(0,n.f)(1,g.V),(0,n.f)(2,_.f7),(0,n.f)(3,v.T)],O);var F;!function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"}(F||(F={}));class M extends d.JT{get hasRunningTasks(){return this.running>0}get id(){return this.dto.id}constructor(e,t,i,n,o,c){super(),this.dto=e,this.proxy=t,this.logService=i,this.profile=n,this.extension=o,this.state=F.Running,this.running=0,this.tasks=new Map,this.sharedTestIds=new Set,this.endEmitter=this._register(new a.Q5),this.publishedCoverage=new Map,this.onEnd=this.endEmitter.event,this.cts=this._register(new s.AU(c));const l=this._register(new r.pY((()=>this.forciblyEndTasks()),1e4));this._register(this.cts.token.onCancellationRequested((()=>l.schedule())));const u=new a.Q5;this.onDidDispose=u.event,this._register((0,d.OF)((()=>{u.fire(),u.dispose()})))}getTaskIdForRun(e){for(const[t,{run:i}]of this.tasks)if(i===e)return t}cancel(){this.state===F.Running?(this.cts.cancel(),this.state=F.Cancelling):this.state===F.Cancelling&&this.forciblyEndTasks()}async getCoverageDetails(e,t,i){const[,n]=P.u0.fromString(e).path,r=this.publishedCoverage.get(e);if(!r)return[];const{report:o,extIds:s}=r,a=this.tasks.get(n);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&o instanceof x.XuI){const e=s.indexOf(t);if(-1===e)return[];c=o.fromTests[e]}const l=c?this.profile?.loadDetailedCoverageForTest?.(a.run,o,c,i):this.profile?.loadDetailedCoverage?.(a.run,o,i);return await l??[]}createRun(e){const t=this.dto.id,i=this.dto.controllerId,n=(0,p.R)(),r=e=>(t,...i)=>{a?this.logService.warn(`Setting the state of test "${t.id}" is a no-op after the run ends.`):(this.ensureTestIsKnown(t),e(t,...i))},s=(e,r)=>{const o=r instanceof Array?r.map(w.lt.from):[w.lt.from(r)];if(e.uri&&e.range){const t={range:w.e6.from(e.range),uri:e.uri};for(const e of o)e.location=e.location||t}this.proxy.$appendTestMessagesInRun(t,n,P.u0.fromExtHostTestItem(e,i).toString(),o)};let a=!1;const c={isPersisted:this.dto.isPersisted,token:this.cts.token,name:e,onDidDispose:this.onDidDispose,addCoverage:e=>{if(a)return;const r=e instanceof x.XuI?e.fromTests:[];if(r.length){(0,R.H5)(this.extension,"attributableCoverage");for(const e of r)this.ensureTestIsKnown(e)}const o=e.uri.toString(),s=new P.u0([t,n,o]).toString();this.publishedCoverage.set(s,{report:e,extIds:r.map((e=>P.u0.fromExtHostTestItem(e,i).toString()))}),this.proxy.$appendCoverage(t,n,w.xC.fromFile(i,s,e))},enqueued:r((e=>{this.proxy.$updateTestStateInRun(t,n,P.u0.fromExtHostTestItem(e,i).toString(),E.ZM.Queued)})),skipped:r((e=>{this.proxy.$updateTestStateInRun(t,n,P.u0.fromExtHostTestItem(e,i).toString(),E.ZM.Skipped)})),started:r((e=>{this.proxy.$updateTestStateInRun(t,n,P.u0.fromExtHostTestItem(e,i).toString(),E.ZM.Running)})),errored:r(((e,r,o)=>{s(e,r),this.proxy.$updateTestStateInRun(t,n,P.u0.fromExtHostTestItem(e,i).toString(),E.ZM.Errored,o)})),failed:r(((e,r,o)=>{s(e,r),this.proxy.$updateTestStateInRun(t,n,P.u0.fromExtHostTestItem(e,i).toString(),E.ZM.Failed,o)})),passed:r(((e,i)=>{this.proxy.$updateTestStateInRun(t,n,P.u0.fromExtHostTestItem(e,this.dto.controllerId).toString(),E.ZM.Passed,i)})),appendOutput:(e,r,s)=>{a||(s&&this.ensureTestIsKnown(s),this.proxy.$appendOutputToRun(t,n,o.KN.fromString(e),r&&w.xh.from(r),s&&P.u0.fromExtHostTestItem(s,i).toString()))},end:()=>{a||(a=!0,this.proxy.$finishedTestRunTask(t,n),--this.running||this.markEnded())}};return this.running++,this.tasks.set(n,{run:c}),this.proxy.$startedTestRunTask(t,{id:n,name:e,running:!0}),c}forciblyEndTasks(){for(const{run:e}of this.tasks.values())e.end()}markEnded(){this.state!==F.Ended&&(this.state=F.Ended,this.endEmitter.fire())}ensureTestIsKnown(e){if(!(e instanceof y.SJ))throw new A.Mh(e.id);if(this.sharedTestIds.has(P.u0.fromExtHostTestItem(e,this.dto.controllerId).toString()))return;const t=[],i=this.dto.colllection.root;for(;;){const n=w.UK.from(e);if(t.unshift(n),this.sharedTestIds.has(n.extId))break;if(this.sharedTestIds.add(n.extId),e===i)break;e=e.parent||i}this.proxy.$addTestsToRun(this.dto.controllerId,this.dto.id,t)}dispose(){this.markEnded(),super.dispose()}}class U{get trackers(){return this.tracked.values()}constructor(e,t){this.proxy=e,this.logService=t,this.tracked=new Map,this.trackedById=new Map}getCoverageDetails(e,t,i){const n=P.u0.root(e);return this.trackedById.get(n)?.getCoverageDetails(e,t,i)||[]}disposeTestRun(e){this.trackedById.get(e)?.dispose(),this.trackedById.delete(e);for(const[t,{id:i}]of this.tracked)i===e&&this.tracked.delete(t)}prepareForMainThreadTestRun(e,t,i,n,r){return this.getTracker(t,i,n,e,r)}cancelRunById(e){this.trackedById.get(e)?.cancel()}cancelAllRuns(){for(const e of this.tracked.values())e.cancel()}createTestRun(e,t,i,n,r,o){const s=this.tracked.get(n);if(s)return s.createRun(r);const c=z.fromPublic(t,i,n,o),l=H(n);this.proxy.$startedExtensionTestRun({controllerId:t,continuous:!!n.continuous,profile:l&&{group:K[l.kind],id:l.profileId},exclude:n.exclude?.map((e=>P.u0.fromExtHostTestItem(e,i.root.id).toString()))??[],id:c.id,include:n.include?.map((e=>P.u0.fromExtHostTestItem(e,i.root.id).toString()))??[i.root.id],preserveFocus:n.preserveFocus??!0,persist:o});const d=this.getTracker(n,c,n.profile,e);return a.ju.once(d.onEnd)((()=>{this.proxy.$finishedExtensionTestRun(c.id)})),d.createRun(r)}getTracker(e,t,i,n,r){const o=new M(t,this.proxy,this.logService,i,n,r);return this.tracked.set(e,o),this.trackedById.set(o.id,o),o}}const H=e=>{if(e.profile){if(!(e.profile instanceof j))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}};class z{static fromPublic(e,t,i,n){return new z(e,(0,p.R)(),n,t)}static fromInternal(e,t){return new z(e.controllerId,e.runId,!0,t)}constructor(e,t,i,n){this.controllerId=e,this.id=t,this.isPersisted=i,this.colllection=n}}class B{get isEmpty(){return 0===this.added.size&&0===this.removed.size&&0===this.updated.size}constructor(e){this.emitter=e,this.added=new Set,this.updated=new Set,this.removed=new Set,this.alreadyRemoved=new Set}add(e){this.added.add(e)}update(e){Object.assign(e.revived,w.UK.toPlain(e.item)),this.added.has(e)||this.updated.add(e)}remove(e){if(this.added.has(e))return void this.added.delete(e);this.updated.delete(e);const t=P.u0.parentId(e.item.extId);t&&this.alreadyRemoved.has(t.toString())?this.alreadyRemoved.add(e.item.extId):this.removed.add(e)}getChangeEvent(){const{added:e,updated:t,removed:i}=this;return{get added(){return[...e].map((e=>e.revived))},get updated(){return[...t].map((e=>e.revived))},get removed(){return[...i].map((e=>e.revived))}}}complete(){this.isEmpty||this.emitter.fire(this.getChangeEvent())}}class W extends E.oc{constructor(){super(...arguments),this.changeEmitter=new a.Q5,this.onDidChangeTests=this.changeEmitter.event}get rootTests(){return this.roots}getMirroredTestDataById(e){return this.items.get(e)}getMirroredTestDataByReference(e){return this.items.get(e.id)}createItem(e,t){return{...e,revived:w.UK.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}createChangeCollector(){return new B(this.changeEmitter)}}class V{constructor(e){this.proxy=e}checkout(){this.current||(this.current=this.createObserverData());const e=this.current;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map((e=>e.revived))},dispose:(0,c.M)((()=>{0==--e.observers&&(this.proxy.$unsubscribeFromDiffs(),this.current=void 0)}))}}getMirroredTestDataByReference(e){return this.current?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.current?.tests.apply(e)}createObserverData(){const e=new W({asCanonicalUri:e=>e});return this.proxy.$subscribeToDiffs(),{observers:0,tests:e}}}const q=(e,t,i,n)=>{i?Object.assign(i,n):t.$updateTestRunConfig(e.controllerId,e.profileId,n)};class j{#e;#c;#l;#d;#u;get label(){return this._label}set label(e){e!==this._label&&(this._label=e,q(this,this.#e,this.#d,{label:e}))}get supportsContinuousRun(){return this._supportsContinuousRun}set supportsContinuousRun(e){e!==this._supportsContinuousRun&&(this._supportsContinuousRun=e,q(this,this.#e,this.#d,{supportsContinuousRun:e}))}get isDefault(){return this.#c.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#c.add(this.profileId):this.#c.delete(this.profileId),q(this,this.#e,this.#d,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,q(this,this.#e,this.#d,{tag:e?w.Ld.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this._configureHandler}set configureHandler(e){e!==this._configureHandler&&(this._configureHandler=e,q(this,this.#e,this.#d,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return a.ju.chain(this.#l,(e=>e.map((e=>e.get(this.controllerId)?.get(this.profileId))).filter(h.$K)))}constructor(e,t,i,n,r,o,s,a,c,l=!1,d=void 0,u=!1){this.controllerId=r,this.profileId=o,this._label=s,this.kind=a,this.runHandler=c,this._tag=d,this._supportsContinuousRun=u,this.#e=e,this.#u=t,this.#c=i,this.#l=n,t.set(o,this);const h=K[a];if("number"!=typeof h)throw new Error(`Unknown TestRunProfile.group ${a}`);l&&i.add(o),this.#d={profileId:o,controllerId:r,tag:d?w.Ld.namespace(this.controllerId,d.id):null,label:s,group:h,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:u},queueMicrotask((()=>{this.#d&&(this.#e.$publishTestRunProfile(this.#d),this.#d=void 0)}))}dispose(){this.#u?.delete(this.profileId)&&(this.#u=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#d=void 0}}const K={[x.InX.Coverage]:E.Fj.Coverage,[x.InX.Debug]:E.Fj.Debug,[x.InX.Run]:E.Fj.Run}},60411:function(e,t,i){i.d(t,{b:function(){return o},l:function(){return s}});var n=i(44383);const r=new WeakMap,o=(e,t)=>{const i={controllerId:t};return r.set(e,i),i},s=e=>{const t=r.get(e);if(!t)throw new n.Mh(e?.id||"<unknown>");return t}},45107:function(e,t,i){i.d(t,{TE:function(){return c},aQ:function(){return u}});var n=i(23088),r=i(54316),o=i(73053),s=i(54487),a=i(30874);class c{static{this._Keys=new o.R("TextEditorDecorationType")}constructor(e,t,i){const n=c._Keys.nextId();e.$registerTextEditorDecorationType(t.identifier,n,s.aw.from(i)),this.value=Object.freeze({key:n,dispose(){e.$removeTextEditorDecorationType(n)}})}}class l{constructor(e,t){this._collectedEdits=[],this._setEndOfLine=void 0,this._finalized=!1,this._document=e,this._documentVersionId=e.version,this._undoStopBefore=t.undoStopBefore,this._undoStopAfter=t.undoStopAfter}finalize(){return this._finalized=!0,{documentVersionId:this._documentVersionId,edits:this._collectedEdits,setEndOfLine:this._setEndOfLine,undoStopBefore:this._undoStopBefore,undoStopAfter:this._undoStopAfter}}_throwIfFinalized(){if(this._finalized)throw new Error("Edit is only valid while callback runs")}replace(e,t){this._throwIfFinalized();let i=null;if(e instanceof a.Lyo)i=new a.e6w(e,e);else{if(!(e instanceof a.e6w))throw new Error("Unrecognized location");i=e}this._pushEdit(i,t,!1)}insert(e,t){this._throwIfFinalized(),this._pushEdit(new a.e6w(e,e),t,!0)}delete(e){this._throwIfFinalized();let t=null;if(!(e instanceof a.e6w))throw new Error("Unrecognized location");t=e,this._pushEdit(t,null,!0)}_pushEdit(e,t,i){const n=this._document.validateRange(e);this._collectedEdits.push({range:n,text:t,forceMoveMarkers:i})}setEndOfLine(e){if(this._throwIfFinalized(),e!==a.b6q.LF&&e!==a.b6q.CRLF)throw(0,r.b1)("endOfLine");this._setEndOfLine=e}}class d{constructor(e,t,i,n){this._proxy=e,this._id=t,this._accept(i),this._logService=n;const r=this;this.value={get tabSize(){return r._tabSize},set tabSize(e){r._setTabSize(e)},get indentSize(){return r._indentSize},set indentSize(e){r._setIndentSize(e)},get insertSpaces(){return r._insertSpaces},set insertSpaces(e){r._setInsertSpaces(e)},get cursorStyle(){return r._cursorStyle},set cursorStyle(e){r._setCursorStyle(e)},get lineNumbers(){return r._lineNumbers},set lineNumbers(e){r._setLineNumbers(e)}}}_accept(e){this._tabSize=e.tabSize,this._indentSize=e.indentSize,this._originalIndentSize=e.originalIndentSize,this._insertSpaces=e.insertSpaces,this._cursorStyle=e.cursorStyle,this._lineNumbers=s.lP.to(e.lineNumbers)}_validateTabSize(e){if("auto"===e)return"auto";if("number"==typeof e){const t=Math.floor(e);return t>0?t:null}if("string"==typeof e){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}_setTabSize(e){const t=this._validateTabSize(e);if(null!==t){if("number"==typeof t){if(this._tabSize===t)return;this._tabSize=t}this._warnOnError("setTabSize",this._proxy.$trySetOptions(this._id,{tabSize:t}))}}_validateIndentSize(e){if("tabSize"===e)return"tabSize";if("number"==typeof e){const t=Math.floor(e);return t>0?t:null}if("string"==typeof e){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}_setIndentSize(e){const t=this._validateIndentSize(e);if(null!==t){if("number"==typeof t){if(this._originalIndentSize===t)return;this._indentSize=t,this._originalIndentSize=t}this._warnOnError("setIndentSize",this._proxy.$trySetOptions(this._id,{indentSize:t}))}}_validateInsertSpaces(e){return"auto"===e?"auto":"false"!==e&&Boolean(e)}_setInsertSpaces(e){const t=this._validateInsertSpaces(e);if("boolean"==typeof t){if(this._insertSpaces===t)return;this._insertSpaces=t}this._warnOnError("setInsertSpaces",this._proxy.$trySetOptions(this._id,{insertSpaces:t}))}_setCursorStyle(e){this._cursorStyle!==e&&(this._cursorStyle=e,this._warnOnError("setCursorStyle",this._proxy.$trySetOptions(this._id,{cursorStyle:e})))}_setLineNumbers(e){this._lineNumbers!==e&&(this._lineNumbers=e,this._warnOnError("setLineNumbers",this._proxy.$trySetOptions(this._id,{lineNumbers:s.lP.from(e)})))}assign(e){const t={};let i=!1;if(void 0!==e.tabSize){const n=this._validateTabSize(e.tabSize);"auto"===n?(i=!0,t.tabSize=n):"number"==typeof n&&this._tabSize!==n&&(this._tabSize=n,i=!0,t.tabSize=n)}if(void 0!==e.indentSize){const n=this._validateIndentSize(e.indentSize);"tabSize"===n?(i=!0,t.indentSize=n):"number"==typeof n&&this._originalIndentSize!==n&&(this._indentSize=n,this._originalIndentSize=n,i=!0,t.indentSize=n)}if(void 0!==e.insertSpaces){const n=this._validateInsertSpaces(e.insertSpaces);"auto"===n?(i=!0,t.insertSpaces=n):this._insertSpaces!==n&&(this._insertSpaces=n,i=!0,t.insertSpaces=n)}void 0!==e.cursorStyle&&this._cursorStyle!==e.cursorStyle&&(this._cursorStyle=e.cursorStyle,i=!0,t.cursorStyle=e.cursorStyle),void 0!==e.lineNumbers&&this._lineNumbers!==e.lineNumbers&&(this._lineNumbers=e.lineNumbers,i=!0,t.lineNumbers=s.lP.from(e.lineNumbers)),i&&this._warnOnError("setOptions",this._proxy.$trySetOptions(this._id,t))}_warnOnError(e,t){t.catch((t=>{this._logService.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this._logService.warn(t)}))}}class u{constructor(e,t,i,n,o,c,u,h){this.id=e,this._proxy=t,this._logService=i,this._disposed=!1,this._hasDecorationsForKey=new Set,this._selections=o,this._options=new d(this._proxy,this.id,c,i),this._visibleRanges=u,this._viewColumn=h;const p=this;this.value=Object.freeze({get document(){return n.value},set document(e){throw new r.Tu("document")},get selection(){return p._selections&&p._selections[0]},set selection(e){if(!(e instanceof a.Y19))throw(0,r.b1)("selection");p._selections=[e],p._trySetSelection()},get selections(){return p._selections},set selections(e){if(!Array.isArray(e)||e.some((e=>!(e instanceof a.Y19))))throw(0,r.b1)("selections");p._selections=e,p._trySetSelection()},get visibleRanges(){return p._visibleRanges},set visibleRanges(e){throw new r.Tu("visibleRanges")},get options(){return p._options.value},set options(e){p._disposed||p._options.assign(e)},get viewColumn(){return p._viewColumn},set viewColumn(e){throw new r.Tu("viewColumn")},edit(e,t={undoStopBefore:!0,undoStopAfter:!0}){if(p._disposed)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const i=new l(n.value,t);return e(i),p._applyEdit(i)},insertSnippet(i,r,o={undoStopBefore:!0,undoStopAfter:!0}){if(p._disposed)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let c;if(!r||Array.isArray(r)&&0===r.length)c=p._selections.map((e=>s.e6.from(e)));else if(r instanceof a.Lyo){const{lineNumber:e,column:t}=s.Ly.from(r);c=[{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}]}else if(r instanceof a.e6w)c=[s.e6.from(r)];else{c=[];for(const e of r)if(e instanceof a.e6w)c.push(s.e6.from(e));else{const{lineNumber:t,column:i}=s.Ly.from(e);c.push({startLineNumber:t,startColumn:i,endLineNumber:t,endColumn:i})}}return t.$tryInsertSnippet(e,n.value.version,i.value,c,o)},setDecorations(i,n){const r=0===n.length;r&&!p._hasDecorationsForKey.has(i.key)||(r?p._hasDecorationsForKey.delete(i.key):p._hasDecorationsForKey.add(i.key),p._runOnProxy((()=>{if((0,s.J1)(n))return t.$trySetDecorations(e,i.key,(0,s.MA)(n));{const r=new Array(4*n.length);for(let e=0,t=n.length;e<t;e++){const t=n[e];r[4*e]=t.start.line+1,r[4*e+1]=t.start.character+1,r[4*e+2]=t.end.line+1,r[4*e+3]=t.end.character+1}return t.$trySetDecorationsFast(e,i.key,r)}})))},revealRange(i,n){p._runOnProxy((()=>t.$tryRevealRange(e,s.e6.from(i),n||a._VK.Default)))},show(i){t.$tryShowEditor(e,s.eI.from(i))},hide(){t.$tryHideEditor(e)}})}dispose(){(0,n.ok)(!this._disposed),this._disposed=!0}_acceptOptions(e){(0,n.ok)(!this._disposed),this._options._accept(e)}_acceptVisibleRanges(e){(0,n.ok)(!this._disposed),this._visibleRanges=e}_acceptViewColumn(e){(0,n.ok)(!this._disposed),this._viewColumn=e}_acceptSelections(e){(0,n.ok)(!this._disposed),this._selections=e}async _trySetSelection(){const e=this._selections.map(s.Y1.from);return await this._runOnProxy((()=>this._proxy.$trySetSelections(this.id,e))),this.value}_applyEdit(e){const t=e.finalize();if(0===t.edits.length&&!t.setEndOfLine)return Promise.resolve(!0);const i=t.edits.map((e=>e.range));i.sort(((e,t)=>e.end.line===t.end.line?e.end.character===t.end.character?e.start.line===t.start.line?e.start.character-t.start.character:e.start.line-t.start.line:e.end.character-t.end.character:e.end.line-t.end.line));for(let e=0,t=i.length-1;e<t;e++){const t=i[e].end;if(i[e+1].start.isBefore(t))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const n=t.edits.map((e=>({range:s.e6.from(e.range),text:e.text,forceMoveMarkers:e.forceMoveMarkers})));return this._proxy.$tryApplyEdits(this.id,t.documentVersionId,n,{setEndOfLine:"number"==typeof t.setEndOfLine?s.b6.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}_runOnProxy(e){return this._disposed?(this._logService.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then((()=>this),(e=>(e instanceof Error&&"DISPOSED"===e.name||this._logService.warn(e),null)))}}},54487:function(e,t,i){i.d(t,{MP:function(){return pe},ll:function(){return he},RV:function(){return me},e5:function(){return Mt},TU:function(){return $t},hq:function(){return Ut},$l:function(){return Ht},IE:function(){return Ft},a8:function(){return vt},oY:function(){return Ot},tr:function(){return Dt},WT:function(){return At},Ik:function(){return Et},s8:function(){return Ct},ZJ:function(){return St},HY:function(){return wt},Zg:function(){return xt},Sm:function(){return Nt},Gl:function(){return Tt},Ht:function(){return Lt},cG:function(){return Rt},fk:function(){return kt},JL:function(){return It},cq:function(){return Pt},CD:function(){return pt},Il:function(){return Fe},oi:function(){return Oe},TK:function(){return Se},FG:function(){return ke},cm:function(){return Te},we:function(){return De},tn:function(){return _t},rT:function(){return Vt},aw:function(){return oe},nc:function(){return _e},R9:function(){return Z},eh:function(){return xe},jW:function(){return $e},Lq:function(){return Q},w6:function(){return ue},b6:function(){return ze},hf:function(){return be},so:function(){return We},RW:function(){return je},TM:function(){return ve},t7:function(){return Re},gl:function(){return Ne},CR:function(){return ye},GS:function(){return we},xf:function(){return yt},Hv:function(){return qt},$z:function(){return Ke},OU:function(){return Ge},W5:function(){return te},lM:function(){return Ce},KP:function(){return Ze},_2:function(){return Je},wU:function(){return Xe},JO:function(){return it},x$:function(){return tt},c4:function(){return Ye},RG:function(){return st},wN:function(){return nt},ac:function(){return ot},Xs:function(){return Qe},xT:function(){return at},b$:function(){return rt},hI:function(){return Bt},Ly:function(){return G},uT:function(){return Be},e6:function(){return q},Y1:function(){return V},xm:function(){return Me},vy:function(){return Ae},cR:function(){return ce},r4:function(){return le},w7:function(){return zt},xC:function(){return ht},UK:function(){return dt},lt:function(){return ct},P1:function(){return ut},Ld:function(){return lt},wD:function(){return Ue},PY:function(){return se},lP:function(){return He},P5:function(){return qe},iv:function(){return K},fQ:function(){return mt},z0:function(){return gt},eI:function(){return ee},Db:function(){return ae},$P:function(){return de},MA:function(){return Yt},J1:function(){return Xt},xh:function(){return ge},Ru:function(){return ei}});var n=i(78074),r=i(53976),o=i(33555),s=i(21033),a=i(99360),c=i(18910),l=i(51254),d=i(59267),u=i(95960),h=i(82998),p=i(93293),m=i(81647),g=i(27528),f=i(47635),_=i(42731),v=i(51083),b=i(3918),y=i(73864),w=i(27291),x=i(82416),C=i(82380),E=i(28855),S=i(60411),D=i(79837),T=i(64696),k=i(45493),I=i(81557),P=i(97698),A=i(7428),R=i(88023),L=i(67525),N=i(26258),$=i(26713),O=i(22423),F=i(13377),M=i(23783);const U="vs/workbench/contrib/chat/common/languageModels";var H;!function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.Assistant=2]="Assistant"}(H||(H={}));const z={type:"object",properties:{vendor:{type:"string",description:(0,L.C$)(U,0,"A globally unique vendor of language models.")}}},B=M.ut.registerExtensionPoint({extensionPoint:"languageModels",jsonSchema:{description:(0,L.C$)(U,1,"Contribute language models of a specific vendor."),oneOf:[z,{type:"array",items:z}]},activationEventsGenerator:(e,t)=>{for(const i of e)t.push(`onLanguageModelChat:${i.vendor}`)}});let W=class{constructor(e,t){this._extensionService=e,this._logService=t,this._store=new A.SL,this._providers=new Map,this._vendors=new Set,this._onDidChangeProviders=this._store.add(new I.Q5),this.onDidChangeLanguageModels=this._onDidChangeProviders.event,this._store.add(B.setHandler((e=>{this._vendors.clear();for(const t of e)if((0,O.$x)(t.description,"chatProvider"))for(const e of P.$.wrap(t.value))this._vendors.has(e.vendor)?t.collector.error((0,L.C$)(U,3,"The vendor '{0}' is already registered and cannot be registered twice",e.vendor)):(0,R.m5)(e.vendor)?t.collector.error((0,L.C$)(U,4,"The vendor field cannot be empty.")):e.vendor.trim()===e.vendor?this._vendors.add(e.vendor):t.collector.error((0,L.C$)(U,5,"The vendor field cannot start or end with whitespace."));else t.collector.error((0,L.C$)(U,2,"This contribution point requires the 'chatProvider' proposal."));const t=[];for(const[e,i]of this._providers)this._vendors.has(i.metadata.vendor)||(this._providers.delete(e),t.push(e));t.length>0&&this._onDidChangeProviders.fire({removed:t})})))}dispose(){this._store.dispose(),this._providers.clear()}getLanguageModelIds(){return Array.from(this._providers.keys())}lookupLanguageModel(e){return this._providers.get(e)?.metadata}async selectLanguageModels(e){if(e.vendor)await this._extensionService.activateByEvent(`onLanguageModelChat:${e.vendor}}`);else{const e=Array.from(this._vendors).map((e=>this._extensionService.activateByEvent(`onLanguageModelChat:${e}`)));await Promise.all(e)}const t=[];for(const[i,n]of this._providers)void 0!==e.vendor&&n.metadata.vendor!==e.vendor||void 0!==e.family&&n.metadata.family!==e.family||void 0!==e.version&&n.metadata.version!==e.version||void 0!==e.identifier&&n.metadata.id!==e.identifier||n.metadata.targetExtensions&&!n.metadata.targetExtensions.some((t=>N.kP.equals(t,e.extension)))||t.push(i);return this._logService.trace("[LM] selected language models",e,t),t}registerLanguageModelChat(e,t){if(this._logService.trace("[LM] registering language model chat",e,t.metadata),!this._vendors.has(t.metadata.vendor))throw new Error(`Chat response provider uses UNKNOWN vendor ${t.metadata.vendor}.`);if(this._providers.has(e))throw new Error(`Chat response provider with identifier ${e} is already registered.`);return this._providers.set(e,t),this._onDidChangeProviders.fire({added:[{identifier:e,metadata:t.metadata}]}),(0,A.OF)((()=>{this._providers.delete(e)&&(this._onDidChangeProviders.fire({removed:[e]}),this._logService.trace("[LM] UNregistered language model chat",e,t.metadata))}))}async sendChatRequest(e,t,i,n,r){const o=this._providers.get(e);if(!o)throw new Error(`Chat response provider with identifier ${e} is not registered.`);return o.sendChatRequest(i,t,n,r)}computeTokenLength(e,t,i){const n=this._providers.get(e);if(!n)throw new Error(`Chat response provider with identifier ${e} is not registered.`);return n.provideTokenCount(t,i)}};W=(0,k.g)([(0,k.f)(0,F.Q),(0,k.f)(1,$.V)],W);var V,q,j,K,G,Q,J,Z,X,Y,ee,te,ie,ne,re,oe,se,ae,ce,le,de,ue,he,pe,me,ge,fe,_e,ve,be,ye,we,xe,Ce,Ee,Se,De,Te,ke,Ie,Pe,Ae,Re,Le,Ne,$e,Oe,Fe,Me,Ue,He,ze,Be,We,Ve,qe,je,Ke,Ge,Qe,Je,Ze,Xe,Ye,et,tt,it,nt,rt,ot,st,at,ct,lt,dt,ut,ht,pt,mt,gt,ft,_t,vt,bt,yt,wt,xt,Ct,Et,St,Dt,Tt,kt,It,Pt,At,Rt,Lt,Nt,$t,Ot,Ft,Mt,Ut,Ht,zt,Bt,Wt,Vt,qt,jt=i(13973),Kt=i(30170),Gt=i(45675),Qt=i(33089),Jt=i(23820),Zt=i(30874);function Xt(e){return 0===e.length||!!function(e){return void 0!==e.range}(e[0])}function Yt(e){return Xt(e)?e.map((e=>({range:q.from(e.range),hoverMessage:Array.isArray(e.hoverMessage)?te.fromMany(e.hoverMessage):e.hoverMessage?te.from(e.hoverMessage):void 0,renderOptions:e.renderOptions}))):e.map((e=>({range:q.from(e)})))}function ei(e){return void 0===e?e:"string"==typeof e?_.ov.file(e):e}!function(e){e.to=function(e){const{selectionStartLineNumber:t,selectionStartColumn:i,positionLineNumber:n,positionColumn:r}=e,o=new Zt.Lyo(t-1,i-1),s=new Zt.Lyo(n-1,r-1);return new Zt.Y19(o,s)},e.from=function(e){const{anchor:t,active:i}=e;return{selectionStartLineNumber:t.line+1,selectionStartColumn:t.character+1,positionLineNumber:i.line+1,positionColumn:i.character+1}}}(V||(V={})),function(e){e.from=function(e){if(!e)return;const{start:t,end:i}=e;return{startLineNumber:t.line+1,startColumn:t.character+1,endLineNumber:i.line+1,endColumn:i.character+1}},e.to=function(e){if(!e)return;const{startLineNumber:t,startColumn:i,endLineNumber:n,endColumn:r}=e;return new Zt.e6w(t-1,i-1,n-1,r-1)}}(q||(q={})),function(e){e.from=function(e){return{uri:e.uri,range:q.from(e.range)}},e.to=function(e){return new Zt.YeX(_.ov.revive(e.uri),q.to(e.range))}}(j||(j={})),function(e){e.to=function(e){switch(e){case y.xJ.Comment:return Zt.xJH.Comment;case y.xJ.Other:return Zt.xJH.Other;case y.xJ.RegEx:return Zt.xJH.RegEx;case y.xJ.String:return Zt.xJH.String}}}(K||(K={})),function(e){e.to=function(e){return new Zt.Lyo(e.lineNumber-1,e.column-1)},e.from=function(e){return{lineNumber:e.line+1,column:e.character+1}}}(G||(G={})),function(e){function t(e,t){return t&&"string"==typeof e?t.transformOutgoingScheme(e):e}e.from=function(e,i,r){return(0,n.kX)((0,n._2)(e).map((e=>function(e,i,n){if("string"==typeof e)return{$serialized:!0,language:e,isBuiltin:n?.isBuiltin};if(e)return{$serialized:!0,language:e.language,scheme:t(e.scheme,i),pattern:je.from(e.pattern)??void 0,exclusive:e.exclusive,notebookType:e.notebookType,isBuiltin:n?.isBuiltin};return}(e,i,r))))}}(Q||(Q={})),function(e){e.from=function(e){switch(e){case Zt.$uQ.Unnecessary:return C.eB.Unnecessary;case Zt.$uQ.Deprecated:return C.eB.Deprecated}},e.to=function(e){switch(e){case C.eB.Unnecessary:return Zt.$uQ.Unnecessary;case C.eB.Deprecated:return Zt.$uQ.Deprecated;default:return}}}(J||(J={})),function(e){e.from=function(e){let t;return e.code&&(t=(0,f.HD)(e.code)||(0,f.hj)(e.code)?String(e.code):{value:String(e.code.value),target:e.code.target}),{...q.from(e.range),message:e.message,source:e.source,code:t,severity:Y.from(e.severity),relatedInformation:e.relatedInformation&&e.relatedInformation.map(X.from),tags:Array.isArray(e.tags)?(0,n.kX)(e.tags.map(J.from)):void 0}},e.to=function(e){const t=new Zt.R9_(q.to(e),e.message,Y.to(e.severity));return t.source=e.source,t.code=(0,f.HD)(e.code)?e.code:e.code?.value,t.relatedInformation=e.relatedInformation&&e.relatedInformation.map(X.to),t.tags=e.tags&&(0,n.kX)(e.tags.map(J.to)),t}}(Z||(Z={})),function(e){e.from=function(e){return{...q.from(e.location.range),message:e.message,resource:e.location.uri}},e.to=function(e){return new Zt.va0(new Zt.YeX(e.resource,q.to(e)),e.message)}}(X||(X={})),function(e){e.from=function(e){switch(e){case Zt.H_B.Error:return C.ZL.Error;case Zt.H_B.Warning:return C.ZL.Warning;case Zt.H_B.Information:return C.ZL.Info;case Zt.H_B.Hint:return C.ZL.Hint}return C.ZL.Error},e.to=function(e){switch(e){case C.ZL.Info:return Zt.H_B.Information;case C.ZL.Warning:return Zt.H_B.Warning;case C.ZL.Error:return Zt.H_B.Error;case C.ZL.Hint:return Zt.H_B.Hint;default:return Zt.H_B.Error}}}(Y||(Y={})),function(e){e.from=function(e){return"number"==typeof e&&e>=Zt.eIC.One?e-1:e===Zt.eIC.Beside?Jt.O3:Jt.LP},e.to=function(e){if("number"==typeof e&&e>=0)return e+1;throw new Error("invalid 'EditorGroupColumn'")}}(ee||(ee={})),function(e){function t(e,t){if(!e)return e;let i;try{i=(0,d.Qc)(e)}catch(e){}if(!i)return e;let n=!1;return i=(0,h.rs)(i,(e=>{if(_.ov.isUri(e)){const i=`__uri_${Math.random().toString(16).slice(2,8)}`;return t[i]=e,n=!0,i}})),n?JSON.stringify(i):e}e.fromMany=function(t){return t.map(e.from)},e.from=function(e){let i;if((n=e)&&"object"==typeof n&&"string"==typeof n.language&&"string"==typeof n.value){const{language:t,value:n}=e;i={value:"```"+t+"\n"+n+"\n```\n"}}else i=Zt.W5C.isMarkdownString(e)?{value:e.value,isTrusted:e.isTrusted,supportThemeIcons:e.supportThemeIcons,supportHtml:e.supportHtml,baseUri:e.baseUri}:"string"==typeof e?{value:e}:{value:""};var n;const r=Object.create(null);i.uris=r;const o=e=>{try{let i=_.ov.parse(e,!0);i=i.with({query:t(i.query,r)}),r[e]=i}catch(e){}return""},s=new l.Z.Renderer;return s.link=o,s.image=e=>"string"==typeof e?o((0,a.v1)(e).href):"",(0,l.Z)(i.value,{renderer:s}),i},e.to=function(e){const t=new Zt.W5C(e.value,e.supportThemeIcons);return t.isTrusted=e.isTrusted,t.supportHtml=e.supportHtml,t.baseUri=e.baseUri?_.ov.from(e.baseUri):void 0,t},e.fromStrict=function(t){if(t)return"string"==typeof t?t:e.from(t)}}(te||(te={})),function(e){e.from=function(e){return void 0===e?e:{contentText:e.contentText,contentIconPath:e.contentIconPath?ei(e.contentIconPath):void 0,border:e.border,borderColor:e.borderColor,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textDecoration:e.textDecoration,color:e.color,backgroundColor:e.backgroundColor,margin:e.margin,width:e.width,height:e.height}}}(ie||(ie={})),function(e){e.from=function(e){return void 0===e?e:{backgroundColor:e.backgroundColor,outline:e.outline,outlineColor:e.outlineColor,outlineStyle:e.outlineStyle,outlineWidth:e.outlineWidth,border:e.border,borderColor:e.borderColor,borderRadius:e.borderRadius,borderSpacing:e.borderSpacing,borderStyle:e.borderStyle,borderWidth:e.borderWidth,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textDecoration:e.textDecoration,cursor:e.cursor,color:e.color,opacity:e.opacity,letterSpacing:e.letterSpacing,gutterIconPath:e.gutterIconPath?ei(e.gutterIconPath):void 0,gutterIconSize:e.gutterIconSize,overviewRulerColor:e.overviewRulerColor,before:e.before?ie.from(e.before):void 0,after:e.after?ie.from(e.after):void 0}}}(ne||(ne={})),function(e){e.from=function(e){if(void 0===e)return e;switch(e){case Zt.TED.OpenOpen:return x.OI.AlwaysGrowsWhenTypingAtEdges;case Zt.TED.ClosedClosed:return x.OI.NeverGrowsWhenTypingAtEdges;case Zt.TED.OpenClosed:return x.OI.GrowsOnlyWhenTypingBefore;case Zt.TED.ClosedOpen:return x.OI.GrowsOnlyWhenTypingAfter}}}(re||(re={})),function(e){e.from=function(e){return{isWholeLine:e.isWholeLine,rangeBehavior:e.rangeBehavior?re.from(e.rangeBehavior):void 0,overviewRulerLane:e.overviewRulerLane,light:e.light?ne.from(e.light):void 0,dark:e.dark?ne.from(e.dark):void 0,backgroundColor:e.backgroundColor,outline:e.outline,outlineColor:e.outlineColor,outlineStyle:e.outlineStyle,outlineWidth:e.outlineWidth,border:e.border,borderColor:e.borderColor,borderRadius:e.borderRadius,borderSpacing:e.borderSpacing,borderStyle:e.borderStyle,borderWidth:e.borderWidth,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textDecoration:e.textDecoration,cursor:e.cursor,color:e.color,opacity:e.opacity,letterSpacing:e.letterSpacing,gutterIconPath:e.gutterIconPath?ei(e.gutterIconPath):void 0,gutterIconSize:e.gutterIconSize,overviewRulerColor:e.overviewRulerColor,before:e.before?ie.from(e.before):void 0,after:e.after?ie.from(e.after):void 0}}}(oe||(oe={})),function(e){e.from=function(e){return{text:e.newText,eol:e.newEol&&ze.from(e.newEol),range:q.from(e.range)}},e.to=function(e){const t=new Zt.PYv(q.to(e.range),e.text);return t.newEol=void 0===e.eol?void 0:ze.to(e.eol),t}}(se||(se={})),function(e){e.from=function(e,t){const i={edits:[]};if(e instanceof Zt.DbP){const n=new c.XV;for(const t of e._allEntries())t._type===Zt.Max.File&&_.ov.isUri(t.to)&&void 0===t.from&&n.add(t.to);for(const o of e._allEntries())if(o._type===Zt.Max.File){let e;o.options?.contents&&(e=ArrayBuffer.isView(o.options.contents)?{type:"base64",value:(0,r.oF)(r.KN.wrap(o.options.contents))}:{type:"dataTransferItem",id:o.options.contents._itemId}),i.edits.push({oldResource:o.from,newResource:o.to,options:{...o.options,contents:e},metadata:o.metadata})}else o._type===Zt.Max.Text?i.edits.push({resource:o.uri,textEdit:se.from(o.edit),versionId:n.has(o.uri)?void 0:t?.getTextDocumentVersion(o.uri),metadata:o.metadata}):o._type===Zt.Max.Snippet?i.edits.push({resource:o.uri,textEdit:{range:q.from(o.range),text:o.edit.value,insertAsSnippet:!0},versionId:n.has(o.uri)?void 0:t?.getTextDocumentVersion(o.uri),metadata:o.metadata}):o._type===Zt.Max.Cell?i.edits.push({metadata:o.metadata,resource:o.uri,cellEdit:o.edit,notebookMetadata:o.notebookMetadata,notebookVersionId:t?.getNotebookDocumentVersion(o.uri)}):o._type===Zt.Max.CellReplace&&i.edits.push({metadata:o.metadata,resource:o.uri,notebookVersionId:t?.getNotebookDocumentVersion(o.uri),cellEdit:{editType:Kt.w.Replace,index:o.index,count:o.count,cells:o.cells.map(et.from)}})}return i},e.to=function(e){const t=new Zt.DbP,i=new c.Y9;for(const n of e.edits)if(n.textEdit){const e=n,t=_.ov.revive(e.resource),r=q.to(e.textEdit.range),o=e.textEdit.text;let s;s=e.textEdit.insertAsSnippet?Zt.M0$.replace(r,new Zt.EG5(o)):Zt.PYv.replace(r,o);const a=i.get(t);a?a.push(s):i.set(t,[s])}else t.renameFile(_.ov.revive(n.oldResource),_.ov.revive(n.newResource),n.options);for(const[e,n]of i)t.set(e,n);return t}}(ae||(ae={})),function(e){const t=Object.create(null);t[Zt.cRn.File]=w.cR.File,t[Zt.cRn.Module]=w.cR.Module,t[Zt.cRn.Namespace]=w.cR.Namespace,t[Zt.cRn.Package]=w.cR.Package,t[Zt.cRn.Class]=w.cR.Class,t[Zt.cRn.Method]=w.cR.Method,t[Zt.cRn.Property]=w.cR.Property,t[Zt.cRn.Field]=w.cR.Field,t[Zt.cRn.Constructor]=w.cR.Constructor,t[Zt.cRn.Enum]=w.cR.Enum,t[Zt.cRn.Interface]=w.cR.Interface,t[Zt.cRn.Function]=w.cR.Function,t[Zt.cRn.Variable]=w.cR.Variable,t[Zt.cRn.Constant]=w.cR.Constant,t[Zt.cRn.String]=w.cR.String,t[Zt.cRn.Number]=w.cR.Number,t[Zt.cRn.Boolean]=w.cR.Boolean,t[Zt.cRn.Array]=w.cR.Array,t[Zt.cRn.Object]=w.cR.Object,t[Zt.cRn.Key]=w.cR.Key,t[Zt.cRn.Null]=w.cR.Null,t[Zt.cRn.EnumMember]=w.cR.EnumMember,t[Zt.cRn.Struct]=w.cR.Struct,t[Zt.cRn.Event]=w.cR.Event,t[Zt.cRn.Operator]=w.cR.Operator,t[Zt.cRn.TypeParameter]=w.cR.TypeParameter,e.from=function(e){return"number"==typeof t[e]?t[e]:w.cR.Property},e.to=function(e){for(const i in t)if(t[i]===e)return Number(i);return Zt.cRn.Property}}(ce||(ce={})),function(e){e.from=function(e){if(e===Zt.r4c.Deprecated)return w.r4.Deprecated},e.to=function(e){if(e===w.r4.Deprecated)return Zt.r4c.Deprecated}}(le||(le={})),function(e){e.from=function(e){return{name:e.name,kind:ce.from(e.kind),tags:e.tags&&e.tags.map(le.from),containerName:e.containerName,location:ge.from(e.location)}},e.to=function(e){const t=new Zt.JNW(e.name,ce.to(e.kind),e.containerName,ge.to(e.location));return t.tags=e.tags&&e.tags.map(le.to),t}}(de||(de={})),function(e){e.from=function e(t){const i={name:t.name||"!!MISSING: name!!",detail:t.detail,range:q.from(t.range),selectionRange:q.from(t.selectionRange),kind:ce.from(t.kind),tags:t.tags?.map(le.from)??[]};return t.children&&(i.children=t.children.map(e)),i},e.to=function e(t){const i=new Zt.w6Q(t.name,t.detail,ce.to(t.kind),q.to(t.range),q.to(t.selectionRange));return(0,n.Of)(t.tags)&&(i.tags=t.tags.map(le.to)),t.children&&(i.children=t.children.map(e)),i}}(ue||(ue={})),function(e){e.to=function(e){const t=new Zt.llk(ce.to(e.kind),e.name,e.detail||"",_.ov.revive(e.uri),q.to(e.range),q.to(e.selectionRange));return t._sessionId=e._sessionId,t._itemId=e._itemId,t},e.from=function(e,t,i){if(t=t??e._sessionId,i=i??e._itemId,void 0===t||void 0===i)throw new Error("invalid item");return{_sessionId:t,_itemId:i,name:e.name,detail:e.detail,kind:ce.from(e.kind),uri:e.uri,range:q.from(e.range),selectionRange:q.from(e.selectionRange),tags:e.tags?.map(le.from)}}}(he||(he={})),function(e){e.to=function(e){return new Zt.MPI(he.to(e.from),e.fromRanges.map((e=>q.to(e))))}}(pe||(pe={})),function(e){e.to=function(e){return new Zt.RVV(he.to(e.to),e.fromRanges.map((e=>q.to(e))))}}(me||(me={})),(fe=ge||(ge={})).from=function(e){return{range:e.range&&q.from(e.range),uri:e.uri}},fe.to=function(e){return new Zt.YeX(_.ov.revive(e.uri),q.to(e.range))},function(e){e.from=function(e){const t=e,i=e;return{originSelectionRange:t.originSelectionRange?q.from(t.originSelectionRange):void 0,uri:t.targetUri?t.targetUri:i.uri,range:q.from(t.targetRange?t.targetRange:i.range),targetSelectionRange:t.targetSelectionRange?q.from(t.targetSelectionRange):void 0}},e.to=function(e){return{targetUri:_.ov.revive(e.uri),targetRange:q.to(e.range),targetSelectionRange:e.targetSelectionRange?q.to(e.targetSelectionRange):void 0,originSelectionRange:e.originSelectionRange?q.to(e.originSelectionRange):void 0}}}(_e||(_e={})),function(e){e.from=function(e){return{range:q.from(e.range),contents:te.fromMany(e.contents),canIncreaseVerbosity:e.canIncreaseVerbosity,canDecreaseVerbosity:e.canDecreaseVerbosity}},e.to=function(e){const t=e.contents.map(te.to),i=q.to(e.range),n=e.canIncreaseVerbosity,r=e.canDecreaseVerbosity;return new Zt.GLX(t,i,n,r)}}(ve||(ve={})),function(e){e.from=function(e){return{range:q.from(e.range),expression:e.expression}},e.to=function(e){return new Zt.hfl(q.to(e.range),e.expression)}}(be||(be={})),function(e){e.from=function(e){if(e instanceof Zt.$KE)return{type:"text",range:q.from(e.range),text:e.text};if(e instanceof Zt.wJF)return{type:"variable",range:q.from(e.range),variableName:e.variableName,caseSensitiveLookup:e.caseSensitiveLookup};if(e instanceof Zt.rLr)return{type:"expression",range:q.from(e.range),expression:e.expression};throw new Error("Unknown 'InlineValue' type")},e.to=function(e){switch(e.type){case"text":return{range:q.to(e.range),text:e.text};case"variable":return{range:q.to(e.range),variableName:e.variableName,caseSensitiveLookup:e.caseSensitiveLookup};case"expression":return{range:q.to(e.range),expression:e.expression}}}}(ye||(ye={})),function(e){e.from=function(e){return{frameId:e.frameId,stoppedLocation:q.from(e.stoppedLocation)}},e.to=function(e){return new Zt.GSm(e.frameId,q.to(e.stoppedLocation))}}(we||(we={})),function(e){e.from=function(e){return{range:q.from(e.range),kind:e.kind}},e.to=function(e){return new Zt.ehQ(q.to(e.range),e.kind)}}(xe||(xe={})),function(e){e.from=function(e){return{uri:e.uri,highlights:e.highlights.map(xe.from)}},e.to=function(e){return new Zt.lMH(_.ov.revive(e.uri),e.highlights.map(xe.to))}}(Ce||(Ce={})),function(e){e.to=function(e){switch(e){case w.Ij.TriggerCharacter:return Zt.IjA.TriggerCharacter;case w.Ij.TriggerForIncompleteCompletions:return Zt.IjA.TriggerForIncompleteCompletions;case w.Ij.Invoke:default:return Zt.IjA.Invoke}}}(Ee||(Ee={})),function(e){e.to=function(e){return{triggerKind:Ee.to(e.triggerKind),triggerCharacter:e.triggerCharacter}}}(Se||(Se={})),function(e){e.from=function(e){if(e===Zt.weh.Deprecated)return w.we.Deprecated},e.to=function(e){if(e===w.we.Deprecated)return Zt.weh.Deprecated}}(De||(De={})),function(e){const t=new Map([[Zt.cmM.Method,w.cm.Method],[Zt.cmM.Function,w.cm.Function],[Zt.cmM.Constructor,w.cm.Constructor],[Zt.cmM.Field,w.cm.Field],[Zt.cmM.Variable,w.cm.Variable],[Zt.cmM.Class,w.cm.Class],[Zt.cmM.Interface,w.cm.Interface],[Zt.cmM.Struct,w.cm.Struct],[Zt.cmM.Module,w.cm.Module],[Zt.cmM.Property,w.cm.Property],[Zt.cmM.Unit,w.cm.Unit],[Zt.cmM.Value,w.cm.Value],[Zt.cmM.Constant,w.cm.Constant],[Zt.cmM.Enum,w.cm.Enum],[Zt.cmM.EnumMember,w.cm.EnumMember],[Zt.cmM.Keyword,w.cm.Keyword],[Zt.cmM.Snippet,w.cm.Snippet],[Zt.cmM.Text,w.cm.Text],[Zt.cmM.Color,w.cm.Color],[Zt.cmM.File,w.cm.File],[Zt.cmM.Reference,w.cm.Reference],[Zt.cmM.Folder,w.cm.Folder],[Zt.cmM.Event,w.cm.Event],[Zt.cmM.Operator,w.cm.Operator],[Zt.cmM.TypeParameter,w.cm.TypeParameter],[Zt.cmM.Issue,w.cm.Issue],[Zt.cmM.User,w.cm.User]]);e.from=function(e){return t.get(e)??w.cm.Property};const i=new Map([[w.cm.Method,Zt.cmM.Method],[w.cm.Function,Zt.cmM.Function],[w.cm.Constructor,Zt.cmM.Constructor],[w.cm.Field,Zt.cmM.Field],[w.cm.Variable,Zt.cmM.Variable],[w.cm.Class,Zt.cmM.Class],[w.cm.Interface,Zt.cmM.Interface],[w.cm.Struct,Zt.cmM.Struct],[w.cm.Module,Zt.cmM.Module],[w.cm.Property,Zt.cmM.Property],[w.cm.Unit,Zt.cmM.Unit],[w.cm.Value,Zt.cmM.Value],[w.cm.Constant,Zt.cmM.Constant],[w.cm.Enum,Zt.cmM.Enum],[w.cm.EnumMember,Zt.cmM.EnumMember],[w.cm.Keyword,Zt.cmM.Keyword],[w.cm.Snippet,Zt.cmM.Snippet],[w.cm.Text,Zt.cmM.Text],[w.cm.Color,Zt.cmM.Color],[w.cm.File,Zt.cmM.File],[w.cm.Reference,Zt.cmM.Reference],[w.cm.Folder,Zt.cmM.Folder],[w.cm.Event,Zt.cmM.Event],[w.cm.Operator,Zt.cmM.Operator],[w.cm.TypeParameter,Zt.cmM.TypeParameter],[w.cm.User,Zt.cmM.User],[w.cm.Issue,Zt.cmM.Issue]]);e.to=function(e){return i.get(e)??Zt.cmM.Property}}(Te||(Te={})),function(e){e.to=function(e,t){const i=new Zt.FGT(e.label);return i.insertText=e.insertText,i.kind=Te.to(e.kind),i.tags=e.tags?.map(De.to),i.detail=e.detail,i.documentation=(0,a.Fr)(e.documentation)?te.to(e.documentation):e.documentation,i.sortText=e.sortText,i.filterText=e.filterText,i.preselect=e.preselect,i.commitCharacters=e.commitCharacters,b.e.isIRange(e.range)?i.range=q.to(e.range):"object"==typeof e.range&&(i.range={inserting:q.to(e.range.insert),replacing:q.to(e.range.replace)}),i.keepWhitespace=void 0!==e.insertTextRules&&Boolean(e.insertTextRules&w.a7.KeepWhitespace),void 0!==e.insertTextRules&&e.insertTextRules&w.a7.InsertAsSnippet?i.insertText=new Zt.EG5(e.insertText):(i.insertText=e.insertText,i.textEdit=i.range instanceof Zt.e6w?new Zt.PYv(i.range,i.insertText):void 0),e.additionalTextEdits&&e.additionalTextEdits.length>0&&(i.additionalTextEdits=e.additionalTextEdits.map((e=>se.to(e)))),i.command=t&&e.command?t.fromInternal(e.command):void 0,i}}(ke||(ke={})),function(e){e.from=function(e){if("string"!=typeof e.label&&!Array.isArray(e.label))throw new TypeError("Invalid label");return{label:e.label,documentation:te.fromStrict(e.documentation)}},e.to=function(e){return{label:e.label,documentation:(0,a.Fr)(e.documentation)?te.to(e.documentation):e.documentation}}}(Ie||(Ie={})),function(e){e.from=function(e){return{label:e.label,documentation:te.fromStrict(e.documentation),parameters:Array.isArray(e.parameters)?e.parameters.map(Ie.from):[],activeParameter:e.activeParameter}},e.to=function(e){return{label:e.label,documentation:(0,a.Fr)(e.documentation)?te.to(e.documentation):e.documentation,parameters:Array.isArray(e.parameters)?e.parameters.map(Ie.to):[],activeParameter:e.activeParameter}}}(Pe||(Pe={})),function(e){e.from=function(e){return{activeSignature:e.activeSignature,activeParameter:e.activeParameter,signatures:Array.isArray(e.signatures)?e.signatures.map(Pe.from):[]}},e.to=function(e){return{activeSignature:e.activeSignature,activeParameter:e.activeParameter,signatures:Array.isArray(e.signatures)?e.signatures.map(Pe.to):[]}}}(Ae||(Ae={})),function(e){e.to=function(e,t){const i=new Zt.t7_(G.to(t.position),"string"==typeof t.label?t.label:t.label.map(Le.to.bind(void 0,e)),t.kind&&Ne.to(t.kind));return i.textEdits=t.textEdits&&t.textEdits.map(se.to),i.tooltip=(0,a.Fr)(t.tooltip)?te.to(t.tooltip):t.tooltip,i.paddingLeft=t.paddingLeft,i.paddingRight=t.paddingRight,i}}(Re||(Re={})),function(e){e.to=function(e,t){const i=new Zt.qR(t.label);return i.tooltip=(0,a.Fr)(t.tooltip)?te.to(t.tooltip):t.tooltip,w.mY.is(t.command)&&(i.command=e.fromInternal(t.command)),t.location&&(i.location=ge.to(t.location)),i}}(Le||(Le={})),function(e){e.from=function(e){return e},e.to=function(e){return e}}(Ne||(Ne={})),function(e){e.from=function(e){return{range:q.from(e.range),url:e.target,tooltip:e.tooltip}},e.to=function(e){let t;if(e.url)try{t="string"==typeof e.url?_.ov.parse(e.url,!0):_.ov.revive(e.url)}catch(e){}const i=new Zt.jWy(q.to(e.range),t);return i.tooltip=e.tooltip,i}}($e||($e={})),function(e){e.to=function(e){const t=new Zt.oi2(e.label);return e.textEdit&&(t.textEdit=se.to(e.textEdit)),e.additionalTextEdits&&(t.additionalTextEdits=e.additionalTextEdits.map((e=>se.to(e)))),t},e.from=function(e){return{label:e.label,textEdit:e.textEdit?se.from(e.textEdit):void 0,additionalTextEdits:e.additionalTextEdits?e.additionalTextEdits.map((e=>se.from(e))):void 0}}}(Oe||(Oe={})),function(e){e.to=function(e){return new Zt.Ilk(e[0],e[1],e[2],e[3])},e.from=function(e){return[e.red,e.green,e.blue,e.alpha]}}(Fe||(Fe={})),function(e){e.from=function(e){return{range:q.from(e.range)}},e.to=function(e){return new Zt.xm7(q.to(e.range))}}(Me||(Me={})),function(e){e.to=function(e){switch(e){case D.tp.AUTO:return Zt.wDJ.AfterDelay;case D.tp.EXPLICIT:return Zt.wDJ.Manual;case D.tp.FOCUS_CHANGE:case D.tp.WINDOW_CHANGE:return Zt.wDJ.FocusOut}}}(Ue||(Ue={})),function(e){e.from=function(e){switch(e){case Zt.lP6.Off:return v.Lu.Off;case Zt.lP6.Relative:return v.Lu.Relative;case Zt.lP6.Interval:return v.Lu.Interval;case Zt.lP6.On:default:return v.Lu.On}},e.to=function(e){switch(e){case v.Lu.Off:return Zt.lP6.Off;case v.Lu.Relative:return Zt.lP6.Relative;case v.Lu.Interval:return Zt.lP6.Interval;case v.Lu.On:default:return Zt.lP6.On}}}(He||(He={})),function(e){e.from=function(e){return e===Zt.b6q.CRLF?x.jl.CRLF:e===Zt.b6q.LF?x.jl.LF:void 0},e.to=function(e){return e===x.jl.CRLF?Zt.b6q.CRLF:e===x.jl.LF?Zt.b6q.LF:void 0}}(ze||(ze={})),function(e){e.from=function(e){if("object"==typeof e)return e.viewId;switch(e){case Zt.uTI.SourceControl:return E.uT.Scm;case Zt.uTI.Window:return E.uT.Window;case Zt.uTI.Notification:return E.uT.Notification}throw new Error("Unknown 'ProgressLocation'")}}(Be||(Be={})),function(e){e.from=function(e){const t={start:e.start+1,end:e.end+1};return e.kind&&(t.kind=Ve.from(e.kind)),t},e.to=function(e){const t={start:e.start-1,end:e.end-1};return e.kind&&(t.kind=Ve.to(e.kind)),t}}(We||(We={})),function(e){e.from=function(e){if(e)switch(e){case Zt.ADb.Comment:return w.AD.Comment;case Zt.ADb.Imports:return w.AD.Imports;case Zt.ADb.Region:return w.AD.Region}},e.to=function(e){if(e)switch(e.value){case w.AD.Comment.value:return Zt.ADb.Comment;case w.AD.Imports.value:return Zt.ADb.Imports;case w.AD.Region.value:return Zt.ADb.Region}}}(Ve||(Ve={})),function(e){e.from=function(e){if(e)return{pinned:"boolean"==typeof e.preview?!e.preview:void 0,inactive:e.background,preserveFocus:e.preserveFocus,selection:"object"==typeof e.selection?q.from(e.selection):void 0,override:"boolean"==typeof e.override?D.Cr.id:void 0}}}(qe||(qe={})),function(e){e.from=function(e){return e instanceof Zt.sUC?e.toJSON():"string"==typeof e?e:function(e){const t=e;if(!t)return!1;return _.ov.isUri(t.baseUri)&&"string"==typeof t.pattern}(e)||function(e){const t=e;if(!t)return!1;return"string"==typeof t.base&&"string"==typeof t.pattern}(e)?new Zt.sUC(e.baseUri??e.base,e.pattern).toJSON():e},e.to=function(e){return"string"==typeof e?e:new Zt.sUC(_.ov.revive(e.baseUri),e.pattern)}}(je||(je={})),function(e){e.from=function e(t){if(t){if(Array.isArray(t))return t.map(e);if("string"==typeof t)return t;{const e=t;return{language:e.language,scheme:e.scheme,pattern:je.from(e.pattern),exclusive:e.exclusive,notebookType:e.notebookType}}}}}(Ke||(Ke={})),function(e){e.is=function(e){return!!e&&"object"==typeof e&&"documents"in e&&Array.isArray(e.documents)&&e.documents.every((e=>Array.isArray(e)&&e.every((e=>e&&"object"==typeof e&&"uri"in e&&_.ov.isUri(e.uri)&&"version"in e&&"number"==typeof e.version&&"ranges"in e&&Array.isArray(e.ranges)&&e.ranges.every((e=>e instanceof Zt.e6w))))))},e.from=function(e){return{documents:e.documents.map((e=>e.map((e=>({uri:_.ov.from(e.uri),version:e.version,ranges:e.ranges.map((e=>q.from(e)))})))))}}}(Ge||(Ge={})),function(e){e.from=function(e){return{start:e.start,end:e.end}},e.to=function(e){return new Zt.XsU(e.start,e.end)}}(Qe||(Qe={})),function(e){e.to=function(e){return{timing:"number"==typeof e.runStartTime&&"number"==typeof e.runEndTime?{startTime:e.runStartTime,endTime:e.runEndTime}:void 0,executionOrder:e.executionOrder,success:e.lastRunSuccess}},e.from=function(e){return{lastRunSuccess:e.success,runStartTime:e.timing?.startTime,runEndTime:e.timing?.endTime,executionOrder:e.executionOrder}}}(Je||(Je={})),function(e){e.to=function(e){if(e===Kt.KP.Unconfirmed)return Zt.KPz.Pending;if(e!==Kt.KP.Pending){if(e===Kt.KP.Executing)return Zt.KPz.Executing;throw new Error(`Unknown state: ${e}`)}}}(Ze||(Ze={})),function(e){e.from=function(e){switch(e){case Zt.wUy.Markup:return Kt.gM.Markup;case Zt.wUy.Code:default:return Kt.gM.Code}},e.to=function(e){switch(e){case Kt.gM.Markup:return Zt.wUy.Markup;case Kt.gM.Code:default:return Zt.wUy.Code}}}(Xe||(Xe={})),function(e){e.from=function(e){const t={metadata:e.metadata??Object.create(null),cells:[]};for(const i of e.cells)Zt.Ul.validate(i),t.cells.push(et.from(i));return t},e.to=function(e){const t=new Zt.c4G(e.cells.map(et.to));return(0,f.Qr)(e.metadata)||(t.metadata=e.metadata),t}}(Ye||(Ye={})),function(e){e.from=function(e){return{cellKind:Xe.from(e.kind),language:e.languageId,mime:e.mime,source:e.value,metadata:e.metadata,internalMetadata:Je.from(e.executionSummary??{}),outputs:e.outputs?e.outputs.map(it.from):[]}},e.to=function(e){return new Zt.Ul(Xe.to(e.cellKind),e.source,e.language,e.mime,e.outputs?e.outputs.map(it.to):void 0,e.metadata,e.internalMetadata?Je.to(e.internalMetadata):void 0)}}(et||(et={})),function(e){e.from=function(e){return{mime:e.mime,valueBytes:r.KN.wrap(e.data)}},e.to=function(e){return new Zt.x$B(e.valueBytes.buffer,e.mime)}}(tt||(tt={})),function(e){e.from=function(e){return{outputId:e.id,items:e.items.map(tt.from),metadata:e.metadata}},e.to=function(e){const t=e.items.map(tt.to);return new Zt.JOq(t,e.outputId,e.metadata)}}(it||(it={})),function(e){function t(e){const t=e;return!!t&&(!(0,f.Jp)(t.include)&&!(0,f.Jp)(t.exclude))}e.from=function(e){return t(e)?{include:je.from(e.include)??void 0,exclude:je.from(e.exclude)??void 0}:je.from(e)??void 0},e.to=function(e){return t(e)?{include:je.to(e.include),exclude:je.to(e.exclude)}:je.to(e)}}(nt||(nt={})),function(e){e.from=function(e,t,i){const n="string"==typeof e.command?{title:"",command:e.command}:e.command;return{alignment:e.alignment===Zt.F3Y.Left?Kt.rs.Left:Kt.rs.Right,command:t.toInternal(n,i),text:e.text,tooltip:e.tooltip,accessibilityInformation:e.accessibilityInformation,priority:e.priority}}}(rt||(rt={})),function(e){e.from=function(e,t,i){const n="string"==typeof e.command?{title:"",command:e.command}:e.command;return{command:t.toInternal(n,i),label:e.label,description:e.description,detail:e.detail,documentation:e.documentation}}}(ot||(ot={})),function(e){e.from=function(e){return{transientOutputs:e?.transientOutputs??!1,transientCellMetadata:e?.transientCellMetadata??{},transientDocumentMetadata:e?.transientDocumentMetadata??{},cellContentMetadata:e?.cellContentMetadata??{}}}}(st||(st={})),function(e){e.from=function(e){return{uri:e.uri,provides:e.provides}},e.to=function(e){return new Zt.xTW(_.ov.revive(e.uri),e.provides)}}(at||(at={})),function(e){e.from=function(e){return{message:te.fromStrict(e.message)||"",type:Qt.Cg.Error,expected:e.expectedOutput,actual:e.actualOutput,contextValue:e.contextValue,location:e.location&&{range:q.from(e.location.range),uri:e.location.uri}}},e.to=function(e){const t=new Zt.ltp("string"==typeof e.message?e.message:te.to(e.message));return t.actualOutput=e.actual,t.expectedOutput=e.expected,t.contextValue=e.contextValue,t.location=e.location?ge.to(e.location):void 0,t}}(ct||(ct={})),function(e){e.namespace=Qt.B2,e.denamespace=Qt._v}(lt||(lt={})),function(e){e.from=function(e){const t=(0,S.l)(e).controllerId;return{extId:Gt.u0.fromExtHostTestItem(e,t).toString(),label:e.label,uri:_.ov.revive(e.uri),busy:e.busy,tags:e.tags.map((e=>lt.namespace(t,e.id))),range:b.e.lift(q.from(e.range)),description:e.description||null,sortText:e.sortText||null,error:e.error&&te.fromStrict(e.error)||null}},e.toPlain=function(e){return{parent:void 0,error:void 0,id:Gt.u0.fromString(e.extId).localId,label:e.label,uri:_.ov.revive(e.uri),tags:(e.tags||[]).map((e=>{const{tagId:t}=lt.denamespace(e);return new Zt.LdD(t)})),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:q.to(e.range||void 0),canResolveChildren:!1,busy:e.busy,description:e.description||void 0,sortText:e.sortText||void 0}}}(dt||(dt={})),function(e){e.from=function(e){return{id:e.id}},e.to=function(e){return new Zt.LdD(e.id)}}(lt||(lt={})),function(e){const t=(e,i)=>{const n=e.value;if(!n)return;const r={...dt.toPlain(n.item),parent:i,taskStates:n.tasks.map((e=>({state:e.state,duration:e.duration,messages:e.messages.filter((e=>e.type===Qt.Cg.Error)).map(ct.to)}))),children:[]};if(e.children)for(const i of e.children.values()){const e=t(i,r);e&&r.children.push(e)}return r};e.to=function(e){const i=new p.F;for(const t of e.items)i.insert(Gt.u0.fromString(t.item.extId).path,t);const n=[i.nodes],r=[];for(;n.length;)for(const e of n.pop())e.value?r.push(e):e.children&&n.push(e.children.values());return{completedAt:e.completedAt,results:r.map((e=>t(e))).filter(f.$K)}}}(ut||(ut={})),function(e){function t(e){return{covered:e.covered,total:e.total}}function i(e){return"line"in e?G.from(e):q.from(e)}e.fromDetails=function(e){if("number"==typeof e.executed&&e.executed<0)throw new Error(`Invalid coverage count ${e.executed}`);return"branches"in e?{count:e.executed,location:i(e.location),type:Qt.SB.Statement,branches:e.branches.length?e.branches.map((e=>({count:e.executed,location:e.location&&i(e.location),label:e.label}))):void 0}:{type:Qt.SB.Declaration,name:e.name,count:e.executed,location:i(e.location)}},e.fromFile=function(e,i,n){return(0,Zt.kGi)(n.statementCoverage),(0,Zt.kGi)(n.branchCoverage),(0,Zt.kGi)(n.declarationCoverage),{id:i,uri:n.uri,statement:t(n.statementCoverage),branch:n.branchCoverage&&t(n.branchCoverage),declaration:n.declarationCoverage&&t(n.declarationCoverage),testIds:n instanceof Zt.XuI&&n.fromTests.length?n.fromTests.map((t=>Gt.u0.fromExtHostTestItem(t,e).toString())):void 0}}}(ht||(ht={})),function(e){e.to=function(e){switch(e){case w.np.Invoke:return Zt.CDv.Invoke;case w.np.Auto:return Zt.CDv.Automatic}}}(pt||(pt={})),function(e){e.to=function(e){const t=new Zt.fQK(ce.to(e.kind),e.name,e.detail||"",_.ov.revive(e.uri),q.to(e.range),q.to(e.selectionRange));return t._sessionId=e._sessionId,t._itemId=e._itemId,t},e.from=function(e,t,i){if(t=t??e._sessionId,i=i??e._itemId,void 0===t||void 0===i)throw new Error("invalid item");return{_sessionId:t,_itemId:i,kind:ce.from(e.kind),name:e.name,detail:e.detail??"",uri:e.uri,range:q.from(e.range),selectionRange:q.from(e.selectionRange),tags:e.tags?.map(le.from)}}}(mt||(mt={})),function(e){e.from=function(e){if(e)return{value:e.value,tooltip:e.tooltip}}}(gt||(gt={})),function(e){function t(e){return o.Z0.split(e).map((e=>{if(e.startsWith("#"))return e;try{return _.ov.parse(e)}catch{}return e}))}e.to=function(e,t,i){const n=t.fileData;return n?new Zt.ctj(new Zt.kaV(n.name,_.ov.revive(n.uri),n.id,(0,s.M)((()=>i(n.id))))):e===u.vW.uriList&&t.uriListData?new Zt.qDr((r=t.uriListData,o.Z0.create(r.map((e=>"string"==typeof e?e:_.ov.revive(e)))))):new Zt.qDr(t.asString);var r},e.from=async function(e,i){const n=await i.asString();if(e===u.vW.uriList)return{asString:n,fileData:void 0,uriListData:t(n)};const r=i.asFile();return{asString:n,fileData:r?{name:r.name,uri:r.uri,id:r._itemId??r.id}:void 0}}}(ft||(ft={})),function(e){e.toDataTransfer=function(e,t){const i=e.items.map((([e,i])=>[e,ft.to(e,i,t)]));return new Zt.tnH(i)},e.from=async function(e){const t={items:[]},i=[];for(const[n,r]of e)i.push((async()=>{t.items.push([n,await ft.from(n,r)])})());return await Promise.all(i),t}}(_t||(_t={})),function(e){e.from=function(e,t){return{kind:"reply",agentId:e.participant??t?.agentId??"",subCommand:e.command??t?.command,message:e.prompt,title:e.label}},e.to=function(e){return{prompt:e.message,label:e.title,participant:e.agentId,command:e.subCommand}}}(vt||(vt={})),function(e){e.to=function(e){switch(e){case H.System:return Zt.grl.System;case H.User:return Zt.grl.User;case H.Assistant:return Zt.grl.Assistant}},e.from=function(e){switch(e){case Zt.grl.System:return H.System;case Zt.grl.User:return H.User;case Zt.grl.Assistant:return H.Assistant}return H.User}}(bt||(bt={})),function(e){e.to=function(e){let t,i="";"text"===e.content.type?i=e.content.value:t=new Zt.DHf(e.content.name,e.content.value,e.content.isError);const n=bt.to(e.role),r=new Zt.xf$(n,i,e.name);return void 0!==t&&(r.content2=t),r},e.from=function(e){const t=bt.from(e.role),i=e.name;let n;return n=e.content2 instanceof Zt.DHf?{type:"function_result",name:e.content2.name,value:e.content2.content,isError:e.content2.isError}:{type:"text",value:e.content},{role:t,name:i,content:n}}}(yt||(yt={})),function(e){e.from=function(e){return{kind:"markdownContent",content:te.from(e.value)}},e.to=function(e){return new Zt.HYr(te.to(e.content))}}(wt||(wt={})),function(e){e.from=function(e){return{kind:"markdownVuln",content:te.from(e.value),vulnerabilities:e.vulnerabilities}},e.to=function(e){return new Zt.Zgy(te.to(e.content),e.vulnerabilities)}}(xt||(xt={})),function(e){e.from=function(e){return{kind:"agentDetection",agentId:e.participant,command:e.command}},e.to=function(e){return new Zt.s8P(e.agentId,e.command)}}(Ct||(Ct={})),function(e){e.from=function(e){return{kind:"confirmation",title:e.title,message:e.message,data:e.data}}}(Et||(Et={})),function(e){e.from=function(e){const{value:t,baseUri:i}=e;return{kind:"treeData",treeData:{label:(0,m.EZ)(i),uri:i,children:function e(t,i){return t.map((t=>{const n=_.ov.joinPath(i,t.name);return{label:t.name,uri:n,children:t.children&&e(t.children,n)}}))}(t,i)}}},e.to=function(e){const t=(0,d.wL)(e.treeData),i=t.uri,n=t.children?function e(t){return t.map((t=>({name:t.label,children:t.children&&e(t.children)})))}(t.children):[];return new Zt.Y08(n,i)}}(St||(St={})),function(e){e.from=function(e){return{kind:"inlineReference",name:e.title,inlineReference:(t=e.value,_.ov.isUri(t)?e.value:j.from(e.value))};var t},e.to=function(e){const t=(0,d.wL)(e);return new Zt.trJ(_.ov.isUri(t.inlineReference)?t.inlineReference:j.to(t.inlineReference),e.name)}}(Dt||(Dt={})),function(e){e.from=function(e){return{kind:"progressMessage",content:te.from(e.value)}},e.to=function(e){return new Zt.Gli(e.content.value)}}(Tt||(Tt={})),function(e){e.from=function(e){return{kind:"warning",content:te.from(e.value)}},e.to=function(e){return new Zt.fkf(e.content.value)}}(kt||(kt={})),function(e){e.from=function(e){return{kind:"progressTask",content:te.from(e.value)}}}(It||(It={})),function(e){e.from=function(e){return{kind:"progressTaskResult",content:"string"==typeof e?te.from(e):void 0}}}(Pt||(Pt={})),function(e){e.from=function(e,t,i){return{kind:"command",command:t.toInternal(e.value,i)??{command:e.value.command,title:e.value.title}}},e.to=function(e,t){return new Zt.WTw(t.fromInternal(e.command)??{command:e.command.id,title:e.command.title})}}(At||(At={})),function(e){e.from=function(e){return{kind:"textEdit",uri:e.uri,edits:e.edits.map((e=>se.from(e)))}},e.to=function(e){return new Zt.cGf(_.ov.revive(e.uri),e.edits.map((e=>se.to(e))))}}(Rt||(Rt={})),function(e){e.from=function(e){const t=g.kS.isThemeIcon(e.iconPath)?e.iconPath:_.ov.isUri(e.iconPath)?{light:_.ov.revive(e.iconPath)}:e.iconPath&&"light"in e.iconPath&&"dark"in e.iconPath&&_.ov.isUri(e.iconPath.light)&&_.ov.isUri(e.iconPath.dark)?{light:_.ov.revive(e.iconPath.light),dark:_.ov.revive(e.iconPath.dark)}:void 0;return"variableName"in e.value?{kind:"reference",reference:{variableName:e.value.variableName,value:_.ov.isUri(e.value.value)||!e.value.value?e.value.value:j.from(e.value.value)},iconPath:t}:{kind:"reference",reference:_.ov.isUri(e.value)?e.value:j.from(e.value),iconPath:t}},e.to=function(e){const t=(0,d.wL)(e),i=e=>_.ov.isUri(e)?e:j.to(e);return new Zt.Ht3("variableName"in t.reference?{variableName:t.reference.variableName,value:t.reference.value&&i(t.reference.value)}:i(t.reference))}}(Lt||(Lt={})),function(e){function t(e,t){switch(e.kind){case"markdownContent":return wt.to(e);case"inlineReference":return Dt.to(e);case"progressMessage":return;case"treeData":return St.to(e);case"command":return At.to(e,t)}}e.from=function(e,t,i){return e instanceof Zt.HYr?wt.from(e):e instanceof Zt.trJ?Dt.from(e):e instanceof Zt.Ht3?Lt.from(e):e instanceof Zt.Gli?Tt.from(e):e instanceof Zt.Y08?St.from(e):e instanceof Zt.WTw?At.from(e,t,i):e instanceof Zt.cGf?Rt.from(e):e instanceof Zt.Zgy?xt.from(e):e instanceof Zt.s8P?Ct.from(e):e instanceof Zt.fkf?kt.from(e):{kind:"markdownContent",content:te.from("")}},e.to=function(e,i){switch(e.kind){case"reference":return Lt.to(e);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return t(e,i)}},e.toContent=t}(Nt||(Nt={})),function(e){e.to=function(e){return{prompt:e.message,command:e.command,attempt:e.attempt??0,enableCommandDetection:e.enableCommandDetection??!0,references:e.variables.variables.map(Ft.to),location:Ot.to(e.location),acceptedConfirmationData:e.acceptedConfirmationData,rejectedConfirmationData:e.rejectedConfirmationData}}}($t||($t={})),function(e){e.to=function(e){switch(e){case T.O$.Notebook:return Zt.oYl.Notebook;case T.O$.Terminal:return Zt.oYl.Terminal;case T.O$.Panel:return Zt.oYl.Panel;case T.O$.Editor:return Zt.oYl.Editor}},e.from=function(e){switch(e){case Zt.oYl.Notebook:return T.O$.Notebook;case Zt.oYl.Terminal:return T.O$.Terminal;case Zt.oYl.Panel:return T.O$.Panel;case Zt.oYl.Editor:return T.O$.Editor}}}(Ot||(Ot={})),function(e){e.to=function(e){const t=e.value;if(!t)throw new Error("Invalid value reference");return{id:e.id,name:e.name,range:e.range&&[e.range.start,e.range.endExclusive],value:(0,_._9)(t)?_.ov.revive(t):t&&"object"==typeof t&&"uri"in t&&"range"in t&&(0,_._9)(t.uri)?j.to((0,d.wL)(t)):t,modelDescription:e.modelDescription}}}(Ft||(Ft={})),function(e){e.from=function(e,t,i){return{id:e.id,label:e.label,fullName:e.fullName,icon:e.icon?.id,value:e.values[0].value,insertText:e.insertText,detail:e.detail,documentation:e.documentation,command:t.toInternal(e.command,i)}}}(Mt||(Mt={})),function(e){e.to=function(e){return{errorDetails:e.errorDetails,metadata:e.metadata}}}(Ut||(Ut={})),function(e){e.to=function(e,t,i){if("vote"===t.action.kind)return;const n=Ut.to(e);if("command"===t.action.kind){const e=t.action.commandButton.command;return{action:{kind:"command",commandButton:{command:i.fromInternal(e)??{command:e.id,title:e.title}}},result:n}}if("followUp"===t.action.kind){return{action:{kind:"followUp",followup:vt.to(t.action.followup)},result:n}}return"inlineChat"===t.action.kind?{action:{kind:"editor",accepted:"accepted"===t.action.action},result:n}:{action:t.action,result:n}}}(Ht||(Ht={})),function(e){e.from=function(e,t,i){return"terminalCommand"in e?{terminalCommand:e.terminalCommand,shouldExecute:e.shouldExecute}:"uri"in e?{uri:e.uri}:t.toInternal(e,i)}}(zt||(zt={})),function(e){e.to=function(e){return{kind:Wt.to(e.kind)}}}(Bt||(Bt={})),function(e){e.to=function(e){switch(e){case w.NA.Word:return Zt.NAb.Word;case w.NA.Line:return Zt.NAb.Line;case w.NA.Suggest:return Zt.NAb.Suggest;default:return Zt.NAb.Unknown}}}(Wt||(Wt={})),function(e){e.from=function(e,t){return{id:t,label:e.label,description:e.description,canEdit:e.canEdit,collapsibleState:e.collapsibleState||jt.kU.None,contextValue:e.contextValue}}}(Vt||(Vt={})),function(e){e.to=function(e){return{name:e.name,description:e.description,parametersSchema:e.parametersSchema}}}(qt||(qt={}))},30874:function(e,t,i){i.d(t,{$KE:function(){return Gt},$R:function(){return fn},$hL:function(){return Ki},$uQ:function(){return X},ADb:function(){return ri},AIo:function(){return ji},ApZ:function(){return _i},Ay:function(){return Ti},B2n:function(){return me},CDv:function(){return pe},Cgf:function(){return Yn},Coj:function(){return $e},DHf:function(){return qn},DKv:function(){return Dt},DbP:function(){return J},EG5:function(){return Z},EU7:function(){return an},F3Y:function(){return Di},FGT:function(){return Le},FLm:function(){return Ht},FR$:function(){return mi},FZl:function(){return it},GLX:function(){return re},GSm:function(){return Zt},Gli:function(){return Fn},HCM:function(){return K},HGt:function(){return Bt},HYr:function(){return An},H_B:function(){return Y},Ht3:function(){return zn},Hu0:function(){return Ii},I01:function(){return Zn},I82:function(){return et},IAb:function(){return En},IAe:function(){return sn},IQN:function(){return Vn},IjA:function(){return Pe},Ik8:function(){return Nn},Ilk:function(){return Qe},InX:function(){return Vi},JCu:function(){return at},JDx:function(){return Rt},JFR:function(){return we},JNW:function(){return ue},JOq:function(){return $i},JQb:function(){return gi},JTr:function(){return O},K1l:function(){return Ut},KHd:function(){return yt},KPz:function(){return Si},LdD:function(){return Qi},Llw:function(){return Yt},Lyo:function(){return F},M$5:function(){return Ce},M0$:function(){return G},MIn:function(){return Ue},MPI:function(){return ve},MXZ:function(){return kt},MYA:function(){return se},Max:function(){return Q},N$N:function(){return ai},NAb:function(){return Fe},NEU:function(){return Gn},Ngc:function(){return Tn},NqL:function(){return Tt},OLe:function(){return dt},ORh:function(){return Qn},OTk:function(){return ci},PYv:function(){return j},Pts:function(){return ui},QII:function(){return ot},R9_:function(){return ie},RVV:function(){return be},Rxm:function(){return ye},S$x:function(){return bi},TED:function(){return qe},TGJ:function(){return Ft},TMt:function(){return Xe},TMw:function(){return ne},TPH:function(){return yi},TWf:function(){return rt},Tax:function(){return Jn},TpX:function(){return Mt},U07:function(){return Vt},UCC:function(){return Hi},UPf:function(){return xi},Ub$:function(){return Ne},Ul:function(){return Ri},UoH:function(){return Ot},Usx:function(){return zi},UwW:function(){return In},UyC:function(){return Dn},Uzh:function(){return pi},V8w:function(){return gn},W5C:function(){return xe},WBl:function(){return ht},WTw:function(){return Hn},WW0:function(){return De},Xdk:function(){return ti},Xfu:function(){return cn},XgO:function(){return kn},XsU:function(){return Ai},XuI:function(){return Xi},Y08:function(){return $n},Y0F:function(){return rn},Y19:function(){return U},YED:function(){return qi},YL6:function(){return $t},Y_o:function(){return bn},YeX:function(){return ee},YjK:function(){return ki},ZMD:function(){return Wi},Zgy:function(){return Rn},_AT:function(){return si},_VK:function(){return Be},_n6:function(){return Kn},_x0:function(){return Ye},acJ:function(){return Mi},azK:function(){return pn},b6q:function(){return V},bZY:function(){return Ci},bqK:function(){return oe},bur:function(){return Ve},bwv:function(){return Kt},c4G:function(){return Li},cGf:function(){return Bn},cRn:function(){return le},cYW:function(){return nn},cZI:function(){return zt},cmM:function(){return Ae},ctj:function(){return Ct},dEe:function(){return tn},dWA:function(){return We},dql:function(){return li},e2j:function(){return nt},e6w:function(){return M},eIC:function(){return Me},eg0:function(){return Wn},ehQ:function(){return ae},fQK:function(){return vn},fkf:function(){return Un},fyj:function(){return en},gl:function(){return Te},grl:function(){return hn},hNq:function(){return qt},hfl:function(){return jt},i23:function(){return tt},iQE:function(){return gt},jWy:function(){return Ge},jqr:function(){return Ui},kGi:function(){return Zi},kS8:function(){return Pt},kU2:function(){return Cn},kaV:function(){return Et},kfG:function(){return vt},kiP:function(){return wn},lF4:function(){return yn},lMH:function(){return ce},lP6:function(){return He},lSh:function(){return wt},lZM:function(){return di},llk:function(){return _e},ltp:function(){return Gi},meY:function(){return Mn},mgN:function(){return mt},n2H:function(){return hi},oCf:function(){return bt},oYl:function(){return un},ogl:function(){return Sn},oi2:function(){return Ze},p5U:function(){return ct},pdQ:function(){return on},pr0:function(){return Je},qDr:function(){return xt},qIz:function(){return Ee},qNe:function(){return pt},qR:function(){return ke},qRu:function(){return Ji},qaI:function(){return W},qlg:function(){return vi},r4c:function(){return de},rLr:function(){return Jt},rbC:function(){return Pi},rnR:function(){return _n},ryi:function(){return B},s8P:function(){return Ln},sUC:function(){return Lt},sfZ:function(){return Oi},sof:function(){return ni},sz_:function(){return z},t5:function(){return st},t7_:function(){return Ie},tHl:function(){return Xn},tPk:function(){return At},tfP:function(){return Oe},tnH:function(){return St},trJ:function(){return On},u8m:function(){return dn},uOQ:function(){return Pn},uTI:function(){return ft},unW:function(){return wi},vGG:function(){return q},va0:function(){return te},vvd:function(){return y},vyX:function(){return Se},w6Q:function(){return he},wDJ:function(){return ze},wJF:function(){return Qt},wUy:function(){return Ei},wa0:function(){return Xt},weh:function(){return Re},wxO:function(){return je},x$B:function(){return Ni},xJH:function(){return Bi},xJu:function(){return mn},xKz:function(){return oi},xTW:function(){return Fi},xf$:function(){return jn},xm7:function(){return fe},xmj:function(){return Yi},xwm:function(){return It},yGk:function(){return ut},yHy:function(){return Ke},yNd:function(){return ge},yNx:function(){return ii},ySx:function(){return ln},yr7:function(){return Wt},yzl:function(){return fi},z0r:function(){return _t},zR2:function(){return ei},zwE:function(){return xn}});var n,r,o,s,a,c,l,d,u,h,p,m,g,f,_,v,b,y,w=i(45493),x=i(78074),C=i(54316),E=i(99360),S=i(18910),D=i(95960),T=i(88023),k=i(47635),I=i(42731),P=i(92004),A=i(26258),R=i(28698),L=i(59822),N=i(30170);function $(e){const t={apply:function(...t){if(0===t.length)return Reflect.construct(e,[]);{const i=1===t.length?[]:t[1];return Reflect.construct(e,i,t[0].constructor)}},call:function(...t){if(0===t.length)return Reflect.construct(e,[]);{const[i,...n]=t;return Reflect.construct(e,n,i.constructor)}}};return Object.assign(e,t)}!function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"}(y||(y={}));let O=n=class{static from(...e){let t=e;return new n((function(){if(t){for(const e of t)e&&"function"==typeof e.dispose&&e.dispose();t=void 0}}))}#h;constructor(e){this.#h=e}dispose(){"function"==typeof this.#h&&(this.#h(),this.#h=void 0)}};O=n=(0,w.g)([$],O);let F=r=class{static Min(...e){if(0===e.length)throw new TypeError;let t=e[0];for(let i=1;i<e.length;i++){const n=e[i];n.isBefore(t)&&(t=n)}return t}static Max(...e){if(0===e.length)throw new TypeError;let t=e[0];for(let i=1;i<e.length;i++){const n=e[i];n.isAfter(t)&&(t=n)}return t}static isPosition(e){if(!e)return!1;if(e instanceof r)return!0;const{line:t,character:i}=e;return"number"==typeof t&&"number"==typeof i}static of(e){if(e instanceof r)return e;if(this.isPosition(e))return new r(e.line,e.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this._line}get character(){return this._character}constructor(e,t){if(e<0)throw(0,C.b1)("line must be non-negative");if(t<0)throw(0,C.b1)("character must be non-negative");this._line=e,this._character=t}isBefore(e){return this._line<e._line||!(e._line<this._line)&&this._character<e._character}isBeforeOrEqual(e){return this._line<e._line||!(e._line<this._line)&&this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,t=0){if(null===e||null===t)throw(0,C.b1)();let i;return void 0===e?i=0:"number"==typeof e?i=e:(i="number"==typeof e.lineDelta?e.lineDelta:0,t="number"==typeof e.characterDelta?e.characterDelta:0),0===i&&0===t?this:new r(this.line+i,this.character+t)}with(e,t=this.character){if(null===e||null===t)throw(0,C.b1)();let i;return void 0===e?i=this.line:"number"==typeof e?i=e:(i="number"==typeof e.line?e.line:this.line,t="number"==typeof e.character?e.character:this.character),i===this.line&&t===this.character?this:new r(i,t)}toJSON(){return{line:this.line,character:this.character}}};F=r=(0,w.g)([$],F);let M=o=class{static isRange(e){return e instanceof o||!!e&&(F.isPosition(e.start)&&F.isPosition(e.end))}static of(e){if(e instanceof o)return e;if(this.isRange(e))return new o(e.start,e.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this._start}get end(){return this._end}constructor(e,t,i,n){let r,o;if("number"==typeof e&&"number"==typeof t&&"number"==typeof i&&"number"==typeof n?(r=new F(e,t),o=new F(i,n)):F.isPosition(e)&&F.isPosition(t)&&(r=F.of(e),o=F.of(t)),!r||!o)throw new Error("Invalid arguments");r.isBefore(o)?(this._start=r,this._end=o):(this._start=o,this._end=r)}contains(e){return o.isRange(e)?this.contains(e.start)&&this.contains(e.end):!!F.isPosition(e)&&(!F.of(e).isBefore(this._start)&&!this._end.isBefore(e))}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){const t=F.Max(e.start,this._start),i=F.Min(e.end,this._end);if(!t.isAfter(i))return new o(t,i)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;const t=F.Min(e.start,this._start),i=F.Max(e.end,this.end);return new o(t,i)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,t=this.end){if(null===e||null===t)throw(0,C.b1)();let i;return e?F.isPosition(e)?i=e:(i=e.start||this.start,t=e.end||this.end):i=this.start,i.isEqual(this._start)&&t.isEqual(this.end)?this:new o(i,t)}toJSON(){return[this.start,this.end]}};M=o=(0,w.g)([$],M);let U=s=class extends M{static isSelection(e){return e instanceof s||!!e&&(M.isRange(e)&&F.isPosition(e.anchor)&&F.isPosition(e.active)&&"boolean"==typeof e.isReversed)}get anchor(){return this._anchor}get active(){return this._active}constructor(e,t,i,n){let r,o;if("number"==typeof e&&"number"==typeof t&&"number"==typeof i&&"number"==typeof n?(r=new F(e,t),o=new F(i,n)):F.isPosition(e)&&F.isPosition(t)&&(r=F.of(e),o=F.of(t)),!r||!o)throw new Error("Invalid arguments");super(r,o),this._anchor=r,this._active=o}get isReversed(){return this._anchor===this._end}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}};U=s=(0,w.g)([$],U);const H=e=>{if("string"!=typeof e||0===e.length||!/^[0-9A-Za-z_\-]+$/.test(e))throw(0,C.b1)("connectionToken")};class z{static isResolvedAuthority(e){return e&&"object"==typeof e&&"string"==typeof e.host&&"number"==typeof e.port&&(void 0===e.connectionToken||"string"==typeof e.connectionToken)}constructor(e,t,i){if("string"!=typeof e||0===e.length)throw(0,C.b1)("host");if("number"!=typeof t||0===t||Math.round(t)!==t)throw(0,C.b1)("port");void 0!==i&&H(i),this.host=e,this.port=Math.round(t),this.connectionToken=i}}class B{static isManagedResolvedAuthority(e){return e&&"object"==typeof e&&"function"==typeof e.makeConnection&&(void 0===e.connectionToken||"string"==typeof e.connectionToken)}constructor(e,t){this.makeConnection=e,this.connectionToken=t,void 0!==t&&H(t)}}class W extends Error{static NotAvailable(e,t){return new W(e,L.XP.NotAvailable,t)}static TemporarilyNotAvailable(e){return new W(e,L.XP.TemporarilyNotAvailable)}constructor(e,t=L.XP.Unknown,i){super(e),this._message=e,this._code=t,this._detail=i,Object.setPrototypeOf(this,W.prototype)}}var V,q;!function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(V||(V={})),function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"}(q||(q={}));let j=a=class{static isTextEdit(e){return e instanceof a||!!e&&(M.isRange(e)&&"string"==typeof e.newText)}static replace(e,t){return new a(e,t)}static insert(e,t){return a.replace(new M(e,e),t)}static delete(e){return a.replace(e,"")}static setEndOfLine(e){const t=new a(new M(new F(0,0),new F(0,0)),"");return t.newEol=e,t}get range(){return this._range}set range(e){if(e&&!M.isRange(e))throw(0,C.b1)("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&"string"!=typeof e)throw(0,C.b1)("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&"number"!=typeof e)throw(0,C.b1)("newEol");this._newEol=e}constructor(e,t){this._range=e,this._newText=t}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};j=a=(0,w.g)([$],j);let K=c=class{static isNotebookCellEdit(e){return e instanceof c||!!e&&(Ai.isNotebookRange(e)&&Array.isArray(e.newCells))}static replaceCells(e,t){return new c(e,t)}static insertCells(e,t){return new c(new Ai(e,e),t)}static deleteCells(e){return new c(e,[])}static updateCellMetadata(e,t){const i=new c(new Ai(e,e),[]);return i.newCellMetadata=t,i}static updateNotebookMetadata(e){const t=new c(new Ai(0,0),[]);return t.newNotebookMetadata=e,t}constructor(e,t){this.range=e,this.newCells=t}};K=c=(0,w.g)([$],K);class G{static isSnippetTextEdit(e){return e instanceof G||!!e&&(M.isRange(e.range)&&Z.isSnippetString(e.snippet))}static replace(e,t){return new G(e,t)}static insert(e,t){return G.replace(new M(e,e),t)}constructor(e,t){this.range=e,this.snippet=t}}var Q;!function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"}(Q||(Q={}));let J=class{constructor(){this._edits=[]}_allEntries(){return this._edits}renameFile(e,t,i,n){this._edits.push({_type:Q.File,from:e,to:t,options:i,metadata:n})}createFile(e,t,i){this._edits.push({_type:Q.File,from:void 0,to:e,options:t,metadata:i})}deleteFile(e,t,i){this._edits.push({_type:Q.File,from:e,to:void 0,options:t,metadata:i})}replaceNotebookMetadata(e,t,i){this._edits.push({_type:Q.Cell,metadata:i,uri:e,edit:{editType:N.w.DocumentMetadata,metadata:t},notebookMetadata:t})}replaceNotebookCells(e,t,i,n){const r=t.start,o=t.end;(r!==o||i.length>0)&&this._edits.push({_type:Q.CellReplace,uri:e,index:r,count:o-r,cells:i,metadata:n})}replaceNotebookCellMetadata(e,t,i,n){this._edits.push({_type:Q.Cell,metadata:n,uri:e,edit:{editType:N.w.Metadata,index:t,metadata:i}})}replace(e,t,i,n){this._edits.push({_type:Q.Text,uri:e,edit:new j(t,i),metadata:n})}insert(e,t,i,n){this.replace(e,new M(t,t),i,n)}delete(e,t,i){this.replace(e,t,"",i)}has(e){return this._edits.some((t=>t._type===Q.Text&&t.uri.toString()===e.toString()))}set(e,t){if(t)for(const i of t){if(!i)continue;let t,n;Array.isArray(i)?(t=i[0],n=i[1]):t=i,K.isNotebookCellEdit(t)?t.newCellMetadata?this.replaceNotebookCellMetadata(e,t.range.start,t.newCellMetadata,n):t.newNotebookMetadata?this.replaceNotebookMetadata(e,t.newNotebookMetadata,n):this.replaceNotebookCells(e,t.range,t.newCells,n):G.isSnippetTextEdit(t)?this._edits.push({_type:Q.Snippet,uri:e,range:t.range,edit:t.snippet,metadata:n}):this._edits.push({_type:Q.Text,uri:e,edit:t,metadata:n})}else{for(let t=0;t<this._edits.length;t++){const i=this._edits[t];switch(i._type){case Q.Text:case Q.Snippet:case Q.Cell:case Q.CellReplace:i.uri.toString()===e.toString()&&(this._edits[t]=void 0)}}(0,x.Rs)(this._edits)}}get(e){const t=[];for(const i of this._edits)i._type===Q.Text&&i.uri.toString()===e.toString()&&t.push(i.edit);return t}entries(){const e=new S.Y9;for(const t of this._edits)if(t._type===Q.Text){let i=e.get(t.uri);i||(i=[t.uri,[]],e.set(t.uri,i)),i[1].push(t.edit)}return[...e.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};J=(0,w.g)([$],J);let Z=l=class{static isSnippetString(e){return e instanceof l||!!e&&"string"==typeof e.value}static _escape(e){return e.replace(/\$|}|\\/g,"\\$&")}constructor(e){this._tabstop=1,this.value=e||""}appendText(e){return this.value+=l._escape(e),this}appendTabstop(e=this._tabstop++){return this.value+="$",this.value+=e,this}appendPlaceholder(e,t=this._tabstop++){if("function"==typeof e){const t=new l;t._tabstop=this._tabstop,e(t),this._tabstop=t._tabstop,e=t.value}else e=l._escape(e);return this.value+="${",this.value+=t,this.value+=":",this.value+=e,this.value+="}",this}appendChoice(e,t=this._tabstop++){const i=e.map((e=>e.replaceAll(/[|\\,]/g,"\\$&"))).join(",");return this.value+="${",this.value+=t,this.value+="|",this.value+=i,this.value+="|}",this}appendVariable(e,t){if("function"==typeof t){const e=new l;e._tabstop=this._tabstop,t(e),this._tabstop=e._tabstop,t=e.value}else"string"==typeof t&&(t=t.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=e,t&&(this.value+=":",this.value+=t),this.value+="}",this}};var X,Y;Z=l=(0,w.g)([$],Z),function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"}(X||(X={})),function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"}(Y||(Y={}));let ee=d=class{static isLocation(e){return e instanceof d||!!e&&(M.isRange(e.range)&&I.ov.isUri(e.uri))}constructor(e,t){if(this.uri=e,t)if(M.isRange(t))this.range=M.of(t);else{if(!F.isPosition(t))throw new Error("Illegal argument");this.range=new M(t,t)}else;}toJSON(){return{uri:this.uri,range:this.range}}};ee=d=(0,w.g)([$],ee);let te=class{static is(e){return!!e&&("string"==typeof e.message&&e.location&&M.isRange(e.location.range)&&I.ov.isUri(e.location.uri))}constructor(e,t){this.location=e,this.message=t}static isEqual(e,t){return e===t||!(!e||!t)&&(e.message===t.message&&e.location.range.isEqual(t.location.range)&&e.location.uri.toString()===t.location.uri.toString())}};te=(0,w.g)([$],te);let ie=class{constructor(e,t,i=Y.Error){if(!M.isRange(e))throw new TypeError("range must be set");if(!t)throw new TypeError("message must be set");this.range=e,this.message=t,this.severity=i}toJSON(){return{severity:Y[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(e,t){return e===t||!(!e||!t)&&(e.message===t.message&&e.severity===t.severity&&e.code===t.code&&e.severity===t.severity&&e.source===t.source&&e.range.isEqual(t.range)&&(0,x.fS)(e.tags,t.tags)&&(0,x.fS)(e.relatedInformation,t.relatedInformation,te.isEqual))}};ie=(0,w.g)([$],ie);let ne=class{constructor(e,t){if(!e)throw new Error("Illegal argument, contents must be defined");Array.isArray(e)?this.contents=e:this.contents=[e],this.range=t}};ne=(0,w.g)([$],ne);let re=class extends ne{constructor(e,t,i,n){super(e,t),this.canIncreaseHover=i,this.canDecreaseHover=n}};var oe,se;re=(0,w.g)([$],re),function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(oe||(oe={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(se||(se={}));let ae=class{constructor(e,t=se.Text){this.range=e,this.kind=t}toJSON(){return{range:this.range,kind:se[this.kind]}}};ae=(0,w.g)([$],ae);let ce=class{constructor(e,t){this.uri=e,this.highlights=t}toJSON(){return{uri:this.uri,highlights:this.highlights.map((e=>e.toJSON()))}}};var le,de;ce=(0,w.g)([$],ce),function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"}(le||(le={})),function(e){e[e.Deprecated=1]="Deprecated"}(de||(de={}));let ue=u=class{static validate(e){if(!e.name)throw new Error("name must not be falsy")}constructor(e,t,i,n,r){this.name=e,this.kind=t,this.containerName=r,"string"==typeof i&&(this.containerName=i),n instanceof ee?this.location=n:i instanceof M&&(this.location=new ee(n,i)),u.validate(this)}toJSON(){return{name:this.name,kind:le[this.kind],location:this.location,containerName:this.containerName}}};ue=u=(0,w.g)([$],ue);let he=h=class{static validate(e){if(!e.name)throw new Error("name must not be falsy");if(!e.range.contains(e.selectionRange))throw new Error("selectionRange must be contained in fullRange");e.children?.forEach(h.validate)}constructor(e,t,i,n,r){this.name=e,this.detail=t,this.kind=i,this.range=n,this.selectionRange=r,this.children=[],h.validate(this)}};var pe;he=h=(0,w.g)([$],he),function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"}(pe||(pe={}));let me=class{constructor(e,t){this.title=e,this.kind=t}};me=(0,w.g)([$],me);let ge=class{static{p=this}static{this.sep="."}constructor(e){this.value=e}append(e){return new p(this.value?this.value+p.sep+e:e)}intersects(e){return this.contains(e)||e.contains(this)}contains(e){return this.value===e.value||e.value.startsWith(this.value+p.sep)}};ge=p=(0,w.g)([$],ge),ge.Empty=new ge(""),ge.QuickFix=ge.Empty.append("quickfix"),ge.Refactor=ge.Empty.append("refactor"),ge.RefactorExtract=ge.Refactor.append("extract"),ge.RefactorInline=ge.Refactor.append("inline"),ge.RefactorMove=ge.Refactor.append("move"),ge.RefactorRewrite=ge.Refactor.append("rewrite"),ge.Source=ge.Empty.append("source"),ge.SourceOrganizeImports=ge.Source.append("organizeImports"),ge.SourceFixAll=ge.Source.append("fixAll"),ge.Notebook=ge.Empty.append("notebook");let fe=class{constructor(e,t){if(this.range=e,this.parent=t,t&&!t.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};fe=(0,w.g)([$],fe);class _e{constructor(e,t,i,n,r,o){this.kind=e,this.name=t,this.detail=i,this.uri=n,this.range=r,this.selectionRange=o}}class ve{constructor(e,t){this.fromRanges=t,this.from=e}}class be{constructor(e,t){this.fromRanges=t,this.to=e}}var ye;!function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"}(ye||(ye={}));let we=class{constructor(e,t){this.range=e,this.command=t}get isResolved(){return!!this.command}};we=(0,w.g)([$],we);let xe=m=class{#p;static isMarkdownString(e){return e instanceof m||e&&e.appendCodeblock&&e.appendMarkdown&&e.appendText&&void 0!==e.value}constructor(e,t=!1){this.#p=new E.W5(e,{supportThemeIcons:t})}get value(){return this.#p.value}set value(e){this.#p.value=e}get isTrusted(){return this.#p.isTrusted}set isTrusted(e){this.#p.isTrusted=e}get supportThemeIcons(){return this.#p.supportThemeIcons}set supportThemeIcons(e){this.#p.supportThemeIcons=e}get supportHtml(){return this.#p.supportHtml}set supportHtml(e){this.#p.supportHtml=e}get baseUri(){return this.#p.baseUri}set baseUri(e){this.#p.baseUri=e}appendText(e){return this.#p.appendText(e),this}appendMarkdown(e){return this.#p.appendMarkdown(e),this}appendCodeblock(e,t){return this.#p.appendCodeblock(t??"",e),this}};xe=m=(0,w.g)([$],xe);let Ce=class{constructor(e,t){this.label=e,this.documentation=t}};Ce=(0,w.g)([$],Ce);let Ee=class{constructor(e,t){this.label=e,this.documentation=t,this.parameters=[]}};Ee=(0,w.g)([$],Ee);let Se=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};var De,Te;Se=(0,w.g)([$],Se),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(De||(De={})),function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(Te||(Te={}));let ke=class{constructor(e){this.value=e}};ke=(0,w.g)([$],ke);let Ie=class{constructor(e,t,i){this.position=e,this.label=t,this.kind=i}};var Pe,Ae,Re;Ie=(0,w.g)([$],Ie),function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"}(Pe||(Pe={})),function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"}(Ae||(Ae={})),function(e){e[e.Deprecated=1]="Deprecated"}(Re||(Re={}));let Le=class{constructor(e,t){this.label=e,this.kind=t}toJSON(){return{label:this.label,kind:this.kind&&Ae[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};Le=(0,w.g)([$],Le);let Ne=class{constructor(e=[],t=!1){this.items=e,this.isIncomplete=t}};Ne=(0,w.g)([$],Ne);let $e=class{constructor(e,t,i){this.insertText=e,this.range=t,this.command=i}};$e=(0,w.g)([$],$e);let Oe=class{constructor(e){this.commands=void 0,this.suppressSuggestions=void 0,this.items=e}};var Fe,Me,Ue,He,ze,Be,We,Ve,qe,je;function Ke(e,t){return`${A.kP.toKey(e)}.${t}`}Oe=(0,w.g)([$],Oe),function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"}(Fe||(Fe={})),function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"}(Me||(Me={})),function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"}(Ue||(Ue={})),function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"}(He||(He={})),function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"}(ze||(ze={})),function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"}(Be||(Be={})),function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"}(We||(We={})),function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"}(Ve||(Ve={})),function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"}(qe||(qe={})),function(e){e.fromValue=function(t){switch(t){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":return e.Command}}}(We||(We={})),function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"}(je||(je={})),function(e){e.toString=function(t){switch(t){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}}(je||(je={}));let Ge=class{constructor(e,t){if(t&&!I.ov.isUri(t))throw(0,C.b1)("target");if(!M.isRange(e)||e.isEmpty)throw(0,C.b1)("range");this.range=e,this.target=t}};Ge=(0,w.g)([$],Ge);let Qe=class{constructor(e,t,i,n){this.red=e,this.green=t,this.blue=i,this.alpha=n}};Qe=(0,w.g)([$],Qe);let Je=class{constructor(e,t){if(t&&!(t instanceof Qe))throw(0,C.b1)("color");if(!M.isRange(e)||e.isEmpty)throw(0,C.b1)("range");this.range=e,this.color=t}};Je=(0,w.g)([$],Je);let Ze=class{constructor(e){if(!e||"string"!=typeof e)throw(0,C.b1)("label");this.label=e}};var Xe,Ye,et,tt,it,nt;Ze=(0,w.g)([$],Ze),function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"}(Xe||(Xe={})),function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"}(Ye||(Ye={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(et||(et={}));class rt{constructor(e,t,i){if(this.startIndex=e,this.length=t,this.tooltip=i,"number"!=typeof e||e<0)throw(0,C.b1)("startIndex");if("number"!=typeof t||t<1)throw(0,C.b1)("length");if(void 0!==i&&"string"!=typeof i)throw(0,C.b1)("tooltip")}}class ot{constructor(e){this.uri=e}}class st{constructor(e){this.terminalCommand=e}}!function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"}(tt||(tt={}));class at{constructor(e){if(this.options=e,"object"!=typeof e)throw(0,C.b1)("options")}}!function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"}(it||(it={})),function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"}(nt||(nt={}));let ct=class{static{g=this}static{this.Clean=new g("clean","Clean")}static{this.Build=new g("build","Build")}static{this.Rebuild=new g("rebuild","Rebuild")}static{this.Test=new g("test","Test")}static from(e){switch(e){case"clean":return g.Clean;case"build":return g.Build;case"rebuild":return g.Rebuild;case"test":return g.Test;default:return}}constructor(e,t){if(this.label=t,"string"!=typeof e)throw(0,C.b1)("name");if("string"!=typeof t)throw(0,C.b1)("name");this._id=e}get id(){return this._id}};function lt(e){let t="";for(let i=0;i<e.length;i++)t+=e[i].replace(/,/g,",,")+",";return t}ct=g=(0,w.g)([$],ct);let dt=class{constructor(e,t,i){if("string"!=typeof e)throw(0,C.b1)("process");this._args=[],this._process=e,void 0!==t&&(Array.isArray(t)?(this._args=t,this._options=i):this._options=t)}get process(){return this._process}set process(e){if("string"!=typeof e)throw(0,C.b1)("process");this._process=e}get args(){return this._args}set args(e){Array.isArray(e)||(e=[]),this._args=e}get options(){return this._options}set options(e){this._options=e}computeId(){const e=[];if(e.push("process"),void 0!==this._process&&e.push(this._process),this._args&&this._args.length>0)for(const t of this._args)e.push(t);return lt(e)}};dt=(0,w.g)([$],dt);let ut=class{constructor(e,t,i){if(this._args=[],Array.isArray(t)){if(!e)throw(0,C.b1)("command can't be undefined or null");if("string"!=typeof e&&"string"!=typeof e.value)throw(0,C.b1)("command");this._command=e,this._args=t,this._options=i}else{if("string"!=typeof e)throw(0,C.b1)("commandLine");this._commandLine=e,this._options=t}}get commandLine(){return this._commandLine}set commandLine(e){if("string"!=typeof e)throw(0,C.b1)("commandLine");this._commandLine=e}get command(){return this._command?this._command:""}set command(e){if("string"!=typeof e&&"string"!=typeof e.value)throw(0,C.b1)("command");this._command=e}get args(){return this._args}set args(e){this._args=e||[]}get options(){return this._options}set options(e){this._options=e}computeId(){const e=[];if(e.push("shell"),void 0!==this._commandLine&&e.push(this._commandLine),void 0!==this._command&&e.push("string"==typeof this._command?this._command:this._command.value),this._args&&this._args.length>0)for(const t of this._args)e.push("string"==typeof t?t:t.value);return lt(e)}};var ht,pt;ut=(0,w.g)([$],ut),function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"}(ht||(ht={})),function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"}(pt||(pt={}));class mt{constructor(e){this._callback=e}computeId(){return"customExecution"+(0,P.R)()}set callback(e){this._callback=e}get callback(){return this._callback}}let gt=class{static{f=this}static{this.ExtensionCallbackType="customExecution"}static{this.ProcessType="process"}static{this.ShellType="shell"}static{this.EmptyType="$empty"}constructor(e,t,i,n,r,o){let s;this.__deprecated=!1,this._definition=this.definition=e,"string"==typeof t?(this._name=this.name=t,this._source=this.source=i,this.execution=n,s=r,this.__deprecated=!0):(t===pt.Global||pt.Workspace,this.target=t,this._name=this.name=i,this._source=this.source=n,this.execution=r,s=o),"string"==typeof s?(this._problemMatchers=[s],this._hasDefinedMatchers=!0):Array.isArray(s)?(this._problemMatchers=s,this._hasDefinedMatchers=!0):(this._problemMatchers=[],this._hasDefinedMatchers=!1),this._isBackground=!1,this._presentationOptions=Object.create(null),this._runOptions=Object.create(null)}get _id(){return this.__id}set _id(e){this.__id=e}get _deprecated(){return this.__deprecated}clear(){void 0!==this.__id&&(this.__id=void 0,this._scope=void 0,this.computeDefinitionBasedOnExecution())}computeDefinitionBasedOnExecution(){this._execution instanceof dt?this._definition={type:f.ProcessType,id:this._execution.computeId()}:this._execution instanceof ut?this._definition={type:f.ShellType,id:this._execution.computeId()}:this._execution instanceof mt?this._definition={type:f.ExtensionCallbackType,id:this._execution.computeId()}:this._definition={type:f.EmptyType,id:(0,P.R)()}}get definition(){return this._definition}set definition(e){if(null==e)throw(0,C.b1)("Kind can't be undefined or null");this.clear(),this._definition=e}get scope(){return this._scope}set target(e){this.clear(),this._scope=e}get name(){return this._name}set name(e){if("string"!=typeof e)throw(0,C.b1)("name");this.clear(),this._name=e}get execution(){return this._execution}set execution(e){null===e&&(e=void 0),this.clear(),this._execution=e;const t=this._definition.type;f.EmptyType!==t&&f.ProcessType!==t&&f.ShellType!==t&&f.ExtensionCallbackType!==t||this.computeDefinitionBasedOnExecution()}get problemMatchers(){return this._problemMatchers}set problemMatchers(e){if(!Array.isArray(e))return this.clear(),this._problemMatchers=[],void(this._hasDefinedMatchers=!1);this.clear(),this._problemMatchers=e,this._hasDefinedMatchers=!0}get hasDefinedMatchers(){return this._hasDefinedMatchers}get isBackground(){return this._isBackground}set isBackground(e){!0!==e&&!1!==e&&(e=!1),this.clear(),this._isBackground=e}get source(){return this._source}set source(e){if("string"!=typeof e||0===e.length)throw(0,C.b1)("source must be a string of length > 0");this.clear(),this._source=e}get group(){return this._group}set group(e){null===e&&(e=void 0),this.clear(),this._group=e}get detail(){return this._detail}set detail(e){null===e&&(e=void 0),this._detail=e}get presentationOptions(){return this._presentationOptions}set presentationOptions(e){null==e&&(e=Object.create(null)),this.clear(),this._presentationOptions=e}get runOptions(){return this._runOptions}set runOptions(e){null==e&&(e=Object.create(null)),this.clear(),this._runOptions=e}};var ft,_t;gt=f=(0,w.g)([$],gt),function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"}(ft||(ft={})),function(e){e.isViewBadge=function(e){const t=e;return(0,k.hj)(t.value)?!(t.tooltip&&!(0,k.HD)(t.tooltip))||(console.log("INVALID view badge, invalid tooltip",t.tooltip),!1):(console.log("INVALID view badge, invalid value",t.value),!1)}}(_t||(_t={}));let vt=_=class{static isTreeItem(e,t){const i=e;if(void 0!==i.checkboxState){const e=(0,k.hj)(i.checkboxState)?i.checkboxState:(0,k.Kn)(i.checkboxState)&&(0,k.hj)(i.checkboxState.state)?i.checkboxState.state:void 0,t=!(0,k.hj)(i.checkboxState)&&(0,k.Kn)(i.checkboxState)?i.checkboxState.tooltip:void 0;if(void 0===e||e!==yt.Checked&&e!==yt.Unchecked||void 0!==t&&!(0,k.HD)(t))return console.log("INVALID tree item, invalid checkboxState",i.checkboxState),!1}if(e instanceof _)return!0;if(void 0!==i.label&&!(0,k.HD)(i.label)&&!i.label?.label)return console.log("INVALID tree item, invalid label",i.label),!1;if(void 0!==i.id&&!(0,k.HD)(i.id))return console.log("INVALID tree item, invalid id",i.id),!1;if(!(void 0===i.iconPath||(0,k.HD)(i.iconPath)||I.ov.isUri(i.iconPath)||i.iconPath&&(0,k.HD)(i.iconPath.id))){const e=i.iconPath;if(!e||!(0,k.HD)(e.light)&&!I.ov.isUri(e.light)&&!(0,k.HD)(e.dark)&&!I.ov.isUri(e.dark))return console.log("INVALID tree item, invalid iconPath",i.iconPath),!1}return void 0===i.description||(0,k.HD)(i.description)||"boolean"==typeof i.description?void 0===i.resourceUri||I.ov.isUri(i.resourceUri)?void 0===i.tooltip||(0,k.HD)(i.tooltip)||i.tooltip instanceof xe?void 0===i.command||i.command.command?void 0!==i.collapsibleState&&i.collapsibleState<bt.None&&i.collapsibleState>bt.Expanded?(console.log("INVALID tree item, invalid collapsibleState",i.collapsibleState),!1):void 0===i.contextValue||(0,k.HD)(i.contextValue)?!(void 0!==i.accessibilityInformation&&!i.accessibilityInformation?.label)||(console.log("INVALID tree item, invalid accessibilityInformation",i.accessibilityInformation),!1):(console.log("INVALID tree item, invalid contextValue",i.contextValue),!1):(console.log("INVALID tree item, invalid command",i.command),!1):(console.log("INVALID tree item, invalid tooltip",i.tooltip),!1):(console.log("INVALID tree item, invalid resourceUri",i.resourceUri),!1):(console.log("INVALID tree item, invalid description",i.description),!1)}constructor(e,t=bt.None){this.collapsibleState=t,I.ov.isUri(e)?this.resourceUri=e:this.label=e}};var bt,yt;vt=_=(0,w.g)([$],vt),function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"}(bt||(bt={})),function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"}(yt||(yt={}));let wt=class{async asString(){return"string"==typeof this.value?this.value:JSON.stringify(this.value)}asFile(){}constructor(e){this.value=e}};wt=(0,w.g)([$],wt);class xt extends wt{}class Ct extends xt{#m;constructor(e){super(""),this.#m=e}asFile(){return this.#m}}class Et{constructor(e,t,i,n){this.name=e,this.uri=t,this._itemId=i,this._getData=n}data(){return this._getData()}}let St=class{#g=new Map;constructor(e){for(const[t,i]of e??[]){const e=this.#g.get(this.#f(t));e?e.push(i):this.#g.set(this.#f(t),[i])}}get(e){return this.#g.get(this.#f(e))?.[0]}set(e,t){this.#g.set(this.#f(e),[t])}forEach(e,t){for(const[i,n]of this.#g)for(const r of n)e.call(t,r,i,this)}*[Symbol.iterator](){for(const[e,t]of this.#g)for(const i of t)yield[e,i]}#f(e){return e.toLowerCase()}};St=(0,w.g)([$],St);let Dt=class{constructor(e,t,i){this.insertText=e,this.title=t,this.kind=i}};var Tt;Dt=(0,w.g)([$],Dt),function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"}(Tt||(Tt={}));class kt{static{this.sep="."}constructor(e){this.value=e}append(...e){return new kt((this.value?[this.value,...e]:e).join(kt.sep))}intersects(e){return this.contains(e)||e.contains(this)}contains(e){return this.value===e.value||e.value.startsWith(this.value+kt.sep)}}kt.Empty=new kt("");class It{constructor(e,t,i){this.title=t,this.insertText=e,this.kind=i}}let Pt=class{constructor(e,t){this.id=e,this.color=t}static isThemeIcon(e){return"string"==typeof e.id||(console.log("INVALID ThemeIcon, invalid id",e.id),!1)}};Pt=(0,w.g)([$],Pt),Pt.File=new Pt("file"),Pt.Folder=new Pt("folder");let At=class{constructor(e){this.id=e}};var Rt;At=(0,w.g)([$],At),function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"}(Rt||(Rt={}));let Lt=class{get base(){return this._base}set base(e){this._base=e,this._baseUri=I.ov.file(e)}get baseUri(){return this._baseUri}set baseUri(e){this._baseUri=e,this._base=e.fsPath}constructor(e,t){if("string"!=typeof e&&(!e||!I.ov.isUri(e)&&!I.ov.isUri(e.uri)))throw(0,C.b1)("base");if("string"!=typeof t)throw(0,C.b1)("pattern");"string"==typeof e?this.baseUri=I.ov.file(e):I.ov.isUri(e)?this.baseUri=e:this.baseUri=e.uri,this.pattern=t}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};Lt=(0,w.g)([$],Lt);const Nt=new WeakMap;function $t(e,t){Nt.set(e,t)}let Ot=class{constructor(e,t,i,n,r){this.enabled="boolean"!=typeof e||e,"string"==typeof t&&(this.condition=t),"string"==typeof i&&(this.hitCondition=i),"string"==typeof n&&(this.logMessage=n),"string"==typeof r&&(this.mode=r)}get id(){return this._id||(this._id=Nt.get(this)??(0,P.R)()),this._id}};Ot=(0,w.g)([$],Ot);let Ft=class extends Ot{constructor(e,t,i,n,r,o){if(super(t,i,n,r,o),null===e)throw(0,C.b1)("location");this.location=e}};Ft=(0,w.g)([$],Ft);let Mt=class extends Ot{constructor(e,t,i,n,r,o){super(t,i,n,r,o),this.functionName=e}};Mt=(0,w.g)([$],Mt);let Ut=class extends Ot{constructor(e,t,i,n,r,o,s,a){if(super(n,r,o,s,a),!t)throw(0,C.b1)("dataId");this.label=e,this.dataId=t,this.canPersist=i}};Ut=(0,w.g)([$],Ut);let Ht=class{constructor(e,t,i){this.command=e,this.args=t||[],this.options=i}};Ht=(0,w.g)([$],Ht);let zt=class{constructor(e,t){this.port=e,this.host=t}};zt=(0,w.g)([$],zt);let Bt=class{constructor(e){this.path=e}};Bt=(0,w.g)([$],Bt);let Wt=class{constructor(e){this.implementation=e}};Wt=(0,w.g)([$],Wt);class Vt{constructor(e,t,i){this.session=e,this.threadId=t,this.frameId=i}}class qt{constructor(e,t){this.session=e,this.threadId=t}}let jt=class{constructor(e,t){this.range=e,this.expression=t}};var Kt;jt=(0,w.g)([$],jt),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(Kt||(Kt={}));let Gt=class{constructor(e,t){this.range=e,this.text=t}};Gt=(0,w.g)([$],Gt);let Qt=class{constructor(e,t,i=!0){this.range=e,this.variableName=t,this.caseSensitiveLookup=i}};Qt=(0,w.g)([$],Qt);let Jt=class{constructor(e,t){this.range=e,this.expression=t}};Jt=(0,w.g)([$],Jt);let Zt=class{constructor(e,t){this.frameId=e,this.stoppedLocation=t}};var Xt,Yt,ei;Zt=(0,w.g)([$],Zt),function(e){e[e.AIGenerated=1]="AIGenerated"}(Xt||(Xt={})),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(Yt||(Yt={}));class ti{constructor(e,t){this.newSymbolName=e,this.tags=t}}!function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"}(ei||(ei={}));let ii=v=class extends Error{static FileExists(e){return new v(e,R.bH.FileExists,v.FileExists)}static FileNotFound(e){return new v(e,R.bH.FileNotFound,v.FileNotFound)}static FileNotADirectory(e){return new v(e,R.bH.FileNotADirectory,v.FileNotADirectory)}static FileIsADirectory(e){return new v(e,R.bH.FileIsADirectory,v.FileIsADirectory)}static NoPermissions(e){return new v(e,R.bH.NoPermissions,v.NoPermissions)}static Unavailable(e){return new v(e,R.bH.Unavailable,v.Unavailable)}constructor(e,t=R.bH.Unknown,i){super(I.ov.isUri(e)?e.toString(!0):e),this.code=i?.name??"Unknown",(0,R.q5)(this,t),Object.setPrototypeOf(this,v.prototype),"function"==typeof Error.captureStackTrace&&"function"==typeof i&&Error.captureStackTrace(this,i)}};ii=v=(0,w.g)([$],ii);let ni=class{constructor(e,t,i){this.start=e,this.end=t,this.kind=i}};var ri,oi,si,ai,ci,li,di;ni=(0,w.g)([$],ni),function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"}(ri||(ri={})),function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"}(oi||(oi={})),function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"}(si||(si={})),function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"}(ai||(ai={})),function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"}(ci||(ci={})),function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"}(li||(li={}));class ui{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}}class hi{constructor(e){if(this._prevLine=0,this._prevChar=0,this._dataIsSortedAndDeltaEncoded=!0,this._data=[],this._dataLen=0,this._tokenTypeStrToInt=new Map,this._tokenModifierStrToInt=new Map,this._hasLegend=!1,e){this._hasLegend=!0;for(let t=0,i=e.tokenTypes.length;t<i;t++)this._tokenTypeStrToInt.set(e.tokenTypes[t],t);for(let t=0,i=e.tokenModifiers.length;t<i;t++)this._tokenModifierStrToInt.set(e.tokenModifiers[t],t)}}push(e,t,i,n,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof i&&"number"==typeof n&&("number"==typeof r||void 0===r))return void 0===r&&(r=0),this._pushEncoded(e,t,i,n,r);if(M.isRange(e)&&"string"==typeof t&&(void 0===(o=i)||(0,k.GI)(o)))return this._push(e,t,i);var o;throw(0,C.b1)()}_push(e,t,i){if(!this._hasLegend)throw new Error("Legend must be provided in constructor");if(e.start.line!==e.end.line)throw new Error("`range` cannot span multiple lines");if(!this._tokenTypeStrToInt.has(t))throw new Error("`tokenType` is not in the provided legend");const n=e.start.line,r=e.start.character,o=e.end.character-e.start.character,s=this._tokenTypeStrToInt.get(t);let a=0;if(i)for(const e of i){if(!this._tokenModifierStrToInt.has(e))throw new Error("`tokenModifier` is not in the provided legend");a|=1<<this._tokenModifierStrToInt.get(e)>>>0}this._pushEncoded(n,r,o,s,a)}_pushEncoded(e,t,i,n,r){if(this._dataIsSortedAndDeltaEncoded&&(e<this._prevLine||e===this._prevLine&&t<this._prevChar)){this._dataIsSortedAndDeltaEncoded=!1;const e=this._data.length/5|0;let t=0,i=0;for(let n=0;n<e;n++){let e=this._data[5*n],r=this._data[5*n+1];0===e?(e=t,r+=i):e+=t,this._data[5*n]=e,this._data[5*n+1]=r,t=e,i=r}}let o=e,s=t;this._dataIsSortedAndDeltaEncoded&&this._dataLen>0&&(o-=this._prevLine,0===o&&(s-=this._prevChar)),this._data[this._dataLen++]=o,this._data[this._dataLen++]=s,this._data[this._dataLen++]=i,this._data[this._dataLen++]=n,this._data[this._dataLen++]=r,this._prevLine=e,this._prevChar=t}static _sortAndDeltaEncode(e){const t=[],i=e.length/5|0;for(let e=0;e<i;e++)t[e]=e;t.sort(((t,i)=>{const n=e[5*t],r=e[5*i];if(n===r){return e[5*t+1]-e[5*i+1]}return n-r}));const n=new Uint32Array(e.length);let r=0,o=0;for(let s=0;s<i;s++){const i=5*t[s],a=e[i+0],c=e[i+1],l=e[i+2],d=e[i+3],u=e[i+4],h=a-r,p=0===h?c-o:c,m=5*s;n[m+0]=h,n[m+1]=p,n[m+2]=l,n[m+3]=d,n[m+4]=u,r=a,o=c}return n}build(e){return this._dataIsSortedAndDeltaEncoded?new pi(new Uint32Array(this._data),e):new pi(hi._sortAndDeltaEncode(this._data),e)}}class pi{constructor(e,t){this.resultId=t,this.data=e}}class mi{constructor(e,t,i){this.start=e,this.deleteCount=t,this.data=i}}class gi{constructor(e,t){this.resultId=t,this.edits=e}}!function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"}(di||(di={}));class fi{constructor(e){this.name=e}}let _i=class{static{this.Back={iconPath:new Pt("arrow-left")}}constructor(){}};var vi,bi,yi;_i=(0,w.g)([$],_i),function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"}(vi||(vi={})),function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(bi||(bi={})),function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"}(yi||(yi={}));class wi{static validate(e){if("string"==typeof e.badge){let t=(0,T.vH)(e.badge,0);if(t<e.badge.length&&(t+=(0,T.vH)(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!Pt.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,i){this.badge=e,this.tooltip=t,this.color=i}}let xi=class{constructor(e){this.kind=e}};var Ci,Ei,Si,Di,Ti,ki,Ii,Pi;xi=(0,w.g)([$],xi),function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"}(Ci||(Ci={}));class Ai{static isNotebookRange(e){return e instanceof Ai||!!e&&("number"==typeof e.start&&"number"==typeof e.end)}get start(){return this._start}get end(){return this._end}get isEmpty(){return this._start===this._end}constructor(e,t){if(e<0)throw(0,C.b1)("start must be positive");if(t<0)throw(0,C.b1)("end must be positive");e<=t?(this._start=e,this._end=t):(this._start=t,this._end=e)}with(e){let t=this._start,i=this._end;return void 0!==e.start&&(t=e.start),void 0!==e.end&&(i=e.end),t===this._start&&i===this._end?this:new Ai(t,i)}}class Ri{static validate(e){if("number"!=typeof e.kind)throw new Error("NotebookCellData MUST have 'kind' property");if("string"!=typeof e.value)throw new Error("NotebookCellData MUST have 'value' property");if("string"!=typeof e.languageId)throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(e){return Array.isArray(e)&&e.every((e=>Ri.isNotebookCellData(e)))}static isNotebookCellData(e){return!0}constructor(e,t,i,n,r,o,s){this.kind=e,this.value=t,this.languageId=i,this.mime=n,this.outputs=r??[],this.metadata=o,this.executionSummary=s,Ri.validate(this)}}class Li{constructor(e){this.cells=e}}class Ni{static isNotebookCellOutputItem(e){return e instanceof Ni||!!e&&("string"==typeof e.mime&&e.data instanceof Uint8Array)}static error(e){const t={name:e.name,message:e.message,stack:e.stack};return Ni.json(t,"application/vnd.code.notebook.error")}static stdout(e){return Ni.text(e,"application/vnd.code.notebook.stdout")}static stderr(e){return Ni.text(e,"application/vnd.code.notebook.stderr")}static bytes(e,t="application/octet-stream"){return new Ni(e,t)}static#_=new TextEncoder;static text(e,t=D.vW.text){const i=Ni.#_.encode(String(e));return new Ni(i,t)}static json(e,t="text/x-json"){const i=JSON.stringify(e,void 0,"\t");return Ni.text(i,t)}constructor(e,t){this.data=e,this.mime=t;const i=(0,D.PP)(t,!0);if(!i)throw new Error(`INVALID mime type: ${t}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=i}}class $i{static isNotebookCellOutput(e){return e instanceof $i||!(!e||"object"!=typeof e)&&("string"==typeof e.id&&Array.isArray(e.items))}static ensureUniqueMimeTypes(e,t=!1){const i=new Set,n=new Set;for(let r=0;r<e.length;r++){const o=e[r],s=(0,D.PP)(o.mime);i.has(s)&&!(0,N.OT)(s)?(n.add(r),t&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)):i.add(s)}return 0===n.size?e:e.filter(((e,t)=>!n.has(t)))}constructor(e,t,i){this.items=$i.ensureUniqueMimeTypes(e,!0),"string"==typeof t?(this.id=t,this.metadata=i):(this.id=(0,P.R)(),this.metadata=t??i)}}!function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"}(Ei||(Ei={})),function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"}(Si||(Si={})),function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"}(Di||(Di={})),function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"}(Ti||(Ti={}));class Oi{constructor(e,t){this.text=e,this.alignment=t}}!function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"}(ki||(ki={})),function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"}(Ii||(Ii={}));class Fi{constructor(e,t=[]){this.uri=e,this.provides=(0,x._2)(t)}}class Mi{constructor(e){this.label=e}}!function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"}(Pi||(Pi={}));let Ui=class{constructor(e,t){this.label=e,this.timestamp=t}};var Hi,zi,Bi,Wi,Vi;Ui=(0,w.g)([$],Ui),function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"}(Hi||(Hi={})),function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"}(zi||(zi={})),function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"}(Bi||(Bi={}));class qi{constructor(e,t){this.ranges=e,this.wordPattern=t}}class ji{constructor(e){this._autoForwardAction=e}get autoForwardAction(){return this._autoForwardAction}}!function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"}(Wi||(Wi={})),function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"}(Vi||(Vi={}));let Ki=class{constructor(e=void 0,t=void 0,i=void 0,n=!1,r=!0){this.include=e,this.exclude=t,this.profile=i,this.continuous=n,this.preserveFocus=r}};Ki=(0,w.g)([$],Ki);let Gi=b=class{static diff(e,t,i){const n=new b(e);return n.expectedOutput=t,n.actualOutput=i,n}constructor(e){this.message=e}};Gi=b=(0,w.g)([$],Gi);let Qi=class{constructor(e){this.id=e}};Qi=(0,w.g)([$],Qi);class Ji{constructor(e,t){this.covered=e,this.total=t,Zi(this)}}function Zi(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}class Xi{static fromDetails(e,t){const i=new Ji(0,0),n=new Ji(0,0),r=new Ji(0,0);for(const e of t)if("branches"in e){i.total+=1,i.covered+=e.executed?1:0;for(const t of e.branches)n.total+=1,n.covered+=t.executed?1:0}else r.total+=1,r.covered+=e.executed?1:0;const o=new Xi(e,i,n.total>0?n:void 0,r.total>0?r:void 0);return o.detailedCoverage=t,o}constructor(e,t,i,n,r=[]){this.uri=e,this.statementCoverage=t,this.branchCoverage=i,this.declarationCoverage=n,this.fromTests=r}}class Yi{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i=[]){this.executed=e,this.location=t,this.branches=i}}class en{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.executed=e,this.location=t,this.label=i}}class tn{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.name=e,this.executed=t,this.location=i}}var nn,rn,on,sn,an,cn,ln,dn,un,hn,pn,mn,gn,fn,_n;!function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"}(nn||(nn={})),function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"}(rn||(rn={})),function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"}(on||(on={}));class vn{constructor(e,t,i,n,r,o){this.kind=e,this.name=t,this.detail=i,this.uri=n,this.range=r,this.selectionRange=o}}class bn{constructor(e){this.uri=e}}class yn{constructor(e,t){this.original=e,this.modified=t}}class wn{constructor(e,t,i,n){this.base=e,this.input1=t,this.input2=i,this.result=n}}class xn{constructor(e,t){this.uri=e,this.viewType=t}}class Cn{constructor(e){this.viewType=e}}class En{constructor(e,t){this.uri=e,this.notebookType=t}}class Sn{constructor(e,t,i){this.original=e,this.modified=t,this.notebookType=i}}class Dn{constructor(){}}class Tn{constructor(e,t){this.uri=e,this.inputBoxUri=t}}class kn{constructor(){}}class In{constructor(e){this.textDiffs=e}}!function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"}(sn||(sn={})),function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"}(an||(an={})),function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"}(cn||(cn={}));class Pn{constructor(e,t,i){this.id=e,this.label=t,this.values=i}}!function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"}(ln||(ln={})),function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"}(dn||(dn={}));class An{constructor(e){if("string"!=typeof e&&!0===e.isTrusted)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value="string"==typeof e?new xe(e):e}}class Rn{constructor(e,t){if("string"!=typeof e&&!0===e.isTrusted)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value="string"==typeof e?new xe(e):e,this.vulnerabilities=t}}class Ln{constructor(e,t){this.participant=e,this.command=t}}class Nn{constructor(e,t,i){this.title=e,this.message=t,this.data=i}}class $n{constructor(e,t){this.value=e,this.baseUri=t}}class On{constructor(e,t){this.value=e,this.title=t}}class Fn{constructor(e){this.value=e}}class Mn{constructor(e,t){this.value=e,this.task=t}}class Un{constructor(e){if("string"!=typeof e&&!0===e.isTrusted)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value="string"==typeof e?new xe(e):e}}class Hn{constructor(e){this.value=e}}class zn{constructor(e,t){this.value=e,this.iconPath=t}}class Bn{constructor(e,t){this.uri=e,this.edits=Array.isArray(t)?t:[t]}}class Wn{constructor(e,t,i,n){this.prompt=e,this.command=t,this.references=i,this.participant=n}}class Vn{constructor(e,t,i,n){this.response=e,this.result=t,this.participant=i,this.command=n}}!function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor"}(un||(un={})),function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"}(hn||(hn={}));class qn{constructor(e,t,i){this.name=e,this.content=t,this.isError=i??!1}}class jn{static User(e,t){const i=new jn(hn.User,"string"==typeof e?e:"",t);return i.content2=e,i}static Assistant(e,t){return new jn(hn.Assistant,e,t)}constructor(e,t,i){this.role=e,this.content=t,this.content2=t,this.name=i}}class Kn{constructor(e,t){this.name=e,this.parameters=t}}class Gn{constructor(e){this.value=e}}class Qn{constructor(e){this.content=e}}class Jn{constructor(e,t){this.content=e,this.name=t}}class Zn{constructor(e,t){this.content=e,this.name=t}}class Xn extends Error{static NotFound(e){return new Xn(e,Xn.NotFound.name)}static NoPermissions(e){return new Xn(e,Xn.NoPermissions.name)}static Blocked(e){return new Xn(e,Xn.Blocked.name)}constructor(e,t,i){super(e,{cause:i}),this.name="LanguageModelError",this.code=t??""}}!function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"}(pn||(pn={})),function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"}(mn||(mn={})),function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"}(gn||(gn={})),function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"}(fn||(fn={}));class Yn{constructor(e,t){this.text=e,this.range=t}}!function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(_n||(_n={}))},76221:function(e,t,i){i.d(t,{F:function(){return n},Z:function(){return r}});const n=(0,i(28019).yh)("IURITransformerService");class r{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=e=>e,this.transformOutgoing=e=>e,this.transformOutgoingURI=e=>e,this.transformOutgoingScheme=e=>e)}}},98668:function(e,t,i){i.d(t,{Y:function(){return T},w:function(){return S}});var n,r=i(45493),o=i(40048),s=i(7428),a=i(15229),c=i(57585),l=i(28019),d=i(1663),u=i(53917),h=i(26841),p=i(30874),m=i(89608),g=i(47635),f=i(82998),_=i(11547),v=i(1991),b=i(67525);!function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"}(n||(n={}));class y extends Error{constructor(e,t){super(t),this.variable=e}}var w=i(88023);const x="vs/workbench/services/configurationResolver/common/variableResolver";class C{static{this.VARIABLE_LHS="${"}static{this.VARIABLE_REGEXP=/\$\{(.*?)\}/g}constructor(e,t,i,n){this._contributedVariables=new Map,this._context=e,this._labelService=t,this._userHomePromise=i,n&&(this._envVariablesPromise=n.then((e=>this.prepareEnv(e))))}prepareEnv(e){if(_.ED){const t=Object.create(null);return Object.keys(e).forEach((i=>{t[i.toLowerCase()]=e[i]})),t}return e}resolveWithEnvironment(e,t,i){return this.recursiveResolve({env:this.prepareEnv(e),userHome:void 0},t?t.uri:void 0,i)}async resolveAsync(e,t){const i={env:await this._envVariablesPromise,userHome:await this._userHomePromise};return this.recursiveResolve(i,e?e.uri:void 0,t)}async resolveAnyBase(e,t,i,n){const r=(0,f.I8)(t);_.ED&&r.windows?Object.keys(r.windows).forEach((e=>r[e]=r.windows[e])):_.dz&&r.osx?Object.keys(r.osx).forEach((e=>r[e]=r.osx[e])):_.IJ&&r.linux&&Object.keys(r.linux).forEach((e=>r[e]=r.linux[e])),delete r.windows,delete r.osx,delete r.linux;const o={env:await this._envVariablesPromise,userHome:await this._userHomePromise};return this.recursiveResolve(o,e?e.uri:void 0,r,i,n)}async resolveAnyAsync(e,t,i){return this.resolveAnyBase(e,t,i)}async resolveAnyMap(e,t,i){const n=new Map;return{newConfig:await this.resolveAnyBase(e,t,i,n),resolvedVariables:n}}resolveWithInteractionReplace(e,t,i,n){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(e,t,i,n){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(e,t){if(this._contributedVariables.has(e))throw new Error("Variable "+e+" is contributed twice.");this._contributedVariables.set(e,t)}async recursiveResolve(e,t,i,n,r){if((0,g.HD)(i))return this.resolveString(e,t,i,n,r);if(Array.isArray(i))return Promise.all(i.map((i=>this.recursiveResolve(e,t,i,n,r))));if((0,g.Kn)(i)){const o=Object.create(null),s=await Promise.all(Object.keys(i).map((async o=>[await this.resolveString(e,t,o,n,r),await this.recursiveResolve(e,t,i[o],n,r)])));for(const[e,t]of s)o[e]=t;return o}return i}resolveString(e,t,i,n,r){return(0,w.s$)(i,C.VARIABLE_REGEXP,(async(i,o)=>{if(o.includes(C.VARIABLE_LHS))return i;let s=await this.evaluateSingleVariable(e,i,o,t,n);return r?.set(o,s),s!==i&&(0,g.HD)(s)&&s.match(C.VARIABLE_REGEXP)&&(s=await this.resolveString(e,t,s,n,r)),s}))}fsPath(e){return this._labelService?this._labelService.getUriLabel(e,{noPrefix:!0}):e.fsPath}async evaluateSingleVariable(e,t,i,r,o){let s;const l=i.split(":");l.length>1&&(i=l[0],s=l[1]);const d=e=>{const i=this._context.getFilePath();if(i)return(0,v.DT)(i);throw new y(e,(0,b.C$)(x,0,"Variable {0} can not be resolved. Please open an editor.",t))},u=e=>{const i=d(e);if(this._context.getWorkspaceFolderPathForFile){const e=this._context.getWorkspaceFolderPathForFile();if(e)return(0,v.DT)(e)}throw new y(e,(0,b.C$)(x,1,"Variable {0}: can not find workspace folder of '{1}'.",t,(0,a.EZ)(i)))},h=e=>{if(s){const i=this._context.getFolderUri(s);if(i)return i;throw new y(e,(0,b.C$)(x,2,"Variable {0} can not be resolved. No such folder '{1}'.",t,s))}if(r)return r;if(this._context.getWorkspaceFolderCount()>1)throw new y(e,(0,b.C$)(x,3,"Variable {0} can not be resolved in a multi folder workspace. Scope this variable using ':' and a workspace folder name.",t));throw new y(e,(0,b.C$)(x,4,"Variable {0} can not be resolved. Please open a folder.",t))};switch(i){case"env":if(s){if(e.env){const t=e.env[_.ED?s.toLowerCase():s];if((0,g.HD)(t))return t}return""}throw new y(n.Env,(0,b.C$)(x,5,"Variable {0} can not be resolved because no environment variable name is given.",t));case"config":if(s){const e=this._context.getConfigurationValue(r,s);if((0,g.Jp)(e))throw new y(n.Config,(0,b.C$)(x,6,"Variable {0} can not be resolved because setting '{1}' not found.",t,s));if((0,g.Kn)(e))throw new y(n.Config,(0,b.C$)(x,7,"Variable {0} can not be resolved because '{1}' is a structured value.",t,s));return e}throw new y(n.Config,(0,b.C$)(x,8,"Variable {0} can not be resolved because no settings name is given.",t));case"command":return this.resolveFromMap(n.Command,t,s,o,"command");case"input":return this.resolveFromMap(n.Input,t,s,o,"input");case"extensionInstallFolder":if(s){const e=await this._context.getExtension(s);if(!e)throw new y(n.ExtensionInstallFolder,(0,b.C$)(x,9,"Variable {0} can not be resolved because the extension {1} is not installed.",t,s));return this.fsPath(e.extensionLocation)}throw new y(n.ExtensionInstallFolder,(0,b.C$)(x,10,"Variable {0} can not be resolved because no extension name is given.",t));default:switch(i){case"workspaceRoot":case"workspaceFolder":return(0,v.DT)(this.fsPath(h(n.WorkspaceFolder)));case"cwd":return r||s?(0,v.DT)(this.fsPath(h(n.Cwd))):(0,c.Vj)();case"workspaceRootFolderName":case"workspaceFolderBasename":return(0,v.DT)((0,a.EZ)(this.fsPath(h(n.WorkspaceFolderBasename))));case"userHome":if(e.userHome)return e.userHome;throw new y(n.UserHome,(0,b.C$)(x,11,"Variable {0} can not be resolved. UserHome path is not defined",t));case"lineNumber":{const e=this._context.getLineNumber();if(e)return e;throw new y(n.LineNumber,(0,b.C$)(x,12,"Variable {0} can not be resolved. Make sure to have a line selected in the active editor.",t))}case"selectedText":{const e=this._context.getSelectedText();if(e)return e;throw new y(n.SelectedText,(0,b.C$)(x,13,"Variable {0} can not be resolved. Make sure to have some text selected in the active editor.",t))}case"file":return d(n.File);case"fileWorkspaceFolder":return u(n.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return(0,a.EZ)(u(n.FileWorkspaceFolderBasename));case"relativeFile":return r||s?(0,a.Gf)(this.fsPath(h(n.RelativeFile)),d(n.RelativeFile)):d(n.RelativeFile);case"relativeFileDirname":{const e=(0,a.XX)(d(n.RelativeFileDirname));if(r||s){const t=(0,a.Gf)(this.fsPath(h(n.RelativeFileDirname)),e);return 0===t.length?".":t}return e}case"fileDirname":return(0,a.XX)(d(n.FileDirname));case"fileExtname":return(0,a.DZ)(d(n.FileExtname));case"fileBasename":return(0,a.EZ)(d(n.FileBasename));case"fileBasenameNoExtension":{const e=(0,a.EZ)(d(n.FileBasenameNoExtension));return e.slice(0,e.length-(0,a.DZ)(e).length)}case"fileDirnameBasename":return(0,a.EZ)((0,a.XX)(d(n.FileDirnameBasename)));case"execPath":{const e=this._context.getExecPath();return e||t}case"execInstallFolder":{const e=this._context.getAppRoot();return e||t}case"pathSeparator":case"/":return a.ir;default:try{const e=s?`${i}:${s}`:i;return this.resolveFromMap(n.Unknown,t,e,o,void 0)}catch(e){return t}}}}resolveFromMap(e,t,i,n,r){if(i&&n){const o=void 0===r?n[i]:n[r+":"+i];if("string"==typeof o)return o;throw new y(e,(0,b.C$)(x,14,"Variable {0} can not be resolved because the command has no value.",t))}return t}}var E=i(63537);const S=(0,l.yh)("IExtHostVariableResolverProvider");class D extends C{constructor(e,t,i,n,r,o,s){function l(){if(i){const e=i.activeEditor();if(e)return e.document.uri;const t=n.tabGroups.all.find((e=>e.isActive))?.activeTab;if(void 0!==t){if(t.input instanceof p.lF4||t.input instanceof p.ogl)return t.input.modified;if(t.input instanceof p.Y_o||t.input instanceof p.IAb||t.input instanceof p.zwE)return t.input.uri}}}super({getFolderUri:e=>{const t=o.folders.filter((t=>t.name===e));if(t&&t.length>0)return t[0].uri},getWorkspaceFolderCount:()=>o.folders.length,getConfigurationValue:(e,t)=>r.getConfiguration(void 0,e).get(t),getAppRoot:()=>(0,c.Vj)(),getExecPath:()=>c.OB.VSCODE_EXEC_PATH,getFilePath:()=>{const e=l();if(e)return(0,a.Fv)(e.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const e=l();if(e){const i=t.getWorkspaceFolder(e);if(i)return(0,a.Fv)(i.uri.fsPath)}}},getSelectedText:()=>{if(i){const e=i.activeEditor();if(e&&!e.selection.isEmpty)return e.document.getText(e.selection)}},getLineNumber:()=>{if(i){const e=i.activeEditor();if(e)return String(e.selection.end.line+1)}},getExtension:t=>e.getExtension(t)},void 0,s?Promise.resolve(s):void 0,Promise.resolve(c.OB))}}let T=class extends s.JT{constructor(e,t,i,n,r){super(),this.extensionService=e,this.workspaceService=t,this.editorService=i,this.configurationService=n,this.editorTabs=r,this._resolver=new o.o((async()=>{const e=await this.configurationService.getConfigProvider(),t={folders:await this.workspaceService.getWorkspaceFolders2()||[]};return this._register(this.workspaceService.onDidChangeWorkspace((async e=>{t.folders=await this.workspaceService.getWorkspaceFolders2()||[]}))),new D(this.extensionService,this.workspaceService,this.editorService,this.editorTabs,e,t,this.homeDir())}))}getResolver(){return this._resolver.value}homeDir(){}};T=(0,r.g)([(0,r.f)(0,h.k2),(0,r.f)(1,m.w),(0,r.f)(2,d.T),(0,r.f)(3,E.E1),(0,r.f)(4,u.v)],T)},30508:function(e,t,i){i.d(t,{j:function(){return a},m:function(){return s}});var n=i(53976),r=i(78293);class o{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}}function s(e,t){if(t.serializeBuffersForPostMessage){const t=new o,i=(e,i)=>{if(i instanceof ArrayBuffer){return{$$vscode_array_buffer_reference$$:!0,index:t.add(i)}}if(ArrayBuffer.isView(i)){const e=function(e){switch(e.constructor.name){case"Int8Array":return r.oR.Int8Array;case"Uint8Array":return r.oR.Uint8Array;case"Uint8ClampedArray":return r.oR.Uint8ClampedArray;case"Int16Array":return r.oR.Int16Array;case"Uint16Array":return r.oR.Uint16Array;case"Int32Array":return r.oR.Int32Array;case"Uint32Array":return r.oR.Uint32Array;case"Float32Array":return r.oR.Float32Array;case"Float64Array":return r.oR.Float64Array;case"BigInt64Array":return r.oR.BigInt64Array;case"BigUint64Array":return r.oR.BigUint64Array}return}(i);if(e){return{$$vscode_array_buffer_reference$$:!0,index:t.add(i.buffer),view:{type:e,byteLength:i.byteLength,byteOffset:i.byteOffset}}}}return i};return{message:JSON.stringify(e,i),buffers:t.buffers.map((e=>{const t=new Uint8Array(e);return n.KN.wrap(t)}))}}return{message:JSON.stringify(e),buffers:[]}}function a(e,t){const i=t.map((e=>{const t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(e.buffer),t})),n=t.length?(e,t)=>{if(t&&"object"==typeof t&&t.$$vscode_array_buffer_reference$$){const e=t,{index:n}=e,o=i[n];if(e.view)switch(e.view.type){case r.oR.Int8Array:return new Int8Array(o,e.view.byteOffset,e.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case r.oR.Uint8Array:return new Uint8Array(o,e.view.byteOffset,e.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case r.oR.Uint8ClampedArray:return new Uint8ClampedArray(o,e.view.byteOffset,e.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case r.oR.Int16Array:return new Int16Array(o,e.view.byteOffset,e.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case r.oR.Uint16Array:return new Uint16Array(o,e.view.byteOffset,e.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case r.oR.Int32Array:return new Int32Array(o,e.view.byteOffset,e.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case r.oR.Uint32Array:return new Uint32Array(o,e.view.byteOffset,e.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case r.oR.Float32Array:return new Float32Array(o,e.view.byteOffset,e.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case r.oR.Float64Array:return new Float64Array(o,e.view.byteOffset,e.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case r.oR.BigInt64Array:return new BigInt64Array(o,e.view.byteOffset,e.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case r.oR.BigUint64Array:return new BigUint64Array(o,e.view.byteOffset,e.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return o}return t}:void 0;return{message:JSON.parse(e,n),arrayBuffers:i}}},72124:function(e,t,i){i.d(t,{V:function(){return p},x:function(){return h}});var n,r=i(45493),o=i(81557),s=i(59301),a=i(88023),c=i(42731),l=i(28019),d=i(82722),u=i(78293);let h=class{static{n=this}static{this.InitialState={focused:!0,active:!0}}getState(){const e=this._state;return{get focused(){return e.focused},get active(){return e.active}}}constructor(e){this._onDidChangeWindowState=new o.Q5,this.onDidChangeWindowState=this._onDidChangeWindowState.event,this._state=n.InitialState,this._proxy=e.getProxy(u.Tr.MainThreadWindow),this._proxy.$getInitialState().then((({isFocused:e,isActive:t})=>{this.onDidChangeWindowProperty("focused",e),this.onDidChangeWindowProperty("active",t)}))}$onDidChangeWindowFocus(e){this.onDidChangeWindowProperty("focused",e)}$onDidChangeWindowActive(e){this.onDidChangeWindowProperty("active",e)}onDidChangeWindowProperty(e,t){t!==this._state[e]&&(this._state={...this._state,[e]:t},this._onDidChangeWindowState.fire(this._state))}openUri(e,t){let i;if("string"==typeof e){i=e;try{e=c.ov.parse(e)}catch(t){return Promise.reject(`Invalid uri - '${e}'`)}}return(0,a.m5)(e.scheme)?Promise.reject("Invalid scheme - cannot be empty"):e.scheme===s.lg.command?Promise.reject(`Invalid scheme '${e.scheme}'`):this._proxy.$openUri(e,i,t)}async asExternalUri(e,t){if((0,a.m5)(e.scheme))return Promise.reject("Invalid scheme - cannot be empty");const i=await this._proxy.$asExternalUri(e,t);return c.ov.from(i)}};h=n=(0,r.g)([(0,r.f)(0,d.O)],h);const p=(0,l.yh)("IExtHostWindow")},89608:function(e,t,i){i.d(t,{M:function(){return O},w:function(){return F}});var n=i(45493),r=i(78074),o=i(35820),s=i(17126),a=i(81557),c=i(7428),l=i(57386),d=i(59301),u=i(23575),h=i(81647),p=i(88023),m=i(42731),g=i(67525),f=i(28698),_=i(28019),v=i(26713),b=(i(54253),i(56940)),y=i(52202),w=i(73820),x=i(82722),C=i(54487),E=i(30874),S=i(76221),D=i(45630),T=i(78293),k=i(59267),I=i(74120);function P(e,t,i){return new h.U9((e=>N(e,i))).isEqual(e,t)}function A(e,t,i){return P(e.uri,t.uri,i)?0:(0,p.qu)(e.uri.toString(),t.uri.toString())}function R(e,t,i){return e.index!==t.index?e.index<t.index?-1:1:P(e.uri,t.uri,i)?(0,p.qu)(e.name,t.name):(0,p.qu)(e.uri.toString(),t.uri.toString())}function L(e,t,i,n){const o=e.slice(0).sort(((e,t)=>i(e,t,n))),s=t.slice(0).sort(((e,t)=>i(e,t,n)));return(0,r.pY)(o,s,((e,t)=>i(e,t,n)))}function N(e,t){const i=t.getCapabilities(e.scheme);return!(i&&i&f.Bb.PathCaseSensitive)}class $ extends b.j${static toExtHostWorkspace(e,t,i,n){if(!e)return{workspace:null,added:[],removed:[]};const{id:r,name:o,folders:s,configuration:a,transient:c,isUntitled:l}=e,d=[],u=t;t?s.forEach(((e,r)=>{const o=m.ov.revive(e.uri),s=$._findFolder(i||t,o,n);s?(s.name=e.name,s.index=e.index,d.push(s)):d.push({uri:o,name:e.name,index:r})})):d.push(...s.map((({uri:e,name:t,index:i})=>({uri:m.ov.revive(e),name:t,index:i})))),d.sort(((e,t)=>e.index<t.index?-1:1));const h=new $(r,o,d,!!c,a?m.ov.revive(a):null,!!l,(e=>N(e,n))),{added:p,removed:g}=L(u?u.workspaceFolders:[],h.workspaceFolders,A,n);return{workspace:h,added:p,removed:g}}static _findFolder(e,t,i){for(let n=0;n<e.folders.length;n++){const r=e.workspaceFolders[n];if(P(r.uri,t,i))return r}}constructor(e,t,i,n,r,o,s){super(e,i.map((e=>new b.md(e))),n,r,s),this._name=t,this._isUntitled=o,this._workspaceFolders=[],this._structure=l.Id.forUris(s,(()=>!0)),i.forEach((e=>{this._workspaceFolders.push(e),this._structure.set(e.uri,e)}))}get name(){return this._name}get isUntitled(){return this._isUntitled}get workspaceFolders(){return this._workspaceFolders.slice(0)}getWorkspaceFolder(e,t){return t&&this._structure.get(e)&&(e=(0,h.XX)(e)),this._structure.findSubstr(e)}resolveWorkspaceFolder(e){return this._structure.get(e)}}let O=class{constructor(e,t,i,n,r){this._onDidChangeWorkspace=new a.Q5,this.onDidChangeWorkspace=this._onDidChangeWorkspace.event,this._onDidGrantWorkspaceTrust=new a.Q5,this.onDidGrantWorkspaceTrust=this._onDidGrantWorkspaceTrust.event,this._activeSearchCallbacks=[],this._trusted=!1,this._editSessionIdentityProviders=new Map,this._providerHandlePool=0,this._onWillCreateEditSessionIdentityEvent=new a.Qz,this._canonicalUriProviders=new Map,this._logService=n,this._extHostFileSystemInfo=i,this._uriTransformerService=r,this._requestIdProvider=new u.AT,this._barrier=new o.U8,this._proxy=e.getProxy(T.Tr.MainThreadWorkspace),this._messageService=e.getProxy(T.Tr.MainThreadMessageService);const s=t.workspace;this._confirmedWorkspace=s?new $(s.id,s.name,[],!!s.transient,s.configuration?m.ov.revive(s.configuration):null,!!s.isUntitled,(e=>N(e,i))):void 0}$initializeWorkspace(e,t){this._trusted=t,this.$acceptWorkspaceData(e),this._barrier.open()}waitForInitializeCall(){return this._barrier.wait()}get workspace(){return this._actualWorkspace}get name(){return this._actualWorkspace?this._actualWorkspace.name:void 0}get workspaceFile(){if(this._actualWorkspace&&this._actualWorkspace.configuration)return this._actualWorkspace.isUntitled?m.ov.from({scheme:d.lg.untitled,path:(0,h.EZ)((0,h.XX)(this._actualWorkspace.configuration))}):this._actualWorkspace.configuration}get _actualWorkspace(){return this._unconfirmedWorkspace||this._confirmedWorkspace}getWorkspaceFolders(){if(this._actualWorkspace)return this._actualWorkspace.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this._barrier.wait(),this._actualWorkspace)return this._actualWorkspace.workspaceFolders.slice(0)}updateWorkspaceFolders(e,t,i,...n){const r=[];if(Array.isArray(n)&&n.forEach((e=>{m.ov.isUri(e.uri)&&!r.some((t=>P(t.uri,e.uri,this._extHostFileSystemInfo)))&&r.push({uri:e.uri,name:e.name||(0,h.Hx)(e.uri)})})),this._unconfirmedWorkspace)return!1;if([t,i].some((e=>"number"!=typeof e||e<0)))return!1;if(0===i&&0===r.length)return!1;const o=this._actualWorkspace?this._actualWorkspace.workspaceFolders:[];if(t+i>o.length)return!1;const s=o.slice(0);s.splice(t,i,...r.map((e=>({uri:e.uri,name:e.name||(0,h.Hx)(e.uri),index:void 0}))));for(let e=0;e<s.length;e++){const t=s[e];if(s.some(((i,n)=>n!==e&&P(t.uri,i.uri,this._extHostFileSystemInfo))))return!1}s.forEach(((e,t)=>e.index=t));const{added:a,removed:c}=L(o,s,R,this._extHostFileSystemInfo);if(0===a.length&&0===c.length)return!1;if(this._proxy){const n=e.displayName||e.name;this._proxy.$updateWorkspaceFolders(n,t,i,r).then(void 0,(t=>{this._unconfirmedWorkspace=void 0;const i={source:{identifier:e.identifier,label:e.displayName||e.name}};this._messageService.$showMessage(I.Z.Error,(0,g.C$)("vs/workbench/api/common/extHostWorkspace",0,"Extension '{0}' failed to update workspace folders: {1}",n,t.toString()),i,[])}))}return this.trySetWorkspaceFolders(s),!0}getWorkspaceFolder(e,t){if(this._actualWorkspace)return this._actualWorkspace.getWorkspaceFolder(e,t)}async getWorkspaceFolder2(e,t){if(await this._barrier.wait(),this._actualWorkspace)return this._actualWorkspace.getWorkspaceFolder(e,t)}async resolveWorkspaceFolder(e){if(await this._barrier.wait(),this._actualWorkspace)return this._actualWorkspace.resolveWorkspaceFolder(e)}getPath(){if(!this._actualWorkspace)return;const{folders:e}=this._actualWorkspace;return 0!==e.length?e[0].uri.fsPath:void 0}getRelativePath(e,t){let i,n="";if("string"==typeof e?(i=m.ov.file(e),n=e):void 0!==e&&(i=e,n=e.fsPath),!i)return n;const r=this.getWorkspaceFolder(i,!0);if(!r)return n;void 0===t&&this._actualWorkspace&&(t=this._actualWorkspace.folders.length>1);let o=(0,h.lX)(r.uri,i);return t&&r.name&&(o=`${r.name}/${o}`),o}trySetWorkspaceFolders(e){this._actualWorkspace&&(this._unconfirmedWorkspace=$.toExtHostWorkspace({id:this._actualWorkspace.id,name:this._actualWorkspace.name,configuration:this._actualWorkspace.configuration,folders:e,isUntitled:this._actualWorkspace.isUntitled},this._actualWorkspace,void 0,this._extHostFileSystemInfo).workspace||void 0)}$acceptWorkspaceData(e){const{workspace:t,added:i,removed:n}=$.toExtHostWorkspace(e,this._confirmedWorkspace,this._unconfirmedWorkspace,this._extHostFileSystemInfo);this._confirmedWorkspace=t||void 0,this._unconfirmedWorkspace=void 0,this._onDidChangeWorkspace.fire(Object.freeze({added:i,removed:n}))}findFiles(e,t,i,n,r=s.Ts.None){this._logService.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${n.value}, entryPoint: findFiles`);let o="",a=!0;return null===t?a=!1:void 0!==t&&(o="string"==typeof t?t:t.pattern),this._findFilesImpl(e,void 0,{exclude:o,maxResults:i,useDefaultExcludes:a,useDefaultSearchExcludes:!1,useIgnoreFiles:!1},r)}findFiles2(e,t={},i,n=s.Ts.None){return this._logService.trace(`extHostWorkspace#findFiles2: fileSearch, extension: ${i.value}, entryPoint: findFiles2`),this._findFilesImpl(void 0,e,t,n)}async _findFilesImpl(e,t,i,n=s.Ts.None){if(n&&n.isCancellationRequested)return Promise.resolve([]);const r="string"==typeof i.exclude?i.exclude:i.exclude?i.exclude.pattern:void 0,o={ignoreSymlinks:"boolean"==typeof i.followSymlinks?!i.followSymlinks:void 0,disregardIgnoreFiles:"boolean"==typeof i.useIgnoreFiles?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:"boolean"==typeof i.useGlobalIgnoreFiles?!i.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:"boolean"==typeof i.useParentIgnoreFiles?!i.useParentIgnoreFiles:void 0,disregardExcludeSettings:"boolean"==typeof i.useDefaultExcludes&&!i.useDefaultExcludes,disregardSearchExcludeSettings:"boolean"==typeof i.useDefaultSearchExcludes&&!i.useDefaultSearchExcludes,maxResults:i.maxResults,excludePattern:r,shouldGlobSearch:"boolean"!=typeof i.fuzzy||!i.fuzzy,_reason:"startFileSearch"};let a;if(e){const{includePattern:t,folder:i}=M(C.RW.from(e));a=i,o.includePattern=t}else{const{includePattern:e,folder:i}=M(C.RW.from(t));a=i,o.filePattern=e}return this._proxy.$startFileSearch(a??null,o,n).then((e=>Array.isArray(e)?e.map((e=>m.ov.revive(e))):[]))}async findTextInFiles(e,t,i,n,o=s.Ts.None){this._logService.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${n.value}, entryPoint: findTextInFiles`);const a=this._requestIdProvider.getNext(),c=void 0===t.previewOptions?{matchLines:100,charsPerLine:1e4}:t.previewOptions,{includePattern:l,folder:d}=M(C.RW.from(t.include)),u="string"==typeof t.exclude?t.exclude:t.exclude?t.exclude.pattern:void 0,h={ignoreSymlinks:"boolean"==typeof t.followSymlinks?!t.followSymlinks:void 0,disregardIgnoreFiles:"boolean"==typeof t.useIgnoreFiles?!t.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:"boolean"==typeof t.useGlobalIgnoreFiles?!t.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:"boolean"==typeof t.useParentIgnoreFiles?!t.useParentIgnoreFiles:void 0,disregardExcludeSettings:"boolean"!=typeof t.useDefaultExcludes||!t.useDefaultExcludes,fileEncoding:t.encoding,maxResults:t.maxResults,previewOptions:c,afterContext:t.afterContext,beforeContext:t.beforeContext,includePattern:l,excludePattern:u};if(this._activeSearchCallbacks[a]=e=>{const t=m.ov.revive(e.resource);e.results.forEach((e=>{const n=(0,k.wL)(e);(0,D.k5)(n)?i({uri:t,preview:{text:n.preview.text,matches:(0,r.Gb)(n.preview.matches,(e=>new E.e6w(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)))},ranges:(0,r.Gb)(n.ranges,(e=>new E.e6w(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)))}):i({uri:t,text:n.text,lineNumber:n.lineNumber})}))},o.isCancellationRequested)return{};try{const t=await this._proxy.$startTextSearch(e,d??null,h,a,o);return delete this._activeSearchCallbacks[a],t||{}}catch(e){throw delete this._activeSearchCallbacks[a],e}}$handleTextSearchResult(e,t){this._activeSearchCallbacks[t]?.(e)}async save(e){const t=await this._proxy.$save(e,{saveAs:!1});return m.ov.revive(t)}async saveAs(e){const t=await this._proxy.$save(e,{saveAs:!0});return m.ov.revive(t)}saveAll(e){return this._proxy.$saveAll(e)}resolveProxy(e){return this._proxy.$resolveProxy(e)}loadCertificates(){return this._proxy.$loadCertificates()}get trusted(){return this._trusted}requestWorkspaceTrust(e){return this._proxy.$requestWorkspaceTrust(e)}$onDidGrantWorkspaceTrust(){this._trusted||(this._trusted=!0,this._onDidGrantWorkspaceTrust.fire())}registerEditSessionIdentityProvider(e,t){if(this._editSessionIdentityProviders.has(e))throw new Error(`A provider has already been registered for scheme ${e}`);this._editSessionIdentityProviders.set(e,t);const i=this._uriTransformerService.transformOutgoingScheme(e),n=this._providerHandlePool++;return this._proxy.$registerEditSessionIdentityProvider(n,i),(0,c.OF)((()=>{this._editSessionIdentityProviders.delete(e),this._proxy.$unregisterEditSessionIdentityProvider(n)}))}async $getEditSessionIdentifier(e,t){this._logService.info("Getting edit session identifier for workspaceFolder",e);const i=await this.resolveWorkspaceFolder(m.ov.revive(e));if(!i)return void this._logService.warn("Unable to resolve workspace folder");this._logService.info("Invoking #provideEditSessionIdentity for workspaceFolder",i);const n=this._editSessionIdentityProviders.get(i.uri.scheme);if(this._logService.info(`Provider for scheme ${i.uri.scheme} is defined: `,!!n),!n)return;const r=await n.provideEditSessionIdentity(i,t);return this._logService.info("Provider returned edit session identifier: ",r),r||void 0}async $provideEditSessionIdentityMatch(e,t,i,n){this._logService.info("Getting edit session identifier for workspaceFolder",e);const r=await this.resolveWorkspaceFolder(m.ov.revive(e));if(!r)return void this._logService.warn("Unable to resolve workspace folder");this._logService.info("Invoking #provideEditSessionIdentity for workspaceFolder",r);const o=this._editSessionIdentityProviders.get(r.uri.scheme);if(this._logService.info(`Provider for scheme ${r.uri.scheme} is defined: `,!!o),!o)return;const s=await(o.provideEditSessionIdentityMatch?.(t,i,n));return this._logService.info("Provider returned edit session identifier match result: ",s),s||void 0}getOnWillCreateEditSessionIdentityEvent(e){return(t,i,n)=>{const r=function(e){t.call(i,e)};return r.extension=e,this._onWillCreateEditSessionIdentityEvent.event(r,void 0,n)}}async $onWillCreateEditSessionIdentity(e,t,i){const n=await this.resolveWorkspaceFolder(m.ov.revive(e));if(void 0===n)throw new Error("Unable to resolve workspace folder");await this._onWillCreateEditSessionIdentityEvent.fireAsync({workspaceFolder:n},t,(async(e,t)=>{const n=Date.now();await Promise.resolve(e),Date.now()-n>i&&this._logService.warn("SLOW edit session create-participant",t.extension.identifier)})),t.isCancellationRequested}registerCanonicalUriProvider(e,t){if(this._canonicalUriProviders.has(e))throw new Error(`A provider has already been registered for scheme ${e}`);this._canonicalUriProviders.set(e,t);const i=this._uriTransformerService.transformOutgoingScheme(e),n=this._providerHandlePool++;return this._proxy.$registerCanonicalUriProvider(n,i),(0,c.OF)((()=>{this._canonicalUriProviders.delete(e),this._proxy.$unregisterCanonicalUriProvider(n)}))}async provideCanonicalUri(e,t,i){const n=this._canonicalUriProviders.get(e.scheme);if(!n)return;const r=await(n.provideCanonicalUri?.(m.ov.revive(e),t,i));return r||void 0}async $provideCanonicalUri(e,t,i){return this.provideCanonicalUri(m.ov.revive(e),{targetScheme:t},i)}};O=(0,n.g)([(0,n.f)(0,x.O),(0,n.f)(1,w.$),(0,n.f)(2,y.G),(0,n.f)(3,v.V),(0,n.f)(4,S.F)],O);const F=(0,_.yh)("IExtHostWorkspace");function M(e){let t,i;return e&&("string"==typeof e?t=e:(t=e.pattern,i=m.ov.revive(e.baseUri))),{includePattern:t,folder:i}}},54498:function(e,t,i){i.d(t,{m:function(){return D}});var n=i(54316),r=i(61826),o=i(42731),s=i(78293),a=i(87853),c=i(26713),l=i(20658),d=i(80195),u=i(73820),h=i(99911),p=i(82722),m=i(76221),g=i(26841),f=i(3560),_=i(11547),v=i(45493),b=i(67525),y=i(80661);const w="vs/workbench/api/common/extHostLogService";let x=class extends y.${constructor(e,t,i){const n=i.remote.isRemote?"remoteexthost":e?"workerexthost":"exthost",r=i.remote.isRemote?(0,b.C$)(w,0,"Extension Host (Remote)"):e?(0,b.C$)(w,1,"Extension Host (Worker)"):(0,b.C$)(w,2,"Extension Host");super(t.createLogger(n,{name:r}))}};x=(0,v.g)([(0,v.f)(1,c.y),(0,v.f)(2,u.$)],x);var C=i(80165),E=i(71484);class S{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(c.V),i=e.get(p.O).getProxy(s.Tr.MainThreadErrors);(0,n.sH)((e=>{t.error(e);const r=(0,n.ri)(e);i.$onUnexpectedError(r)}))}static async installFullHandler(e){const t=e.get(c.V),i=e.get(p.O),r=e.get(g.k2),a=e.get(f.fv),l=i.getProxy(s.Tr.MainThreadExtensionService),d=i.getProxy(s.Tr.MainThreadErrors),u=await r.getExtensionPathIndex(),h=new WeakMap;function m(e,t){if(h.has(e))return h.get(e).stack;let i,n,r="";for(const e of t)r+=`\n\tat ${e.toString()}`,n=e.getFileName(),!i&&n&&(i=u.findSubstr(o.ov.file(n)));const s=`${e.name||"Error"}: ${e.message||""}${r}`;return h.set(e,{extensionIdentifier:i?.identifier,stack:s}),s}const _=Symbol("prepareStackTrace wrapped");let v=m;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return v},set(e){e!==m&&e&&!e[_]?(v=function(t,i){return m(t,i),e.call(Error,t,i)},Object.assign(v,{[_]:!0})):v=e||m}}),(0,n.sH)((e=>{t.error(e);const i=(0,n.ri)(e),r=h.get(e);if(!r?.extensionIdentifier)return void d.$onUnexpectedError(i);l.$onExtensionRuntimeError(r.extensionIdentifier,i);const o=a.onExtensionError(r.extensionIdentifier,e);t.trace("forwarded error to extension?",o,r)}))}}class D{constructor(e,t,i,n,o){this._hostUtils=i,this._rpcProtocol=new a.Ui(e,null,n),t=D._transform(t,this._rpcProtocol);const s=new d.y(...(0,l.dh)());s.set(u.$,{_serviceBrand:void 0,...t,messagePorts:o}),s.set(p.O,new p.i(this._rpcProtocol)),s.set(m.F,new m.Z(n)),s.set(g.vM,i),s.set(c.V,new C.M(x,[!0],!0)),s.set(c.y,new C.M(E.m,[],!0));const f=new h.F(s,!0);_.n2&&f.invokeFunction(S.installEarlyHandler),this._logService=f.invokeFunction((e=>e.get(c.V))),(0,r.B)("code/extHost/didCreateServices"),this._hostUtils.pid?this._logService.info(`Extension host with pid ${this._hostUtils.pid} started`):this._logService.info("Extension host started"),this._logService.trace("initData",t),this._extensionService=f.invokeFunction((e=>e.get(g.k2))),this._extensionService.initialize(),_.n2&&f.invokeFunction(S.installFullHandler)}async asBrowserUri(e){const t=this._rpcProtocol.getProxy(s.Tr.MainThreadExtensionService);return o.ov.revive(await t.$asBrowserUri(e))}async getAllStaticBrowserUris(){const e=this._rpcProtocol.getProxy(s.Tr.MainThreadExtensionService);return(await e.$getAllStaticBrowserUris()).map((([e,t])=>[o.ov.revive(e),o.ov.revive(t)]))}terminate(e){this._extensionService.terminate(e)}getExtHostExtensionService(){return this._extensionService}static _transform(e,t){e.extensions.allExtensions.forEach((e=>{e.extensionLocation=o.ov.revive(t.transformIncomingURIs(e.extensionLocation))})),e.environment.appRoot=o.ov.revive(t.transformIncomingURIs(e.environment.appRoot));const i=e.environment.extensionDevelopmentLocationURI;return i&&(e.environment.extensionDevelopmentLocationURI=i.map((e=>o.ov.revive(t.transformIncomingURIs(e))))),e.environment.extensionTestsLocationURI=o.ov.revive(t.transformIncomingURIs(e.environment.extensionTestsLocationURI)),e.environment.globalStorageHome=o.ov.revive(t.transformIncomingURIs(e.environment.globalStorageHome)),e.environment.workspaceStorageHome=o.ov.revive(t.transformIncomingURIs(e.environment.workspaceStorageHome)),e.environment.extensionTelemetryLogResource=o.ov.revive(t.transformIncomingURIs(e.environment.extensionTelemetryLogResource)),e.nlsBaseUrl=o.ov.revive(t.transformIncomingURIs(e.nlsBaseUrl)),e.logsLocation=o.ov.revive(t.transformIncomingURIs(e.logsLocation)),e.workspace=t.transformIncomingURIs(e.workspace),e}}},66982:function(e,t,i){i.d(t,{x:function(){return er}});var n=i(17126),r=i(54316),o=i(81557),s=i(7428),a=i(59301),c=i(74120),l=i(42731),d=i(51083),u=i(71709),h=i(18503),p=i(82416),m=i(26258),g=i(28698),f=i(525),_=i(26713),v=i(16585),b=i(73426),y=i(14375),w=i(78293),x=i(30874);class C{constructor(e){this._relatedInformationProviders=new Map,this._nextHandle=0,this._proxy=e.getProxy(w.Tr.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,i){if(0===this._relatedInformationProviders.size)throw new Error("No related information providers registered");const n=this._relatedInformationProviders.get(e);if(!n)throw new Error("related information provider not found");return await n.provideRelatedInformation(t,i)??[]}getRelatedInformation(e,t,i){return this._proxy.$getAiRelatedInformation(t,i)}registerRelatedInformationProvider(e,t,i){const n=this._nextHandle;return this._nextHandle++,this._relatedInformationProviders.set(n,i),this._proxy.$registerAiRelatedInformationProvider(n,t),new x.JTr((()=>{this._proxy.$unregisterAiRelatedInformationProvider(n),this._relatedInformationProviders.delete(n)}))}}var E=i(78074),S=i(27291),D=i(9362),T=i(83101),k=i(85315),I=i(54487);const P=[new k.b9("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[k.SF.Uri,k.SF.Position],new k._m("A promise that resolves to an array of DocumentHighlight-instances.",R(I.eh.to))),new k.b9("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[k.SF.Uri],new k._m("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",((e,t)=>{if(!(0,E.XY)(e)){class i extends x.JNW{static to(e){const n=new i(e.name,I.cR.to(e.kind),e.containerName||"",new x.YeX(t[0],I.e6.to(e.range)));return n.detail=e.detail,n.range=n.location.range,n.selectionRange=I.e6.to(e.selectionRange),n.children=e.children?e.children.map(i.to):[],n}}return e.map(i.to)}}))),new k.b9("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[k.SF.Uri,new k.SF("options","Formatting options",(e=>!0),(e=>e))],new k._m("A promise that resolves to an array of TextEdits.",R(I.PY.to))),new k.b9("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[k.SF.Uri,k.SF.Range,new k.SF("options","Formatting options",(e=>!0),(e=>e))],new k._m("A promise that resolves to an array of TextEdits.",R(I.PY.to))),new k.b9("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[k.SF.Uri,k.SF.Position,new k.SF("ch","Trigger character",(e=>"string"==typeof e),(e=>e)),new k.SF("options","Formatting options",(e=>!0),(e=>e))],new k._m("A promise that resolves to an array of TextEdits.",R(I.PY.to))),new k.b9("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[k.SF.Uri,k.SF.Position],new k._m("A promise that resolves to an array of Location or LocationLink instances.",L)),new k.b9("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[k.SF.Uri,k.SF.Position],new k._m("A promise that resolves to an array of Location or LocationLink instances.",L)),new k.b9("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[k.SF.Uri,k.SF.Position],new k._m("A promise that resolves to an array of Location or LocationLink instances.",L)),new k.b9("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[k.SF.Uri,k.SF.Position],new k._m("A promise that resolves to an array of Location or LocationLink instances.",L)),new k.b9("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[k.SF.Uri,k.SF.Position],new k._m("A promise that resolves to an array of Location-instances.",R(I.xh.to))),new k.b9("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[k.SF.Uri,k.SF.Position],new k._m("A promise that resolves to an array of Hover-instances.",R(I.TM.to))),new k.b9("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[k.SF.Uri,new k.SF("position","A position in a text document",(e=>Array.isArray(e)&&e.every((e=>x.Lyo.isPosition(e)))),(e=>e.map(I.Ly.from)))],new k._m("A promise that resolves to an array of ranges.",(e=>e.map((e=>{let t;for(const i of e.reverse())t=new x.xm7(I.e6.to(i),t);return t}))))),new k.b9("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[k.SF.String.with("query","Search string")],new k._m("A promise that resolves to an array of SymbolInformation-instances.",(e=>e.map(I.$P.to)))),new k.b9("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[k.SF.Uri,k.SF.Position],new k._m("A promise that resolves to an array of CallHierarchyItem-instances",(e=>e.map(I.ll.to)))),new k.b9("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[k.SF.CallHierarchyItem],new k._m("A promise that resolves to an array of CallHierarchyIncomingCall-instances",(e=>e.map(I.MP.to)))),new k.b9("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[k.SF.CallHierarchyItem],new k._m("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",(e=>e.map(I.RV.to)))),new k.b9("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[k.SF.Uri,k.SF.Position],new k._m("A promise that resolves to a range and placeholder text.",(e=>{if(e)return{range:I.e6.to(e.range),placeholder:e.text}}))),new k.b9("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[k.SF.Uri,k.SF.Position,k.SF.String.with("newName","The new symbol name")],new k._m("A promise that resolves to a WorkspaceEdit.",(e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return I.Db.to(e)}}))),new k.b9("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[k.SF.Uri,k.SF.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new k._m("A promise that resolves to an array of DocumentLink-instances.",(e=>e.map(I.jW.to)))),new k.b9("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[k.SF.Uri],new k._m("A promise that resolves to SemanticTokensLegend.",(e=>{if(e)return new x.Pts(e.tokenTypes,e.tokenModifiers)}))),new k.b9("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[k.SF.Uri],new k._m("A promise that resolves to SemanticTokens.",(e=>{if(!e)return;const t=(0,D.O)(e);return"full"===t.type?new x.Uzh(t.data,void 0):void 0}))),new k.b9("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[k.SF.Uri,k.SF.Range.optional()],new k._m("A promise that resolves to SemanticTokensLegend.",(e=>{if(e)return new x.Pts(e.tokenTypes,e.tokenModifiers)}))),new k.b9("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[k.SF.Uri,k.SF.Range],new k._m("A promise that resolves to SemanticTokens.",(e=>{if(!e)return;const t=(0,D.O)(e);return"full"===t.type?new x.Uzh(t.data,void 0):void 0}))),new k.b9("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[k.SF.Uri,k.SF.Position,k.SF.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),k.SF.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new k._m("A promise that resolves to a CompletionList-instance.",((e,t,i)=>{if(!e)return new x.Ub$([]);const n=e.suggestions.map((e=>I.FG.to(e,i)));return new x.Ub$(n,e.incomplete)}))),new k.b9("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[k.SF.Uri,k.SF.Position,k.SF.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new k._m("A promise that resolves to SignatureHelp.",(e=>{if(e)return I.vy.to(e)}))),new k.b9("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[k.SF.Uri,k.SF.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new k._m("A promise that resolves to an array of CodeLens-instances.",((e,t,i)=>R((e=>new x.JFR(I.e6.to(e.range),e.command&&i.fromInternal(e.command))))(e)))),new k.b9("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[k.SF.Uri,new k.SF("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",(e=>x.e6w.isRange(e)),(e=>x.Y19.isSelection(e)?I.Y1.from(e):I.e6.from(e))),k.SF.String.with("kind","Code action kind to return code actions for").optional(),k.SF.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new k._m("A promise that resolves to an array of Command-instances.",((e,t,i)=>R((e=>{if(e._isSynthetic){if(!e.command)throw new Error("Synthetic code actions must have a command");return i.fromInternal(e.command)}{const t=new x.B2n(e.title,e.kind?new x.yNd(e.kind):void 0);return e.edit&&(t.edit=I.Db.to(e.edit)),e.command&&(t.command=i.fromInternal(e.command)),t.isPreferred=e.isPreferred,t}}))(e)))),new k.b9("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[k.SF.Uri],new k._m("A promise that resolves to an array of ColorInformation objects.",(e=>e?e.map((e=>new x.pr0(I.e6.to(e.range),I.Il.to(e.color)))):[]))),new k.b9("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new k.SF("color","The color to show and insert",(e=>e instanceof x.Ilk),I.Il.from),new k.SF("context","Context object with uri and range",(e=>!0),(e=>({uri:e.uri,range:I.e6.from(e.range)})))],new k._m("A promise that resolves to an array of ColorPresentation objects.",(e=>e?e.map(I.oi.to):[]))),new k.b9("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[k.SF.Uri,k.SF.Range],new k._m("A promise that resolves to an array of Inlay objects",((e,t,i)=>e.map(I.t7.to.bind(void 0,i))))),new k.b9("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[k.SF.Uri],new k._m("A promise that resolves to an array of FoldingRange objects",((e,t)=>{if(e)return e.map(I.so.to)}))),new k.b9("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new k._m("A promise that resolves to an array of NotebookContentProvider static info objects.",R((e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map((e=>I.wN.to(e)))}))))),new k.b9("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[k.SF.Uri,k.SF.Range,new k.SF("context","An InlineValueContext",(e=>e&&"number"==typeof e.frameId&&e.stoppedLocation instanceof x.e6w),(e=>I.GS.from(e)))],new k._m("A promise that resolves to an array of InlineValue objects",(e=>e.map(I.CR.to)))),new k.b9("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new k.SF("uriOrString","Uri-instance or string (only http/https)",(e=>l.ov.isUri(e)||"string"==typeof e&&(0,a.Gs)(e,a.lg.http,a.lg.https)),(e=>e)),new k.SF("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",(e=>void 0===e||"number"==typeof e||"object"==typeof e),(e=>e?"number"==typeof e?[I.eI.from(e),void 0]:[I.eI.from(e.viewColumn),I.P5.from(e)]:e)).optional(),k.SF.String.with("label","").optional()],k._m.Void),new k.b9("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[k.SF.Uri.with("resource","Resource to open"),k.SF.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new k.SF("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",(e=>void 0===e||"number"==typeof e||"object"==typeof e),(e=>e?"number"==typeof e?[I.eI.from(e),void 0]:[I.eI.from(e.viewColumn),I.P5.from(e)]:e)).optional()],k._m.Void),new k.b9("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[k.SF.Uri.with("left","Left-hand side resource of the diff editor"),k.SF.Uri.with("right","Right-hand side resource of the diff editor"),k.SF.String.with("title","Human readable title for the diff editor").optional(),new k.SF("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",(e=>void 0===e||"object"==typeof e),(e=>e&&[I.eI.from(e.viewColumn),I.P5.from(e)])).optional()],k._m.Void),new k.b9("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[k.SF.String.with("title","Human readable title for the changes editor"),new k.SF("resourceList","List of resources to compare",(e=>{for(const t of e){if(3!==t.length)return!1;const[e,i,n]=t;if(!l.ov.isUri(e)||!l.ov.isUri(i)&&null!=i||!l.ov.isUri(n)&&null!=n)return!1}return!0}),(e=>e))],k._m.Void),new k.b9("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[k.SF.Uri,k.SF.Position],new k._m("A promise that resolves to an array of TypeHierarchyItem-instances",(e=>e.map(I.fQ.to)))),new k.b9("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[k.SF.TypeHierarchyItem],new k._m("A promise that resolves to an array of TypeHierarchyItem-instances",(e=>e.map(I.fQ.to)))),new k.b9("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[k.SF.TypeHierarchyItem],new k._m("A promise that resolves to an array of TypeHierarchyItem-instances",(e=>e.map(I.fQ.to)))),new k.b9("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[k.SF.TestItem],k._m.Void),new k.b9("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[k.SF.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],k._m.Void),new k.b9("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[k.SF.String.with("name","The context key name"),new k.SF("value","The context key value",(()=>!0),(e=>e))],k._m.Void),new k.b9("vscode.executeMappedEditsProvider","_executeMappedEditsProvider","Execute Mapped Edits Provider",[k.SF.Uri,k.SF.StringArray,new k.SF("MappedEditsContext","Mapped Edits Context",(e=>I.OU.is(e)),(e=>I.OU.from(e)))],new k._m("A promise that resolves to a workspace edit or null",(e=>e?I.Db.to(e):null))),new k.b9("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new k.SF("Run arguments","",(e=>!0),(e=>{if(e)return{initialRange:e.initialRange?I.e6.from(e.initialRange):void 0,initialSelection:x.Y19.isSelection(e.initialSelection)?I.Y1.from(e.initialSelection):void 0,message:e.message,autoSend:e.autoSend,position:e.position?I.Ly.from(e.position):void 0}}))],k._m.Void)];class A{static register(e){P.forEach(e.registerApiCommand,e),this._registerValidateWhenClausesCommand(e)}static _registerValidateWhenClausesCommand(e){e.registerCommand(!1,"_validateWhenClauses",T.iw)}}function R(e){return t=>{if(Array.isArray(t))return t.map(e)}}function L(e){if(!Array.isArray(e))return;const t=[];for(const i of e)(0,S.vx)(i)?t.push(I.nc.to(i)):t.push(I.xh.to(i));return t}var N=i(43878),$=i(11301),O=i(45493),F=i(82722),M=i(92962);let U=class{constructor(e,t){this._proxy=e.getProxy(w.Tr.MainThreadBulkEdits),this._versionInformationProvider={getTextDocumentVersion:e=>t.getDocument(e)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(e,t,i){const n=new M.ky(I.Db.from(e,this._versionInformationProvider));return this._proxy.$tryApplyWorkspaceEdit(n,void 0,i?.isRefactoring??!1)}};U=(0,O.g)([(0,O.f)(0,F.O)],U);var H=i(35820),z=i(36994),B=i(97698),W=i(43064),V=i(47635),q=i(61673),j=i(22423);class K{constructor(e,t,i,n,r){this._extension=e,this._request=t,this._proxy=i,this._commandsConverter=n,this._sessionDisposables=r,this._stopWatch=W.G.create(!1),this._isClosed=!1}close(){this._isClosed=!0}get timings(){return{firstProgress:this._firstProgress,totalElapsed:this._stopWatch.elapsed()}}get apiObject(){if(!this._apiObject){const e=this;function t(t){if(e._isClosed){const e=new Error("Response stream has been closed");throw Error.captureStackTrace(e,t),e}}this._stopWatch.reset();const i=(e,t)=>{if(void 0===this._firstProgress&&"content"in e&&(this._firstProgress=this._stopWatch.elapsed()),t){const i=this._proxy.$handleProgressChunk(this._request.requestId,e),n={report:e=>{i?.then((t=>{t&&(x.W5C.isMarkdownString(e.value)?this._proxy.$handleProgressChunk(this._request.requestId,I.fk.from(e),t):this._proxy.$handleProgressChunk(this._request.requestId,I.Ht.from(e),t))}))}};Promise.all([i,t?.(n)]).then((([e,t])=>{void 0!==e&&void 0!==t&&this._proxy.$handleProgressChunk(this._request.requestId,I.cq.from(t),e)}))}else this._proxy.$handleProgressChunk(this._request.requestId,e)};this._apiObject={markdown(e){t(this.markdown);const n=new x.HYr(e),r=I.HY.from(n);return i(r),this},markdownWithVulnerabilities(n,r){t(this.markdown),r&&(0,j.H5)(e._extension,"chatParticipantAdditions");const o=new x.Zgy(n,r),s=I.Zg.from(o);return i(s),this},filetree(e,n){t(this.filetree);const r=new x.Y08(e,n),o=I.ZJ.from(r);return i(o),this},anchor(e,n){t(this.anchor);const r=new x.trJ(e,n),o=I.tr.from(r);return i(o),this},button(n){t(this.anchor);const r=new x.WTw(n),o=I.WT.from(r,e._commandsConverter,e._sessionDisposables);return i(o),this},progress(e,n){t(this.progress);const r=new x.meY(e,n),o=n?I.JL.from(r):I.Gl.from(r);return i(o,n),this},warning(n){t(this.progress),(0,j.H5)(e._extension,"chatParticipantAdditions");const r=new x.fkf(n),o=I.fk.from(r);return i(o),this},reference(n,r){if(t(this.reference),"variableName"in n&&(0,j.H5)(e._extension,"chatParticipantAdditions"),"variableName"in n&&!n.value){const t=e._request.variables.variables.find((e=>e.name===n.variableName));if(t){let e;if(t.references?.length)e=t.references.map((e=>({kind:"reference",reference:{variableName:n.variableName,value:e.reference}})));else{const t=new x.Ht3(n,r);e=[I.Ht.from(t)]}return e.forEach((e=>i(e))),this}}else{const e=new x.Ht3(n,r),t=I.Ht.from(e);i(t)}return this},textEdit(n,r){t(this.textEdit),(0,j.H5)(e._extension,"chatParticipantAdditions");const o=new x.cGf(n,r),s=I.cG.from(o);return i(s),this},detectedParticipant(n,r){t(this.detectedParticipant),(0,j.H5)(e._extension,"chatParticipantAdditions");const o=new x.s8P(n,r),s=I.s8.from(o);return i(s),this},confirmation(n,r,o){t(this.confirmation),(0,j.H5)(e._extension,"chatParticipantAdditions");const s=new x.Ik8(n,r,o),a=I.Ik.from(s);return i(a),this},push(n){if(t(this.push),(n instanceof x.cGf||n instanceof x.Zgy||n instanceof x.s8P||n instanceof x.fkf||n instanceof x.Ik8)&&(0,j.H5)(e._extension,"chatParticipantAdditions"),n instanceof x.Ht3)this.reference(n.value,n.iconPath);else{const t=I.Sm.from(n,e._commandsConverter,e._sessionDisposables);i(t)}return this}}}return this._apiObject}}class G extends s.JT{static{this._idPool=0}constructor(e,t,i){super(),this._logService=t,this.commands=i,this._agents=new Map,this._sessionDisposables=this._register(new s.b2),this._completionDisposables=this._register(new s.b2),this._proxy=e.getProxy(w.Tr.MainThreadChatAgents2)}transferActiveChat(e){this._proxy.$transferActiveChatSession(e)}createChatAgent(e,t,i){const n=G._idPool++,r=new Q(e,t,this._proxy,n,i);return this._agents.set(n,r),this._proxy.$registerAgent(n,e.identifier,t,{},void 0),r.apiAgent}createDynamicChatAgent(e,t,i,n){const r=G._idPool++,o=new Q(e,t,this._proxy,r,n);return this._agents.set(r,o),this._proxy.$registerAgent(r,e.identifier,t,{isSticky:!0},i),o.apiAgent}async $invokeAgent(e,t,i,n){const r=this._agents.get(e);if(!r)throw new Error(`[CHAT](${e}) CANNOT invoke agent because the agent is not registered`);let o=this._sessionDisposables.get(t.sessionId);o||(o=new s.SL,this._sessionDisposables.set(t.sessionId,o));const a=new K(r.extension,t,this._proxy,this.commands.converter,o);try{const e=await this.prepareHistoryTurns(t.agentId,i),o=r.invoke(I.TU.to(t),{history:e},a.apiObject,n);return await(0,H.eP)(Promise.resolve(o).then((e=>{if(e?.metadata)try{JSON.stringify(e.metadata)}catch(e){const t=`result.metadata MUST be JSON.stringify-able. Got error: ${e.message}`;return this._logService.error(`[${r.extension.identifier.value}] [@${r.id}] ${t}`,r.extension),{errorDetails:{message:t},timings:a.timings}}let t;return e?.errorDetails&&(t={...e.errorDetails,responseIsIncomplete:!0}),t?.responseIsRedacted&&(0,j.H5)(r.extension,"chatParticipantPrivate"),{errorDetails:t,timings:a.timings,metadata:e?.metadata}})),n)}catch(e){return this._logService.error(e,r.extension),e instanceof x.tHl&&e.cause&&(e=e.cause),{errorDetails:{message:(0,z.yJ)(e),responseIsIncomplete:!0}}}finally{a.close()}}async prepareHistoryTurns(e,t){const i=[];for(const n of t.history){const t=I.hq.to(n.result),r=e===n.request.agentId?t:{...t,metadata:void 0};i.push(new x.eg0(n.request.message,n.request.command,n.request.variables.variables.map(I.IE.to),n.request.agentId));const o=(0,E.kX)(n.response.map((e=>I.Sm.toContent(e,this.commands.converter))));i.push(new x.IQN(o,r,n.request.agentId,n.request.command))}return i}$releaseSession(e){this._sessionDisposables.deleteAndDispose(e)}async $provideFollowups(e,t,i,n,r){const o=this._agents.get(t);if(!o)return Promise.resolve([]);const s=await this.prepareHistoryTurns(o.id,n),a=I.hq.to(i);return(await o.provideFollowups(a,{history:s},r)).filter((e=>{const t=!e.participant||B.$.some(this._agents.values(),(t=>t.id===e.participant&&m.kP.equals(t.extension.identifier,o.extension.identifier)));return t||this._logService.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${e.participant}`),t})).map((t=>I.a8.from(t,e)))}$acceptFeedback(e,t,i,n){const r=this._agents.get(e);if(!r)return;const o=I.hq.to(t);let s;switch(i){case q.uV.Down:s=x.u8m.Unhelpful;break;case q.uV.Up:s=x.u8m.Helpful}r.acceptFeedback(n?Object.freeze({result:o,kind:s,reportIssue:n}):Object.freeze({result:o,kind:s}))}$acceptAction(e,t,i){const n=this._agents.get(e);if(!n)return;if("vote"===i.action.kind)return;const r=I.$l.to(t,i,this.commands.converter);r&&n.acceptAction(Object.freeze(r))}async $invokeCompletionProvider(e,t,i){const n=this._agents.get(e);if(!n)return[];let r=this._completionDisposables.get(e);r?r.clear():(r=new s.SL,this._completionDisposables.set(e,r));return(await n.invokeCompletionProvider(t,i)).map((e=>I.e5.from(e,this.commands.converter,r)))}async $provideWelcomeMessage(e,t,i){const n=this._agents.get(e);if(n)return await n.provideWelcomeMessage(I.oY.to(t),i)}async $provideSampleQuestions(e,t,i){const n=this._agents.get(e);if(n)return(await n.provideSampleQuestions(I.oY.to(t),i)).map((e=>I.a8.from(e,void 0)))}}class Q{constructor(e,t,i,n,r){this.extension=e,this.id=t,this._proxy=i,this._handle=n,this._requestHandler=r,this._onDidReceiveFeedback=new o.Q5,this._onDidPerformAction=new o.Q5}acceptFeedback(e){this._onDidReceiveFeedback.fire(e)}acceptAction(e){this._onDidPerformAction.fire(e)}async invokeCompletionProvider(e,t){return this._agentVariableProvider?await this._agentVariableProvider.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,i){if(!this._followupProvider)return[];const n=await this._followupProvider.provideFollowups(e,t,i);return n?n.filter((e=>!(e&&"commandId"in e))).filter((e=>!(e&&"message"in e))):[]}async provideWelcomeMessage(e,t){if(!this._welcomeMessageProvider)return[];const i=await this._welcomeMessageProvider.provideWelcomeMessage(e,t);return i?i.map((e=>"string"==typeof e?e:I.W5.from(e))):[]}async provideSampleQuestions(e,t){if(!this._welcomeMessageProvider||!this._welcomeMessageProvider.provideSampleQuestions)return[];const i=await this._welcomeMessageProvider.provideSampleQuestions(e,t);return i||[]}get apiAgent(){let e=!1,t=!1;const i=()=>{e||t||(t=!0,queueMicrotask((()=>{this._proxy.$updateAgent(this._handle,{icon:this._iconPath?this._iconPath instanceof l.ov?this._iconPath:"light"in this._iconPath?this._iconPath.light:void 0:void 0,iconDark:this._iconPath&&"dark"in this._iconPath?this._iconPath.dark:void 0,themeIcon:this._iconPath instanceof x.kS8?this._iconPath:void 0,hasFollowups:void 0!==this._followupProvider,isSecondary:this._isSecondary,helpTextPrefix:this._helpTextPrefix&&"string"!=typeof this._helpTextPrefix?I.W5.from(this._helpTextPrefix):this._helpTextPrefix,helpTextVariablesPrefix:this._helpTextVariablesPrefix&&"string"!=typeof this._helpTextVariablesPrefix?I.W5.from(this._helpTextVariablesPrefix):this._helpTextVariablesPrefix,helpTextPostfix:this._helpTextPostfix&&"string"!=typeof this._helpTextPostfix?I.W5.from(this._helpTextPostfix):this._helpTextPostfix,supportIssueReporting:this._supportIssueReporting,requester:this._requester,supportsSlowVariables:this._supportsSlowReferences}),t=!1})))},n=this;return{get id(){return n.id},get iconPath(){return n._iconPath},set iconPath(e){n._iconPath=e,i()},get requestHandler(){return n._requestHandler},set requestHandler(e){(0,V.p_)("function"==typeof e,"Invalid request handler"),n._requestHandler=e},get followupProvider(){return n._followupProvider},set followupProvider(e){n._followupProvider=e,i()},get isDefault(){return(0,j.H5)(n.extension,"defaultChatParticipant"),n._isDefault},set isDefault(e){(0,j.H5)(n.extension,"defaultChatParticipant"),n._isDefault=e,i()},get helpTextPrefix(){return(0,j.H5)(n.extension,"defaultChatParticipant"),n._helpTextPrefix},set helpTextPrefix(e){(0,j.H5)(n.extension,"defaultChatParticipant"),n._helpTextPrefix=e,i()},get helpTextVariablesPrefix(){return(0,j.H5)(n.extension,"defaultChatParticipant"),n._helpTextVariablesPrefix},set helpTextVariablesPrefix(e){(0,j.H5)(n.extension,"defaultChatParticipant"),n._helpTextVariablesPrefix=e,i()},get helpTextPostfix(){return(0,j.H5)(n.extension,"defaultChatParticipant"),n._helpTextPostfix},set helpTextPostfix(e){(0,j.H5)(n.extension,"defaultChatParticipant"),n._helpTextPostfix=e,i()},get isSecondary(){return(0,j.H5)(n.extension,"defaultChatParticipant"),n._isSecondary},set isSecondary(e){(0,j.H5)(n.extension,"defaultChatParticipant"),n._isSecondary=e,i()},get supportIssueReporting(){return(0,j.H5)(n.extension,"chatParticipantPrivate"),n._supportIssueReporting},set supportIssueReporting(e){(0,j.H5)(n.extension,"chatParticipantPrivate"),n._supportIssueReporting=e,i()},get onDidReceiveFeedback(){return n._onDidReceiveFeedback.event},set participantVariableProvider(e){if((0,j.H5)(n.extension,"chatParticipantAdditions"),n._agentVariableProvider=e,e){if(!e.triggerCharacters.length)throw new Error("triggerCharacters are required");n._proxy.$registerAgentCompletionsProvider(n._handle,n.id,e.triggerCharacters)}else n._proxy.$unregisterAgentCompletionsProvider(n._handle,n.id)},get participantVariableProvider(){return(0,j.H5)(n.extension,"chatParticipantAdditions"),n._agentVariableProvider},set welcomeMessageProvider(e){(0,j.H5)(n.extension,"defaultChatParticipant"),n._welcomeMessageProvider=e,i()},get welcomeMessageProvider(){return(0,j.H5)(n.extension,"defaultChatParticipant"),n._welcomeMessageProvider},onDidPerformAction:(0,j.$x)(this.extension,"chatParticipantAdditions")?this._onDidPerformAction.event:void 0,set requester(e){n._requester=e,i()},get requester(){return n._requester},set supportsSlowReferences(e){(0,j.H5)(n.extension,"chatParticipantPrivate"),n._supportsSlowReferences=e,i()},get supportsSlowReferences(){return(0,j.H5)(n.extension,"chatParticipantPrivate"),n._supportsSlowReferences},dispose(){e=!0,n._followupProvider=void 0,n._onDidReceiveFeedback.dispose(),n._proxy.$unregisterAgent(n._handle)}}}invoke(e,t,i,n){return this._requestHandler(e,t,i,n)}}var J=i(27528);class Z{static{this._idPool=0}constructor(e){this._resolver=new Map,this._proxy=e.getProxy(w.Tr.MainThreadChatVariables)}async $resolveVariable(e,t,i,n){const o=this._resolver.get(e);if(o)try{if(o.resolver.resolve2){(0,j.H5)(o.extension,"chatParticipantAdditions");const e=new X(t,this._proxy),r=await o.resolver.resolve2(o.data.name,{prompt:i},e.apiObject,n);if(r&&r[0])return r[0].value}else{const e=await o.resolver.resolve(o.data.name,{prompt:i},n);if(e&&e[0])return e[0].value}}catch(e){(0,r.Cp)(e)}}registerVariableResolver(e,t,i,n,r,o,a,c,l){const d=Z._idPool++,u=l?J.kS.fromId(l):void 0;return this._resolver.set(d,{extension:e,data:{id:t,name:i,description:n,modelDescription:r,icon:u},resolver:a}),this._proxy.$registerVariable(d,{id:t,name:i,description:n,modelDescription:r,isSlow:o,fullName:c,icon:u}),(0,s.OF)((()=>{this._resolver.delete(d),this._proxy.$unregisterVariable(d)}))}}class X{constructor(e,t){this._requestId=e,this._proxy=t,this._isClosed=!1}close(){this._isClosed=!0}get apiObject(){if(!this._apiObject){const e=this;function t(t){if(e._isClosed){const e=new Error("Response stream has been closed");throw Error.captureStackTrace(e,t),e}}const i=e=>{this._proxy.$handleProgressChunk(this._requestId,e)};this._apiObject={progress(e){t(this.progress);const n=new x.Gli(e),r=I.Gl.from(n);return i(r),this},reference(e){t(this.reference);const n=new x.Ht3(e),r=I.Ht.from(n);return i(r),this},push(e){return t(this.push),e instanceof x.Ht3?i(I.Ht.from(e)):e instanceof x.Gli&&i(I.Gl.from(e)),this}}}return this._apiObject}}class Y{constructor(e){const t=e.getProxy(w.Tr.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(e){return t.$writeText(e)}})}}var ee=i(34032);const te="vscode-cdn.net",ie=`vscode-resource.${te}`,ne=`'self' https://*.${te}`;function re(e,t){return e.scheme===a.lg.http||e.scheme===a.lg.https?e:(t&&t.authority&&t.isRemote&&e.scheme===a.lg.file&&(e=l.ov.from({scheme:a.lg.vscodeRemote,authority:t.authority,path:e.path})),l.ov.from({scheme:a.lg.https,authority:`${e.scheme}+${i=e.authority,i.replace(/./g,(e=>{const t=e.charCodeAt(0);return t>=ee.m.a&&t<=ee.m.z||t>=ee.m.A&&t<=ee.m.Z||t>=ee.m.Digit0&&t<=ee.m.Digit9?e:"-"+t.toString(16).padStart(4,"0")}))}.${ie}`,path:e.path,fragment:e.fragment,query:e.query}));var i}class oe{constructor(e,t,i){this._proxy=e,this._editors=t,this._remoteInfo=i,this._handlePool=0,this._disposables=new s.SL,this._insets=new Map,this._disposables.add(t.onDidChangeVisibleTextEditors((()=>{const e=t.getVisibleTextEditors();for(const t of this._insets.values())e.indexOf(t.editor)<0&&t.inset.dispose()})))}dispose(){this._insets.forEach((e=>e.inset.dispose())),this._disposables.dispose()}createWebviewEditorInset(e,t,i,n,r){let s;for(const t of this._editors.getVisibleTextEditors(!0))if(t.value===e){s=t;break}if(!s)throw new Error("not a visible editor");const a=this,c=this._handlePool++,l=new o.Q5,d=new o.Q5,u=new class{constructor(){this._html="",this._options=Object.create(null)}asWebviewUri(e){return re(e,a._remoteInfo)}get cspSource(){return ne}set options(e){this._options=e,a._proxy.$setOptions(c,e)}get options(){return this._options}set html(e){this._html=e,a._proxy.$setHtml(c,e)}get html(){return this._html}get onDidReceiveMessage(){return l.event}postMessage(e){return a._proxy.$postMessage(c,e)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=i,this.webview=u,this.onDidDispose=d.event}dispose(){a._insets.has(c)&&(a._insets.delete(c),a._proxy.$disposeEditorInset(c),d.fire(),d.dispose(),l.dispose())}};return this._proxy.$createEditorInset(c,s.id,s.value.document.uri,t+1,i,n||{},r.identifier,r.extensionLocation),this._insets.set(c,{editor:e,inset:h,onDidReceiveMessage:l}),h}$onDidDispose(e){const t=this._insets.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){const i=this._insets.get(e);i?.onDidReceiveMessage.fire(t)}}var se=i(65045);function ae(e,t,i){const n=e.getProxy(w.Tr.MainThreadComments);class r{static{this.handlePool=0}constructor(){this._commentControllers=new Map,this._commentControllersByExtension=new m.C1,t.registerArgumentProcessor({processArgument:e=>{if(e&&e.$mid===se.m.CommentController){const t=this._commentControllers.get(e.handle);return t?t.value:e}if(e&&e.$mid===se.m.CommentThread){const t=e,i=this._commentControllers.get(t.commentControlHandle);if(!i)return t;const n=i.getCommentThread(t.commentThreadHandle);return n?n.value:t}if(e&&(e.$mid===se.m.CommentThreadReply||e.$mid===se.m.CommentThreadInstance)){const t=this._commentControllers.get(e.thread.commentControlHandle);if(!t)return e;const i=t.getCommentThread(e.thread.commentThreadHandle);return i?e.$mid===se.m.CommentThreadInstance?i.value:{thread:i.value,text:e.text}:e}if(e&&e.$mid===se.m.CommentNode){const t=this._commentControllers.get(e.thread.commentControlHandle);if(!t)return e;const i=t.getCommentThread(e.thread.commentThreadHandle);if(!i)return e;const n=e.commentUniqueId,r=i.getCommentByUniqueId(n);return r||e}if(e&&e.$mid===se.m.CommentThreadNode){const t=this._commentControllers.get(e.thread.commentControlHandle);if(!t)return e;const i=t.getCommentThread(e.thread.commentThreadHandle);if(!i)return e;const n=e.text,r=e.commentUniqueId,o=i.getCommentByUniqueId(r);return o?("string"==typeof o.body?o.body=n:o.body=new x.W5C(n),o):e}return e}})}createCommentController(e,t,i){const n=r.handlePool++,o=new c(e,n,t,i);this._commentControllers.set(o.handle,o);const s=this._commentControllersByExtension.get(e.identifier)||[];return s.push(o),this._commentControllersByExtension.set(e.identifier,s),o.value}async $createCommentThreadTemplate(e,t,i,n){const r=this._commentControllers.get(e);r&&r.$createCommentThreadTemplate(t,i,n)}async $setActiveComment(e,t){const i=this._commentControllers.get(e);i&&i.$setActiveComment(t??void 0)}async $updateCommentThreadTemplate(e,t,i){const n=this._commentControllers.get(e);n&&n.$updateCommentThreadTemplate(t,i)}$deleteCommentThread(e,t){const i=this._commentControllers.get(e);i?.$deleteCommentThread(t)}async $provideCommentingRanges(e,t,n){const r=this._commentControllers.get(e);if(!r||!r.commentingRangeProvider)return Promise.resolve(void 0);const o=await i.ensureDocumentData(l.ov.revive(t));return(0,H.OH)((async()=>{const e=await r.commentingRangeProvider.provideCommentingRanges(o.document,n);let t;return t=Array.isArray(e)?{ranges:e,fileComments:!1}:e?{ranges:e.ranges||[],fileComments:e.enableFileComments||!1}:e??void 0,t})).then((e=>{let t;return e&&(t={ranges:e.ranges.map((e=>I.e6.from(e))),fileComments:e.fileComments}),t}))}$toggleReaction(e,t,i,n,r){const o=this._commentControllers.get(e);return o&&o.reactionHandler?(0,H.OH)((()=>{const e=o.getCommentThread(t);if(e){const t=e.getCommentByUniqueId(n.uniqueIdInThread);if(void 0!==o&&t&&o.reactionHandler)return o.reactionHandler(t,function(e){return{label:e.label||"",count:e.count||0,iconPath:e.iconPath?l.ov.revive(e.iconPath):"",authorHasReacted:e.hasReacted||!1,reactors:e.reactors?.map((e=>({name:e})))}}(r))}return Promise.resolve(void 0)})):Promise.resolve(void 0)}}class a{static{this._handlePool=0}set threadId(e){this._id=e}get threadId(){return this._id}get id(){return this._id}get resource(){return this._uri}get uri(){return this._uri}set range(e){void 0===e==(void 0===this._range)&&e&&this._range&&e.isEqual(this._range)||(this._range=e,this.modifications.range=e,this._onDidUpdateCommentThread.fire())}get range(){return this._range}set canReply(e){this._canReply!==e&&(this._canReply=e,this.modifications.canReply=e,this._onDidUpdateCommentThread.fire())}get canReply(){return this._canReply}get label(){return this._label}set label(e){this._label=e,this.modifications.label=e,this._onDidUpdateCommentThread.fire()}get contextValue(){return this._contextValue}set contextValue(e){this._contextValue=e,this.modifications.contextValue=e,this._onDidUpdateCommentThread.fire()}get comments(){return this._comments}set comments(e){this._comments=e,this.modifications.comments=e,this._onDidUpdateCommentThread.fire()}get collapsibleState(){return this._collapseState}set collapsibleState(e){this._collapseState=e,this.modifications.collapsibleState=e,this._onDidUpdateCommentThread.fire()}get state(){return this._state}set state(e){this._state=e,"object"==typeof e?((0,j.H5)(this.extensionDescription,"commentThreadApplicability"),this.modifications.state=e.resolved,this.modifications.applicability=e.applicability):this.modifications.state=e,this._onDidUpdateCommentThread.fire()}get isDisposed(){return this._isDiposed}constructor(e,t,i,r,c,l,u,h,p){this._commentControllerHandle=t,this._id=i,this._uri=r,this._range=c,this._comments=l,this.extensionDescription=u,this._isTemplate=h,this.handle=a._handlePool++,this.commentHandle=0,this.modifications=Object.create(null),this._onDidUpdateCommentThread=new o.Q5,this.onDidUpdateCommentThread=this._onDidUpdateCommentThread.event,this._canReply=!0,this._commentsMap=new Map,this._acceptInputDisposables=new s.XK,this._acceptInputDisposables.value=new s.SL,void 0===this._id&&(this._id=`${e}.${this.handle}`),n.$createCommentThread(t,this.handle,this._id,this._uri,I.e6.from(this._range),this._comments.map((e=>d(this,e,this._commentsMap,this.extensionDescription))),u.identifier,this._isTemplate,p),this._localDisposables=[],this._isDiposed=!1,this._localDisposables.push(this.onDidUpdateCommentThread((()=>{this.eventuallyUpdateCommentThread()}))),this._localDisposables.push({dispose:()=>{n.$deleteCommentThread(t,this.handle)}});const m=this;this.value={get uri(){return m.uri},get range(){return m.range},set range(e){m.range=e},get comments(){return m.comments},set comments(e){m.comments=e},get collapsibleState(){return m.collapsibleState},set collapsibleState(e){m.collapsibleState=e},get canReply(){return m.canReply},set canReply(e){m.canReply=e},get contextValue(){return m.contextValue},set contextValue(e){m.contextValue=e},get label(){return m.label},set label(e){m.label=e},get state(){return m.state},set state(e){m.state=e},reveal:e=>m.reveal(e),dispose:()=>{m.dispose()}}}updateIsTemplate(){this._isTemplate&&(this._isTemplate=!1,this.modifications.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this._isDiposed)return;this.updateIsTemplate(),this._acceptInputDisposables.value||(this._acceptInputDisposables.value=new s.SL);const e=e=>Object.prototype.hasOwnProperty.call(this.modifications,e),t={};e("range")&&(t.range=I.e6.from(this._range)),e("label")&&(t.label=this.label),e("contextValue")&&(t.contextValue=this.contextValue??null),e("comments")&&(t.comments=this._comments.map((e=>d(this,e,this._commentsMap,this.extensionDescription)))),e("collapsibleState")&&(t.collapseState=function(e){if(void 0!==e)switch(e){case x.xKz.Expanded:return S.xK.Expanded;case x.xKz.Collapsed:return S.xK.Collapsed}return S.xK.Collapsed}(this._collapseState)),e("canReply")&&(t.canReply=this.canReply),e("state")&&(t.state=function(e){let t;t="object"==typeof e?e.resolved:e;if(void 0!==t)switch(t){case x.OTk.Unresolved:return S.OT.Unresolved;case x.OTk.Resolved:return S.OT.Resolved}return S.OT.Unresolved}(this._state)),e("applicability")&&(t.applicability=function(e){let t;"object"==typeof e&&(t=e.applicability);if(void 0!==t)switch(t){case x.dql.Current:return S.dq.Current;case x.dql.Outdated:return S.dq.Outdated}return S.dq.Current}(this._state)),e("isTemplate")&&(t.isTemplate=this._isTemplate),this.modifications={},n.$updateCommentThread(this._commentControllerHandle,this.handle,this._id,this._uri,t)}getCommentByUniqueId(e){for(const t of this._commentsMap){const i=t[0];if(e===t[1])return i}}async reveal(e){return(0,j.H5)(this.extensionDescription,"commentReveal"),n.$revealCommentThread(this._commentControllerHandle,this.handle,{preserveFocus:!1,focusReply:!1,...e})}dispose(){this._isDiposed=!0,this._acceptInputDisposables.dispose(),this._localDisposables.forEach((e=>e.dispose()))}}class c{get id(){return this._id}get label(){return this._label}get handle(){return this._handle}get commentingRangeProvider(){return this._commentingRangeProvider}set commentingRangeProvider(e){this._commentingRangeProvider=e,e?.resourceHints&&(0,j.H5)(this._extension,"commentingRangeHint"),n.$updateCommentingRanges(this.handle,e?.resourceHints)}get reactionHandler(){return this._reactionHandler}set reactionHandler(e){this._reactionHandler=e,n.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!e})}get options(){return this._options}set options(e){this._options=e,n.$updateCommentControllerFeatures(this.handle,{options:this._options})}get activeComment(){return(0,j.H5)(this._extension,"activeComment"),this._activeComment}get activeCommentThread(){return(0,j.H5)(this._extension,"activeComment"),this._activeThread}constructor(e,t,i,r){this._extension=e,this._handle=t,this._id=i,this._label=r,this._threads=new Map,n.$registerCommentController(this.handle,i,r,this._extension.identifier.value);const o=this;this.value=Object.freeze({id:o.id,label:o.label,get options(){return o.options},set options(e){o.options=e},get commentingRangeProvider(){return o.commentingRangeProvider},set commentingRangeProvider(e){o.commentingRangeProvider=e},get reactionHandler(){return o.reactionHandler},set reactionHandler(e){o.reactionHandler=e},get activeCommentThread(){return o.activeCommentThread},createCommentThread(e,t,i){return o.createCommentThread(e,t,i).value},dispose:()=>{o.dispose()}}),this._localDisposables=[],this._localDisposables.push({dispose:()=>{n.$unregisterCommentController(this.handle)}})}createCommentThread(e,t,i){void 0===t&&(0,j.H5)(this._extension,"fileComments");const n=new a(this.id,this.handle,void 0,e,t,i,this._extension,!1);return this._threads.set(n.handle,n),n}$setActiveComment(e){if(!e)return this._activeComment=void 0,void(this._activeThread=void 0);const t=this._threads.get(e.commentThreadHandle);t&&(this._activeComment=e.uniqueIdInThread?t.getCommentByUniqueId(e.uniqueIdInThread):void 0,this._activeThread=t)}$createCommentThreadTemplate(e,t,i){const n=new a(this.id,this.handle,void 0,l.ov.revive(e),I.e6.to(t),[],this._extension,!0,i);return n.collapsibleState=S.xK.Expanded,this._threads.set(n.handle,n),n}$updateCommentThreadTemplate(e,t){const i=this._threads.get(e);i&&(i.range=I.e6.to(t))}$deleteCommentThread(e){const t=this._threads.get(e);t?.dispose(),this._threads.delete(e)}getCommentThread(e){return this._threads.get(e)}dispose(){this._threads.forEach((e=>{e.dispose()})),this._localDisposables.forEach((e=>e.dispose()))}}function d(e,t,i,n){let r=i.get(t);return r||(r=++e.commentHandle,i.set(t,r)),void 0!==t.state&&(0,j.H5)(n,"commentsDraftState"),t.reactions?.some((e=>void 0!==e.reactors))&&(0,j.H5)(n,"commentReactor"),{mode:t.mode,contextValue:t.contextValue,uniqueIdInThread:r,body:"string"==typeof t.body?t.body:I.W5.from(t.body),userName:t.author.name,userIconPath:t.author.iconPath,label:t.label,commentReactions:t.reactions?t.reactions.map((e=>function(e){return{label:e.label,iconPath:e.iconPath?(0,I.Ru)(e.iconPath):void 0,count:e.count,hasReacted:e.authorHasReacted,reactors:e.reactors&&e.reactors.length>0&&"string"!=typeof e.reactors[0]?e.reactors.map((e=>e.name)):e.reactors}}(e))):void 0,state:t.state,timestamp:t.timestamp?.toJSON()}}return new r}var ce,le=i(63537),de=i(87884),ue=i(81647),he=i(82998),pe=i(36795),me=i(30508);class ge{#v;#e;#b;#y;#w;#x;#C;#E;#S;#D;#T;#k;constructor(e,t,i,n,r,s,a){this.#C="",this.#S=!1,this.#D=!1,this._onMessageEmitter=new o.Q5,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#I=new o.Q5,this._onDidDispose=this.#I.event,this.#v=e,this.#e=t,this.#E=i,this.#y=n,this.#w=r,this.#x=s,this.#T=fe(s),this.#k=function(e){try{const t=(0,pe.Kt)((0,pe.wy)(e.engines.vscode));return!!t&&(t.majorBase<1||1===t.majorBase&&t.minorBase<60)}catch{return!1}}(s),this.#b=a}#I;dispose(){this.#S=!0,this.#I.fire(),this.#I.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#D=!0,re(e,this.#y)}get cspSource(){const e=this.#x.extensionLocation;if(e.scheme===a.lg.https||e.scheme===a.lg.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+ne}return ne}get html(){return this.assertNotDisposed(),this.#C}set html(e){this.assertNotDisposed(),this.#C!==e&&(this.#C=e,this.#k&&!this.#D&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#D=!0,this.#b.report("Webview vscode-resource: uris",this.#x,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#e.$setHtml(this.#v,this.rewriteOldResourceUrlsIfNeeded(e)))}get options(){return this.assertNotDisposed(),this.#E}set options(e){this.assertNotDisposed(),(0,he.fS)(this.#E,e)||this.#e.$setOptions(this.#v,be(this.#x,this.#w,e)),this.#E=e}async postMessage(e){if(this.#S)return!1;const t=(0,me.m)(e,{serializeBuffersForPostMessage:this.#T});return this.#e.$postMessage(this.#v,t.message,...t.buffers)}assertNotDisposed(){if(this.#S)throw new Error("Webview is disposed")}rewriteOldResourceUrlsIfNeeded(e){if(!this.#k)return e;const t=this.#x.extensionLocation?.scheme===a.lg.vscodeRemote,i=this.#x.extensionLocation.scheme===a.lg.vscodeRemote?this.#x.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,((e,n,r,o,s,a)=>`${n}${re(l.ov.from({scheme:o||"file",path:decodeURIComponent(s)}),{isRemote:t,authority:i}).toString()}${a}`)).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,((e,n,r,o,s,a)=>`${n}${re(l.ov.from({scheme:o||"file",path:decodeURIComponent(s)}),{isRemote:t,authority:i}).toString()}${a}`))}}function fe(e){try{const t=(0,pe.Kt)((0,pe.wy)(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}class _e extends s.JT{constructor(e,t,i,n,r){super(),this.remoteInfo=t,this.workspace=i,this._logService=n,this._deprecationService=r,this._webviews=new Map,this._webviewProxy=e.getProxy(w.Tr.MainThreadWebviews)}dispose(){super.dispose();for(const e of this._webviews.values())e.dispose();this._webviews.clear()}$onMessage(e,t,i){const n=this.getWebview(e);if(n){const{message:e}=(0,me.j)(t,i.value);n._onMessageEmitter.fire(e)}}$onMissingCsp(e,t){this._logService.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,i){const n=new ge(e,this._webviewProxy,function(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map((e=>l.ov.from(e)))}}(t),this.remoteInfo,this.workspace,i,this._deprecationService);this._webviews.set(e,n);const r=n._onDidDispose((()=>{r.dispose(),this.deleteWebview(e)}));return n}deleteWebview(e){this._webviews.delete(e)}getWebview(e){return this._webviews.get(e)}}function ve(e){return{id:e.identifier,location:e.extensionLocation}}function be(e,t,i){return{enableCommandUris:i.enableCommandUris,enableScripts:i.enableScripts,enableForms:i.enableForms,portMapping:i.portMapping,localResourceRoots:i.localResourceRoots||ye(e,t)}}function ye(e,t){return[...(t?.getWorkspaceFolders()||[]).map((e=>e.uri)),e.extensionLocation]}class we{static{this.enableDebugLogging=!1}constructor(e){this.id=e,this._data=new Map,this._idPool=1}add(e){const t=this._idPool++;return this._data.set(t,e),this.logDebugInfo(),t}get(e,t){return this._data.has(e)?this._data.get(e)[t]:void 0}delete(e){this._data.delete(e),this.logDebugInfo()}logDebugInfo(){we.enableDebugLogging&&console.log(`${this.id} cache size - ${this._data.size}`)}}class xe{constructor(e,t){this.document=e,this._storagePath=t,this._backupCounter=1,this._edits=new we("custom documents")}addEdit(e){return this._edits.add([e])}async undo(e,t){await this.getEdit(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.getEdit(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this._edits.delete(t)}getNewBackupUri(){if(!this._storagePath)throw new Error("Backup requires a valid storage path");const e=function(e){const t=e.scheme===a.lg.file||e.scheme===a.lg.untitled?e.fsPath:e.toString();return(0,de.vp)(t)+""}(this.document.uri)+this._backupCounter++;return(0,ue.Vo)(this._storagePath,e)}updateBackup(e){this._backup?.delete(),this._backup=e}disposeBackup(){this._backup?.delete(),this._backup=void 0}getEdit(e){const t=this._edits.get(e,0);if(!t)throw new Error("No edit found");return t}}class Ce{constructor(){this._documents=new Map}get(e,t){return this._documents.get(this.key(e,t))}add(e,t,i){const n=this.key(e,t.uri);if(this._documents.has(n))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const r=new xe(t,i);return this._documents.set(n,r),r}delete(e,t){const i=this.key(e,t.uri);this._documents.delete(i)}key(e,t){return`${e}@@@${t}`}}!function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"}(ce||(ce={}));class Ee{constructor(){this._providers=new Map}addTextProvider(e,t,i){return this.add(e,{type:ce.Text,extension:t,provider:i})}addCustomProvider(e,t,i){return this.add(e,{type:ce.Custom,extension:t,provider:i})}get(e){return this._providers.get(e)}add(e,t){if(this._providers.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this._providers.set(e,t),new x.JTr((()=>this._providers.delete(e)))}}class Se{constructor(e,t,i,n,r){this._extHostDocuments=t,this._extensionStoragePaths=i,this._extHostWebview=n,this._extHostWebviewPanels=r,this._editorProviders=new Ee,this._documents=new Ce,this._proxy=e.getProxy(w.Tr.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,i,n){const r=new s.SL;return!function(e){return"function"==typeof e.resolveCustomTextEditor}(i)?(r.add(this._editorProviders.addCustomProvider(t,e,i)),De(i)&&r.add(i.onDidChangeCustomDocument((e=>{const i=this.getCustomDocumentEntry(t,e.document.uri);if(function(e){return"function"==typeof e.undo&&"function"==typeof e.redo}(e)){const n=i.addEdit(e);this._proxy.$onDidEdit(e.document.uri,t,n,e.label)}else this._proxy.$onContentChange(e.document.uri,t)}))),this._proxy.$registerCustomEditorProvider(ve(e),t,n.webviewOptions||{},!!n.supportsMultipleEditorsPerDocument,fe(e))):(r.add(this._editorProviders.addTextProvider(t,e,i)),this._proxy.$registerTextEditorProvider(ve(e),t,n.webviewOptions||{},{supportsMove:!!i.moveCustomTextEditor},fe(e))),x.JTr.from(r,new x.JTr((()=>{this._proxy.$unregisterEditorProvider(t)})))}async $createCustomDocument(e,t,i,n,r){const o=this._editorProviders.get(t);if(!o)throw new Error(`No provider found for '${t}'`);if(o.type!==ce.Custom)throw new Error(`Invalid provide type for '${t}'`);const s=l.ov.revive(e),a=await o.provider.openCustomDocument(s,{backupId:i,untitledDocumentData:n?.buffer},r);let c;return De(o.provider)&&this._extensionStoragePaths&&(c=this._extensionStoragePaths.workspaceValue(o.extension)??this._extensionStoragePaths.globalValue(o.extension)),this._documents.add(t,a,c),{editable:De(o.provider)}}async $disposeCustomDocument(e,t){const i=this._editorProviders.get(t);if(!i)throw new Error(`No provider found for '${t}'`);if(i.type!==ce.Custom)throw new Error(`Invalid provider type for '${t}'`);const n=l.ov.revive(e),{document:r}=this.getCustomDocumentEntry(t,n);this._documents.delete(t,r),r.dispose()}async $resolveCustomEditor(e,t,i,n,r,o){const s=this._editorProviders.get(i);if(!s)throw new Error(`No provider found for '${i}'`);const a=I.eI.to(r),c=this._extHostWebview.createNewWebview(t,n.contentOptions,s.extension),d=this._extHostWebviewPanels.createNewWebviewPanel(t,i,n.title,a,n.options,c,n.active),u=l.ov.revive(e);switch(s.type){case ce.Custom:{const{document:e}=this.getCustomDocumentEntry(i,u);return s.provider.resolveCustomEditor(e,d,o)}case ce.Text:{const e=this._extHostDocuments.getDocument(u);return s.provider.resolveCustomTextEditor(e,d,o)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,i){this.getCustomDocumentEntry(t,e).disposeEdits(i)}async $onMoveCustomEditor(e,t,i){const r=this._editorProviders.get(i);if(!r)throw new Error(`No provider found for '${i}'`);if(!r.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${i}'`);const o=this._extHostWebviewPanels.getWebviewPanel(e);if(!o)throw new Error("No webview found");const s=l.ov.revive(t),a=this._extHostDocuments.getDocument(s);await r.provider.moveCustomTextEditor(a,o,n.Ts.None)}async $undo(e,t,i,n){return this.getCustomDocumentEntry(t,e).undo(i,n)}async $redo(e,t,i,n){return this.getCustomDocumentEntry(t,e).redo(i,n)}async $revert(e,t,i){const n=this.getCustomDocumentEntry(t,e),r=this.getCustomEditorProvider(t);await r.revertCustomDocument(n.document,i),n.disposeBackup()}async $onSave(e,t,i){const n=this.getCustomDocumentEntry(t,e),r=this.getCustomEditorProvider(t);await r.saveCustomDocument(n.document,i),n.disposeBackup()}async $onSaveAs(e,t,i,n){const r=this.getCustomDocumentEntry(t,e);return this.getCustomEditorProvider(t).saveCustomDocumentAs(r.document,l.ov.revive(i),n)}async $backup(e,t,i){const n=this.getCustomDocumentEntry(t,e),r=this.getCustomEditorProvider(t),o=await r.backupCustomDocument(n.document,{destination:n.getNewBackupUri()},i);return n.updateBackup(o),o.id}getCustomDocumentEntry(e,t){const i=this._documents.get(e,l.ov.revive(t));if(!i)throw new Error("No custom document found");return i}getCustomEditorProvider(e){const t=this._editorProviders.get(e),i=t?.provider;if(!i||!De(i))throw new Error("Custom document is not editable");return i}}function De(e){return!!e.onDidChangeCustomDocument}var Te,ke=i(56687),Ie=i(50365),Pe=i(67525),Ae=i(82380),Re=i(18910),Le=i(52202);class Ne{#e;#P;#A;constructor(e,t,i,n,r,o,s,a){this._name=e,this._owner=t,this._maxDiagnosticsTotal=i,this._maxDiagnosticsPerFile=n,this._modelVersionIdProvider=r,this._isDisposed=!1,this._maxDiagnosticsTotal=Math.max(n,i),this.#A=new Re.Y9((e=>o.getComparisonKey(e))),this.#e=s,this.#P=a}dispose(){this._isDisposed||(this.#P.fire([...this.#A.keys()]),this.#e?.$clear(this._owner),this.#A.clear(),this._isDisposed=!0)}get name(){return this._checkDisposed(),this._name}set(e,t){if(!e)return void this.clear();this._checkDisposed();let i=[];if(l.ov.isUri(e)){if(!t)return void this.delete(e);this.#A.set(e,t.slice()),i=[e]}else if(Array.isArray(e)){let t;i=[],e=[...e].sort(Ne._compareIndexedTuplesByUri);for(const n of e){const[e,r]=n;if(t&&e.toString()===t.toString()||(t&&0===this.#A.get(t).length&&this.#A.delete(t),t=e,i.push(e),this.#A.set(e,[])),r){const t=this.#A.get(e);t?.push(...r)}else{const t=this.#A.get(e);t&&(t.length=0)}}}if(this.#P.fire(i),!this.#e)return;const n=[];let r=0;for(const e of i){let t=[];const i=this.#A.get(e);if(i)if(i.length>this._maxDiagnosticsPerFile){t=[];const n=[x.H_B.Error,x.H_B.Warning,x.H_B.Information,x.H_B.Hint];e:for(let r=0;r<4;r++)for(const o of i)if(o.severity===n[r]){if(t.push({...I.R9.from(o),modelVersionId:this._modelVersionIdProvider(e)})===this._maxDiagnosticsPerFile)break e}t.push({severity:Ae.ZL.Info,message:(0,Pe.C$)("vs/workbench/api/common/extHostDiagnostics",0,"Not showing {0} further errors and warnings.",i.length-this._maxDiagnosticsPerFile),startLineNumber:t[t.length-1].startLineNumber,startColumn:t[t.length-1].startColumn,endLineNumber:t[t.length-1].endLineNumber,endColumn:t[t.length-1].endColumn})}else t=i.map((t=>({...I.R9.from(t),modelVersionId:this._modelVersionIdProvider(e)})));if(n.push([e,t]),r+=t.length,r>this._maxDiagnosticsTotal)break}this.#e.$changeMany(this._owner,n)}delete(e){this._checkDisposed(),this.#P.fire([e]),this.#A.delete(e),this.#e?.$changeMany(this._owner,[[e,void 0]])}clear(){this._checkDisposed(),this.#P.fire([...this.#A.keys()]),this.#A.clear(),this.#e?.$clear(this._owner)}forEach(e,t){this._checkDisposed();for(const[i,n]of this)e.call(t,i,n,this)}*[Symbol.iterator](){this._checkDisposed();for(const e of this.#A.keys())yield[e,this.get(e)]}get(e){this._checkDisposed();const t=this.#A.get(e);return Array.isArray(t)?Object.freeze(t.slice(0)):[]}has(e){return this._checkDisposed(),Array.isArray(this.#A.get(e))}_checkDisposed(){if(this._isDisposed)throw new Error("illegal state - object is disposed")}static _compareIndexedTuplesByUri(e,t){return e[0].toString()<t[0].toString()?-1:e[0].toString()>t[0].toString()?1:0}}let $e=class{static{Te=this}static{this._idPool=0}static{this._maxDiagnosticsPerFile=1e3}static{this._maxDiagnosticsTotal=1.1*Te._maxDiagnosticsPerFile}static _mapper(e){const t=new Re.Y9;for(const i of e)t.set(i,i);return{uris:Object.freeze(Array.from(t.values()))}}constructor(e,t,i,n){this._logService=t,this._fileSystemInfoService=i,this._extHostDocumentsAndEditors=n,this._collections=new Map,this._onDidChangeDiagnostics=new o.D0({merge:e=>e.flat(),delay:50}),this.onDidChangeDiagnostics=o.ju.map(this._onDidChangeDiagnostics.event,Te._mapper),this._proxy=e.getProxy(w.Tr.MainThreadDiagnostics)}createDiagnosticCollection(e,t){const{_collections:i,_proxy:n,_onDidChangeDiagnostics:r,_logService:o,_fileSystemInfoService:s,_extHostDocumentsAndEditors:a}=this,c=new class{$changeMany(t,i){n.$changeMany(t,i),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",e.value,t,0===i.length?"CLEARING":i)}$clear(t){n.$clear(t),o.trace("[DiagnosticCollection] remove all (extension, owner)",e.value,t)}dispose(){n.dispose()}};let l;if(t)if(i.has(t)){this._logService.warn(`DiagnosticCollection with name '${t}' does already exist.`);do{l=t+Te._idPool++}while(i.has(l))}else l=t;else t="_generated_diagnostic_collection_name_#"+Te._idPool++,l=t;return new class extends Ne{constructor(){super(t,l,Te._maxDiagnosticsTotal,Te._maxDiagnosticsPerFile,(e=>a.getDocument(e)?.version),s.extUri,c,r),i.set(l,this)}dispose(){super.dispose(),i.delete(l)}}}getDiagnostics(e){if(e)return this._getDiagnostics(e);{const e=new Map,t=[];for(const i of this._collections.values())i.forEach(((i,n)=>{let r=e.get(i.toString());void 0===r&&(r=t.length,e.set(i.toString(),r),t.push([i,[]])),t[r][1]=t[r][1].concat(...n)}));return t}}_getDiagnostics(e){let t=[];for(const i of this._collections.values())i.has(e)&&(t=t.concat(i.get(e)));return t}$acceptMarkersChange(e){if(!this._mirrorCollection){const e="_generated_mirror",t=new Ne(e,e,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,(e=>{}),this._fileSystemInfoService.extUri,void 0,this._onDidChangeDiagnostics);this._collections.set(e,t),this._mirrorCollection=t}for(const[t,i]of e)this._mirrorCollection.set(l.ov.revive(t),i.map(I.R9.to))}};$e=Te=(0,O.g)([(0,O.f)(1,_.V),(0,O.f)(2,Le.G)],$e);class Oe{constructor(e){this._proxy=e.getProxy(w.Tr.MainThreadDialogs)}showOpenDialog(e,t){return t?.allowUIResources&&(0,j.H5)(e,"showLocal"),this._proxy.$showOpenDialog(t).then((e=>e?e.map((e=>l.ov.revive(e))):void 0))}showSaveDialog(e){return this._proxy.$showSaveDialog(e).then((e=>e?l.ov.revive(e):void 0))}}var Fe=i(88023);class Me{static{this._handlePool=0}constructor(e,t,i){this._documentsAndEditors=t,this._logService=i,this._documentContentProviders=new Map,this._proxy=e.getProxy(w.Tr.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(e,t){if(Object.keys(a.lg).indexOf(e)>=0)throw new Error(`scheme '${e}' already registered`);const i=Me._handlePool++;let n;if(this._documentContentProviders.set(i,t),this._proxy.$registerTextContentProvider(i,e),"function"==typeof t.onDidChange){let o;n=t.onDidChange((async t=>{if(t.scheme!==e)return void this._logService.warn(`Provider for scheme '${e}' is firing event for schema '${t.scheme}' which will be IGNORED`);if(!this._documentsAndEditors.getDocument(t))return;o&&await o;const n=this.$provideTextDocumentContent(i,t).then((async e=>{if(!e&&"string"!=typeof e)return;const i=this._documentsAndEditors.getDocument(t);if(!i)return;const n=(0,Fe.uq)(e);return i.equalLines(n)?void 0:this._proxy.$onVirtualDocumentChange(t,e)})).catch(r.dL).finally((()=>{o===n&&(o=void 0)}));o=n}))}return new x.JTr((()=>{this._documentContentProviders.delete(i)&&this._proxy.$unregisterTextContentProvider(i),n&&(n.dispose(),n=void 0)}))}$provideTextDocumentContent(e,t){const i=this._documentContentProviders.get(e);return i?Promise.resolve(i.provideTextDocumentContent(l.ov.revive(t),n.Ts.None)):Promise.reject(new Error(`unsupported uri-scheme: ${t.scheme}`))}}var Ue=i(65161);class He{constructor(e,t,i,n={timeout:1500,errors:3}){this._logService=e,this._documents=t,this._mainThreadBulkEdits=i,this._thresholds=n,this._callbacks=new Ue.S,this._badListeners=new WeakMap}dispose(){this._callbacks.clear()}getOnWillSaveTextDocumentEvent(e){return(t,i,n)=>{const r={dispose:this._callbacks.push([t,i,e])};return Array.isArray(n)&&n.push(r),r}}async $participateInSave(e,t){const i=l.ov.revive(e);let n=!1;const r=setTimeout((()=>n=!0),this._thresholds.timeout),o=[];try{for(const e of[...this._callbacks]){if(n)break;const r=this._documents.getDocument(i),s=await this._deliverEventAsyncAndBlameBadListeners(e,{document:r,reason:I.wD.to(t)});o.push(s)}}finally{clearTimeout(r)}return o}_deliverEventAsyncAndBlameBadListeners([e,t,i],n){const r=this._badListeners.get(e);return"number"==typeof r&&r>this._thresholds.errors?Promise.resolve(!1):this._deliverEventAsync(i,e,t,n).then((()=>!0),(t=>{if(this._logService.error(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' threw ERROR`),this._logService.error(t),!(t instanceof Error)||"concurrent_edits"!==t.message){const t=this._badListeners.get(e);this._badListeners.set(e,t?t+1:1),"number"==typeof t&&t>this._thresholds.errors&&this._logService.info(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1}))}_deliverEventAsync(e,t,i,n){const o=[],s=Date.now(),{document:a,reason:c}=n,{version:l}=a,d=Object.freeze({document:a,reason:c,waitUntil(e){if(Object.isFrozen(o))throw(0,r.L6)("waitUntil can not be called async");o.push(Promise.resolve(e))}});try{t.apply(i,[d])}catch(e){return Promise.reject(e)}return new Promise(((t,i)=>{const n=setTimeout((()=>i(new Error("timeout"))),this._thresholds.timeout);return Promise.all(o).then((i=>{this._logService.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-s}ms`),clearTimeout(n),t(i)})).catch((e=>{clearTimeout(n),i(e)}))})).then((e=>{const t={edits:[]};for(const i of e)if(Array.isArray(i)&&i.every((e=>e instanceof x.PYv)))for(const{newText:e,newEol:n,range:r}of i)t.edits.push({resource:a.uri,versionId:void 0,textEdit:{range:r&&I.e6.from(r),text:e,eol:n&&I.b6.from(n)}});if(0!==t.edits.length)return l===a.version?this._mainThreadBulkEdits.$tryApplyWorkspaceEdit(new M.ky(t)):Promise.reject(new Error("concurrent_edits"))}))}}var ze=i(10456);class Be{constructor(e,t){this._onDidAddDocument=new o.Q5,this._onDidRemoveDocument=new o.Q5,this._onDidChangeDocument=new o.Q5,this._onDidSaveDocument=new o.Q5,this.onDidAddDocument=this._onDidAddDocument.event,this.onDidRemoveDocument=this._onDidRemoveDocument.event,this.onDidChangeDocument=this._onDidChangeDocument.event,this.onDidSaveDocument=this._onDidSaveDocument.event,this._toDispose=new s.SL,this._documentLoader=new Map,this._proxy=e.getProxy(w.Tr.MainThreadDocuments),this._documentsAndEditors=t,this._documentsAndEditors.onDidRemoveDocuments((e=>{for(const t of e)this._onDidRemoveDocument.fire(t.document)}),void 0,this._toDispose),this._documentsAndEditors.onDidAddDocuments((e=>{for(const t of e)this._onDidAddDocument.fire(t.document)}),void 0,this._toDispose)}dispose(){this._toDispose.dispose()}getAllDocumentData(){return[...this._documentsAndEditors.allDocuments()]}getDocumentData(e){if(!e)return;const t=this._documentsAndEditors.getDocument(e);return t||void 0}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e){const t=this._documentsAndEditors.getDocument(e);if(t)return Promise.resolve(t);let i=this._documentLoader.get(e.toString());return i||(i=this._proxy.$tryOpenDocument(e).then((t=>{this._documentLoader.delete(e.toString());const i=l.ov.revive(t);return(0,V.cW)(this._documentsAndEditors.getDocument(i))}),(t=>(this._documentLoader.delete(e.toString()),Promise.reject(t)))),this._documentLoader.set(e.toString(),i)),i}createDocumentData(e){return this._proxy.$tryCreateDocument(e).then((e=>l.ov.revive(e)))}$acceptModelLanguageChanged(e,t){const i=l.ov.revive(e),n=this._documentsAndEditors.getDocument(i);if(!n)throw new Error("unknown document");this._onDidRemoveDocument.fire(n.document),n._acceptLanguageId(t),this._onDidAddDocument.fire(n.document)}$acceptModelSaved(e){const t=l.ov.revive(e),i=this._documentsAndEditors.getDocument(t);if(!i)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this._onDidSaveDocument.fire(i.document)}$acceptDirtyStateChanged(e,t){const i=l.ov.revive(e),n=this._documentsAndEditors.getDocument(i);if(!n)throw new Error("unknown document");n._acceptIsDirty(t),this._onDidChangeDocument.fire({document:n.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,i){const n=l.ov.revive(e),r=this._documentsAndEditors.getDocument(n);if(!r)throw new Error("unknown document");let o;r._acceptIsDirty(i),r.onEvents(t),t.isUndoing?o=x.bur.Undo:t.isRedoing&&(o=x.bur.Redo),this._onDidChangeDocument.fire((0,he._A)({document:r.document,contentChanges:t.changes.map((e=>({range:I.e6.to(e.range),rangeOffset:e.rangeOffset,rangeLength:e.rangeLength,text:e.text}))),reason:o}))}setWordDefinitionFor(e,t){(0,ze.T7)(e,t)}}var We=i(1663),Ve=i(53917);class qe{constructor(e){this._provider=new Map,this._onDidChange=new o.Q5,this.onDidChange=this._onDidChange.event,this._allKnownModels=new Set,this._handlePool=0,this._proxy=e.getProxy(w.Tr.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,i){if(this._allKnownModels.has(t))throw new Error("An embeddings provider for this model is already registered");const n=this._handlePool++;return this._proxy.$registerEmbeddingProvider(n,t),this._provider.set(n,{id:t,provider:i}),(0,s.OF)((()=>{this._proxy.$unregisterEmbeddingProvider(n),this._provider.delete(n)}))}async computeEmbeddings(e,t,i){i??=n.Ts.None;let r=!1;"string"==typeof t&&(t=[t],r=!0);const o=await this._proxy.$computeEmbeddings(e,t,i);if(o.length!==t.length)throw new Error;if(r){if(1!==o.length)throw new Error;return o[0]}return o}async $provideEmbeddings(e,t,i){const n=this._provider.get(e);if(!n)return[];const r=await n.provider.provideEmbeddings(t,i);return r||[]}get embeddingsModels(){return Array.from(this._allKnownModels)}$acceptEmbeddingModels(e){this._allKnownModels=new Set(e),this._onDidChange.fire()}}class je{constructor(e){this._AiEmbeddingVectorProviders=new Map,this._nextHandle=0,this._proxy=e.getProxy(w.Tr.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,i){if(0===this._AiEmbeddingVectorProviders.size)throw new Error("No embedding vector providers registered");const n=this._AiEmbeddingVectorProviders.get(e);if(!n)throw new Error("Embedding vector provider not found");const r=await n.provideEmbeddingVector(t,i);if(!r)throw new Error("Embedding vector provider returned undefined");return r}registerEmbeddingVectorProvider(e,t,i){const n=this._nextHandle;return this._nextHandle++,this._AiEmbeddingVectorProviders.set(n,i),this._proxy.$registerAiEmbeddingVectorProvider(t,n),new x.JTr((()=>{this._proxy.$unregisterAiEmbeddingVectorProvider(n),this._AiEmbeddingVectorProviders.delete(n)}))}}var Ke=i(26841),Ge=i(46708),Qe=i(53976),Je=i(99360);class Ze{constructor(){this._schemes=[]}add(e){this._stateMachine=void 0,this._schemes.push(e)}delete(e){const t=this._schemes.indexOf(e);t>=0&&(this._schemes.splice(t,1),this._stateMachine=void 0)}_initStateMachine(){if(!this._stateMachine){const e=this._schemes.sort(),t=[];let i,n,r=Ge.ZM.LastKnownState,o=Ge.ZM.LastKnownState;for(const s of e){let e=i?(0,Fe.Mh)(i,s):0;for(n=0===e?Ge.ZM.Start:o;e<s.length;e++)e+1===s.length?(r=o,o=Ge.ZM.BeforeColon):o+=1,t.push([n,s.toUpperCase().charCodeAt(e),o]),t.push([n,s.toLowerCase().charCodeAt(e),o]),n=o;i=s,o=r}t.push([Ge.ZM.BeforeColon,ee.m.Colon,Ge.ZM.AfterColon]),t.push([Ge.ZM.AfterColon,ee.m.Slash,Ge.ZM.End]),this._stateMachine=new Ge.DV(t)}}provideDocumentLinks(e){this._initStateMachine();const t=[],i=Ge.VD.computeLinks({getLineContent(t){return e.lineAt(t-1).text},getLineCount(){return e.lineCount}},this._stateMachine);for(const e of i){const i=I.jW.to(e);i.target&&t.push(i)}return t}}class Xe{constructor(e,t){this._extHostLanguageFeatures=t,this._linkProvider=new Ze,this._fsProvider=new Map,this._registeredSchemes=new Set,this._watches=new Map,this._handlePool=0,this._proxy=e.getProxy(w.Tr.MainThreadFileSystem)}dispose(){this._linkProviderRegistration?.dispose()}registerFileSystemProvider(e,t,i,n={}){if(Xe._validateFileSystemProvider(i),this._registeredSchemes.has(t))throw new Error(`a provider for the scheme '${t}' is already registered`);this._linkProviderRegistration||(this._linkProviderRegistration=this._extHostLanguageFeatures.registerDocumentLinkProvider(e,"*",this._linkProvider));const r=this._handlePool++;this._linkProvider.add(t),this._registeredSchemes.add(t),this._fsProvider.set(r,i);let o,a=g.Bb.FileReadWrite;n.isCaseSensitive&&(a+=g.Bb.PathCaseSensitive),n.isReadonly&&(a+=g.Bb.Readonly),"function"==typeof i.copy&&(a+=g.Bb.FileFolderCopy),"function"==typeof i.open&&"function"==typeof i.close&&"function"==typeof i.read&&"function"==typeof i.write&&((0,j.H5)(e,"fsChunks"),a+=g.Bb.FileOpenReadWriteClose),n.isReadonly&&(0,Je.Fr)(n.isReadonly)&&""!==n.isReadonly.value&&(o={value:n.isReadonly.value,isTrusted:n.isReadonly.isTrusted,supportThemeIcons:n.isReadonly.supportThemeIcons,supportHtml:n.isReadonly.supportHtml,baseUri:n.isReadonly.baseUri,uris:n.isReadonly.uris}),this._proxy.$registerFileSystemProvider(r,t,a,o).catch((i=>{console.error(`FAILED to register filesystem provider of ${e.identifier.value}-extension for the scheme ${t}`),console.error(i)}));const c=i.onDidChangeFile((e=>{const i=[];for(const n of e){const{uri:e,type:r}=n;if(e.scheme!==t)continue;let o;switch(r){case x.zR2.Changed:o=g.zR.UPDATED;break;case x.zR2.Created:o=g.zR.ADDED;break;case x.zR2.Deleted:o=g.zR.DELETED;break;default:throw new Error("Unknown FileChangeType")}i.push({resource:e,type:o})}this._proxy.$onFileSystemChange(r,i)}));return(0,s.OF)((()=>{c.dispose(),this._linkProvider.delete(t),this._registeredSchemes.delete(t),this._fsProvider.delete(r),this._proxy.$unregisterProvider(r)}))}static _validateFileSystemProvider(e){if(!e)throw new Error("MISSING provider");if("function"!=typeof e.watch)throw new Error("Provider does NOT implement watch");if("function"!=typeof e.stat)throw new Error("Provider does NOT implement stat");if("function"!=typeof e.readDirectory)throw new Error("Provider does NOT implement readDirectory");if("function"!=typeof e.createDirectory)throw new Error("Provider does NOT implement createDirectory");if("function"!=typeof e.readFile)throw new Error("Provider does NOT implement readFile");if("function"!=typeof e.writeFile)throw new Error("Provider does NOT implement writeFile");if("function"!=typeof e.delete)throw new Error("Provider does NOT implement delete");if("function"!=typeof e.rename)throw new Error("Provider does NOT implement rename")}static _asIStat(e){const{type:t,ctime:i,mtime:n,size:r,permissions:o}=e;return{type:t,ctime:i,mtime:n,size:r,permissions:o}}$stat(e,t){return Promise.resolve(this._getFsProvider(e).stat(l.ov.revive(t))).then((e=>Xe._asIStat(e)))}$readdir(e,t){return Promise.resolve(this._getFsProvider(e).readDirectory(l.ov.revive(t)))}$readFile(e,t){return Promise.resolve(this._getFsProvider(e).readFile(l.ov.revive(t))).then((e=>Qe.KN.wrap(e)))}$writeFile(e,t,i,n){return Promise.resolve(this._getFsProvider(e).writeFile(l.ov.revive(t),i.buffer,n))}$delete(e,t,i){return Promise.resolve(this._getFsProvider(e).delete(l.ov.revive(t),i))}$rename(e,t,i,n){return Promise.resolve(this._getFsProvider(e).rename(l.ov.revive(t),l.ov.revive(i),n))}$copy(e,t,i,n){const r=this._getFsProvider(e);if(!r.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(r.copy(l.ov.revive(t),l.ov.revive(i),n))}$mkdir(e,t){return Promise.resolve(this._getFsProvider(e).createDirectory(l.ov.revive(t)))}$watch(e,t,i,n){const r=this._getFsProvider(e).watch(l.ov.revive(i),n);this._watches.set(t,r)}$unwatch(e,t){const i=this._watches.get(t);i&&(i.dispose(),this._watches.delete(t))}$open(e,t,i){const n=this._getFsProvider(e);if(!n.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(n.open(l.ov.revive(t),i))}$close(e,t){const i=this._getFsProvider(e);if(!i.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(i.close(t))}$read(e,t,i,n){const r=this._getFsProvider(e);if(!r.read)throw new Error('FileSystemProvider does not implement "read"');const o=Qe.KN.alloc(n);return Promise.resolve(r.read(t,i,o.buffer,0,n)).then((e=>o.slice(0,e)))}$write(e,t,i,n){const r=this._getFsProvider(e);if(!r.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(r.write(t,i,n.buffer,0,n.byteLength))}_getFsProvider(e){const t=this._fsProvider.get(e);if(!t){const e=new Error;throw e.name="ENOPRO",e.message="no provider",e}return t}}var Ye=i(77600),et=i(22200),tt=i(40048);class it{get ignoreCreateEvents(){return Boolean(1&this._config)}get ignoreChangeEvents(){return Boolean(2&this._config)}get ignoreDeleteEvents(){return Boolean(4&this._config)}constructor(e,t,i,n,r,s){this.session=Math.random(),this._onDidCreate=new o.Q5,this._onDidChange=new o.Q5,this._onDidDelete=new o.Q5,this._config=0,s?.ignoreCreateEvents&&(this._config+=1),s?.ignoreChangeEvents&&(this._config+=2),s?.ignoreDeleteEvents&&(this._config+=4);const a=(0,et.Qc)(r),c="string"==typeof r,d=s?.correlate,u=n((e=>{if(!("number"==typeof e.session&&e.session!==this.session||d&&void 0===e.session)){if(!s?.ignoreCreateEvents)for(const i of e.created){const e=l.ov.revive(i);!a(e.fsPath)||c&&!t.getWorkspaceFolder(e)||this._onDidCreate.fire(e)}if(!s?.ignoreChangeEvents)for(const i of e.changed){const e=l.ov.revive(i);!a(e.fsPath)||c&&!t.getWorkspaceFolder(e)||this._onDidChange.fire(e)}if(!s?.ignoreDeleteEvents)for(const i of e.deleted){const e=l.ov.revive(i);!a(e.fsPath)||c&&!t.getWorkspaceFolder(e)||this._onDidDelete.fire(e)}}}));this._disposable=x.JTr.from(this.ensureWatching(e,i,r,s,s?.correlate),this._onDidCreate,this._onDidChange,this._onDidDelete,u)}ensureWatching(e,t,i,n,r){const o=x.JTr.from();if("string"==typeof i)return o;if(n?.ignoreChangeEvents&&n?.ignoreCreateEvents&&n?.ignoreDeleteEvents)return o;const s=e.getProxy(w.Tr.MainThreadFileSystemEventService);let a,c=!1;return(i.pattern.includes(et.k1)||i.pattern.includes(et.dn))&&(c=!0),r&&(n?.ignoreChangeEvents||n?.ignoreCreateEvents||n?.ignoreDeleteEvents)&&(a=g.pT.UPDATED|g.pT.ADDED|g.pT.DELETED,n?.ignoreChangeEvents&&(a&=~g.pT.UPDATED),n?.ignoreCreateEvents&&(a&=~g.pT.ADDED),n?.ignoreDeleteEvents&&(a&=~g.pT.DELETED)),s.$watch(t.identifier.value,this.session,i.baseUri,{recursive:c,excludes:n?.excludes??[],filter:a},Boolean(r)),x.JTr.from({dispose:()=>s.$unwatch(this.session)})}dispose(){this._disposable.dispose()}get onDidCreate(){return this._onDidCreate.event}get onDidChange(){return this._onDidChange.event}get onDidDelete(){return this._onDidDelete.event}}class nt{constructor(e){this._events=e,this.session=this._events.session,this._created=new tt.o((()=>this._events.created.map(l.ov.revive))),this._changed=new tt.o((()=>this._events.changed.map(l.ov.revive))),this._deleted=new tt.o((()=>this._events.deleted.map(l.ov.revive)))}get created(){return this._created.value}get changed(){return this._changed.value}get deleted(){return this._deleted.value}}class rt{constructor(e,t,i){this._mainContext=e,this._logService=t,this._extHostDocumentsAndEditors=i,this._onFileSystemEvent=new o.Q5,this._onDidRenameFile=new o.Q5,this._onDidCreateFile=new o.Q5,this._onDidDeleteFile=new o.Q5,this._onWillRenameFile=new o.Qz,this._onWillCreateFile=new o.Qz,this._onWillDeleteFile=new o.Qz,this.onDidRenameFile=this._onDidRenameFile.event,this.onDidCreateFile=this._onDidCreateFile.event,this.onDidDeleteFile=this._onDidDeleteFile.event}createFileSystemWatcher(e,t,i,n){return new it(this._mainContext,e,t,this._onFileSystemEvent.event,I.RW.from(i),n)}$onFileEvent(e){this._onFileSystemEvent.fire(new nt(e))}$onDidRunFileOperation(e,t){switch(e){case g.si.MOVE:this._onDidRenameFile.fire(Object.freeze({files:t.map((e=>({oldUri:l.ov.revive(e.source),newUri:l.ov.revive(e.target)})))}));break;case g.si.DELETE:this._onDidDeleteFile.fire(Object.freeze({files:t.map((e=>l.ov.revive(e.target)))}));break;case g.si.CREATE:case g.si.COPY:this._onDidCreateFile.fire(Object.freeze({files:t.map((e=>l.ov.revive(e.target)))}))}}getOnWillRenameFileEvent(e){return this._createWillExecuteEvent(e,this._onWillRenameFile)}getOnWillCreateFileEvent(e){return this._createWillExecuteEvent(e,this._onWillCreateFile)}getOnWillDeleteFileEvent(e){return this._createWillExecuteEvent(e,this._onWillDeleteFile)}_createWillExecuteEvent(e,t){return(i,n,r)=>{const o=function(e){i.call(n,e)};return o.extension=e,t.event(o,void 0,r)}}async $onWillRunFileOperation(e,t,i,n){switch(e){case g.si.MOVE:return await this._fireWillEvent(this._onWillRenameFile,{files:t.map((e=>({oldUri:l.ov.revive(e.source),newUri:l.ov.revive(e.target)})))},i,n);case g.si.DELETE:return await this._fireWillEvent(this._onWillDeleteFile,{files:t.map((e=>l.ov.revive(e.target)))},i,n);case g.si.CREATE:case g.si.COPY:return await this._fireWillEvent(this._onWillCreateFile,{files:t.map((e=>l.ov.revive(e.target)))},i,n)}}async _fireWillEvent(e,t,i,n){const r=new Set,o=[];if(await e.fireAsync(t,n,(async(e,t)=>{const n=Date.now(),s=await Promise.resolve(e);s instanceof x.DbP&&(o.push([t.extension,s]),r.add(t.extension.displayName??t.extension.identifier.value)),Date.now()-n>i&&this._logService.warn("SLOW file-participant",t.extension.identifier)})),n.isCancellationRequested)return;if(0===o.length)return;const s={edits:[]};for(const[,e]of o){const{edits:t}=I.Db.from(e,{getTextDocumentVersion:e=>this._extHostDocumentsAndEditors.getDocument(e)?.version,getNotebookDocumentVersion:()=>{}});s.edits=s.edits.concat(t)}return{edit:s,extensionNames:Array.from(r)}}}var ot=i(73820);class st{constructor(e,t,i,n,r){this._extHostNotebooks=t,this._textDocumentsAndEditors=i,this._commands=n;const o=new k.b9("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new k.SF("showOptions","Show Options",(e=>!0),(e=>e)),new k.SF("resource","Interactive resource Uri",(e=>!0),(e=>e)),new k.SF("controllerId","Notebook controller Id",(e=>!0),(e=>e)),new k.SF("title","Interactive editor title",(e=>!0),(e=>e))],new k._m("Notebook and input URI",(e=>{if(r.debug("[ExtHostInteractive] open iw with notebook editor id",e.notebookEditorId),void 0!==e.notebookEditorId){const t=this._extHostNotebooks.getEditorById(e.notebookEditorId);return r.debug("[ExtHostInteractive] notebook editor found",t.id),{notebookUri:l.ov.revive(e.notebookUri),inputUri:l.ov.revive(e.inputUri),notebookEditor:t.apiEditor}}return r.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",e.notebookUri,e.inputUri),{notebookUri:l.ov.revive(e.notebookUri),inputUri:l.ov.revive(e.inputUri)}})));this._commands.registerApiCommand(o)}$willAddInteractiveDocument(e,t,i,n){this._textDocumentsAndEditors.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:i,uri:e,isDirty:!1,versionId:1}]})}$willRemoveInteractiveDocument(e,t){this._textDocumentsAndEditors.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}}class at{constructor(e){this._handlePool=0,this._proxy=e.getProxy(w.Tr.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this._handlePool++;return this._proxy.$registerResourceLabelFormatter(t,e),(0,s.OF)((()=>{this._proxy.$unregisterResourceLabelFormatter(t)}))}}var ct=i(73053),lt=i(3918),dt=i(23775);const ut="vs/workbench/api/common/extHostLanguageFeatures";class ht{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentSymbols(e,t){const i=this._documents.getDocument(e),n=await this._provider.provideDocumentSymbols(i,t);return(0,E.XY)(n)?void 0:n[0]instanceof x.w6Q?n.map(I.w6.from):ht._asDocumentSymbolTree(n)}static _asDocumentSymbolTree(e){e=e.slice(0).sort(((e,t)=>{let i=e.location.range.start.compareTo(t.location.range.start);return 0===i&&(i=t.location.range.end.compareTo(e.location.range.end)),i}));const t=[],i=[];for(const n of e){const e={name:n.name||"!!MISSING: name!!",kind:I.cR.from(n.kind),tags:n.tags?.map(I.r4.from)||[],detail:"",containerName:n.containerName,range:I.e6.from(n.location.range),selectionRange:I.e6.from(n.location.range),children:[]};for(;;){if(0===i.length){i.push(e),t.push(e);break}const n=i[i.length-1];if(lt.e.containsRange(n.range,e.range)&&!lt.e.equalsRange(n.range,e.range)){n.children?.push(e),i.push(e);break}i.pop()}}return t}}class pt{constructor(e,t,i,n,r,o){this._documents=e,this._commands=t,this._provider=i,this._extension=n,this._extTelemetry=r,this._logService=o,this._cache=new we("CodeLens"),this._disposables=new Map}async provideCodeLenses(e,t){const i=this._documents.getDocument(e),n=await this._provider.provideCodeLenses(i,t);if(!n||t.isCancellationRequested)return;const r=this._cache.add(n),o=new s.SL;this._disposables.set(r,o);const a={cacheId:r,lenses:[]};for(let e=0;e<n.length;e++)a.lenses.push({cacheId:[r,e],range:I.e6.from(n[e].range),command:this._commands.toInternal(n[e].command,o)});return a}async resolveCodeLens(e,t){const i=e.cacheId&&this._cache.get(...e.cacheId);if(!i)return;let n;if(n="function"!=typeof this._provider.resolveCodeLens||i.isResolved?i:await this._provider.resolveCodeLens(i,t),n||(n=i),t.isCancellationRequested)return;const r=e.cacheId&&this._disposables.get(e.cacheId[0]);if(r){if(!n.command){const e=new Error("INVALID code lens resolved, lacks command: "+this._extension.identifier.value);return this._extTelemetry.onExtensionError(this._extension.identifier,e),void this._logService.error(e)}return e.command=this._commands.toInternal(n.command,r),e}}releaseCodeLenses(e){this._disposables.get(e)?.dispose(),this._disposables.delete(e),this._cache.delete(e)}}function mt(e){return Array.isArray(e)?e.map(I.nc.from):e?[I.nc.from(e)]:[]}class gt{constructor(e,t){this._documents=e,this._provider=t}async provideDefinition(e,t,i){const n=this._documents.getDocument(e),r=I.Ly.to(t);return mt(await this._provider.provideDefinition(n,r,i))}}class ft{constructor(e,t){this._documents=e,this._provider=t}async provideDeclaration(e,t,i){const n=this._documents.getDocument(e),r=I.Ly.to(t);return mt(await this._provider.provideDeclaration(n,r,i))}}class _t{constructor(e,t){this._documents=e,this._provider=t}async provideImplementation(e,t,i){const n=this._documents.getDocument(e),r=I.Ly.to(t);return mt(await this._provider.provideImplementation(n,r,i))}}class vt{constructor(e,t){this._documents=e,this._provider=t}async provideTypeDefinition(e,t,i){const n=this._documents.getDocument(e),r=I.Ly.to(t);return mt(await this._provider.provideTypeDefinition(n,r,i))}}class bt{static{this.HOVER_MAP_MAX_SIZE=10}constructor(e,t){this._documents=e,this._provider=t,this._hoverCounter=0,this._hoverMap=new Map}async provideHover(e,t,i,n){const r=this._documents.getDocument(e),o=I.Ly.to(t);let s;if(i&&i.verbosityRequest){const e=i.verbosityRequest.previousHover.id,t=this._hoverMap.get(e);if(!t)throw new Error(`Hover with id ${e} not found`);const a={verbosityDelta:i.verbosityRequest.verbosityDelta,previousHover:t};s=await this._provider.provideHover(r,o,n,a)}else s=await this._provider.provideHover(r,o,n);if(!s||(0,E.XY)(s.contents))return;s.range||(s.range=r.getWordRangeAtPosition(o)),s.range||(s.range=new x.e6w(o,o));const a=I.TM.from(s),c=this._hoverCounter;if(this._hoverMap.size===bt.HOVER_MAP_MAX_SIZE){const e=Math.min(...this._hoverMap.keys());this._hoverMap.delete(e)}this._hoverMap.set(c,s),this._hoverCounter+=1;return{...a,id:c}}releaseHover(e){this._hoverMap.delete(e)}}class yt{constructor(e,t){this._documents=e,this._provider=t}async provideEvaluatableExpression(e,t,i){const n=this._documents.getDocument(e),r=I.Ly.to(t),o=await this._provider.provideEvaluatableExpression(n,r,i);if(o)return I.hf.from(o)}}class wt{constructor(e,t){this._documents=e,this._provider=t}async provideInlineValues(e,t,i,n){const r=this._documents.getDocument(e),o=await this._provider.provideInlineValues(r,I.e6.to(t),I.GS.to(i),n);if(Array.isArray(o))return o.map((e=>I.CR.from(e)))}}class xt{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentHighlights(e,t,i){const n=this._documents.getDocument(e),r=I.Ly.to(t),o=await this._provider.provideDocumentHighlights(n,r,i);if(Array.isArray(o))return o.map(I.eh.from)}}class Ct{constructor(e,t){this._documents=e,this._provider=t}async provideMultiDocumentHighlights(e,t,i,n){const r=this._documents.getDocument(e),o=i.map((e=>this._documents.getDocument(e))),s=I.Ly.to(t),a=await this._provider.provideMultiDocumentHighlights(r,s,o,n);if(Array.isArray(a))return a.map(I.lM.from)}}class Et{constructor(e,t){this._documents=e,this._provider=t}async provideLinkedEditingRanges(e,t,i){const n=this._documents.getDocument(e),r=I.Ly.to(t),o=await this._provider.provideLinkedEditingRanges(n,r,i);if(o&&Array.isArray(o.ranges))return{ranges:(0,E.kX)(o.ranges.map(I.e6.from)),wordPattern:o.wordPattern}}}class St{constructor(e,t){this._documents=e,this._provider=t}async provideReferences(e,t,i,n){const r=this._documents.getDocument(e),o=I.Ly.to(t),s=await this._provider.provideReferences(r,o,i,n);if(Array.isArray(s))return s.map(I.xh.from)}}class Dt{static{this._maxCodeActionsPerFile=1e3}constructor(e,t,i,n,r,o,s){this._documents=e,this._commands=t,this._diagnostics=i,this._provider=n,this._logService=r,this._extension=o,this._apiDeprecation=s,this._cache=new we("CodeAction"),this._disposables=new Map}async provideCodeActions(e,t,i,n){const r=this._documents.getDocument(e),o=dt.Y.isISelection(t)?I.Y1.to(t):I.e6.to(t),a=[];for(const t of this._diagnostics.getDiagnostics(e))if(o.intersection(t.range)){if(a.push(t)>Dt._maxCodeActionsPerFile)break}const c={diagnostics:a,only:i.only?new x.yNd(i.only):void 0,triggerKind:I.CD.to(i.trigger)},l=await this._provider.provideCodeActions(r,o,c,n);if(!(0,E.Of)(l)||n.isCancellationRequested)return;const d=this._cache.add(l),u=new s.SL;this._disposables.set(d,u);const h=[];for(let e=0;e<l.length;e++){const t=l[e];if(t)if(Dt._isCommand(t))this._apiDeprecation.report("CodeActionProvider.provideCodeActions - return commands",this._extension,"Return 'CodeAction' instances instead."),h.push({_isSynthetic:!0,title:t.title,command:this._commands.toInternal(t,u)});else{c.only&&(t.kind?c.only.contains(t.kind)||this._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${t.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const i=t.ranges??[];h.push({cacheId:[d,e],title:t.title,command:t.command&&this._commands.toInternal(t.command,u),diagnostics:t.diagnostics&&t.diagnostics.map(I.R9.from),edit:t.edit&&I.Db.from(t.edit,void 0),kind:t.kind&&t.kind.value,isPreferred:t.isPreferred,isAI:!!(0,j.$x)(this._extension,"codeActionAI")&&t.isAI,ranges:(0,j.$x)(this._extension,"codeActionRanges")?(0,E.kX)(i.map(I.e6.from)):void 0,disabled:t.disabled?.reason})}}return{cacheId:d,actions:h}}async resolveCodeAction(e,t){const[i,n]=e,r=this._cache.get(i,n);if(!r||Dt._isCommand(r))return{};if(!this._provider.resolveCodeAction)return{};const o=await this._provider.resolveCodeAction(r,t)??r;let s,a;if(o.edit&&(s=I.Db.from(o.edit,void 0)),o.command){const e=this._disposables.get(i);e&&(a=this._commands.toInternal(o.command,e))}return{edit:s,command:a}}releaseCodeActions(e){this._disposables.get(e)?.dispose(),this._disposables.delete(e),this._cache.delete(e)}static _isCommand(e){return"string"==typeof e.command&&"string"==typeof e.title}}class Tt{constructor(e,t,i,n,r){this._proxy=e,this._documents=t,this._provider=i,this._handle=n,this._extension=r,this._cache=new we("DocumentPasteEdit")}async prepareDocumentPaste(e,t,i,n){if(!this._provider.prepareDocumentPaste)return;const o=this._documents.getDocument(e),s=t.map((e=>I.e6.to(e))),a=I.tn.toDataTransfer(i,(()=>{throw new r.nj}));if(await this._provider.prepareDocumentPaste(o,s,a,n),n.isCancellationRequested)return;const c=Array.from(a).filter((([,e])=>!(e instanceof x.qDr)));return I.tn.from(c)}async providePasteEdits(e,t,i,n,r,o){if(!this._provider.provideDocumentPasteEdits)return[];const s=this._documents.getDocument(t),a=i.map((e=>I.e6.to(e))),c=I.tn.toDataTransfer(n,(async t=>(await this._proxy.$resolvePasteFileData(this._handle,e,t)).buffer)),l=await this._provider.provideDocumentPasteEdits(s,a,c,{only:r.only?new x.MXZ(r.only):void 0,triggerKind:r.triggerKind},o);if(!l||o.isCancellationRequested)return[];const d=this._cache.add(l);return l.map(((e,t)=>({_cacheId:[d,t],title:e.title??(0,Pe.C$)(ut,0,"Paste using '{0}' extension",this._extension.displayName||this._extension.name),kind:e.kind,yieldTo:e.yieldTo?.map((e=>e.value)),insertText:"string"==typeof e.insertText?e.insertText:{snippet:e.insertText.value},additionalEdit:e.additionalEdit?I.Db.from(e.additionalEdit,void 0):void 0})))}async resolvePasteEdit(e,t){const[i,n]=e,r=this._cache.get(i,n);if(!r||!this._provider.resolveDocumentPasteEdit)return{};const o=await this._provider.resolveDocumentPasteEdit(r,t)??r;return{additionalEdit:o.additionalEdit?I.Db.from(o.additionalEdit,void 0):void 0}}releasePasteEdits(e){this._cache.delete(e)}}class kt{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentFormattingEdits(e,t,i){const n=this._documents.getDocument(e),r=await this._provider.provideDocumentFormattingEdits(n,t,i);if(Array.isArray(r))return r.map(I.PY.from)}}class It{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentRangeFormattingEdits(e,t,i,n){const r=this._documents.getDocument(e),o=I.e6.to(t),s=await this._provider.provideDocumentRangeFormattingEdits(r,o,i,n);if(Array.isArray(s))return s.map(I.PY.from)}async provideDocumentRangesFormattingEdits(e,t,i,n){(0,V.p_)("function"==typeof this._provider.provideDocumentRangesFormattingEdits,"INVALID invocation of `provideDocumentRangesFormattingEdits`");const r=this._documents.getDocument(e),o=t.map(I.e6.to),s=await this._provider.provideDocumentRangesFormattingEdits(r,o,i,n);if(Array.isArray(s))return s.map(I.PY.from)}}class Pt{constructor(e,t){this._documents=e,this._provider=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,i,n,r){const o=this._documents.getDocument(e),s=I.Ly.to(t),a=await this._provider.provideOnTypeFormattingEdits(o,s,i,n,r);if(Array.isArray(a))return a.map(I.PY.from)}}class At{constructor(e,t){this._provider=e,this._logService=t,this._cache=new we("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const i=await this._provider.provideWorkspaceSymbols(e,t);if(!(0,E.Of)(i))return{symbols:[]};const n=this._cache.add(i),r={cacheId:n,symbols:[]};for(let e=0;e<i.length;e++){const t=i[e];t&&t.name?r.symbols.push({...I.$P.from(t),cacheId:[n,e]}):this._logService.warn("INVALID SymbolInformation",t)}return r}async resolveWorkspaceSymbol(e,t){if("function"!=typeof this._provider.resolveWorkspaceSymbol)return e;if(!e.cacheId)return e;const i=this._cache.get(...e.cacheId);if(i){const n=await this._provider.resolveWorkspaceSymbol(i,t);return n&&(0,he.jB)(e,I.$P.from(n),!0)}}releaseWorkspaceSymbols(e){this._cache.delete(e)}}class Rt{static supportsResolving(e){return"function"==typeof e.prepareRename}constructor(e,t,i){this._documents=e,this._provider=t,this._logService=i}async provideRenameEdits(e,t,i,n){const r=this._documents.getDocument(e),o=I.Ly.to(t);try{const e=await this._provider.provideRenameEdits(r,o,i,n);if(!e)return;return I.Db.from(e)}catch(e){const t=Rt._asMessage(e);return t?{rejectReason:t,edits:void 0}:Promise.reject(e)}}async resolveRenameLocation(e,t,i){if("function"!=typeof this._provider.prepareRename)return Promise.resolve(void 0);const n=this._documents.getDocument(e),r=I.Ly.to(t);try{const e=await this._provider.prepareRename(n,r,i);let t,o;if(x.e6w.isRange(e)?(t=e,o=n.getText(e)):(0,V.Kn)(e)&&(t=e.range,o=e.placeholder),!t||!o)return;return t.start.line>r.line||t.end.line<r.line?void this._logService.warn("INVALID rename location: position line must be within range start/end lines"):{range:I.e6.from(t),text:o}}catch(e){const t=Rt._asMessage(e);return t?{rejectReason:t,range:void 0,text:void 0}:Promise.reject(e)}}static _asMessage(e){return"string"==typeof e?e:e instanceof Error&&"string"==typeof e.message?e.message:void 0}}class Lt{static{this.languageTriggerKindToVSCodeTriggerKind={[S.Ll.Invoke]:x.Llw.Invoke,[S.Ll.Automatic]:x.Llw.Automatic}}constructor(e,t,i){this._documents=e,this._provider=t,this._logService=i}async supportsAutomaticNewSymbolNamesTriggerKind(){return this._provider.supportsAutomaticTriggerKind}async provideNewSymbolNames(e,t,i,n){const r=this._documents.getDocument(e),o=I.e6.to(t);try{const e=Lt.languageTriggerKindToVSCodeTriggerKind[i],t=await this._provider.provideNewSymbolNames(r,o,e,n);if(!t)return;return t.map((e=>"string"==typeof e?{newSymbolName:e}:{newSymbolName:e.newSymbolName,tags:e.tags}))}catch(e){return void this._logService.error(Lt._asMessage(e)??JSON.stringify(e,null,"\t"))}}static _asMessage(e){return"string"==typeof e?e:e instanceof Error&&"string"==typeof e.message?e.message:void 0}}class Nt{constructor(e,t){this.resultId=e,this.tokens=t}}class $t{constructor(e,t){this._documents=e,this._provider=t,this._nextResultId=1,this._previousResults=new Map}async provideDocumentSemanticTokens(e,t,i){const n=this._documents.getDocument(e),r=0!==t?this._previousResults.get(t):null;let o="string"==typeof r?.resultId&&"function"==typeof this._provider.provideDocumentSemanticTokensEdits?await this._provider.provideDocumentSemanticTokensEdits(n,r.resultId,i):await this._provider.provideDocumentSemanticTokens(n,i);return r&&this._previousResults.delete(t),o?(o=$t._fixProvidedSemanticTokens(o),this._send($t._convertToEdits(r,o),o)):null}async releaseDocumentSemanticColoring(e){this._previousResults.delete(e)}static _fixProvidedSemanticTokens(e){return $t._isSemanticTokens(e)?$t._isCorrectSemanticTokens(e)?e:new x.Uzh(new Uint32Array(e.data),e.resultId):$t._isSemanticTokensEdits(e)?$t._isCorrectSemanticTokensEdits(e)?e:new x.JQb(e.edits.map((e=>new x.FR$(e.start,e.deleteCount,e.data?new Uint32Array(e.data):e.data))),e.resultId):e}static _isSemanticTokens(e){return e&&!!e.data}static _isCorrectSemanticTokens(e){return e.data instanceof Uint32Array}static _isSemanticTokensEdits(e){return e&&Array.isArray(e.edits)}static _isCorrectSemanticTokensEdits(e){for(const t of e.edits)if(!(t.data instanceof Uint32Array))return!1;return!0}static _convertToEdits(e,t){if(!$t._isSemanticTokens(t))return t;if(!e||!e.tokens)return t;const i=e.tokens,n=i.length,r=t.data,o=r.length;let s=0;const a=Math.min(n,o);for(;s<a&&i[s]===r[s];)s++;if(s===n&&s===o)return new x.JQb([],t.resultId);let c=0;const l=a-s;for(;c<l&&i[n-c-1]===r[o-c-1];)c++;return new x.JQb([{start:s,deleteCount:n-s-c,data:r.subarray(s,o-c)}],t.resultId)}_send(e,t){if($t._isSemanticTokens(e)){const t=this._nextResultId++;return this._previousResults.set(t,new Nt(e.resultId,e.data)),(0,D.C)({id:t,type:"full",data:e.data})}if($t._isSemanticTokensEdits(e)){const i=this._nextResultId++;return $t._isSemanticTokens(t)?this._previousResults.set(i,new Nt(t.resultId,t.data)):this._previousResults.set(i,new Nt(e.resultId)),(0,D.C)({id:i,type:"delta",deltas:(e.edits||[]).map((e=>({start:e.start,deleteCount:e.deleteCount,data:e.data})))})}return null}}class Ot{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentRangeSemanticTokens(e,t,i){const n=this._documents.getDocument(e),r=await this._provider.provideDocumentRangeSemanticTokens(n,I.e6.to(t),i);return r?this._send(r):null}_send(e){return(0,D.C)({id:0,type:"full",data:e.data})}}class Ft{static supportsResolving(e){return"function"==typeof e.resolveCompletionItem}constructor(e,t,i,n,r){this._documents=e,this._commands=t,this._provider=i,this._apiDeprecation=n,this._extension=r,this._cache=new we("CompletionItem"),this._disposables=new Map}async provideCompletionItems(e,t,i,n){const r=this._documents.getDocument(e),o=I.Ly.to(t),a=r.getWordRangeAtPosition(o)||new x.e6w(o,o),c=a.with({end:o}),l=new W.G,d=await this._provider.provideCompletionItems(r,o,n,I.TK.to(i));if(!d)return;if(n.isCancellationRequested)return;const u=Array.isArray(d)?new x.Ub$(d):d,h=Ft.supportsResolving(this._provider)?this._cache.add(u.items):this._cache.add([]),p=new s.SL;this._disposables.set(h,p);const m=[],g={x:h,[w.Sm.completions]:m,[w.Sm.defaultRanges]:{replace:I.e6.from(a),insert:I.e6.from(c)},[w.Sm.isIncomplete]:u.isIncomplete||void 0,[w.Sm.duration]:l.elapsed()};for(let e=0;e<u.items.length;e++){const t=u.items[e],i=this._convertCompletionItem(t,[h,e],c,a);m.push(i)}return g}async resolveCompletionItem(e,t){if("function"!=typeof this._provider.resolveCompletionItem)return;const i=this._cache.get(...e);if(!i)return;const n=this._convertCompletionItem(i,e),r=await this._provider.resolveCompletionItem(i,t);if(!r)return;const o=this._convertCompletionItem(r,e);return n[w.Jv.insertText]===o[w.Jv.insertText]&&n[w.Jv.insertTextRules]===o[w.Jv.insertTextRules]||this._apiDeprecation.report("CompletionItem.insertText",this._extension,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),n[w.Jv.commandIdent]===o[w.Jv.commandIdent]&&n[w.Jv.commandId]===o[w.Jv.commandId]&&(0,he.fS)(n[w.Jv.commandArguments],o[w.Jv.commandArguments])||this._apiDeprecation.report("CompletionItem.command",this._extension,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...n,[w.Jv.documentation]:o[w.Jv.documentation],[w.Jv.detail]:o[w.Jv.detail],[w.Jv.additionalTextEdits]:o[w.Jv.additionalTextEdits],[w.Jv.insertText]:o[w.Jv.insertText],[w.Jv.insertTextRules]:o[w.Jv.insertTextRules],[w.Jv.commandIdent]:o[w.Jv.commandIdent],[w.Jv.commandId]:o[w.Jv.commandId],[w.Jv.commandArguments]:o[w.Jv.commandArguments]}}releaseCompletionItems(e){this._disposables.get(e)?.dispose(),this._disposables.delete(e),this._cache.delete(e)}_convertCompletionItem(e,t,i,n){const r=this._disposables.get(t[0]);if(!r)throw Error("DisposableStore is missing...");const o=this._commands.toInternal(e.command,r),s={x:t,[w.Jv.label]:e.label,[w.Jv.kind]:void 0!==e.kind?I.cm.from(e.kind):void 0,[w.Jv.kindModifier]:e.tags&&e.tags.map(I.we.from),[w.Jv.detail]:e.detail,[w.Jv.documentation]:void 0===e.documentation?void 0:I.W5.fromStrict(e.documentation),[w.Jv.sortText]:e.sortText!==e.label?e.sortText:void 0,[w.Jv.filterText]:e.filterText!==e.label?e.filterText:void 0,[w.Jv.preselect]:e.preselect||void 0,[w.Jv.insertTextRules]:e.keepWhitespace?S.a7.KeepWhitespace:S.a7.None,[w.Jv.commitCharacters]:e.commitCharacters?.join(""),[w.Jv.additionalTextEdits]:e.additionalTextEdits&&e.additionalTextEdits.map(I.PY.from),[w.Jv.commandIdent]:o?.$ident,[w.Jv.commandId]:o?.id,[w.Jv.commandArguments]:o?.$ident?void 0:o?.arguments};let a;return e.textEdit?(this._apiDeprecation.report("CompletionItem.textEdit",this._extension,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),s[w.Jv.insertText]=e.textEdit.newText):"string"==typeof e.insertText?s[w.Jv.insertText]=e.insertText:e.insertText instanceof x.EG5&&(s[w.Jv.insertText]=e.insertText.value,s[w.Jv.insertTextRules]|=S.a7.InsertAsSnippet),e.textEdit?a=e.textEdit.range:e.range&&(a=e.range),x.e6w.isRange(a)?s[w.Jv.range]=I.e6.from(a):!a||i?.isEqual(a.inserting)&&n?.isEqual(a.replacing)||(s[w.Jv.range]={insert:I.e6.from(a.inserting),replace:I.e6.from(a.replacing)}),s}}class Mt{async provideInlineCompletions(e,t,i,n){}async provideInlineEdits(e,t,i,n){}disposeCompletions(e){}handleDidShowCompletionItem(e,t,i){}handlePartialAccept(e,t,i,n){}}class Ut extends Mt{constructor(e,t,i,n){super(),this._extension=e,this._documents=t,this._provider=i,this._commands=n,this._references=new zt,this._isAdditionsProposedApiEnabled=(0,j.$x)(this._extension,"inlineCompletionsAdditions"),this.languageTriggerKindToVSCodeTriggerKind={[S.bw.Automatic]:x.bwv.Automatic,[S.bw.Explicit]:x.bwv.Invoke}}get supportsHandleEvents(){return(0,j.$x)(this._extension,"inlineCompletionsAdditions")&&("function"==typeof this._provider.handleDidShowCompletionItem||"function"==typeof this._provider.handleDidPartiallyAcceptCompletionItem)}async provideInlineCompletions(e,t,i,n){const r=this._documents.getDocument(e),o=I.Ly.to(t),a=await this._provider.provideInlineCompletionItems(r,o,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:I.e6.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.languageTriggerKindToVSCodeTriggerKind[i.triggerKind]},n);if(!a)return;if(n.isCancellationRequested)return;const c=Array.isArray(a)?a:a.items,l=this._isAdditionsProposedApiEnabled?Array.isArray(a)?[]:a.commands||[]:[],d=this._isAdditionsProposedApiEnabled&&!Array.isArray(a)?a.enableForwardStability:void 0;let u;return{pid:this._references.createReferenceId({dispose(){u?.dispose()},items:c}),items:c.map(((e,t)=>{let i;e.command&&(u||(u=new s.SL),i=this._commands.toInternal(e.command,u));const n=e.insertText;return{insertText:"string"==typeof n?n:{snippet:n.value},filterText:e.filterText,range:e.range?I.e6.from(e.range):void 0,command:i,idx:t,completeBracketPairs:!!this._isAdditionsProposedApiEnabled&&e.completeBracketPairs}})),commands:l.map((e=>(u||(u=new s.SL),this._commands.toInternal(e,u)))),suppressSuggestions:!1,enableForwardStability:d}}async provideInlineEdits(e,t,i,n){if(!this._provider.provideInlineEdits)return;(0,j.H5)(this._extension,"inlineCompletionsAdditions");const r=this._documents.getDocument(e),o=I.e6.to(t),a=await this._provider.provideInlineEdits(r,o,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:I.e6.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.languageTriggerKindToVSCodeTriggerKind[i.triggerKind],userPrompt:i.userPrompt},n);if(!a)return;if(n.isCancellationRequested)return;const c=Array.isArray(a)?a:a.items,l=this._isAdditionsProposedApiEnabled?Array.isArray(a)?[]:a.commands||[]:[],d=this._isAdditionsProposedApiEnabled&&!Array.isArray(a)?a.enableForwardStability:void 0;let u;return{pid:this._references.createReferenceId({dispose(){u?.dispose()},items:c}),items:c.map(((e,t)=>{let i;e.command&&(u||(u=new s.SL),i=this._commands.toInternal(e.command,u));const n=e.insertText;return{insertText:"string"==typeof n?n:{snippet:n.value},filterText:e.filterText,range:e.range?I.e6.from(e.range):void 0,command:i,idx:t,completeBracketPairs:!!this._isAdditionsProposedApiEnabled&&e.completeBracketPairs}})),commands:l.map((e=>(u||(u=new s.SL),this._commands.toInternal(e,u)))),suppressSuggestions:!1,enableForwardStability:d}}disposeCompletions(e){const t=this._references.disposeReferenceId(e);t?.dispose()}handleDidShowCompletionItem(e,t,i){const n=this._references.get(e)?.items[t];n&&this._provider.handleDidShowCompletionItem&&this._isAdditionsProposedApiEnabled&&this._provider.handleDidShowCompletionItem(n,i)}handlePartialAccept(e,t,i,n){const r=this._references.get(e)?.items[t];r&&this._provider.handleDidPartiallyAcceptCompletionItem&&this._isAdditionsProposedApiEnabled&&(this._provider.handleDidPartiallyAcceptCompletionItem(r,i),this._provider.handleDidPartiallyAcceptCompletionItem(r,I.hI.to(n)))}}class Ht{async provideInlineEdits(e,t,i){const n=this._documents.getDocument(e),r=await this._provider.provideInlineEdit(n,{triggerKind:this.languageTriggerKindToVSCodeTriggerKind[t.triggerKind]},i);if(!r)return;if(i.isCancellationRequested)return;let o;const a=this._references.createReferenceId({dispose(){o?.dispose()},item:r});let c,l;r.accepted&&(o||(o=new s.SL),c=this._commands.toInternal(r.accepted,o)),r.rejected&&(o||(o=new s.SL),l=this._commands.toInternal(r.rejected,o));return{pid:a,text:r.text,range:I.e6.from(r.range),accepted:c,rejected:l}}disposeEdit(e){const t=this._references.disposeReferenceId(e);t?.dispose()}constructor(e,t,i,n){this._documents=t,this._provider=i,this._commands=n,this._references=new zt,this.languageTriggerKindToVSCodeTriggerKind={[S.rn.Automatic]:x.rnR.Automatic,[S.rn.Invoke]:x.rnR.Invoke}}}class zt{constructor(){this._references=new Map,this._idPool=1}createReferenceId(e){const t=this._idPool++;return this._references.set(t,e),t}disposeReferenceId(e){const t=this._references.get(e);return this._references.delete(e),t}get(e){return this._references.get(e)}}class Bt{constructor(e,t){this._documents=e,this._provider=t,this._cache=new we("SignatureHelp")}async provideSignatureHelp(e,t,i,n){const r=this._documents.getDocument(e),o=I.Ly.to(t),s=this.reviveContext(i),a=await this._provider.provideSignatureHelp(r,o,n,s);if(a){const e=this._cache.add([a]);return{...I.vy.from(a),id:e}}}reviveContext(e){let t;if(e.activeSignatureHelp){const i=I.vy.to(e.activeSignatureHelp),n=this._cache.get(e.activeSignatureHelp.id,0);n?(t=n,t.activeSignature=i.activeSignature,t.activeParameter=i.activeParameter):t=i}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this._cache.delete(e)}}class Wt{constructor(e,t,i,n,r){this._documents=e,this._commands=t,this._provider=i,this._logService=n,this._extension=r,this._cache=new we("InlayHints"),this._disposables=new Map}async provideInlayHints(e,t,i){const n=this._documents.getDocument(e),r=I.e6.to(t),o=await this._provider.provideInlayHints(n,r,i);if(!Array.isArray(o)||0===o.length)return void this._logService.trace(`[InlayHints] NO inlay hints from '${this._extension.identifier.value}' for range ${JSON.stringify(t)}`);if(i.isCancellationRequested)return;const a=this._cache.add(o);this._disposables.set(a,new s.SL);const c={hints:[],cacheId:a};for(let e=0;e<o.length;e++)this._isValidInlayHint(o[e],r)&&c.hints.push(this._convertInlayHint(o[e],[a,e]));return this._logService.trace(`[InlayHints] ${c.hints.length} inlay hints from '${this._extension.identifier.value}' for range ${JSON.stringify(t)}`),c}async resolveInlayHint(e,t){if("function"!=typeof this._provider.resolveInlayHint)return;const i=this._cache.get(...e);if(!i)return;const n=await this._provider.resolveInlayHint(i,t);return n&&this._isValidInlayHint(n)?this._convertInlayHint(n,e):void 0}releaseHints(e){this._disposables.get(e)?.dispose(),this._disposables.delete(e),this._cache.delete(e)}_isValidInlayHint(e,t){return 0===e.label.length||Array.isArray(e.label)&&e.label.every((e=>0===e.value.length))?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}_convertInlayHint(e,t){const i=this._disposables.get(t[0]);if(!i)throw Error("DisposableStore is missing...");const n={label:"",cacheId:t,tooltip:I.W5.fromStrict(e.tooltip),position:I.Ly.from(e.position),textEdits:e.textEdits&&e.textEdits.map(I.PY.from),kind:e.kind&&I.gl.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if("string"==typeof e.label)n.label=e.label;else{const t=[];n.label=t;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this._extension.identifier.value);continue}const e={label:n.value,tooltip:I.W5.fromStrict(n.tooltip)};x.YeX.isLocation(n.location)&&(e.location=I.xh.from(n.location)),n.command&&(e.command=this._commands.toInternal(n.command,i)),t.push(e)}}return n}}class Vt{constructor(e,t){this._documents=e,this._provider=t,this._cache=new we("DocumentLink")}async provideLinks(e,t){const i=this._documents.getDocument(e),n=await this._provider.provideDocumentLinks(i,t);if(Array.isArray(n)&&0!==n.length&&!t.isCancellationRequested){if("function"!=typeof this._provider.resolveDocumentLink)return{links:n.filter(Vt._validateLink).map(I.jW.from)};{const e=this._cache.add(n),t={links:[],cacheId:e};for(let i=0;i<n.length;i++){if(!Vt._validateLink(n[i]))continue;const r=I.jW.from(n[i]);r.cacheId=[e,i],t.links.push(r)}return t}}}static _validateLink(e){return!(e.target&&e.target.path.length>5e4)||(console.warn("DROPPING link because it is too long"),!1)}async resolveLink(e,t){if("function"!=typeof this._provider.resolveDocumentLink)return;const i=this._cache.get(...e);if(!i)return;const n=await this._provider.resolveDocumentLink(i,t);return n&&Vt._validateLink(n)?I.jW.from(n):void 0}releaseLinks(e){this._cache.delete(e)}}class qt{constructor(e,t){this._documents=e,this._provider=t}async provideColors(e,t){const i=this._documents.getDocument(e),n=await this._provider.provideDocumentColors(i,t);if(!Array.isArray(n))return[];return n.map((e=>({color:I.Il.from(e.color),range:I.e6.from(e.range)})))}async provideColorPresentations(e,t,i){const n=this._documents.getDocument(e),r=I.e6.to(t.range),o=I.Il.to(t.color),s=await this._provider.provideColorPresentations(o,{document:n,range:r},i);if(Array.isArray(s))return s.map(I.oi.from)}}class jt{constructor(e,t){this._documents=e,this._provider=t}async provideFoldingRanges(e,t,i){const n=this._documents.getDocument(e),r=await this._provider.provideFoldingRanges(n,t,i);if(Array.isArray(r))return r.map(I.so.from)}}class Kt{constructor(e,t,i){this._documents=e,this._provider=t,this._logService=i}async provideSelectionRanges(e,t,i){const n=this._documents.getDocument(e),r=t.map(I.Ly.to),o=await this._provider.provideSelectionRanges(n,r,i);if(!(0,E.Of)(o))return[];if(o.length!==r.length)return this._logService.warn("BAD selection ranges, provider must return ranges for each position"),[];const s=[];for(let e=0;e<r.length;e++){const t=[];s.push(t);let i=r[e],n=o[e];for(;;){if(!n.range.contains(i))throw new Error("INVALID selection range, must contain the previous range");if(t.push(I.xm.from(n)),!n.parent)break;i=n.range,n=n.parent}}return s}}class Gt{constructor(e,t){this._documents=e,this._provider=t,this._idPool=new ct.R(""),this._cache=new Map}async prepareSession(e,t,i){const n=this._documents.getDocument(e),r=I.Ly.to(t),o=await this._provider.prepareCallHierarchy(n,r,i);if(!o)return;const s=this._idPool.nextId();return this._cache.set(s,new Map),Array.isArray(o)?o.map((e=>this._cacheAndConvertItem(s,e))):[this._cacheAndConvertItem(s,o)]}async provideCallsTo(e,t,i){const n=this._itemFromCache(e,t);if(!n)throw new Error("missing call hierarchy item");const r=await this._provider.provideCallHierarchyIncomingCalls(n,i);if(r)return r.map((t=>({from:this._cacheAndConvertItem(e,t.from),fromRanges:t.fromRanges.map((e=>I.e6.from(e)))})))}async provideCallsFrom(e,t,i){const n=this._itemFromCache(e,t);if(!n)throw new Error("missing call hierarchy item");const r=await this._provider.provideCallHierarchyOutgoingCalls(n,i);if(r)return r.map((t=>({to:this._cacheAndConvertItem(e,t.to),fromRanges:t.fromRanges.map((e=>I.e6.from(e)))})))}releaseSession(e){this._cache.delete(e)}_cacheAndConvertItem(e,t){const i=this._cache.get(e),n=I.ll.from(t,e,i.size.toString(36));return i.set(n._itemId,t),n}_itemFromCache(e,t){const i=this._cache.get(e);return i?.get(t)}}class Qt{constructor(e,t){this._documents=e,this._provider=t,this._idPool=new ct.R(""),this._cache=new Map}async prepareSession(e,t,i){const n=this._documents.getDocument(e),r=I.Ly.to(t),o=await this._provider.prepareTypeHierarchy(n,r,i);if(!o)return;const s=this._idPool.nextId();return this._cache.set(s,new Map),Array.isArray(o)?o.map((e=>this._cacheAndConvertItem(s,e))):[this._cacheAndConvertItem(s,o)]}async provideSupertypes(e,t,i){const n=this._itemFromCache(e,t);if(!n)throw new Error("missing type hierarchy item");const r=await this._provider.provideTypeHierarchySupertypes(n,i);if(r)return r.map((t=>this._cacheAndConvertItem(e,t)))}async provideSubtypes(e,t,i){const n=this._itemFromCache(e,t);if(!n)throw new Error("missing type hierarchy item");const r=await this._provider.provideTypeHierarchySubtypes(n,i);if(r)return r.map((t=>this._cacheAndConvertItem(e,t)))}releaseSession(e){this._cache.delete(e)}_cacheAndConvertItem(e,t){const i=this._cache.get(e),n=I.fQ.from(t,e,i.size.toString(36));return i.set(n._itemId,t),n}_itemFromCache(e,t){const i=this._cache.get(e);return i?.get(t)}}class Jt{constructor(e,t,i,n,r){this._proxy=e,this._documents=t,this._provider=i,this._handle=n,this._extension=r,this._cache=new we("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,i,n,r){const o=this._documents.getDocument(t),s=I.Ly.to(i),a=I.tn.toDataTransfer(n,(async t=>(await this._proxy.$resolveDocumentOnDropFileData(this._handle,e,t)).buffer)),c=await this._provider.provideDocumentDropEdits(o,s,a,r);if(!c)return;const l=(0,E._2)(c),d=this._cache.add(l);return l.map(((e,t)=>({_cacheId:[d,t],title:e.title??(0,Pe.C$)(ut,1,"Drop using '{0}' extension",this._extension.displayName||this._extension.name),kind:e.kind?.value,yieldTo:e.yieldTo?.map((e=>e.value)),insertText:"string"==typeof e.insertText?e.insertText:{snippet:e.insertText.value},additionalEdit:e.additionalEdit?I.Db.from(e.additionalEdit,void 0):void 0})))}async resolveDropEdit(e,t){const[i,n]=e,r=this._cache.get(i,n);if(!r||!this._provider.resolveDocumentDropEdit)return{};const o=await this._provider.resolveDocumentDropEdit(r,t)??r;return{additionalEdit:o.additionalEdit?I.Db.from(o.additionalEdit,void 0):void 0}}releaseDropEdits(e){this._cache.delete(e)}}class Zt{constructor(e,t){this._documents=e,this._provider=t}async provideMappedEdits(e,t,i,n){const r=l.ov.revive(e),o=this._documents.getDocument(r),s=i.documents.map((e=>e.map((e=>({uri:l.ov.revive(e.uri),version:e.version,ranges:e.ranges.map((e=>I.e6.to(e)))}))))),a={documents:s,selections:s[0]?.[0]?.ranges??[]},c=await this._provider.provideMappedEdits(o,t,a,n);return c?I.Db.from(c):null}}class Xt{constructor(e,t){this.adapter=e,this.extension=t}}class Yt{static{this._handlePool=0}constructor(e,t,i,n,r,o,s,a){this._uriTransformer=t,this._documents=i,this._commands=n,this._diagnostics=r,this._logService=o,this._apiDeprecation=s,this._extensionTelemetry=a,this._adapter=new Map,this._proxy=e.getProxy(w.Tr.MainThreadLanguageFeatures)}_transformDocumentSelector(e,t){return I.Lq.from(e,this._uriTransformer,t)}_createDisposable(e){return new x.JTr((()=>{this._adapter.delete(e),this._proxy.$unregister(e)}))}_nextHandle(){return Yt._handlePool++}async _withAdapter(e,t,i,o,s,a=!1){const c=this._adapter.get(e);if(!(c&&c.adapter instanceof t))return o;const l=Date.now();a||this._logService.trace(`[${c.extension.identifier.value}] INVOKE provider '${i.toString().replace(/[\r\n]/g,"")}'`);const d=i(c.adapter,c.extension);return Promise.resolve(d).catch((e=>{(0,r.n2)(e)||(this._logService.error(`[${c.extension.identifier.value}] provider FAILED`),this._logService.error(e),this._extensionTelemetry.onExtensionError(c.extension.identifier,e))})).finally((()=>{a||this._logService.trace(`[${c.extension.identifier.value}] provider DONE after ${Date.now()-l}ms`)})),n.Ts.isCancellationToken(s)?(0,H.k0)(d,s):d}_addNewAdapter(e,t){const i=this._nextHandle();return this._adapter.set(i,new Xt(e,t)),i}static _extLabel(e){return e.displayName||e.name}static _extId(e){return e.identifier.value}registerDocumentSymbolProvider(e,t,i,n){const r=this._addNewAdapter(new ht(this._documents,i),e),o=n&&n.label||Yt._extLabel(e);return this._proxy.$registerDocumentSymbolProvider(r,this._transformDocumentSelector(t,e),o),this._createDisposable(r)}$provideDocumentSymbols(e,t,i){return this._withAdapter(e,ht,(e=>e.provideDocumentSymbols(l.ov.revive(t),i)),void 0,i)}registerCodeLensProvider(e,t,i){const n=this._nextHandle(),r="function"==typeof i.onDidChangeCodeLenses?this._nextHandle():void 0;this._adapter.set(n,new Xt(new pt(this._documents,this._commands.converter,i,e,this._extensionTelemetry,this._logService),e)),this._proxy.$registerCodeLensSupport(n,this._transformDocumentSelector(t,e),r);let o=this._createDisposable(n);if(void 0!==r){const e=i.onDidChangeCodeLenses((e=>this._proxy.$emitCodeLensEvent(r)));o=x.JTr.from(o,e)}return o}$provideCodeLenses(e,t,i){return this._withAdapter(e,pt,(e=>e.provideCodeLenses(l.ov.revive(t),i)),void 0,i)}$resolveCodeLens(e,t,i){return this._withAdapter(e,pt,(e=>e.resolveCodeLens(t,i)),void 0,void 0)}$releaseCodeLenses(e,t){this._withAdapter(e,pt,(e=>Promise.resolve(e.releaseCodeLenses(t))),void 0,void 0)}registerDefinitionProvider(e,t,i){const n=this._addNewAdapter(new gt(this._documents,i),e);return this._proxy.$registerDefinitionSupport(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideDefinition(e,t,i,n){return this._withAdapter(e,gt,(e=>e.provideDefinition(l.ov.revive(t),i,n)),[],n)}registerDeclarationProvider(e,t,i){const n=this._addNewAdapter(new ft(this._documents,i),e);return this._proxy.$registerDeclarationSupport(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideDeclaration(e,t,i,n){return this._withAdapter(e,ft,(e=>e.provideDeclaration(l.ov.revive(t),i,n)),[],n)}registerImplementationProvider(e,t,i){const n=this._addNewAdapter(new _t(this._documents,i),e);return this._proxy.$registerImplementationSupport(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideImplementation(e,t,i,n){return this._withAdapter(e,_t,(e=>e.provideImplementation(l.ov.revive(t),i,n)),[],n)}registerTypeDefinitionProvider(e,t,i){const n=this._addNewAdapter(new vt(this._documents,i),e);return this._proxy.$registerTypeDefinitionSupport(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideTypeDefinition(e,t,i,n){return this._withAdapter(e,vt,(e=>e.provideTypeDefinition(l.ov.revive(t),i,n)),[],n)}registerHoverProvider(e,t,i,n){const r=this._addNewAdapter(new bt(this._documents,i),e);return this._proxy.$registerHoverProvider(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$provideHover(e,t,i,n,r){return this._withAdapter(e,bt,(e=>e.provideHover(l.ov.revive(t),i,n,r)),void 0,r)}$releaseHover(e,t){this._withAdapter(e,bt,(e=>Promise.resolve(e.releaseHover(t))),void 0,void 0)}registerEvaluatableExpressionProvider(e,t,i,n){const r=this._addNewAdapter(new yt(this._documents,i),e);return this._proxy.$registerEvaluatableExpressionProvider(r,this._transformDocumentSelector(t,e)),this._createDisposable(r)}$provideEvaluatableExpression(e,t,i,n){return this._withAdapter(e,yt,(e=>e.provideEvaluatableExpression(l.ov.revive(t),i,n)),void 0,n)}registerInlineValuesProvider(e,t,i,n){const r="function"==typeof i.onDidChangeInlineValues?this._nextHandle():void 0,o=this._addNewAdapter(new wt(this._documents,i),e);this._proxy.$registerInlineValuesProvider(o,this._transformDocumentSelector(t,e),r);let s=this._createDisposable(o);if(void 0!==r){const e=i.onDidChangeInlineValues((e=>this._proxy.$emitInlineValuesEvent(r)));s=x.JTr.from(s,e)}return s}$provideInlineValues(e,t,i,n,r){return this._withAdapter(e,wt,(e=>e.provideInlineValues(l.ov.revive(t),i,n,r)),void 0,r)}registerDocumentHighlightProvider(e,t,i){const n=this._addNewAdapter(new xt(this._documents,i),e);return this._proxy.$registerDocumentHighlightProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}registerMultiDocumentHighlightProvider(e,t,i){const n=this._addNewAdapter(new Ct(this._documents,i),e);return this._proxy.$registerMultiDocumentHighlightProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideDocumentHighlights(e,t,i,n){return this._withAdapter(e,xt,(e=>e.provideDocumentHighlights(l.ov.revive(t),i,n)),void 0,n)}$provideMultiDocumentHighlights(e,t,i,n,r){return this._withAdapter(e,Ct,(e=>e.provideMultiDocumentHighlights(l.ov.revive(t),i,n.map((e=>l.ov.revive(e))),r)),void 0,r)}registerLinkedEditingRangeProvider(e,t,i){const n=this._addNewAdapter(new Et(this._documents,i),e);return this._proxy.$registerLinkedEditingRangeProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideLinkedEditingRanges(e,t,i,n){return this._withAdapter(e,Et,(async e=>{const r=await e.provideLinkedEditingRanges(l.ov.revive(t),i,n);if(r)return{ranges:r.ranges,wordPattern:r.wordPattern?Yt._serializeRegExp(r.wordPattern):void 0}}),void 0,n)}registerReferenceProvider(e,t,i){const n=this._addNewAdapter(new St(this._documents,i),e);return this._proxy.$registerReferenceSupport(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideReferences(e,t,i,n,r){return this._withAdapter(e,St,(e=>e.provideReferences(l.ov.revive(t),i,n,r)),void 0,r)}registerCodeActionProvider(e,t,i,n){const r=new s.SL,o=this._addNewAdapter(new Dt(this._documents,this._commands.converter,this._diagnostics,i,this._logService,e,this._apiDeprecation),e);return this._proxy.$registerCodeActionSupport(o,this._transformDocumentSelector(t,e),{providedKinds:n?.providedCodeActionKinds?.map((e=>e.value)),documentation:n?.documentation?.map((e=>({kind:e.kind.value,command:this._commands.converter.toInternal(e.command,r)})))},Yt._extLabel(e),Yt._extId(e),Boolean(i.resolveCodeAction)),r.add(this._createDisposable(o)),r}$provideCodeActions(e,t,i,n,r){return this._withAdapter(e,Dt,(e=>e.provideCodeActions(l.ov.revive(t),i,n,r)),void 0,r)}$resolveCodeAction(e,t,i){return this._withAdapter(e,Dt,(e=>e.resolveCodeAction(t,i)),{},void 0)}$releaseCodeActions(e,t){this._withAdapter(e,Dt,(e=>Promise.resolve(e.releaseCodeActions(t))),void 0,void 0)}registerDocumentFormattingEditProvider(e,t,i){const n=this._addNewAdapter(new kt(this._documents,i),e);return this._proxy.$registerDocumentFormattingSupport(n,this._transformDocumentSelector(t,e),e.identifier,e.displayName||e.name),this._createDisposable(n)}$provideDocumentFormattingEdits(e,t,i,n){return this._withAdapter(e,kt,(e=>e.provideDocumentFormattingEdits(l.ov.revive(t),i,n)),void 0,n)}registerDocumentRangeFormattingEditProvider(e,t,i){const n="function"==typeof i.provideDocumentRangesFormattingEdits,r=this._addNewAdapter(new It(this._documents,i),e);return this._proxy.$registerRangeFormattingSupport(r,this._transformDocumentSelector(t,e),e.identifier,e.displayName||e.name,n),this._createDisposable(r)}$provideDocumentRangeFormattingEdits(e,t,i,n,r){return this._withAdapter(e,It,(e=>e.provideDocumentRangeFormattingEdits(l.ov.revive(t),i,n,r)),void 0,r)}$provideDocumentRangesFormattingEdits(e,t,i,n,r){return this._withAdapter(e,It,(e=>e.provideDocumentRangesFormattingEdits(l.ov.revive(t),i,n,r)),void 0,r)}registerOnTypeFormattingEditProvider(e,t,i,n){const r=this._addNewAdapter(new Pt(this._documents,i),e);return this._proxy.$registerOnTypeFormattingSupport(r,this._transformDocumentSelector(t,e),n,e.identifier),this._createDisposable(r)}$provideOnTypeFormattingEdits(e,t,i,n,r,o){return this._withAdapter(e,Pt,(e=>e.provideOnTypeFormattingEdits(l.ov.revive(t),i,n,r,o)),void 0,o)}registerWorkspaceSymbolProvider(e,t){const i=this._addNewAdapter(new At(t,this._logService),e);return this._proxy.$registerNavigateTypeSupport(i,"function"==typeof t.resolveWorkspaceSymbol),this._createDisposable(i)}$provideWorkspaceSymbols(e,t,i){return this._withAdapter(e,At,(e=>e.provideWorkspaceSymbols(t,i)),{symbols:[]},i)}$resolveWorkspaceSymbol(e,t,i){return this._withAdapter(e,At,(e=>e.resolveWorkspaceSymbol(t,i)),void 0,void 0)}$releaseWorkspaceSymbols(e,t){this._withAdapter(e,At,(e=>e.releaseWorkspaceSymbols(t)),void 0,void 0)}registerRenameProvider(e,t,i){const n=this._addNewAdapter(new Rt(this._documents,i,this._logService),e);return this._proxy.$registerRenameSupport(n,this._transformDocumentSelector(t,e),Rt.supportsResolving(i)),this._createDisposable(n)}$provideRenameEdits(e,t,i,n,r){return this._withAdapter(e,Rt,(e=>e.provideRenameEdits(l.ov.revive(t),i,n,r)),void 0,r)}$resolveRenameLocation(e,t,i,n){return this._withAdapter(e,Rt,(e=>e.resolveRenameLocation(l.ov.revive(t),i,n)),void 0,n)}registerNewSymbolNamesProvider(e,t,i){const n=this._addNewAdapter(new Lt(this._documents,i,this._logService),e);return this._proxy.$registerNewSymbolNamesProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$supportsAutomaticNewSymbolNamesTriggerKind(e){return this._withAdapter(e,Lt,(e=>e.supportsAutomaticNewSymbolNamesTriggerKind()),!1,void 0)}$provideNewSymbolNames(e,t,i,n,r){return this._withAdapter(e,Lt,(e=>e.provideNewSymbolNames(l.ov.revive(t),i,n,r)),void 0,r)}registerDocumentSemanticTokensProvider(e,t,i,n){const r=this._addNewAdapter(new $t(this._documents,i),e),o="function"==typeof i.onDidChangeSemanticTokens?this._nextHandle():void 0;this._proxy.$registerDocumentSemanticTokensProvider(r,this._transformDocumentSelector(t,e),n,o);let s=this._createDisposable(r);if(o){const e=i.onDidChangeSemanticTokens((e=>this._proxy.$emitDocumentSemanticTokensEvent(o)));s=x.JTr.from(s,e)}return s}$provideDocumentSemanticTokens(e,t,i,n){return this._withAdapter(e,$t,(e=>e.provideDocumentSemanticTokens(l.ov.revive(t),i,n)),null,n)}$releaseDocumentSemanticTokens(e,t){this._withAdapter(e,$t,(e=>e.releaseDocumentSemanticColoring(t)),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(e,t,i,n){const r=this._addNewAdapter(new Ot(this._documents,i),e);return this._proxy.$registerDocumentRangeSemanticTokensProvider(r,this._transformDocumentSelector(t,e),n),this._createDisposable(r)}$provideDocumentRangeSemanticTokens(e,t,i,n){return this._withAdapter(e,Ot,(e=>e.provideDocumentRangeSemanticTokens(l.ov.revive(t),i,n)),null,n)}registerCompletionItemProvider(e,t,i,n){const r=this._addNewAdapter(new Ft(this._documents,this._commands.converter,i,this._apiDeprecation,e),e);return this._proxy.$registerCompletionsProvider(r,this._transformDocumentSelector(t,e),n,Ft.supportsResolving(i),e.identifier),this._createDisposable(r)}$provideCompletionItems(e,t,i,n,r){return this._withAdapter(e,Ft,(e=>e.provideCompletionItems(l.ov.revive(t),i,n,r)),void 0,r)}$resolveCompletionItem(e,t,i){return this._withAdapter(e,Ft,(e=>e.resolveCompletionItem(t,i)),void 0,i)}$releaseCompletionItems(e,t){this._withAdapter(e,Ft,(e=>e.releaseCompletionItems(t)),void 0,void 0)}registerInlineCompletionsProvider(e,t,i,n){const r=new Ut(e,this._documents,i,this._commands.converter),o=this._addNewAdapter(r,e);return this._proxy.$registerInlineCompletionsSupport(o,this._transformDocumentSelector(t,e),r.supportsHandleEvents,m.kP.toKey(e.identifier.value),n?.yieldTo?.map((e=>m.kP.toKey(e)))||[]),this._createDisposable(o)}$provideInlineCompletions(e,t,i,n,r){return this._withAdapter(e,Mt,(e=>e.provideInlineCompletions(l.ov.revive(t),i,n,r)),void 0,r)}$provideInlineEdits(e,t,i,n,r){return this._withAdapter(e,Mt,(e=>e.provideInlineEdits(l.ov.revive(t),i,n,r)),void 0,r)}$handleInlineCompletionDidShow(e,t,i,n){this._withAdapter(e,Mt,(async e=>{e.handleDidShowCompletionItem(t,i,n)}),void 0,void 0)}$handleInlineCompletionPartialAccept(e,t,i,n,r){this._withAdapter(e,Mt,(async e=>{e.handlePartialAccept(t,i,n,r)}),void 0,void 0)}$freeInlineCompletionsList(e,t){this._withAdapter(e,Mt,(async e=>{e.disposeCompletions(t)}),void 0,void 0)}registerInlineEditProvider(e,t,i){const n=new Ht(e,this._documents,i,this._commands.converter),r=this._addNewAdapter(n,e);return this._proxy.$registerInlineEditProvider(r,this._transformDocumentSelector(t,e),e.identifier),this._createDisposable(r)}$provideInlineEdit(e,t,i,n){return this._withAdapter(e,Ht,(e=>e.provideInlineEdits(l.ov.revive(t),i,n)),void 0,n)}$freeInlineEdit(e,t){this._withAdapter(e,Ht,(async e=>{e.disposeEdit(t)}),void 0,void 0)}registerSignatureHelpProvider(e,t,i,n){const r=Array.isArray(n)?{triggerCharacters:n,retriggerCharacters:[]}:n,o=this._addNewAdapter(new Bt(this._documents,i),e);return this._proxy.$registerSignatureHelpProvider(o,this._transformDocumentSelector(t,e),r),this._createDisposable(o)}$provideSignatureHelp(e,t,i,n,r){return this._withAdapter(e,Bt,(e=>e.provideSignatureHelp(l.ov.revive(t),i,n,r)),void 0,r)}$releaseSignatureHelp(e,t){this._withAdapter(e,Bt,(e=>e.releaseSignatureHelp(t)),void 0,void 0)}registerInlayHintsProvider(e,t,i){const n="function"==typeof i.onDidChangeInlayHints?this._nextHandle():void 0,r=this._addNewAdapter(new Wt(this._documents,this._commands.converter,i,this._logService,e),e);this._proxy.$registerInlayHintsProvider(r,this._transformDocumentSelector(t,e),"function"==typeof i.resolveInlayHint,n,Yt._extLabel(e));let o=this._createDisposable(r);if(void 0!==n){const e=i.onDidChangeInlayHints((e=>this._proxy.$emitInlayHintsEvent(n)));o=x.JTr.from(o,e)}return o}$provideInlayHints(e,t,i,n){return this._withAdapter(e,Wt,(e=>e.provideInlayHints(l.ov.revive(t),i,n)),void 0,n)}$resolveInlayHint(e,t,i){return this._withAdapter(e,Wt,(e=>e.resolveInlayHint(t,i)),void 0,i)}$releaseInlayHints(e,t){this._withAdapter(e,Wt,(e=>e.releaseHints(t)),void 0,void 0)}registerDocumentLinkProvider(e,t,i){const n=this._addNewAdapter(new Vt(this._documents,i),e);return this._proxy.$registerDocumentLinkProvider(n,this._transformDocumentSelector(t,e),"function"==typeof i.resolveDocumentLink),this._createDisposable(n)}$provideDocumentLinks(e,t,i){return this._withAdapter(e,Vt,(e=>e.provideLinks(l.ov.revive(t),i)),void 0,i,"output"===t.scheme)}$resolveDocumentLink(e,t,i){return this._withAdapter(e,Vt,(e=>e.resolveLink(t,i)),void 0,void 0,!0)}$releaseDocumentLinks(e,t){this._withAdapter(e,Vt,(e=>e.releaseLinks(t)),void 0,void 0,!0)}registerColorProvider(e,t,i){const n=this._addNewAdapter(new qt(this._documents,i),e);return this._proxy.$registerDocumentColorProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideDocumentColors(e,t,i){return this._withAdapter(e,qt,(e=>e.provideColors(l.ov.revive(t),i)),[],i)}$provideColorPresentations(e,t,i,n){return this._withAdapter(e,qt,(e=>e.provideColorPresentations(l.ov.revive(t),i,n)),void 0,n)}registerFoldingRangeProvider(e,t,i){const n=this._nextHandle(),r="function"==typeof i.onDidChangeFoldingRanges?this._nextHandle():void 0;this._adapter.set(n,new Xt(new jt(this._documents,i),e)),this._proxy.$registerFoldingRangeProvider(n,this._transformDocumentSelector(t,e),e.identifier,r);let o=this._createDisposable(n);if(void 0!==r){const e=i.onDidChangeFoldingRanges((()=>this._proxy.$emitFoldingRangeEvent(r)));o=x.JTr.from(o,e)}return o}$provideFoldingRanges(e,t,i,n){return this._withAdapter(e,jt,(e=>e.provideFoldingRanges(l.ov.revive(t),i,n)),void 0,n)}registerSelectionRangeProvider(e,t,i){const n=this._addNewAdapter(new Kt(this._documents,i,this._logService),e);return this._proxy.$registerSelectionRangeProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideSelectionRanges(e,t,i,n){return this._withAdapter(e,Kt,(e=>e.provideSelectionRanges(l.ov.revive(t),i,n)),[],n)}registerCallHierarchyProvider(e,t,i){const n=this._addNewAdapter(new Gt(this._documents,i),e);return this._proxy.$registerCallHierarchyProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$prepareCallHierarchy(e,t,i,n){return this._withAdapter(e,Gt,(e=>Promise.resolve(e.prepareSession(l.ov.revive(t),i,n))),void 0,n)}$provideCallHierarchyIncomingCalls(e,t,i,n){return this._withAdapter(e,Gt,(e=>e.provideCallsTo(t,i,n)),void 0,n)}$provideCallHierarchyOutgoingCalls(e,t,i,n){return this._withAdapter(e,Gt,(e=>e.provideCallsFrom(t,i,n)),void 0,n)}$releaseCallHierarchy(e,t){this._withAdapter(e,Gt,(e=>Promise.resolve(e.releaseSession(t))),void 0,void 0)}registerTypeHierarchyProvider(e,t,i){const n=this._addNewAdapter(new Qt(this._documents,i),e);return this._proxy.$registerTypeHierarchyProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$prepareTypeHierarchy(e,t,i,n){return this._withAdapter(e,Qt,(e=>Promise.resolve(e.prepareSession(l.ov.revive(t),i,n))),void 0,n)}$provideTypeHierarchySupertypes(e,t,i,n){return this._withAdapter(e,Qt,(e=>e.provideSupertypes(t,i,n)),void 0,n)}$provideTypeHierarchySubtypes(e,t,i,n){return this._withAdapter(e,Qt,(e=>e.provideSubtypes(t,i,n)),void 0,n)}$releaseTypeHierarchy(e,t){this._withAdapter(e,Qt,(e=>Promise.resolve(e.releaseSession(t))),void 0,void 0)}registerDocumentOnDropEditProvider(e,t,i,n){const r=this._nextHandle();return this._adapter.set(r,new Xt(new Jt(this._proxy,this._documents,i,r,e),e)),this._proxy.$registerDocumentOnDropEditProvider(r,this._transformDocumentSelector(t,e),(0,j.$x)(e,"documentPaste")&&n?{supportsResolve:!!i.resolveDocumentDropEdit,dropMimeTypes:n.dropMimeTypes}:void 0),this._createDisposable(r)}$provideDocumentOnDropEdits(e,t,i,n,r,o){return this._withAdapter(e,Jt,(e=>Promise.resolve(e.provideDocumentOnDropEdits(t,l.ov.revive(i),n,r,o))),void 0,void 0)}$resolveDropEdit(e,t,i){return this._withAdapter(e,Jt,(e=>e.resolveDropEdit(t,i)),{},void 0)}$releaseDocumentOnDropEdits(e,t){this._withAdapter(e,Jt,(e=>Promise.resolve(e.releaseDropEdits(t))),void 0,void 0)}registerMappedEditsProvider(e,t,i){const n=this._addNewAdapter(new Zt(this._documents,i),e);return this._proxy.$registerMappedEditsProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideMappedEdits(e,t,i,n,r){return this._withAdapter(e,Zt,(e=>Promise.resolve(e.provideMappedEdits(t,i,n,r))),null,r)}registerDocumentPasteEditProvider(e,t,i,n){const r=this._nextHandle();return this._adapter.set(r,new Xt(new Tt(this._proxy,this._documents,i,r,e),e)),this._proxy.$registerPasteEditProvider(r,this._transformDocumentSelector(t,e),{supportsCopy:!!i.prepareDocumentPaste,supportsPaste:!!i.provideDocumentPasteEdits,supportsResolve:!!i.resolveDocumentPasteEdit,providedPasteEditKinds:n.providedPasteEditKinds?.map((e=>e.value)),copyMimeTypes:n.copyMimeTypes,pasteMimeTypes:n.pasteMimeTypes}),this._createDisposable(r)}$prepareDocumentPaste(e,t,i,n,r){return this._withAdapter(e,Tt,(e=>e.prepareDocumentPaste(l.ov.revive(t),i,n,r)),void 0,r)}$providePasteEdits(e,t,i,n,r,o,s){return this._withAdapter(e,Tt,(e=>e.providePasteEdits(t,l.ov.revive(i),n,r,o,s)),void 0,s)}$resolvePasteEdit(e,t,i){return this._withAdapter(e,Tt,(e=>e.resolvePasteEdit(t,i)),{},void 0)}$releasePasteEdits(e,t){this._withAdapter(e,Tt,(e=>Promise.resolve(e.releasePasteEdits(t))),void 0,void 0)}static _serializeRegExp(e){return{pattern:e.source,flags:e.flags}}static _serializeIndentationRule(e){return{decreaseIndentPattern:Yt._serializeRegExp(e.decreaseIndentPattern),increaseIndentPattern:Yt._serializeRegExp(e.increaseIndentPattern),indentNextLinePattern:e.indentNextLinePattern?Yt._serializeRegExp(e.indentNextLinePattern):void 0,unIndentedLinePattern:e.unIndentedLinePattern?Yt._serializeRegExp(e.unIndentedLinePattern):void 0}}static _serializeOnEnterRule(e){return{beforeText:Yt._serializeRegExp(e.beforeText),afterText:e.afterText?Yt._serializeRegExp(e.afterText):void 0,previousLineText:e.previousLineText?Yt._serializeRegExp(e.previousLineText):void 0,action:e.action}}static _serializeOnEnterRules(e){return e.map(Yt._serializeOnEnterRule)}static _serializeAutoClosingPair(e){return{open:e.open,close:e.close,notIn:e.notIn?e.notIn.map((e=>x.wxO.toString(e))):void 0}}static _serializeAutoClosingPairs(e){return e.map(Yt._serializeAutoClosingPair)}setLanguageConfiguration(e,t,i){const{wordPattern:n}=i;if(n&&(0,Fe.IO)(n))throw new Error(`Invalid language configuration: wordPattern '${n}' is not allowed to match the empty string.`);n?this._documents.setWordDefinitionFor(t,n):this._documents.setWordDefinitionFor(t,void 0),i.__electricCharacterSupport&&this._apiDeprecation.report("LanguageConfiguration.__electricCharacterSupport",e,"Do not use."),i.__characterPairSupport&&this._apiDeprecation.report("LanguageConfiguration.__characterPairSupport",e,"Do not use.");const r=this._nextHandle(),o={comments:i.comments,brackets:i.brackets,wordPattern:i.wordPattern?Yt._serializeRegExp(i.wordPattern):void 0,indentationRules:i.indentationRules?Yt._serializeIndentationRule(i.indentationRules):void 0,onEnterRules:i.onEnterRules?Yt._serializeOnEnterRules(i.onEnterRules):void 0,__electricCharacterSupport:i.__electricCharacterSupport,__characterPairSupport:i.__characterPairSupport,autoClosingPairs:i.autoClosingPairs?Yt._serializeAutoClosingPairs(i.autoClosingPairs):void 0};return this._proxy.$setLanguageConfiguration(r,t,o),this._createDisposable(r)}$setWordDefinitions(e){for(const t of e)this._documents.setWordDefinitionFor(t.languageId,new RegExp(t.regexSource,t.regexFlags))}}class ei{constructor(e){this._registeredTools=new Map,this._allTools=new Map,this._proxy=e.getProxy(w.Tr.MainThreadLanguageModelTools),this._proxy.$getTools().then((e=>{for(const t of e)this._allTools.set(t.name,t)}))}async invokeTool(e,t,i){return await this._proxy.$invokeTool(e,t,i)}async $acceptToolDelta(e){e.added&&this._allTools.set(e.added.name,e.added),e.removed&&this._allTools.delete(e.removed)}get tools(){return Array.from(this._allTools.values()).map((e=>I.Hv.to(e)))}async $invokeTool(e,t,i){const n=this._registeredTools.get(e);if(!n)throw new Error(`Unknown tool ${e}`);return await n.tool.invoke(t,i)}registerTool(e,t,i){return this._registeredTools.set(t,{extension:e,tool:i}),this._proxy.$registerTool(t),(0,s.OF)((()=>{this._registeredTools.delete(t),this._proxy.$unregisterTool(t)}))}}var ti=i(76870);class ii{constructor(e,t,i,n){this._documents=t,this._commands=i,this._uriTransformer=n,this._languageIds=[],this._handlePool=0,this._ids=new Set,this._proxy=e.getProxy(w.Tr.MainThreadLanguages)}$acceptLanguageIds(e){this._languageIds=e}async getLanguages(){return this._languageIds.slice(0)}async changeLanguage(e,t){await this._proxy.$changeLanguage(e,t);const i=this._documents.getDocumentData(e);if(!i)throw new Error(`document '${e.toString()}' NOT found`);return i.document}async tokenAtPosition(e,t){const i=e.version,n=I.Ly.from(t),r=await this._proxy.$tokensAtPosition(e.uri,n),o={type:x.xJH.Other,range:e.getWordRangeAtPosition(t)??new x.e6w(t.line,t.character,t.line,t.character)};if(!r)return o;const s={range:I.e6.to(r.range),type:I.iv.to(r.type)};return s.range.contains(t)?i!==e.version?o:s:o}createLanguageStatusItem(e,t,i){const n=this._handlePool++,r=this._proxy,o=this._ids,a=`${e.identifier.value}/${t}`;if(o.has(a))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);o.add(a);const l={selector:i,id:t,name:e.displayName??e.name,severity:x.Rxm.Information,command:void 0,text:"",detail:"",busy:!1};let d;const u=new s.SL,h=()=>{d?.dispose(),o.has(a)?d=(0,H.Vg)((()=>{u.clear(),this._proxy.$setLanguageStatus(n,{id:a,name:l.name??e.displayName??e.name,source:e.displayName??e.name,selector:I.Lq.from(l.selector,this._uriTransformer),label:l.text,detail:l.detail??"",severity:l.severity===x.Rxm.Error?c.Z.Error:l.severity===x.Rxm.Warning?c.Z.Warning:c.Z.Info,command:l.command&&this._commands.toInternal(l.command,u),accessibilityInfo:l.accessibilityInformation,busy:l.busy})}),0):console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`)},p={dispose(){u.dispose(),d?.dispose(),r.$removeLanguageStatus(n),o.delete(a)},get id(){return l.id},get name(){return l.name},set name(e){l.name=e,h()},get selector(){return l.selector},set selector(e){l.selector=e,h()},get text(){return l.text},set text(e){l.text=e,h()},set text2(t){(0,j.H5)(e,"languageStatusText"),l.text=t,h()},get text2(){return(0,j.H5)(e,"languageStatusText"),l.text},get detail(){return l.detail},set detail(e){l.detail=e,h()},get severity(){return l.severity},set severity(e){l.severity=e,h()},get accessibilityInformation(){return l.accessibilityInformation},set accessibilityInformation(e){l.accessibilityInformation=e,h()},get command(){return l.command},set command(e){l.command=e,h()},get busy(){return l.busy},set busy(e){l.busy=e,h()}};return h(),p}}var ni=i(86540),ri=i(6263);let oi=class{constructor(e,t){this._logService=t,this._proxy=e.getProxy(w.Tr.MainThreadMessageService)}showMessage(e,t,i,n,r){const o={source:{identifier:e.identifier,label:e.displayName||e.name}};let s;var a;"string"==typeof n||(a=n)&&a.title?s=[n,...r]:(o.modal=n?.modal,o.useCustom=n?.useCustom,o.detail=n?.detail,s=r),o.useCustom&&(0,j.H5)(e,"resolvers");const c=[];let l=!1;for(let t=0;t<s.length;t++){const i=s[t];if("string"==typeof i)c.push({title:i,handle:t,isCloseAffordance:!1});else if("object"==typeof i){const{title:n,isCloseAffordance:r}=i;c.push({title:n,isCloseAffordance:!!r,handle:t}),r&&(l?this._logService.warn(`[${e.identifier}] Only one message item can have 'isCloseAffordance':`,i):l=!0)}else this._logService.warn(`[${e.identifier}] Invalid message item:`,i)}return this._proxy.$showMessage(t,i,o,c).then((e=>{if("number"==typeof e)return s[e]}))}};oi=(0,O.g)([(0,O.f)(1,_.V)],oi);var si=i(30170);class ai{constructor(e,t,i,n){this.start=e,this.deletedCount=t,this.deletedItems=i,this.items=n}asApiEvent(){return{range:new x.XsU(this.start,this.start+this.deletedCount),addedCells:this.items.map((e=>e.apiCell)),removedCells:this.deletedItems}}}class ci{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1}}constructor(e,t,i){this.notebook=e,this._extHostDocument=t,this._cellData=i,this.handle=i.handle,this.uri=l.ov.revive(i.uri),this.cellKind=i.cellKind,this._outputs=i.outputs.map(I.JO.to),this._internalMetadata=i.internalMetadata??{},this._metadata=Object.freeze(i.metadata??{}),this._previousResult=Object.freeze(I._2.to(i.internalMetadata??{}))}get internalMetadata(){return this._internalMetadata}get apiCell(){if(!this._apiCell){const e=this,t=this._extHostDocument.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const i={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:I.wU.to(this._cellData.cellKind),document:t.document,get mime(){return e._mime},set mime(t){e._mime=t},get outputs(){return e._outputs.slice(0)},get metadata(){return e._metadata},get executionSummary(){return e._previousResult}};this._apiCell=Object.freeze(i)}return this._apiCell}setOutputs(e){this._outputs=e.map(I.JO.to)}setOutputItems(e,t,i){const n=i.map(I.x$.to),r=this._outputs.find((t=>t.id===e));if(r&&(t||(r.items.length=0),r.items.push(...n),r.items.length>1&&r.items.every((e=>(0,si.OT)(e.mime))))){const e=new Map,t=[];r.items.forEach((i=>{let n;e.has(i.mime)?n=e.get(i.mime):(n=[],e.set(i.mime,n),t.push(i.mime)),n.push(i.data)})),r.items.length=0,t.forEach((t=>{const i=(0,si.Jp)(e.get(t));r.items.push({mime:t,data:i.data.buffer})}))}}setMetadata(e){this._metadata=Object.freeze(e)}setInternalMetadata(e){this._internalMetadata=e,this._previousResult=Object.freeze(I._2.to(e))}setMime(e){}}class li{static{this._handlePool=0}constructor(e,t,i,n,r){this._proxy=e,this._textDocumentsAndEditors=t,this._textDocuments=i,this.uri=n,this.handle=li._handlePool++,this._cells=[],this._versionId=0,this._isDirty=!1,this._disposed=!1,this._notebookType=r.viewType,this._metadata=Object.freeze(r.metadata??Object.create(null)),this._spliceNotebookCells([[0,0,r.cells]],!0,void 0),this._versionId=r.versionId}dispose(){this._disposed=!0}get versionId(){return this._versionId}get apiNotebook(){if(!this._notebook){const e=this,t={get uri(){return e.uri},get version(){return e._versionId},get notebookType(){return e._notebookType},get isDirty(){return e._isDirty},get isUntitled(){return e.uri.scheme===a.lg.untitled},get isClosed(){return e._disposed},get metadata(){return e._metadata},get cellCount(){return e._cells.length},cellAt(t){return t=e._validateIndex(t),e._cells[t].apiCell},getCells(t){return(t?e._getCells(t):e._cells).map((e=>e.apiCell))},save(){return e._save()}};this._notebook=Object.freeze(t)}return this._notebook}acceptDocumentPropertiesChanged(e){e.metadata&&(this._metadata=Object.freeze({...this._metadata,...e.metadata}))}acceptDirty(e){this._isDirty=e}acceptModelChanged(e,t,i){this._versionId=e.versionId,this._isDirty=t,this.acceptDocumentPropertiesChanged({metadata:i});const n={notebook:this.apiNotebook,metadata:i,cellChanges:[],contentChanges:[]},r=[];for(const t of e.rawEvents)t.kind===si.s5.ModelChange?this._spliceNotebookCells(t.changes,!1,n.contentChanges):t.kind===si.s5.Move?this._moveCells(t.index,t.length,t.newIdx,n.contentChanges):t.kind===si.s5.Output?(this._setCellOutputs(t.index,t.outputs),r.push({cell:this._cells[t.index].apiCell,outputs:this._cells[t.index].apiCell.outputs})):t.kind===si.s5.OutputItem?(this._setCellOutputItems(t.index,t.outputId,t.append,t.outputItems),r.push({cell:this._cells[t.index].apiCell,outputs:this._cells[t.index].apiCell.outputs})):t.kind===si.s5.ChangeCellLanguage?(this._changeCellLanguage(t.index,t.language),r.push({cell:this._cells[t.index].apiCell,document:this._cells[t.index].apiCell.document})):t.kind===si.s5.ChangeCellContent?r.push({cell:this._cells[t.index].apiCell,document:this._cells[t.index].apiCell.document}):t.kind===si.s5.ChangeCellMime?this._changeCellMime(t.index,t.mime):t.kind===si.s5.ChangeCellMetadata?(this._changeCellMetadata(t.index,t.metadata),r.push({cell:this._cells[t.index].apiCell,metadata:this._cells[t.index].apiCell.metadata})):t.kind===si.s5.ChangeCellInternalMetadata&&(this._changeCellInternalMetadata(t.index,t.internalMetadata),r.push({cell:this._cells[t.index].apiCell,executionSummary:this._cells[t.index].apiCell.executionSummary}));const o=new Map;for(let e=0;e<r.length;e++){const t=r[e],i=o.get(t.cell);if(void 0===i){const e=n.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...t});o.set(t.cell,e-1)}else n.cellChanges[i]={...n.cellChanges[i],...t}}return n}_validateIndex(e){return(e|=0)<0?0:e>=this._cells.length?this._cells.length-1:e}_validateRange(e){let t=0|e.start,i=0|e.end;return t<0&&(t=0),i>this._cells.length&&(i=this._cells.length),e.with({start:t,end:i})}_getCells(e){const t=[];for(let i=(e=this._validateRange(e)).start;i<e.end;i++)t.push(this._cells[i]);return t}async _save(){return this._disposed?Promise.reject(new Error("Notebook has been closed")):this._proxy.$trySaveNotebook(this.uri)}_spliceNotebookCells(e,t,i){if(this._disposed)return;const n=[],r=[],o=[];if(e.reverse().forEach((e=>{const i=e[2].map((e=>{const i=new ci(this,this._textDocumentsAndEditors,e);return t||r.push(ci.asModelAddData(e)),i})),s=new ai(e[0],e[1],[],i),a=this._cells.splice(e[0],e[1],...i);for(const e of a)o.push(e.uri),s.deletedItems.push(e.apiCell);n.push(s)})),this._textDocumentsAndEditors.acceptDocumentsAndEditorsDelta({addedDocuments:r,removedDocuments:o}),i)for(const e of n)i.push(e.asApiEvent())}_moveCells(e,t,i,n){const r=this._cells.splice(e,t);this._cells.splice(i,0,...r);const o=[new ai(e,t,r.map((e=>e.apiCell)),[]),new ai(i,0,[],r)];for(const e of o)n.push(e.asApiEvent())}_setCellOutputs(e,t){this._cells[e].setOutputs(t)}_setCellOutputItems(e,t,i,n){this._cells[e].setOutputItems(t,i,n)}_changeCellLanguage(e,t){const i=this._cells[e];i.apiCell.document.languageId!==t&&this._textDocuments.$acceptModelLanguageChanged(i.uri,t)}_changeCellMime(e,t){this._cells[e].apiCell.mime=t}_changeCellMetadata(e,t){this._cells[e].setMetadata(t)}_changeCellInternalMetadata(e,t){this._cells[e].setInternalMetadata(t)}getCellFromApiCell(e){return this._cells.find((t=>t.apiCell===e))}getCellFromIndex(e){return this._cells[e]}getCell(e){return this._cells.find((t=>t.handle===e))}getCellIndex(e){return this._cells.indexOf(e)}}class di{static{this.apiEditorsToExtHost=new WeakMap}constructor(e,t,i,n,r,o){this.id=e,this._proxy=t,this.notebookData=i,this._selections=[],this._visibleRanges=[],this._visible=!1,this._selections=r,this._visibleRanges=n,this._viewColumn=o}get apiEditor(){if(!this._editor){const e=this;this._editor={get notebook(){return e.notebookData.apiNotebook},get selection(){return e._selections[0]},set selection(e){this.selections=[e]},get selections(){return e._selections},set selections(t){if(!Array.isArray(t)||!t.every(x.XsU.isNotebookRange))throw(0,r.b1)("selections");e._selections=t,e._trySetSelections(t)},get visibleRanges(){return e._visibleRanges},revealRange(t,i){e._proxy.$tryRevealRange(e.id,I.Xs.from(t),i??x.Ay.Default)},get viewColumn(){return e._viewColumn}},di.apiEditorsToExtHost.set(this._editor,this)}return this._editor}get visible(){return this._visible}_acceptVisibility(e){this._visible=e}_acceptVisibleRanges(e){this._visibleRanges=e}_acceptSelections(e){this._selections=e}_trySetSelections(e){this._proxy.$trySetSelections(this.id,e.map(I.Xs.from))}_acceptViewColumn(e){this._viewColumn=e}}var ui=i(45630),hi=i(894),pi=i(75396);class mi extends s.JT{constructor(e,t,i){super(),this._source=e,this._inputTextBuffer=t,this._outputs=i,this._outputTextBuffers=void 0}_getFullModelRange(e){const t=e.getLineCount();return new lt.e(1,1,t,this._getLineMaxColumn(e,t))}_getLineMaxColumn(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this._inputTextBuffer){const e=new hi.M;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:i,disposable:n}=t.create(p._x.LF);this._inputTextBuffer=i,this._register(n)}return this._inputTextBuffer}get outputTextBuffers(){return this._outputTextBuffers||(this._outputTextBuffers=this._outputs.map((e=>{const t=new hi.M;t.acceptChunk(e);const i=t.finish(!0),{textBuffer:n,disposable:r}=i.create(p._x.LF);return this._register(r),n}))),this._outputTextBuffers}findInInputs(e){const t=new pi.bc(e,!1,!1,null).parseSearchRequest();if(!t)return[];const i=this._getFullModelRange(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(i,t,!0,5e3)}findInOutputs(e){const t=new pi.bc(e,!1,!1,null).parseSearchRequest();return t?this.outputTextBuffers.map((e=>{const i=e.findMatchesLineByLine(this._getFullModelRange(e),t,!0,5e3);if(0!==i.length)return{textBuffer:e,matches:i}})).filter((e=>!!e)):[]}}function gi(e,t){let i=-1;const n=[];let r=[];e.forEach((e=>{e.range.startLineNumber!==i&&r.length>0&&(n.push([...r]),r=[]),r.push(e),i=e.range.endLineNumber})),r.length>0&&n.push([...r]);return n.map((e=>{const i=[],n=e[0].range.startLineNumber,r=e[e.length-1].range.endLineNumber;for(let e=n;e<=r;e++)i.push(t.getLineContent(e));return new ui.Aw(i.join("\n")+"\n",e.map((e=>new lt.e(e.range.startLineNumber-1,e.range.startColumn-1,e.range.endLineNumber-1,e.range.endColumn-1))))}))}var fi=i(35908);const _i="vs/workbench/api/common/extHostNotebook";class vi{static{this._notebookStatusBarItemProviderHandlePool=0}get activeNotebookEditor(){return this._activeNotebookEditor?.apiEditor}get visibleNotebookEditors(){return this._visibleNotebookEditors.map((e=>e.apiEditor))}constructor(e,t,i,n,r,s,a){this._textDocumentsAndEditors=i,this._textDocuments=n,this._extHostFileSystem=r,this._extHostSearch=s,this._logService=a,this._notebookStatusBarItemProviders=new Map,this._documents=new Re.Y9,this._editors=new Map,this._onDidChangeActiveNotebookEditor=new o.Q5,this.onDidChangeActiveNotebookEditor=this._onDidChangeActiveNotebookEditor.event,this._visibleNotebookEditors=[],this._onDidOpenNotebookDocument=new o.Q5,this.onDidOpenNotebookDocument=this._onDidOpenNotebookDocument.event,this._onDidCloseNotebookDocument=new o.Q5,this.onDidCloseNotebookDocument=this._onDidCloseNotebookDocument.event,this._onDidChangeVisibleNotebookEditors=new o.Q5,this.onDidChangeVisibleNotebookEditors=this._onDidChangeVisibleNotebookEditors.event,this._statusBarCache=new we("NotebookCellStatusBarCache"),this._handlePool=0,this._notebookSerializer=new Map,this._notebookProxy=e.getProxy(w.Tr.MainThreadNotebook),this._notebookDocumentsProxy=e.getProxy(w.Tr.MainThreadNotebookDocuments),this._notebookEditorsProxy=e.getProxy(w.Tr.MainThreadNotebookEditors),this._commandsConverter=t.converter,t.registerArgumentProcessor({processArgument:e=>{if(e&&e.$mid===se.m.NotebookCellActionContext){const t=e.notebookEditor?.notebookUri,i=e.cell.handle,n=this._documents.get(t),r=n?.getCell(i);if(r)return r.apiCell}if(e&&e.$mid===se.m.NotebookActionContext){const t=e.uri,i=this._documents.get(t);if(i)return i.apiNotebook}return e}}),vi._registerApiCommands(t)}getEditorById(e){const t=this._editors.get(e);if(!t)throw new Error(`unknown text editor: ${e}. known editors: ${[...this._editors.keys()]} `);return t}getIdByEditor(e){for(const[t,i]of this._editors)if(i.apiEditor===e)return t}get notebookDocuments(){return[...this._documents.values()]}getNotebookDocument(e,t){const i=this._documents.get(e);if(!i&&!t)throw new Error(`NO notebook document for '${e}'`);return i}static _convertNotebookRegistrationData(e,t){if(!t)return;const i=t.filenamePattern.map((e=>I.wN.from(e))).filter((e=>void 0!==e));if(!t.filenamePattern||i)return{extension:e.identifier,providerDisplayName:e.displayName||e.name,displayName:t.displayName,filenamePattern:i,priority:t.exclusive?fi.OP.exclusive:void 0};console.warn(`Notebook content provider view options file name pattern is invalid ${t.filenamePattern}`)}registerNotebookCellStatusBarItemProvider(e,t,i){const n=vi._notebookStatusBarItemProviderHandlePool++,r="function"==typeof i.onDidChangeCellStatusBarItems?vi._notebookStatusBarItemProviderHandlePool++:void 0;let o;return this._notebookStatusBarItemProviders.set(n,i),this._notebookProxy.$registerNotebookCellStatusBarItemProvider(n,r,t),void 0!==r&&(o=i.onDidChangeCellStatusBarItems((e=>this._notebookProxy.$emitCellStatusBarEvent(r)))),new x.JTr((()=>{this._notebookStatusBarItemProviders.delete(n),this._notebookProxy.$unregisterNotebookCellStatusBarItemProvider(n,r),o?.dispose()}))}async createNotebookDocument(e){const t=await this._notebookDocumentsProxy.$tryCreateNotebook({viewType:e.viewType,content:e.content&&I.c4.from(e.content)});return l.ov.revive(t)}async openNotebookDocument(e){const t=this._documents.get(e);if(t)return t.apiNotebook;const i=await this._notebookDocumentsProxy.$tryOpenNotebook(e),n=this._documents.get(l.ov.revive(i));return(0,V.cW)(n?.apiNotebook)}async showNotebookDocument(e,t){let i;l.ov.isUri(e)&&(e=await this.openNotebookDocument(e)),i="object"==typeof t?{position:I.eI.from(t.viewColumn),preserveFocus:t.preserveFocus,selections:t.selections&&t.selections.map(I.Xs.from),pinned:"boolean"==typeof t.preview?!t.preview:void 0}:{preserveFocus:!1};const n=await this._notebookEditorsProxy.$tryShowNotebookDocument(e.uri,e.notebookType,i),r=n&&this._editors.get(n)?.apiEditor;if(r)return r;throw n?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(e,t,i,n){const r=this._notebookStatusBarItemProviders.get(e),o=l.ov.revive(t),a=this._documents.get(o);if(!a||!r)return;const c=a.getCellFromIndex(i);if(!c)return;const d=await r.provideCellStatusBarItems(c.apiCell,n);if(!d)return;const u=new s.SL;return{cacheId:this._statusBarCache.add([u]),items:(Array.isArray(d)?d:[d]).map((e=>I.b$.from(e,this._commandsConverter,u)))}}$releaseNotebookCellStatusBarItems(e){this._statusBarCache.delete(e)}registerNotebookSerializer(e,t,i,n,r){if((0,Fe.m5)(t))throw new Error("viewType cannot be empty or just whitespace");const o=this._handlePool++;return this._notebookSerializer.set(o,{viewType:t,serializer:i,options:n}),this._notebookProxy.$registerNotebookSerializer(o,{id:e.identifier,location:e.extensionLocation},t,I.RG.from(n),vi._convertNotebookRegistrationData(e,r)),(0,s.OF)((()=>{this._notebookProxy.$unregisterNotebookSerializer(o)}))}async $dataToNotebook(e,t,i){const n=this._notebookSerializer.get(e);if(!n)throw new Error("NO serializer found");const r=await n.serializer.deserializeNotebook(t.buffer,i);return new M.ky(I.c4.from(r))}async $notebookToData(e,t,i){const n=this._notebookSerializer.get(e);if(!n)throw new Error("NO serializer found");const r=await n.serializer.serializeNotebook(I.c4.to(t.value),i);return Qe.KN.wrap(r)}async $saveNotebook(e,t,i,n,r){const o=l.ov.revive(t),s=this._notebookSerializer.get(e);if(this.trace(`enter saveNotebook(versionId: ${i}, ${o.toString()})`),!s)throw new Error("NO serializer found");const a=this._documents.get(o);if(!a)throw new Error("Document NOT found");if(a.versionId!==i)throw new Error("Document version mismatch");if(!this._extHostFileSystem.value.isWritableFileSystem(o.scheme))throw new g.Ym((0,Pe.C$)(_i,0,"Unable to modify read-only file '{0}'",this._resourceForError(o)),g.PK.FILE_PERMISSION_DENIED);const c={metadata:(0,he.hX)(a.apiNotebook.metadata,(e=>!(s.options?.transientDocumentMetadata??{})[e])),cells:[]};for(const e of a.apiNotebook.getCells()){const t=new x.Ul(e.kind,e.document.getText(),e.document.languageId,e.mime,s.options?.transientOutputs?[]:[...e.outputs],e.metadata,e.executionSummary);t.metadata=(0,he.hX)(e.metadata,(e=>!(s.options?.transientCellMetadata??{})[e])),c.cells.push(t)}if(await this._validateWriteFile(o,n),r.isCancellationRequested)throw new Error("canceled");const d=await s.serializer.serializeNotebook(c,r);if(r.isCancellationRequested)throw new Error("canceled");this.trace(`serialized versionId: ${i} ${o.toString()}`),await this._extHostFileSystem.value.writeFile(o,d),this.trace(`Finished write versionId: ${i} ${o.toString()}`);const u=this._extHostFileSystem.getFileSystemProviderExtUri(o.scheme),h=await this._extHostFileSystem.value.stat(o),p={name:u.basename(o),isFile:!!(h.type&g.Tv.File),isDirectory:!!(h.type&g.Tv.Directory),isSymbolicLink:!!(h.type&g.Tv.SymbolicLink),mtime:h.mtime,ctime:h.ctime,size:h.size,readonly:Boolean((h.permissions??0)&g.rM.Readonly)||!this._extHostFileSystem.value.isWritableFileSystem(o.scheme),locked:Boolean((h.permissions??0)&g.rM.Locked),etag:(0,g.AT)({mtime:h.mtime,size:h.size}),children:void 0};return this.trace(`exit saveNotebook(versionId: ${i}, ${o.toString()})`),p}async $searchInNotebooks(e,t,i,n,r){const o=this._notebookSerializer.get(e)?.serializer;if(!o)return{limitHit:!1,results:[]};const s=new Re.XV;await(async(e,t,i)=>{await Promise.all(e.map((async e=>await Promise.all(e.filenamePatterns.map((r=>{const o={_reason:i._reason,folderQueries:i.folderQueries,includePattern:i.includePattern,excludePattern:i.excludePattern,maxResults:i.maxResults,type:ui.xL.File,filePattern:r};return this._extHostSearch.doInternalFileSearchWithCustomCallback(o,t,(t=>{t.forEach((t=>{if(s.has(t))return;n.some((i=>!(e.isFromSettings&&!i.isFromSettings)&&i.filenamePatterns.some((e=>(0,fi.M9)(e,t)))))||s.add(t)}))})).catch((e=>{if("ENOENT"===e.code)return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw e}))}))))))})(i,r,t);const a=new Re.Y9;let c=!1;const l=Array.from(s).map((async e=>{const i=[];try{if(r.isCancellationRequested)return;if(t.maxResults&&[...a.values()].reduce(((e,t)=>e+t.cellResults.length),0)>t.maxResults)return void(c=!0);const n=[],s=this._documents.get(e);if(s){s.apiNotebook.getCells().forEach((e=>n.push({input:e.document.getText(),outputs:e.outputs.flatMap((e=>e.items.map((e=>e.data.toString()))))})))}else{const t=await this._extHostFileSystem.value.readFile(e),i=Qe.KN.fromString(t.toString()),s=await o.deserializeNotebook(i.buffer,r);if(r.isCancellationRequested)return;I.c4.from(s).cells.forEach((e=>n.push({input:e.source,outputs:e.outputs.flatMap((e=>e.items.map((e=>e.valueBytes.toString()))))})))}if(r.isCancellationRequested)return;n.forEach(((e,n)=>{const r=t.contentPattern.pattern,o=new mi(e.input,void 0,e.outputs),s=o.findInInputs(r),a=o.findInOutputs(r),c=a.flatMap((e=>gi(e.matches,e.textBuffer))).map(((e,t)=>(e.webviewIndex=t,e)));if(s.length>0||a.length>0){const e={index:n,contentResults:gi(s,o.inputTextBuffer),webviewResults:c};i.push(e)}}));const l={resource:e,cellResults:i};return void a.set(e,l)}catch(e){return}}));return await Promise.all(l),{limitHit:c,results:[...a.values()]}}async _validateWriteFile(e,t){const i=await this._extHostFileSystem.value.stat(e);if("number"==typeof t?.mtime&&"string"==typeof t.etag&&t.etag!==g.jG&&"number"==typeof i.mtime&&"number"==typeof i.size&&t.mtime<i.mtime&&t.etag!==(0,g.AT)({mtime:t.mtime,size:i.size}))throw new g.Ym((0,Pe.C$)(_i,1,"File Modified Since"),g.PK.FILE_MODIFIED_SINCE,t)}_resourceForError(e){return e.scheme===a.lg.file?e.fsPath:e.toString()}_createExtHostEditor(e,t,i){if(this._editors.has(t))throw new Error(`editor with id ALREADY EXSIST: ${t}`);const n=new di(t,this._notebookEditorsProxy,e,i.visibleRanges.map(I.Xs.to),i.selections.map(I.Xs.to),"number"==typeof i.viewColumn?I.eI.to(i.viewColumn):void 0);this._editors.set(t,n)}$acceptDocumentAndEditorsDelta(e){if(e.value.removedDocuments)for(const t of e.value.removedDocuments){const e=l.ov.revive(t),i=this._documents.get(e);i&&(i.dispose(),this._documents.delete(e),this._textDocumentsAndEditors.$acceptDocumentsAndEditorsDelta({removedDocuments:i.apiNotebook.getCells().map((e=>e.document.uri))}),this._onDidCloseNotebookDocument.fire(i.apiNotebook));for(const t of this._editors.values())t.notebookData.uri.toString()===e.toString()&&this._editors.delete(t.id)}if(e.value.addedDocuments){const t=[];for(const i of e.value.addedDocuments){const e=l.ov.revive(i.uri);if(this._documents.has(e))throw new Error(`adding EXISTING notebook ${e} `);const n=new li(this._notebookDocumentsProxy,this._textDocumentsAndEditors,this._textDocuments,e,i);t.push(...i.cells.map((e=>ci.asModelAddData(e)))),this._documents.get(e)?.dispose(),this._documents.set(e,n),this._textDocumentsAndEditors.$acceptDocumentsAndEditorsDelta({addedDocuments:t}),this._onDidOpenNotebookDocument.fire(n.apiNotebook)}}if(e.value.addedEditors)for(const t of e.value.addedEditors){if(this._editors.has(t.id))return;const e=l.ov.revive(t.documentUri),i=this._documents.get(e);i&&this._createExtHostEditor(i,t.id,t)}if(e.value.removedEditors)for(const t of e.value.removedEditors){const e=this._editors.get(t);e&&(this._editors.delete(t),this._activeNotebookEditor?.id===e.id&&(this._activeNotebookEditor=void 0))}if(e.value.visibleEditors){this._visibleNotebookEditors=e.value.visibleEditors.map((e=>this._editors.get(e))).filter((e=>!!e));const t=new Set;this._visibleNotebookEditors.forEach((e=>t.add(e.id)));for(const e of this._editors.values()){const i=t.has(e.id);e._acceptVisibility(i)}this._visibleNotebookEditors=[...this._editors.values()].map((e=>e)).filter((e=>e.visible)),this._onDidChangeVisibleNotebookEditors.fire(this.visibleNotebookEditors)}if(null===e.value.newActiveEditor)this._activeNotebookEditor=void 0;else if(e.value.newActiveEditor){this._editors.get(e.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${e.value.newActiveEditor}`),this._activeNotebookEditor=this._editors.get(e.value.newActiveEditor)}void 0!==e.value.newActiveEditor&&this._onDidChangeActiveNotebookEditor.fire(this._activeNotebookEditor?.apiEditor)}static _registerApiCommands(e){const t=k.SF.String.with("notebookType","A notebook type"),i=new k.b9("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[t,new k.SF("data","Bytes to convert to data",(e=>e instanceof Uint8Array),(e=>Qe.KN.wrap(e)))],new k._m("Notebook Data",(e=>I.c4.to(e.value)))),n=new k.b9("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[t,new k.SF("NotebookData","Notebook data to convert to bytes",(e=>!0),(e=>new M.ky(I.c4.from(e))))],new k._m("Bytes",(e=>e.buffer)));e.registerApiCommand(i),e.registerApiCommand(n)}trace(e){this._logService.trace(`[Extension Host Notebook] ${e}`)}}class bi{constructor(e,t,i,n={timeout:1500,errors:3}){this._logService=e,this._notebooksAndEditors=t,this._mainThreadBulkEdits=i,this._thresholds=n,this._onWillSaveNotebookDocumentEvent=new o.Qz}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,i,n)=>{const r=function(e){t.call(i,e)};return r.extension=e,this._onWillSaveNotebookDocumentEvent.event(r,void 0,n)}}async $participateInSave(e,t,i){const n=l.ov.revive(e),r=this._notebooksAndEditors.getNotebookDocument(n);if(!r)throw new Error("Unable to resolve notebook document");const o=[];if(await this._onWillSaveNotebookDocumentEvent.fireAsync({notebook:r.apiNotebook,reason:I.wD.to(t)},i,(async(e,t)=>{const n=Date.now(),r=await await Promise.resolve(e);Date.now()-n>this._thresholds.timeout&&this._logService.warn("onWillSaveNotebookDocument-listener from extension",t.extension.identifier),i.isCancellationRequested||r&&(r instanceof x.DbP?o.push(r):this._logService.warn("onWillSaveNotebookDocument-listener from extension",t.extension.identifier,"ignored due to invalid data"))})),i.isCancellationRequested)return!1;if(0===o.length)return!0;const s={edits:[]};for(const e of o){const{edits:t}=I.Db.from(e);s.edits=s.edits.concat(t)}return this._mainThreadBulkEdits.$tryApplyWorkspaceEdit(new M.ky(s))}}class yi{constructor(e){this._notebooksAndEditors=e,this._onDidSaveNotebookDocument=new o.Q5,this.onDidSaveNotebookDocument=this._onDidSaveNotebookDocument.event,this._onDidChangeNotebookDocument=new o.Q5,this.onDidChangeNotebookDocument=this._onDidChangeNotebookDocument.event}$acceptModelChanged(e,t,i,n){const r=this._notebooksAndEditors.getNotebookDocument(l.ov.revive(e)).acceptModelChanged(t.value,i,n);this._onDidChangeNotebookDocument.fire(r)}$acceptDirtyStateChanged(e,t){this._notebooksAndEditors.getNotebookDocument(l.ov.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this._notebooksAndEditors.getNotebookDocument(l.ov.revive(e));this._onDidSaveNotebookDocument.fire(t.apiNotebook)}}let wi=class{constructor(e,t){this._logService=e,this._notebooksAndEditors=t,this._onDidChangeNotebookEditorSelection=new o.Q5,this._onDidChangeNotebookEditorVisibleRanges=new o.Q5,this.onDidChangeNotebookEditorSelection=this._onDidChangeNotebookEditorSelection.event,this.onDidChangeNotebookEditorVisibleRanges=this._onDidChangeNotebookEditorVisibleRanges.event}$acceptEditorPropertiesChanged(e,t){this._logService.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",e,t);const i=this._notebooksAndEditors.getEditorById(e);t.visibleRanges&&i._acceptVisibleRanges(t.visibleRanges.ranges.map(I.Xs.to)),t.selections&&i._acceptSelections(t.selections.selections.map(I.Xs.to)),t.visibleRanges&&this._onDidChangeNotebookEditorVisibleRanges.fire({notebookEditor:i.apiEditor,visibleRanges:i.apiEditor.visibleRanges}),t.selections&&this._onDidChangeNotebookEditorSelection.fire(Object.freeze({notebookEditor:i.apiEditor,selections:i.apiEditor.selections}))}$acceptEditorViewColumns(e){for(const t in e){this._notebooksAndEditors.getEditorById(t)._acceptViewColumn(I.eI.to(e[t]))}}};wi=(0,O.g)([(0,O.f)(0,_.V)],wi);var xi=i(17248);let Ci=class{constructor(e,t,i,n,r){this._initData=t,this._extHostNotebook=i,this._commands=n,this._logService=r,this._activeExecutions=new Re.Y9,this._activeNotebookExecutions=new Re.Y9,this._kernelDetectionTask=new Map,this._kernelDetectionTaskHandlePool=0,this._kernelSourceActionProviders=new Map,this._kernelSourceActionProviderHandlePool=0,this._kernelData=new Map,this._handlePool=0,this._onDidChangeCellExecutionState=new o.Q5,this.onDidChangeNotebookCellExecutionState=this._onDidChangeCellExecutionState.event,this.id=0,this.variableStore={},this._proxy=e.getProxy(w.Tr.MainThreadNotebookKernels);const s=new k.b9("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new k.SF("options","Select kernel options",(e=>!0),(e=>{if(e&&"notebookEditor"in e&&"id"in e){const t=this._extHostNotebook.getIdByEditor(e.notebookEditor);return{id:e.id,extension:e.extension,notebookEditorId:t}}if(e&&"notebookEditor"in e){const t=this._extHostNotebook.getIdByEditor(e.notebookEditor);if(void 0===t)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${e.notebookEditor.notebook.uri.toString()}`);return{notebookEditorId:t}}return e}))],k._m.Void),a=new k.b9("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[k.SF.Uri],new k._m("A promise that resolves to an array of variables",((e,t)=>e.map((e=>({variable:{name:e.name,value:e.value,expression:e.expression,type:e.type,language:e.language},hasNamedChildren:e.hasNamedChildren,indexedChildrenCount:e.indexedChildrenCount}))))));this._commands.registerApiCommand(s),this._commands.registerApiCommand(a)}createNotebookController(e,t,i,n,r,s){for(const i of this._kernelData.values())if(i.controller.id===t&&m.kP.equals(e.identifier,i.extensionId))throw new Error(`notebook controller with id '${t}' ALREADY exist`);const a=this._handlePool++,c=this;this._logService.trace(`NotebookController[${a}], CREATED by ${e.identifier.value}, ${t}`);const l=()=>console.warn(`NO execute handler from notebook controller '${p.id}' of extension: '${e.identifier}'`);let d=!1;const u=new o.Q5,h=new o.Q5,p={id:Ii(e.identifier,t),notebookType:i,extensionId:e.identifier,extensionLocation:e.extensionLocation,label:n||e.identifier.value,preloads:s?s.map(I.xT.from):[]};let g,f,_=r??l;this._proxy.$addKernel(a,p).catch((e=>{console.log(e),d=!0}));let v=0;const b=()=>{if(d)return;const e=++v;Promise.resolve().then((()=>{e===v&&this._proxy.$updateKernel(a,p)}))},y=new Re.Y9,w={get id(){return t},get notebookType(){return p.notebookType},onDidChangeSelectedNotebooks:u.event,get label(){return p.label},set label(t){p.label=t??e.displayName??e.name,b()},get detail(){return p.detail??""},set detail(e){p.detail=e,b()},get description(){return p.description??""},set description(e){p.description=e,b()},get supportedLanguages(){return p.supportedLanguages},set supportedLanguages(e){p.supportedLanguages=e,b()},get supportsExecutionOrder(){return p.supportsExecutionOrder??!1},set supportsExecutionOrder(e){p.supportsExecutionOrder=e,b()},get rendererScripts(){return p.preloads?p.preloads.map(I.xT.to):[]},get executeHandler(){return _},set executeHandler(e){_=e??l},get interruptHandler(){return g},set interruptHandler(e){g=e,p.supportsInterrupt=Boolean(e),b()},set variableProvider(t){(0,j.H5)(e,"notebookVariableProvider"),f=t,p.hasVariableProvider=!!t,t?.onDidChangeVariables((e=>c._proxy.$variablesUpdated(e.uri))),b()},get variableProvider(){return f},createNotebookCellExecution(t){if(d)throw new Error("notebook controller is DISPOSED");if(!y.has(t.notebook.uri))throw c._logService.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(y.keys()).map((e=>e.toString()))),new Error(`notebook controller is NOT associated to notebook: ${t.notebook.uri.toString()}`);return c._createNotebookCellExecution(t,Ii(e.identifier,this.id))},createNotebookExecution(t){if((0,j.H5)(e,"notebookExecution"),d)throw new Error("notebook controller is DISPOSED");if(!y.has(t.uri))throw c._logService.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(y.keys()).map((e=>e.toString()))),new Error(`notebook controller is NOT associated to notebook: ${t.uri.toString()}`);return c._createNotebookExecution(t,Ii(e.identifier,this.id))},dispose:()=>{d||(this._logService.trace(`NotebookController[${a}], DISPOSED`),d=!0,this._kernelData.delete(a),u.dispose(),h.dispose(),this._proxy.$removeKernel(a))},updateNotebookAffinity(t,i){i===x.Hu0.Hidden&&(0,j.H5)(e,"notebookControllerAffinityHidden"),c._proxy.$updateNotebookPriority(a,t.uri,i)},onDidReceiveMessage:h.event,postMessage(t,i){return(0,j.H5)(e,"notebookMessaging"),c._proxy.$postMessage(a,i&&c._extHostNotebook.getIdByEditor(i),t)},asWebviewUri(t){return(0,j.H5)(e,"notebookMessaging"),re(t,c._initData.remote)}};return this._kernelData.set(a,{extensionId:e.identifier,controller:w,onDidReceiveMessage:h,onDidChangeSelection:u,associatedNotebooks:y}),w}getIdByController(e){for(const[t,i]of this._kernelData)if(i.controller===e)return Ii(i.extensionId,e.id);return null}createNotebookControllerDetectionTask(e,t){const i=this._kernelDetectionTaskHandlePool++,n=this;this._logService.trace(`NotebookControllerDetectionTask[${i}], CREATED by ${e.identifier.value}`),this._proxy.$addKernelDetectionTask(i,t);const r={dispose:()=>{this._kernelDetectionTask.delete(i),n._proxy.$removeKernelDetectionTask(i)}};return this._kernelDetectionTask.set(i,r),r}registerKernelSourceActionProvider(e,t,i){const n=this._kernelSourceActionProviderHandlePool++,r="function"==typeof i.onDidChangeNotebookKernelSourceActions?n:void 0,o=this;let s;return this._kernelSourceActionProviders.set(n,i),this._logService.trace(`NotebookKernelSourceActionProvider[${n}], CREATED by ${e.identifier.value}`),this._proxy.$addKernelSourceActionProvider(n,n,t),void 0!==r&&(s=i.onDidChangeNotebookKernelSourceActions((e=>this._proxy.$emitNotebookKernelSourceActionsChangeEvent(r)))),{dispose:()=>{this._kernelSourceActionProviders.delete(n),o._proxy.$removeKernelSourceActionProvider(n,n),s?.dispose()}}}async $provideKernelSourceActions(e,t){const i=this._kernelSourceActionProviders.get(e);if(i){const e=new s.SL;return(await i.provideNotebookKernelSourceActions(t)??[]).map((t=>I.ac.from(t,this._commands.converter,e)))}return[]}$acceptNotebookAssociation(e,t,i){const n=this._kernelData.get(e);if(n){const r=this._extHostNotebook.getNotebookDocument(l.ov.revive(t));i?n.associatedNotebooks.set(r.uri,!0):n.associatedNotebooks.delete(r.uri),this._logService.trace(`NotebookController[${e}] ASSOCIATE notebook`,r.uri.toString(),i),n.onDidChangeSelection.fire({selected:i,notebook:r.apiNotebook})}}async $executeCells(e,t,i){const n=this._kernelData.get(e);if(!n)return;const r=this._extHostNotebook.getNotebookDocument(l.ov.revive(t)),o=[];for(const e of i){const t=r.getCell(e);t&&o.push(t.apiCell)}try{this._logService.trace(`NotebookController[${e}] EXECUTE cells`,r.uri.toString(),o.length),await n.controller.executeHandler.call(n.controller,o,r.apiNotebook,n.controller)}catch(t){this._logService.error(`NotebookController[${e}] execute cells FAILED`,t),console.error(t)}}async $cancelCells(e,t,i){const n=this._kernelData.get(e);if(!n)return;const r=this._extHostNotebook.getNotebookDocument(l.ov.revive(t));if(n.controller.interruptHandler)await n.controller.interruptHandler.call(n.controller,r.apiNotebook);else for(const e of i){const t=r.getCell(e);t&&this._activeExecutions.get(t.uri)?.cancel()}if(n.controller.interruptHandler){const e=this._activeNotebookExecutions.get(r.uri);this._activeNotebookExecutions.delete(r.uri),i.length&&Array.isArray(e)&&e.length&&e.forEach((e=>e.dispose()))}}async $provideVariables(e,t,i,n,r,o,s){const a=this._kernelData.get(e);if(!a)return;const c=this._extHostNotebook.getNotebookDocument(l.ov.revive(i)),d=a.controller.variableProvider;if(!d)return;let u;if(void 0!==n){if(u=this.variableStore[n],!u)return}else this.variableStore={};const h="named"===r?x.rbC.Named:x.rbC.Indexed,p=d.provideVariables(c.apiNotebook,u,h,o,s);let m=0;for await(const e of p){if(s.isCancellationRequested)return;const i={id:this.id++,name:e.variable.name,value:e.variable.value,type:e.variable.type,interfaces:e.variable.interfaces,language:e.variable.language,expression:e.variable.expression,hasNamedChildren:e.hasNamedChildren,indexedChildrenCount:e.indexedChildrenCount,extensionId:a.extensionId.value};if(this.variableStore[i.id]=e.variable,this._proxy.$receiveVariable(t,i),m++>=100)return}}$acceptKernelMessageFromRenderer(e,t,i){const n=this._kernelData.get(e);if(!n)return;const r=this._extHostNotebook.getEditorById(t);n.onDidReceiveMessage.fire(Object.freeze({editor:r.apiEditor,message:i}))}$cellExecutionChanged(e,t,i){const n=this._extHostNotebook.getNotebookDocument(l.ov.revive(e)).getCell(t);if(n){const e=i?I.KP.to(i):x.KPz.Idle;void 0!==e&&this._onDidChangeCellExecutionState.fire({cell:n.apiCell,state:e})}}_createNotebookCellExecution(e,t){if(e.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const i=this._extHostNotebook.getNotebookDocument(e.notebook.uri).getCellFromApiCell(e);if(!i)throw new Error("invalid cell");if(this._activeExecutions.has(i.uri))throw new Error(`duplicate execution for ${i.uri}`);const n=new Di(t,i,this._proxy);this._activeExecutions.set(i.uri,n);const r=n.onDidChangeState((()=>{n.state===Ei.Resolved&&(n.dispose(),r.dispose(),this._activeExecutions.delete(i.uri))}));return n.asApiObject()}_createNotebookExecution(e,t){const i=this._extHostNotebook.getNotebookDocument(e.uri),n=e.getCells().find((e=>{const t=i.getCellFromApiCell(e);return t&&this._activeExecutions.has(t.uri)}));if(n)throw new Error(`duplicate cell execution for ${n.document.uri}`);if(this._activeNotebookExecutions.has(i.uri))throw new Error(`duplicate notebook execution for ${i.uri}`);const r=new Ti(t,i,this._proxy),o=r.onDidChangeState((()=>{r.state===Si.Resolved&&(r.dispose(),o.dispose(),this._activeNotebookExecutions.delete(i.uri))}));return this._activeNotebookExecutions.set(i.uri,[r,o]),r.asApiObject()}};var Ei,Si;Ci=(0,O.g)([(0,O.f)(4,_.V)],Ci),function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"}(Ei||(Ei={}));class Di extends s.JT{static{this.HANDLE=0}get state(){return this._state}constructor(e,t,i){super(),this._cell=t,this._proxy=i,this._handle=Di.HANDLE++,this._onDidChangeState=new o.Q5,this.onDidChangeState=this._onDidChangeState.event,this._state=Ei.Init,this._tokenSource=this._register(new n.AU),this._collector=new ki(10,(e=>this.update(e))),this._executionOrder=t.internalMetadata.executionOrder,this._proxy.$createExecution(this._handle,e,this._cell.notebook.uri,this._cell.handle)}cancel(){this._tokenSource.cancel()}async updateSoon(e){await this._collector.addItem(e)}async update(e){const t=Array.isArray(e)?e:[e];return this._proxy.$updateExecution(this._handle,new M.ky(t))}verifyStateForOutput(){if(this._state===Ei.Init)throw new Error("Must call start before modifying cell output");if(this._state===Ei.Resolved)throw new Error("Cannot modify cell output after calling resolve")}cellIndexToHandle(e){let t=this._cell;if(e&&(t=this._cell.notebook.getCellFromApiCell(e)),!t)throw new Error("INVALID cell");return t.handle}validateAndConvertOutputs(e){return e.map((e=>{const t=x.JOq.ensureUniqueMimeTypes(e.items,!0);return t===e.items?I.JO.from(e):I.JO.from({items:t,id:e.id,metadata:e.metadata})}))}async updateOutputs(e,t,i){const n=this.cellIndexToHandle(t),r=this.validateAndConvertOutputs((0,E._2)(e));return this.updateSoon({editType:xi.W.Output,cellHandle:n,append:i,outputs:r})}async updateOutputItems(e,t,i){return e=x.JOq.ensureUniqueMimeTypes((0,E._2)(e),!0),this.updateSoon({editType:xi.W.OutputItems,items:e.map(I.x$.from),outputId:t.id,append:i})}asApiObject(){const e=this,t={get token(){return e._tokenSource.token},get cell(){return e._cell.apiCell},get executionOrder(){return e._executionOrder},set executionOrder(t){e._executionOrder=t,e.update([{editType:xi.W.ExecutionState,executionOrder:e._executionOrder}])},start(t){if(e._state===Ei.Resolved||e._state===Ei.Started)throw new Error("Cannot call start again");e._state=Ei.Started,e._onDidChangeState.fire(),e.update({editType:xi.W.ExecutionState,runStartTime:t})},end(t,i,n){if(e._state===Ei.Resolved)throw new Error("Cannot call resolve twice");e._state=Ei.Resolved,e._onDidChangeState.fire(),e._collector.flush();const r=n?{message:n.message,stack:n.stack,location:n?.location?{startLineNumber:n.location.start.line,startColumn:n.location.start.character,endLineNumber:n.location.end.line,endColumn:n.location.end.character}:void 0,uri:n.uri}:void 0;e._proxy.$completeExecution(e._handle,new M.ky({runEndTime:i,lastRunSuccess:t,error:r}))},clearOutput(t){return e.verifyStateForOutput(),e.updateOutputs([],t,!1)},appendOutput(t,i){return e.verifyStateForOutput(),e.updateOutputs(t,i,!0)},replaceOutput(t,i){return e.verifyStateForOutput(),e.updateOutputs(t,i,!1)},appendOutputItems(t,i){return e.verifyStateForOutput(),e.updateOutputItems(t,i,!0)},replaceOutputItems(t,i){return e.verifyStateForOutput(),e.updateOutputItems(t,i,!1)}};return Object.freeze(t)}}!function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"}(Si||(Si={}));class Ti extends s.JT{static{this.HANDLE=0}get state(){return this._state}constructor(e,t,i){super(),this._notebook=t,this._proxy=i,this._handle=Ti.HANDLE++,this._onDidChangeState=new o.Q5,this.onDidChangeState=this._onDidChangeState.event,this._state=Si.Init,this._tokenSource=this._register(new n.AU),this._proxy.$createNotebookExecution(this._handle,e,this._notebook.uri)}cancel(){this._tokenSource.cancel()}asApiObject(){const e={start:()=>{if(this._state===Si.Resolved||this._state===Si.Started)throw new Error("Cannot call start again");this._state=Si.Started,this._onDidChangeState.fire(),this._proxy.$beginNotebookExecution(this._handle)},end:()=>{if(this._state===Si.Resolved)throw new Error("Cannot call resolve twice");this._state=Si.Resolved,this._onDidChangeState.fire(),this._proxy.$completeNotebookExecution(this._handle)}};return Object.freeze(e)}}class ki{constructor(e,t){this.delay=e,this.callback=t,this.batch=[],this.startedTimer=Date.now()}addItem(e){return this.batch.push(e),this.currentDeferred||(this.currentDeferred=new H.CR,this.startedTimer=Date.now(),(0,H.Vs)(this.delay).then((()=>this.flush()))),Date.now()-this.startedTimer>this.delay?this.flush():this.currentDeferred.p}flush(){if(0===this.batch.length||!this.currentDeferred)return Promise.resolve();const e=this.currentDeferred;this.currentDeferred=void 0;const t=this.batch;return this.batch=[],this.callback(t).finally((()=>e.complete()))}}function Ii(e,t){return`${e.value}/${t}`}class Pi{constructor(e,t){this._extHostNotebook=t,this._rendererMessageEmitters=new Map,this.proxy=e.getProxy(w.Tr.MainThreadNotebookRenderers)}$postRendererMessage(e,t,i){const n=this._extHostNotebook.getEditorById(e);this._rendererMessageEmitters.get(t)?.fire({editor:n.apiEditor,message:i})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some((e=>e.id===t)))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(e,i,n)=>this.getOrCreateEmitterFor(t).event(e,i,n),postMessage:(e,i)=>{di.apiEditorsToExtHost.has(e)&&([e,i]=[i,e]);const n=i&&di.apiEditorsToExtHost.get(i);return this.proxy.$postMessage(n?.id,t,e)}}}getOrCreateEmitterFor(e){let t=this._rendererMessageEmitters.get(e);return t||(t=new o.Q5({onDidRemoveLastListener:()=>{t?.dispose(),this._rendererMessageEmitters.delete(e)}}),this._rendererMessageEmitters.set(e,t),t)}}var Ai=i(92231);class Ri{constructor(e){this.handlers=new Map,this.proxy=e.getProxy(w.Tr.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,i){if((0,j.H5)(e,"profileContentHandlers"),this.handlers.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.handlers.set(t,i),this.proxy.$registerProfileContentHandler(t,i.name,i.description,e.identifier.value),(0,s.OF)((()=>{this.handlers.delete(t),this.proxy.$unregisterProfileContentHandler(t)}))}async $saveProfile(e,t,i,n){const r=this.handlers.get(e);if(!r)throw new Error(`Unknown handler with id: ${e}`);return r.saveProfile(t,i,n)}async $readProfile(e,t,i){const n=this.handlers.get(e);if(!n)throw new Error(`Unknown handler with id: ${e}`);return n.readProfile((0,V.HD)(t)?t:l.ov.revive(t),i)}}var Li=i(28855),Ni=i(63207);class $i{constructor(e){this._handles=0,this._mapHandleToCancellationSource=new Map,this._proxy=e}async withProgress(e,t,i){const n=this._handles++,{title:o,location:s,cancellable:a}=t,c={label:e.displayName||e.name,id:e.identifier.value};return this._proxy.$startProgress(n,{location:I.uT.from(s),title:o,source:c,cancellable:a},e.isUnderDevelopment?void 0:e.identifier.value).catch(r.Cp),this._withProgress(n,i,!!a)}_withProgress(e,t,i){let r;i&&(r=new n.AU,this._mapHandleToCancellationSource.set(e,r));const o=e=>{this._proxy.$progressEnd(e),this._mapHandleToCancellationSource.delete(e),r?.dispose()};let s;try{s=t(new Oi(this._proxy,e),i&&r?r.token:n.Ts.None)}catch(t){throw o(e),t}return s.then((t=>o(e)),(t=>o(e))),s}$acceptProgressCanceled(e){const t=this._mapHandleToCancellationSource.get(e);t&&(t.cancel(),this._mapHandleToCancellationSource.delete(e))}}class Oi extends Li.Ex{constructor(e,t){super((e=>this.throttledReport(e))),this._proxy=e,this._handle=t}throttledReport(e){this._proxy.$progressReport(this._handle,e)}}Oi.__decorator=(0,O.g)([(0,Ni.P2)(100,((e,t)=>function(e,t){return e.message=t.message,"number"==typeof t.increment&&("number"==typeof e.increment?e.increment+=t.increment:e.increment=t.increment),e}(e,t)),(()=>Object.create(null)))],Oi.prototype,"throttledReport",null);class Fi{static{this.handlePool=0}constructor(e,t){this.uriTransformer=t,this.providers=new Map,this.proxy=e.getProxy(w.Tr.MainThreadQuickDiff)}$provideOriginalResource(e,t,i){const n=l.ov.revive(t),r=this.providers.get(e);return r?(0,H.OH)((()=>r.provideOriginalResource(n,i))).then((e=>e||null)):Promise.resolve(null)}registerQuickDiffProvider(e,t,i,n){const r=Fi.handlePool++;return this.providers.set(r,t),this.proxy.$registerQuickDiffProvider(r,I.Lq.from(e,this.uriTransformer),i,n),{dispose:()=>{this.proxy.$unregisterQuickDiffProvider(r),this.providers.delete(r)}}}}function Mi(e,t,i){const a=e.getProxy(w.Tr.MainThreadQuickOpen);class d{static{this._nextId=1}constructor(e,t){this._extensionId=e,this._onDidDispose=t,this._id=h._nextId++,this._visible=!1,this._expectingHide=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!0,this._value="",this._buttons=[],this._handlesToButtons=new Map,this._onDidAcceptEmitter=new o.Q5,this._onDidChangeValueEmitter=new o.Q5,this._onDidTriggerButtonEmitter=new o.Q5,this._onDidHideEmitter=new o.Q5,this._pendingUpdate={id:this._id},this._disposed=!1,this._disposables=[this._onDidTriggerButtonEmitter,this._onDidHideEmitter,this._onDidAcceptEmitter,this._onDidChangeValueEmitter],this.onDidChangeValue=this._onDidChangeValueEmitter.event,this.onDidAccept=this._onDidAcceptEmitter.event,this.onDidTriggerButton=this._onDidTriggerButtonEmitter.event,this.onDidHide=this._onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update({title:e})}get step(){return this._steps}set step(e){this._steps=e,this.update({step:e})}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update({totalSteps:e})}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update({enabled:e})}get busy(){return this._busy}set busy(e){this._busy=e,this.update({busy:e})}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){this._ignoreFocusOut=e,this.update({ignoreFocusOut:e})}get value(){return this._value}set value(e){this._value=e,this.update({value:e})}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update({placeholder:e})}get buttons(){return this._buttons}set buttons(e){this._buttons=e.slice(),this._handlesToButtons.clear(),e.forEach(((e,t)=>{const i=e===x.ApZ.Back?-1:t;this._handlesToButtons.set(i,e)})),this.update({buttons:e.map(((e,t)=>({...u(e.iconPath),tooltip:e.tooltip,handle:e===x.ApZ.Back?-1:t})))})}show(){this._visible=!0,this._expectingHide=!0,this.update({visible:!0})}hide(){this._visible=!1,this.update({visible:!1})}_fireDidAccept(){this._onDidAcceptEmitter.fire()}_fireDidChangeValue(e){this._value=e,this._onDidChangeValueEmitter.fire(e)}_fireDidTriggerButton(e){const t=this._handlesToButtons.get(e);t&&this._onDidTriggerButtonEmitter.fire(t)}_fireDidHide(){this._expectingHide&&(this._expectingHide=this._visible,this._onDidHideEmitter.fire())}dispose(){this._disposed||(this._disposed=!0,this._fireDidHide(),this._disposables=(0,s.B9)(this._disposables),this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=void 0),this._onDidDispose(),a.$dispose(this._id))}update(e){if(!this._disposed){for(const t of Object.keys(e)){const i=e[t];this._pendingUpdate[t]=void 0===i?null:i}"visible"in this._pendingUpdate?(this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=void 0),this.dispatchUpdate()):this._visible&&!this._updateTimeout&&(this._updateTimeout=setTimeout((()=>{this._updateTimeout=void 0,this.dispatchUpdate()}),0))}}dispatchUpdate(){a.$createOrUpdate(this._pendingUpdate),this._pendingUpdate={id:this._id}}}function u(e){const t=function(e){if(e instanceof x.kS8)return{id:e.id};const t=function(e){return"object"==typeof e&&"dark"in e?e.dark:e}(e),i=function(e){return"object"==typeof e&&"light"in e?e.light:e}(e);return{dark:"string"==typeof t?l.ov.file(t):t,light:"string"==typeof i?l.ov.file(i):i}}(e);let i,n;return"id"in t?n=J.kS.asClassName(t):i=t,{iconPath:i,iconClass:n}}class h extends d{constructor(e,t){super(e.identifier,t),this.extension=e,this._items=[],this._handlesToItems=new Map,this._itemsToHandles=new Map,this._canSelectMany=!1,this._matchOnDescription=!0,this._matchOnDetail=!0,this._sortByLabel=!0,this._keepScrollPosition=!1,this._activeItems=[],this._onDidChangeActiveEmitter=new o.Q5,this._selectedItems=[],this._onDidChangeSelectionEmitter=new o.Q5,this._onDidTriggerItemButtonEmitter=new o.Q5,this.onDidChangeActive=this._onDidChangeActiveEmitter.event,this.onDidChangeSelection=this._onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this._onDidTriggerItemButtonEmitter.event,this._disposables.push(this._onDidChangeActiveEmitter,this._onDidChangeSelectionEmitter,this._onDidTriggerItemButtonEmitter),this.update({type:"quickPick"})}get items(){return this._items}set items(e){this._items=e.slice(),this._handlesToItems.clear(),this._itemsToHandles.clear(),e.forEach(((e,t)=>{this._handlesToItems.set(t,e),this._itemsToHandles.set(e,t)}));const t=(0,j.$x)(this.extension,"quickPickItemTooltip"),i=[];for(let n=0;n<e.length;n++){const r=e[n];if(r.kind===x.qlg.Separator)i.push({type:"separator",label:r.label});else{r.tooltip&&!t&&console.warn(`Extension '${this.extension.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.extension.identifier.value}`);const e=r.iconPath?u(r.iconPath):void 0;i.push({handle:n,label:r.label,iconPath:e?.iconPath,iconClass:e?.iconClass,description:r.description,detail:r.detail,picked:r.picked,alwaysShow:r.alwaysShow,tooltip:t?I.W5.fromStrict(r.tooltip):void 0,buttons:r.buttons?.map(((e,t)=>({...u(e.iconPath),tooltip:e.tooltip,handle:t})))})}}this.update({items:i})}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update({canSelectMany:e})}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update({matchOnDescription:e})}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update({matchOnDetail:e})}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update({sortByLabel:e})}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e,this.update({keepScrollPosition:e})}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e.filter((e=>this._itemsToHandles.has(e))),this.update({activeItems:this._activeItems.map((e=>this._itemsToHandles.get(e)))})}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e.filter((e=>this._itemsToHandles.has(e))),this.update({selectedItems:this._selectedItems.map((e=>this._itemsToHandles.get(e)))})}_fireDidChangeActive(e){const t=(0,E.kX)(e.map((e=>this._handlesToItems.get(e))));this._activeItems=t,this._onDidChangeActiveEmitter.fire(t)}_fireDidChangeSelection(e){const t=(0,E.kX)(e.map((e=>this._handlesToItems.get(e))));this._selectedItems=t,this._onDidChangeSelectionEmitter.fire(t)}_fireDidTriggerItemButton(e,t){const i=this._handlesToItems.get(e);if(!i||!i.buttons||!i.buttons.length)return;const n=i.buttons[t];n&&this._onDidTriggerItemButtonEmitter.fire({button:n,item:i})}}class p extends d{constructor(e,t){super(e.identifier,t),this._password=!1,this.update({type:"inputBox"})}get password(){return this._password}set password(e){this._password=e,this.update({password:e})}get prompt(){return this._prompt}set prompt(e){this._prompt=e,this.update({prompt:e})}get valueSelection(){return this._valueSelection}set valueSelection(e){this._valueSelection=e,this.update({valueSelection:e})}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,e?"string"==typeof e?this.update({validationMessage:e,severity:c.Z.Error}):this.update({validationMessage:e.message,severity:e.severity??c.Z.Error}):this.update({validationMessage:void 0,severity:c.Z.Ignore})}}return new class{constructor(e,t){this._sessions=new Map,this._instances=0,this._workspace=e,this._commands=t}showQuickPick(e,t,i,o=n.Ts.None){this._onDidSelectItem=void 0;const s=Promise.resolve(t),c=++this._instances,l=a.$show(c,{title:i?.title,placeHolder:i?.placeHolder,matchOnDescription:i?.matchOnDescription,matchOnDetail:i?.matchOnDetail,ignoreFocusLost:i?.ignoreFocusOut,canPickMany:i?.canPickMany},o),d={},h=l.then((()=>d));return Promise.race([h,s]).then((t=>{if(t===d)return;const n=(0,j.$x)(e,"quickPickItemTooltip");return s.then((t=>{const r=[];for(let i=0;i<t.length;i++){const o=t[i];if("string"==typeof o)r.push({label:o,handle:i});else if(o.kind===x.qlg.Separator)r.push({type:"separator",label:o.label});else{o.tooltip&&!n&&console.warn(`Extension '${e.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${e.identifier.value}`);const t=o.iconPath?u(o.iconPath):void 0;r.push({label:o.label,iconPath:t?.iconPath,iconClass:t?.iconClass,description:o.description,detail:o.detail,picked:o.picked,alwaysShow:o.alwaysShow,tooltip:n?I.W5.fromStrict(o.tooltip):void 0,handle:i})}}return i&&"function"==typeof i.onDidSelectItem&&(this._onDidSelectItem=e=>{i.onDidSelectItem(t[e])}),a.$setItems(c,r),l.then((e=>"number"==typeof e?t[e]:Array.isArray(e)?e.map((e=>t[e])):void 0))}))})).then(void 0,(e=>{if(!(0,r.n2)(e))return a.$setError(c,e),Promise.reject(e)}))}$onItemSelected(e){this._onDidSelectItem?.(e)}showInput(e,t=n.Ts.None){return this._validateInput=e?.validateInput,a.$input(e,"function"==typeof this._validateInput,t).then(void 0,(e=>{if(!(0,r.n2)(e))return Promise.reject(e)}))}async $validateInput(e){if(!this._validateInput)return;const t=await this._validateInput(e);if(!t||"string"==typeof t)return t;let i;switch(t.severity){case x.S$x.Info:i=c.Z.Info;break;case x.S$x.Warning:i=c.Z.Warning;break;case x.S$x.Error:i=c.Z.Error;break;default:i=t.message?c.Z.Error:c.Z.Ignore}return{content:t.message,severity:i}}async showWorkspaceFolderPick(e,t=n.Ts.None){const i=await this._commands.executeCommand("_workbench.pickWorkspaceFolder",[e]);if(!i)return;const r=await this._workspace.getWorkspaceFolders2();return r?r.find((e=>e.uri.toString()===i.uri.toString())):void 0}createQuickPick(e){const t=new h(e,(()=>this._sessions.delete(t._id)));return this._sessions.set(t._id,t),t}createInputBox(e){const t=new p(e,(()=>this._sessions.delete(t._id)));return this._sessions.set(t._id,t),t}$onDidChangeValue(e,t){const i=this._sessions.get(e);i?._fireDidChangeValue(t)}$onDidAccept(e){const t=this._sessions.get(e);t?._fireDidAccept()}$onDidChangeActive(e,t){const i=this._sessions.get(e);i instanceof h&&i._fireDidChangeActive(t)}$onDidChangeSelection(e,t){const i=this._sessions.get(e);i instanceof h&&i._fireDidChangeSelection(t)}$onDidTriggerButton(e,t){const i=this._sessions.get(e);i?._fireDidTriggerButton(t)}$onDidTriggerItemButton(e,t,i){const n=this._sessions.get(e);n instanceof h&&n._fireDidTriggerItemButton(t,i)}$onDidHide(e){const t=this._sessions.get(e);t?._fireDidHide()}}(t,i)}var Ui,Hi=i(76112),zi=i(11547);function Bi(e){return e instanceof l.ov}function Wi(e,t){return e.scheme===a.lg.file&&t.scheme===a.lg.file&&zi.IJ?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function Vi(e){return e?"string"==typeof e.iconPath?l.ov.file(e.iconPath):l.ov.isUri(e.iconPath)||J.kS.isThemeIcon(e.iconPath)?e.iconPath:void 0:void 0}function qi(e){if(e){if(l.ov.isUri(e))return e;if(J.kS.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}}function ji(e){const t=qi(e.icon),i=e.labels?.map((e=>({title:e.title,icon:qi(e.icon)})));return{...e,icon:t,labels:i}}function Ki(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(!e.iconPath)return-1;if(!t.iconPath)return 1;const i="string"==typeof e.iconPath?e.iconPath:l.ov.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,n="string"==typeof t.iconPath?t.iconPath:l.ov.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return(0,Hi.W7)(i,n)}function Gi(e,t){let i=(0,Hi.W7)(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(0!==i)return i;if(e.command&&t.command)i=function(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(void 0!==e.tooltip&&void 0!==t.tooltip)return e.tooltip<t.tooltip?-1:1;if(void 0!==e.tooltip)return 1;if(void 0!==t.tooltip)return-1}if(e.arguments===t.arguments)return 0;if(!e.arguments)return-1;if(!t.arguments)return 1;if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length;for(let i=0;i<e.arguments.length;i++){const n=e.arguments[i],r=t.arguments[i];if(n!==r&&!(Bi(n)&&Bi(r)&&Wi(n,r)))return n<r?-1:1}return 0}(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(0!==i)return i;if(e.decorations&&t.decorations)i=function(e,t){let i=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(i=Ki(e,t),0!==i)return i;if(e.light&&t.light)i=Ki(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(0!==i)return i;if(e.dark&&t.dark)i=Ki(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return i}(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)i=(0,Hi.W7)(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)i=(0,Hi.W7)(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return i}function Qi(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?function(e,t){for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}(e.arguments,t.arguments):e.arguments===t.arguments)}class Ji{#e;#R;get value(){return this._value}set value(e){e=e??"",this.#e.$setInputBoxValue(this._sourceControlHandle,e),this.updateValue(e)}get onDidChange(){return this._onDidChange.event}get placeholder(){return this._placeholder}set placeholder(e){this.#e.$setInputBoxPlaceholder(this._sourceControlHandle,e),this._placeholder=e}get validateInput(){return(0,j.H5)(this._extension,"scmValidation"),this._validateInput}set validateInput(e){if((0,j.H5)(this._extension,"scmValidation"),e&&"function"!=typeof e)throw new Error(`[${this._extension.identifier.value}]: Invalid SCM input box validation function`);this._validateInput=e,this.#e.$setValidationProviderIsEnabled(this._sourceControlHandle,!!e)}get enabled(){return this._enabled}set enabled(e){e=!!e,this._enabled!==e&&(this._enabled=e,this.#e.$setInputBoxEnablement(this._sourceControlHandle,e))}get visible(){return this._visible}set visible(e){e=!!e,this._visible!==e&&(this._visible=e,this.#e.$setInputBoxVisibility(this._sourceControlHandle,e))}get document(){return(0,j.H5)(this._extension,"scmTextDocument"),this.#R.getDocument(this._documentUri)}constructor(e,t,i,n,r){this._extension=e,this._sourceControlHandle=n,this._documentUri=r,this._value="",this._onDidChange=new o.Q5,this._placeholder="",this._enabled=!0,this._visible=!0,this.#R=t,this.#e=i}showValidationMessage(e,t){(0,j.H5)(this._extension,"scmValidation"),this.#e.$showValidationMessage(this._sourceControlHandle,e,t)}$onInputBoxValueChange(e){this.updateValue(e)}updateValue(e){this._value=e,this._onDidChange.fire(e)}}class Zi{static{this._handlePool=0}get disposed(){return this._disposed}get id(){return this._id}get label(){return this._label}set label(e){this._label=e,this._proxy.$updateGroupLabel(this._sourceControlHandle,this.handle,e)}get hideWhenEmpty(){return this._hideWhenEmpty}set hideWhenEmpty(e){this._hideWhenEmpty=e,this._proxy.$updateGroup(this._sourceControlHandle,this.handle,this.features)}get features(){return{hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this._resourceStates]}set resourceStates(e){this._resourceStates=[...e],this._onDidUpdateResourceStates.fire()}constructor(e,t,i,n,r,s,a){this._proxy=e,this._commands=t,this._sourceControlHandle=i,this._id=n,this._label=r,this.multiDiffEditorEnableViewChanges=s,this._extension=a,this._resourceHandlePool=0,this._resourceStates=[],this._resourceStatesMap=new Map,this._resourceStatesCommandsMap=new Map,this._resourceStatesDisposablesMap=new Map,this._onDidUpdateResourceStates=new o.Q5,this.onDidUpdateResourceStates=this._onDidUpdateResourceStates.event,this._disposed=!1,this._onDidDispose=new o.Q5,this.onDidDispose=this._onDidDispose.event,this._handlesSnapshot=[],this._resourceSnapshot=[],this._hideWhenEmpty=void 0,this.handle=Zi._handlePool++}getResourceState(e){return this._resourceStatesMap.get(e)}$executeResourceCommand(e,t){const i=this._resourceStatesCommandsMap.get(e);return i?(0,H.OH)((()=>this._commands.executeCommand(i.command,...i.arguments||[],t))):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const e=[...this._resourceStates].sort(Gi),t=(0,E.XZ)(this._resourceSnapshot,e,Gi).map((e=>{const t=e.toInsert.map((e=>{const t=this._resourceHandlePool++;this._resourceStatesMap.set(t,e);const i=e.resourceUri;let n;if(e.command)if("vscode.open"===e.command.command||"vscode.diff"===e.command.command||"vscode.changes"===e.command.command){const i=new s.SL;n=this._commands.converter.toInternal(e.command,i),this._resourceStatesDisposablesMap.set(t,i)}else this._resourceStatesCommandsMap.set(t,e.command);const r=(0,j.$x)(this._extension,"scmMultiDiffEditor"),o=r?e.multiDiffEditorOriginalUri:void 0,a=r?e.multiFileDiffEditorModifiedUri:void 0,c=Vi(e.decorations);return{rawResource:[t,i,[e.decorations&&Vi(e.decorations.light)||c,e.decorations&&Vi(e.decorations.dark)||c],e.decorations&&e.decorations.tooltip||"",e.decorations&&!!e.decorations.strikeThrough,e.decorations&&!!e.decorations.faded,e.contextValue||"",n,o,a],handle:t}}));return{start:e.start,deleteCount:e.deleteCount,toInsert:t}})),i=t.map((({start:e,deleteCount:t,toInsert:i})=>[e,t,i.map((e=>e.rawResource))])),n=t.reverse();for(const{start:e,deleteCount:t,toInsert:i}of n){const n=i.map((e=>e.handle)),r=this._handlesSnapshot.splice(e,t,...n);for(const e of r)this._resourceStatesMap.delete(e),this._resourceStatesCommandsMap.delete(e),this._resourceStatesDisposablesMap.get(e)?.dispose(),this._resourceStatesDisposablesMap.delete(e)}return this._resourceSnapshot=e,i}dispose(){this._disposed=!0,this._onDidDispose.fire()}}class Xi{static{this._handlePool=0}#e;get id(){return this._id}get label(){return this._label}get rootUri(){return this._rootUri}get inputBox(){return this._inputBox}get count(){return this._count}set count(e){this._count!==e&&(this._count=e,this.#e.$updateSourceControl(this.handle,{count:e}))}get quickDiffProvider(){return this._quickDiffProvider}set quickDiffProvider(e){let t;this._quickDiffProvider=e,(0,j.$x)(this._extension,"quickDiffProvider")&&(t=e?.label),this.#e.$updateSourceControl(this.handle,{hasQuickDiffProvider:!!e,quickDiffLabel:t})}get historyProvider(){return(0,j.H5)(this._extension,"scmHistoryProvider"),this._historyProvider}set historyProvider(e){(0,j.H5)(this._extension,"scmHistoryProvider"),this._historyProvider=e,this._historyProviderDisposable.value=new s.SL,this.#e.$updateSourceControl(this.handle,{hasHistoryProvider:!!e}),e&&this._historyProviderDisposable.value.add(e.onDidChangeCurrentHistoryItemGroup((()=>{this._historyProviderCurrentHistoryItemGroup=e?.currentHistoryItemGroup,this.#e.$onDidChangeHistoryProviderCurrentHistoryItemGroup(this.handle,this._historyProviderCurrentHistoryItemGroup)})))}get commitTemplate(){return this._commitTemplate}set commitTemplate(e){e!==this._commitTemplate&&(this._commitTemplate=e,this.#e.$updateSourceControl(this.handle,{commitTemplate:e}))}get acceptInputCommand(){return this._acceptInputCommand}set acceptInputCommand(e){this._acceptInputDisposables.value=new s.SL,this._acceptInputCommand=e;const t=this._commands.converter.toInternal(e,this._acceptInputDisposables.value);this.#e.$updateSourceControl(this.handle,{acceptInputCommand:t})}get actionButton(){return(0,j.H5)(this._extension,"scmActionButton"),this._actionButton}set actionButton(e){(0,j.H5)(this._extension,"scmActionButton"),this._actionButtonDisposables.value=new s.SL,this._actionButton=e;const t=void 0!==e?{command:this._commands.converter.toInternal(e.command,this._actionButtonDisposables.value),secondaryCommands:e.secondaryCommands?.map((e=>e.map((e=>this._commands.converter.toInternal(e,this._actionButtonDisposables.value))))),description:e.description,enabled:e.enabled}:void 0;this.#e.$updateSourceControl(this.handle,{actionButton:t??null})}get statusBarCommands(){return this._statusBarCommands}set statusBarCommands(e){if(this.logService.trace("ExtHostSourceControl#statusBarCommands",(e??[]).map((e=>e.command)).join(", ")),this._statusBarCommands&&e&&(t=this._statusBarCommands,i=e,(0,E.fS)(t,i,Qi)))return void this.logService.trace("ExtHostSourceControl#statusBarCommands are equal");var t,i;this._statusBarDisposables.value=new s.SL,this._statusBarCommands=e;const n=(e||[]).map((e=>this._commands.converter.toInternal(e,this._statusBarDisposables.value)));this.#e.$updateSourceControl(this.handle,{statusBarCommands:n})}get selected(){return this._selected}constructor(e,t,i,n,r,c,d,u){this._extension=e,this._commands=n,this.logService=r,this._id=c,this._label=d,this._rootUri=u,this._groups=new Map,this._count=void 0,this._quickDiffProvider=void 0,this._historyProviderDisposable=new s.XK,this._commitTemplate=void 0,this._acceptInputDisposables=new s.XK,this._acceptInputCommand=void 0,this._actionButtonDisposables=new s.XK,this._statusBarDisposables=new s.XK,this._statusBarCommands=void 0,this._selected=!1,this._onDidChangeSelection=new o.Q5,this.onDidChangeSelection=this._onDidChangeSelection.event,this.handle=Xi._handlePool++,this.createdResourceGroups=new Map,this.updatedResourceGroups=new Set,this.#e=i;const h=l.ov.from({scheme:a.lg.vscodeSourceControl,path:`${c}/scm${this.handle}/input`,query:u?`rootUri=${encodeURIComponent(u.toString())}`:void 0});this._inputBox=new Ji(e,t,this.#e,this.handle,h),this.#e.$registerSourceControl(this.handle,c,d,u,h)}createResourceGroup(e,t,i){const n=(0,j.$x)(this._extension,"scmMultiDiffEditor")&&!0===i?.multiDiffEditorEnableViewChanges,r=new Zi(this.#e,this._commands,this.handle,e,t,n,this._extension),s=o.ju.once(r.onDidDispose)((()=>this.createdResourceGroups.delete(r)));return this.createdResourceGroups.set(r,s),this.eventuallyAddResourceGroups(),r}eventuallyAddResourceGroups(){const e=[],t=[];for(const[i,n]of this.createdResourceGroups){n.dispose();const r=i.onDidUpdateResourceStates((()=>{this.updatedResourceGroups.add(i),this.eventuallyUpdateResourceStates()}));o.ju.once(i.onDidDispose)((()=>{this.updatedResourceGroups.delete(i),r.dispose(),this._groups.delete(i.handle),this.#e.$unregisterGroup(this.handle,i.handle)})),e.push([i.handle,i.id,i.label,i.features,i.multiDiffEditorEnableViewChanges]);const s=i._takeResourceStateSnapshot();s.length>0&&t.push([i.handle,s]),this._groups.set(i.handle,i)}this.#e.$registerGroups(this.handle,e,t),this.createdResourceGroups.clear()}eventuallyUpdateResourceStates(){const e=[];this.updatedResourceGroups.forEach((t=>{const i=t._takeResourceStateSnapshot();0!==i.length&&e.push([t.handle,i])})),e.length>0&&this.#e.$spliceResourceStates(this.handle,e),this.updatedResourceGroups.clear()}getResourceGroup(e){return this._groups.get(e)}setSelectionState(e){this._selected=e,this._onDidChangeSelection.fire(e)}dispose(){this._acceptInputDisposables.dispose(),this._actionButtonDisposables.dispose(),this._statusBarDisposables.dispose(),this._groups.forEach((e=>e.dispose())),this.#e.$unregisterSourceControl(this.handle)}}Xi.__decorator=(0,O.g)([(0,Ni.Ds)(100)],Xi.prototype,"eventuallyAddResourceGroups",null),Xi.__decorator=(0,O.g)([(0,Ni.Ds)(100)],Xi.prototype,"eventuallyUpdateResourceStates",null);let Yi=class{static{Ui=this}static{this._handlePool=0}get onDidChangeActiveProvider(){return this._onDidChangeActiveProvider.event}constructor(e,t,i,n){this._commands=t,this._extHostDocuments=i,this.logService=n,this._sourceControls=new Map,this._sourceControlsByExtension=new m.C1,this._onDidChangeActiveProvider=new o.Q5,this._proxy=e.getProxy(w.Tr.MainThreadSCM),this._telemetry=e.getProxy(w.Tr.MainThreadTelemetry),t.registerArgumentProcessor({processArgument:e=>{if(e&&e.$mid===se.m.ScmResource){const t=this._sourceControls.get(e.sourceControlHandle);if(!t)return e;const i=t.getResourceGroup(e.groupHandle);return i?i.getResourceState(e.handle):e}if(e&&e.$mid===se.m.ScmResourceGroup){const t=this._sourceControls.get(e.sourceControlHandle);return t?t.getResourceGroup(e.groupHandle):e}if(e&&e.$mid===se.m.ScmProvider){const t=this._sourceControls.get(e.handle);return t||e}return e}})}createSourceControl(e,t,i,n){this.logService.trace("ExtHostSCM#createSourceControl",e.identifier.value,t,i,n),this._telemetry.$publicLog2("api/scm/createSourceControl",{extensionId:e.identifier.value});const r=Ui._handlePool++,o=new Xi(e,this._extHostDocuments,this._proxy,this._commands,this.logService,t,i,n);this._sourceControls.set(r,o);const s=this._sourceControlsByExtension.get(e.identifier)||[];return s.push(o),this._sourceControlsByExtension.set(e.identifier,s),o}getLastInputBox(e){this.logService.trace("ExtHostSCM#getLastInputBox",e.identifier.value);const t=this._sourceControlsByExtension.get(e.identifier),i=t&&t[t.length-1];return i&&i.inputBox}$provideOriginalResource(e,t,i){const n=l.ov.revive(t);this.logService.trace("ExtHostSCM#$provideOriginalResource",e,n.toString());const r=this._sourceControls.get(e);return r&&r.quickDiffProvider&&r.quickDiffProvider.provideOriginalResource?(0,H.OH)((()=>r.quickDiffProvider.provideOriginalResource(n,i))).then((e=>e||null)):Promise.resolve(null)}$onInputBoxValueChange(e,t){this.logService.trace("ExtHostSCM#$onInputBoxValueChange",e);const i=this._sourceControls.get(e);return i?(i.inputBox.$onInputBoxValueChange(t),Promise.resolve(void 0)):Promise.resolve(void 0)}$executeResourceCommand(e,t,i,n){this.logService.trace("ExtHostSCM#$executeResourceCommand",e,t,i);const r=this._sourceControls.get(e);if(!r)return Promise.resolve(void 0);const o=r.getResourceGroup(t);return o?o.$executeResourceCommand(i,n):Promise.resolve(void 0)}$validateInput(e,t,i){this.logService.trace("ExtHostSCM#$validateInput",e);const n=this._sourceControls.get(e);return n&&n.inputBox.validateInput?(0,H.OH)((()=>n.inputBox.validateInput(t,i))).then((e=>{if(!e)return Promise.resolve(void 0);const t=I.W5.fromStrict(e.message);return t?Promise.resolve([t,e.type]):Promise.resolve(void 0)})):Promise.resolve(void 0)}$setSelectedSourceControl(e){return this.logService.trace("ExtHostSCM#$setSelectedSourceControl",e),void 0!==e&&this._sourceControls.get(e)?.setSelectionState(!0),void 0!==this._selectedSourceControlHandle&&this._sourceControls.get(this._selectedSourceControlHandle)?.setSelectionState(!1),this._selectedSourceControlHandle=e,Promise.resolve(void 0)}async $resolveHistoryItemGroupCommonAncestor(e,t,i,n){const r=this._sourceControls.get(e)?.historyProvider;return await(r?.resolveHistoryItemGroupCommonAncestor(t,i,n))??void 0}async $provideHistoryItems(e,t,i,n){const r=this._sourceControls.get(e)?.historyProvider,o=await(r?.provideHistoryItems(t,i,n));return o?.map((e=>ji(e)))??void 0}async $provideHistoryItems2(e,t,i){const n=this._sourceControls.get(e)?.historyProvider,r=await(n?.provideHistoryItems2(t,i));return r?.map((e=>ji(e)))??void 0}async $provideHistoryItemSummary(e,t,i,n){const r=this._sourceControls.get(e)?.historyProvider;if("function"!=typeof r?.provideHistoryItemSummary)return;const o=await r.provideHistoryItemSummary(t,i,n);return o?ji(o):void 0}async $provideHistoryItemChanges(e,t,i,n){const r=this._sourceControls.get(e)?.historyProvider;return await(r?.provideHistoryItemChanges(t,i,n))??void 0}};Yi=Ui=(0,O.g)([(0,O.f)(3,_.V)],Yi);var en=i(28200),tn=i(8685);class nn{static{this.handlePool=0}constructor(e,t){this.uriTransformer=t,this.providers=new Map,this.proxy=e.getProxy(w.Tr.MainThreadShare)}async $provideShare(e,t,i){const n=this.providers.get(e);return await(n?.provideShare({selection:I.e6.to(t.selection),resourceUri:l.ov.revive(t.resourceUri)},i))??void 0}registerShareProvider(e,t){const i=nn.handlePool++;return this.providers.set(i,t),this.proxy.$registerShareProvider(i,I.Lq.from(e,this.uriTransformer),t.id,t.label,t.priority),{dispose:()=>{this.proxy.$unregisterShareProvider(i),this.providers.delete(i)}}}}class rn{static{this.ID_POOL=1}constructor(e){this.providers=new Map,this.sessions=new Map,this.synthesizers=new Map,this.proxy=e.getProxy(w.Tr.MainThreadSpeech)}async $createSpeechToTextSession(e,t,i){const r=this.providers.get(e);if(!r)return;const o=new s.SL,a=new n.AU;this.sessions.set(t,a);const c=await r.provideSpeechToTextSession(a.token,i?{language:i}:void 0);c&&(o.add(c.onDidChange((e=>{a.token.isCancellationRequested||this.proxy.$emitSpeechToTextEvent(t,e)}))),o.add(a.token.onCancellationRequested((()=>o.dispose()))))}async $cancelSpeechToTextSession(e){this.sessions.get(e)?.dispose(!0),this.sessions.delete(e)}async $createTextToSpeechSession(e,t,i){const r=this.providers.get(e);if(!r)return;const o=new s.SL,a=new n.AU;this.sessions.set(t,a);const c=await r.provideTextToSpeechSession(a.token,i?{language:i}:void 0);c&&(this.synthesizers.set(t,c),o.add(c.onDidChange((e=>{a.token.isCancellationRequested||this.proxy.$emitTextToSpeechEvent(t,e)}))),o.add(a.token.onCancellationRequested((()=>o.dispose()))))}async $synthesizeSpeech(e,t){this.synthesizers.get(e)?.synthesize(t)}async $cancelTextToSpeechSession(e){this.sessions.get(e)?.dispose(!0),this.sessions.delete(e),this.synthesizers.delete(e)}async $createKeywordRecognitionSession(e,t){const i=this.providers.get(e);if(!i)return;const r=new s.SL,o=new n.AU;this.sessions.set(t,o);const a=await i.provideKeywordRecognitionSession(o.token);a&&(r.add(a.onDidChange((e=>{o.token.isCancellationRequested||this.proxy.$emitKeywordRecognitionEvent(t,e)}))),r.add(o.token.onCancellationRequested((()=>r.dispose()))))}async $cancelKeywordRecognitionSession(e){this.sessions.get(e)?.dispose(!0),this.sessions.delete(e)}registerProvider(e,t,i){const n=rn.ID_POOL++;return this.providers.set(n,i),this.proxy.$registerProvider(n,t,{extension:e,displayName:e.value}),(0,s.OF)((()=>{this.proxy.$unregisterProvider(n),this.providers.delete(n)}))}}const on="vs/workbench/api/common/extHostStatusBar";class sn{static{this.ID_GEN=0}static{this.ALLOWED_BACKGROUND_COLORS=new Map([["statusBarItem.errorBackground",new x.tPk("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new x.tPk("statusBarItem.warningForeground")]])}#e;#L;constructor(e,t,i,n,r,o=x.MIn.Left,a){if(this._disposed=!1,this._text="",this._staleCommandRegistrations=new s.SL,this.#e=e,this.#L=t,r&&n){this._entryId=(0,x.yHy)(n.identifier,r);const e=i.get(this._entryId);e&&(o=e.alignLeft?x.MIn.Left:x.MIn.Right,a=e.priority,this._visible=!0,this.name=e.name,this.text=e.text,this.tooltip=e.tooltip,this.command=e.command,this.accessibilityInformation=e.accessibilityInformation)}else this._entryId=String(sn.ID_GEN++);this._extension=n,this._id=r,this._alignment=o,this._priority=this.validatePriority(a)}validatePriority(e){if((0,V.hj)(e))return e===Number.POSITIVE_INFINITY?Number.MAX_VALUE:e===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:e}get id(){return this._id??this._extension.identifier.value}get alignment(){return this._alignment}get priority(){return this._priority}get text(){return this._text}get name(){return this._name}get tooltip(){return this._tooltip}get color(){return this._color}get backgroundColor(){return this._backgroundColor}get command(){return this._command?.fromApi}get accessibilityInformation(){return this._accessibilityInformation}set text(e){this._text=e,this.update()}set name(e){this._name=e,this.update()}set tooltip(e){this._tooltip=e,this.update()}set color(e){this._color=e,this.update()}set backgroundColor(e){e&&!sn.ALLOWED_BACKGROUND_COLORS.has(e.id)&&(e=void 0),this._backgroundColor=e,this.update()}set command(e){this._command?.fromApi!==e&&(this._latestCommandRegistration&&this._staleCommandRegistrations.add(this._latestCommandRegistration),this._latestCommandRegistration=new s.SL,this._command="string"==typeof e?{fromApi:e,internal:this.#L.toInternal({title:"",command:e},this._latestCommandRegistration)}:e?{fromApi:e,internal:this.#L.toInternal(e,this._latestCommandRegistration)}:void 0,this.update())}set accessibilityInformation(e){this._accessibilityInformation=e,this.update()}show(){this._visible=!0,this.update()}hide(){clearTimeout(this._timeoutHandle),this._visible=!1,this.#e.$disposeEntry(this._entryId)}update(){!this._disposed&&this._visible&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=setTimeout((()=>{let e,t;this._timeoutHandle=void 0,e=this._extension?this._id?`${this._extension.identifier.value}.${this._id}`:this._extension.identifier.value:this._id,t=this._name?this._name:(0,Pe.C$)(on,0,"{0} (Extension)",this._extension.displayName||this._extension.name);let i=this._color;this._backgroundColor&&(i=sn.ALLOWED_BACKGROUND_COLORS.get(this._backgroundColor.id));const n=I.W5.fromStrict(this._tooltip);this.#e.$setEntry(this._entryId,e,this._extension?.identifier.value,t,this._text,n,this._command?.internal,i,this._backgroundColor,this._alignment===x.MIn.Left,this._priority,this._accessibilityInformation),this._staleCommandRegistrations.clear()}),0))}dispose(){this.hide(),this._disposed=!0}}class an{constructor(e){this._messages=[],this._item=e.createStatusBarEntry(void 0,"status.extensionMessage",x.MIn.Left,Number.MIN_VALUE),this._item.name=(0,Pe.C$)(on,1,"Extension Status")}dispose(){this._messages.length=0,this._item.dispose()}setMessage(e){const t={message:e};return this._messages.unshift(t),this._update(),new x.JTr((()=>{const e=this._messages.indexOf(t);e>=0&&(this._messages.splice(e,1),this._update())}))}_update(){this._messages.length>0?(this._item.text=this._messages[0].message,this._item.show()):this._item.hide()}}class cn{constructor(e,t){this._existingItems=new Map,this._proxy=e.getProxy(w.Tr.MainThreadStatusBar),this._commands=t,this._statusMessage=new an(this)}$acceptStaticEntries(e){for(const t of e)this._existingItems.set(t.entryId,t)}createStatusBarEntry(e,t,i,n){return new sn(this._proxy,this._commands,this._existingItems,e,t,i,n)}setStatusBarMessage(e,t){const i=this._statusMessage.setMessage(e);let n;return"number"==typeof t?n=setTimeout((()=>i.dispose()),t):void 0!==t&&t.then((()=>i.dispose()),(()=>i.dispose())),new x.JTr((()=>{i.dispose(),clearTimeout(n)}))}}var ln=i(34142),dn=i(3621),un=i(87958),hn=i(3560),pn=i(82209),mn=i(60192),gn=i(55870),fn=i(45107);class _n extends s.JT{constructor(e,t){super(),this._extHostDocumentsAndEditors=t,this._onDidChangeTextEditorSelection=new o.Q5,this._onDidChangeTextEditorOptions=new o.Q5,this._onDidChangeTextEditorVisibleRanges=new o.Q5,this._onDidChangeTextEditorViewColumn=new o.Q5,this._onDidChangeActiveTextEditor=new o.Q5,this._onDidChangeVisibleTextEditors=new o.Q5,this.onDidChangeTextEditorSelection=this._onDidChangeTextEditorSelection.event,this.onDidChangeTextEditorOptions=this._onDidChangeTextEditorOptions.event,this.onDidChangeTextEditorVisibleRanges=this._onDidChangeTextEditorVisibleRanges.event,this.onDidChangeTextEditorViewColumn=this._onDidChangeTextEditorViewColumn.event,this.onDidChangeActiveTextEditor=this._onDidChangeActiveTextEditor.event,this.onDidChangeVisibleTextEditors=this._onDidChangeVisibleTextEditors.event,this._proxy=e.getProxy(w.Tr.MainThreadTextEditors),this._register(this._extHostDocumentsAndEditors.onDidChangeVisibleTextEditors((e=>this._onDidChangeVisibleTextEditors.fire(e)))),this._register(this._extHostDocumentsAndEditors.onDidChangeActiveTextEditor((e=>this._onDidChangeActiveTextEditor.fire(e))))}getActiveTextEditor(){return this._extHostDocumentsAndEditors.activeEditor()}getVisibleTextEditors(e){const t=this._extHostDocumentsAndEditors.allEditors();return e?t:t.map((e=>e.value))}async showTextDocument(e,t,i){let n;n="number"==typeof t?{position:I.eI.from(t),preserveFocus:i}:"object"==typeof t?{position:I.eI.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:"object"==typeof t.selection?I.e6.from(t.selection):void 0,pinned:"boolean"==typeof t.preview?!t.preview:void 0}:{preserveFocus:!1};const r=await this._proxy.$tryShowTextDocument(e.uri,n),o=r&&this._extHostDocumentsAndEditors.getEditor(r);if(o)return o.value;throw r?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new fn.TE(this._proxy,e,t).value}$acceptEditorPropertiesChanged(e,t){const i=this._extHostDocumentsAndEditors.getEditor(e);if(!i)throw new Error("unknown text editor");if(t.options&&i._acceptOptions(t.options),t.selections){const e=t.selections.selections.map(I.Y1.to);i._acceptSelections(e)}if(t.visibleRanges){const e=(0,E.kX)(t.visibleRanges.map(I.e6.to));i._acceptVisibleRanges(e)}if(t.options&&this._onDidChangeTextEditorOptions.fire({textEditor:i.value,options:{...t.options,lineNumbers:I.lP.to(t.options.lineNumbers)}}),t.selections){const e=x.dWA.fromValue(t.selections.source),n=t.selections.selections.map(I.Y1.to);this._onDidChangeTextEditorSelection.fire({textEditor:i.value,selections:n,kind:e})}if(t.visibleRanges){const e=(0,E.kX)(t.visibleRanges.map(I.e6.to));this._onDidChangeTextEditorVisibleRanges.fire({textEditor:i.value,visibleRanges:e})}}$acceptEditorPositionData(e){for(const t in e){const i=this._extHostDocumentsAndEditors.getEditor(t);if(!i)throw new Error("Unknown text editor");const n=I.eI.to(e[t]);i.value.viewColumn!==n&&(i._acceptViewColumn(n),this._onDidChangeTextEditorViewColumn.fire({textEditor:i.value,viewColumn:n}))}}getDiffInformation(e){return Promise.resolve(this._proxy.$getDiffInformation(e))}}let vn=class{constructor(e){this._actual=new x.UPf(x.bZY.Dark),this._onDidChangeActiveColorTheme=new o.Q5}get activeColorTheme(){return this._actual}$onColorThemeChange(e){let t;switch(e){case"light":t=x.bZY.Light;break;case"hcDark":t=x.bZY.HighContrast;break;case"hcLight":t=x.bZY.HighContrastLight;break;default:t=x.bZY.Dark}this._actual=new x.UPf(t),this._onDidChangeActiveColorTheme.fire(this._actual)}get onDidChangeActiveColorTheme(){return this._onDidChangeActiveColorTheme.event}};vn=(0,O.g)([(0,O.f)(0,F.O)],vn);var bn=i(28019);class yn{constructor(e,t){this._providers=new Map,this._itemsBySourceAndUriMap=new Map,this._proxy=e.getProxy(w.Tr.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(e,t)=>{if(!e||e.$mid!==se.m.TimelineActionContext)return e;if(this._providers.get(e.source)&&m.kP.equals(t,this._providers.get(e.source)?.extension)){const t=void 0===e.uri?void 0:l.ov.revive(e.uri);return this._itemsBySourceAndUriMap.get(e.source)?.get(wn(t))?.get(e.handle)}}})}async $getTimeline(e,t,i,n){const r=this._providers.get(e);return r?.provider.provideTimeline(l.ov.revive(t),i,n)}registerTimelineProvider(e,t,i,n){const r=new s.SL,o=this.convertTimelineItem(t.id,n,r).bind(this);let a;t.onDidChange&&(a=t.onDidChange((e=>this._proxy.$emitTimelineChangeEvent({uri:void 0,reset:!0,...e,id:t.id})),this));const c=this._itemsBySourceAndUriMap;return this.registerTimelineProviderCore({...t,scheme:e,onDidChange:void 0,async provideTimeline(e,i,n){i?.resetCache&&(r.clear(),c.get(t.id)?.clear());const s=await t.provideTimeline(e,i,n);if(null==s)return;const a=o(e,i);return{...s,source:t.id,items:s.items.map(a)}},dispose(){for(const e of c.values())e.get(t.id)?.clear();a?.dispose(),r.dispose()}},i)}convertTimelineItem(e,t,i){return(n,r)=>{let o;if(r?.cacheResults){let t=this._itemsBySourceAndUriMap.get(e);void 0===t&&(t=new Map,this._itemsBySourceAndUriMap.set(e,t));const i=wn(n);o=t.get(i),void 0===o&&(o=new Map,t.set(i,o))}return n=>{const{iconPath:r,...s}=n,a=`${e}|${n.id??n.timestamp}`;let c,d,u,h;return o?.set(a,n),n.iconPath&&(r instanceof x.kS8?u={id:r.id,color:r.color}:l.ov.isUri(r)?(c=r,d=r):({light:c,dark:d}=r)),x.W5C.isMarkdownString(s.tooltip)?h=I.W5.from(s.tooltip):(0,V.HD)(s.tooltip)?h=s.tooltip:x.W5C.isMarkdownString(s.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),h=I.W5.from(s.detail)):(0,V.HD)(s.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),h=s.detail),{...s,id:s.id??void 0,handle:a,source:e,command:n.command?t.toInternal(n.command,i):void 0,icon:c,iconDark:d,themeIcon:u,tooltip:h,accessibilityInformation:n.accessibilityInformation}}}}registerTimelineProviderCore(e,t){if(this._providers.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this._proxy.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this._providers.set(e.id,{provider:e,extension:t}),(0,s.OF)((()=>{for(const t of this._itemsBySourceAndUriMap.values())t.get(e.id)?.clear();this._providers.delete(e.id),this._proxy.$unregisterTimelineProvider(e.id),e.dispose()}))}}function wn(e){return e?.toString()}var xn=i(89623),Cn=i(60807);function En(e,t){if((0,V.HD)(e))return{label:e};if(e&&"object"==typeof e&&"string"==typeof e.label){let t;return Array.isArray(e.highlights)&&(t=e.highlights.filter((e=>2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])),t=t.length?t:void 0),{label:e.label,highlights:t}}}class Sn extends s.JT{constructor(e,t,i){function n(e){return e&&e.$treeViewId&&(e.$treeItemHandle||e.$selectedTreeItems||e.$focusedTreeItem)}super(),this._proxy=e,this.commands=t,this.logService=i,this.treeViews=new Map,this.treeDragAndDropService=new Cn.Y,t.registerArgumentProcessor({processArgument:e=>n(e)?this.convertArgument(e):Array.isArray(e)&&e.length>0?e.map((e=>n(e)?this.convertArgument(e):e)):e})}registerTreeDataProvider(e,t,i){const n=this.createTreeView(e,{treeDataProvider:t},i);return{dispose:()=>n.dispose()}}createTreeView(e,t,i){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const n=t.dragAndDropController?.dropMimeTypes??[],r=t.dragAndDropController?.dragMimeTypes??[],o=!!t.dragAndDropController?.handleDrag,s=!!t.dragAndDropController?.handleDrop,a=this.createExtHostTreeView(e,t,i),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:n,dragMimeTypes:r,hasHandleDrag:o,hasHandleDrop:s,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this._proxy.$registerTreeViewDataProvider(e,c),d={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return(0,j.H5)(i,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return(0,j.H5)(i,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(e){(0,Je.Fr)(e)&&(0,j.H5)(i,"treeViewMarkdownMessage"),a.message=e},get title(){return a.title},set title(e){a.title=e},get description(){return a.description},set description(e){a.description=e},get badge(){return a.badge},set badge(e){void 0!==e&&x.z0r.isViewBadge(e)?a.badge={value:Math.floor(Math.abs(e.value)),tooltip:e.tooltip}:void 0===e&&(a.badge=void 0)},reveal:(e,t)=>a.reveal(e,t),dispose:async()=>{await l,this.treeViews.delete(e),a.dispose()}};return this._register(d),d}$getChildren(e,t){const i=this.treeViews.get(e);return i?i.getChildren(t):Promise.reject(new xn.Ki(e))}async $handleDrop(e,t,i,n,r,o,s,a){const c=this.treeViews.get(e);if(!c)return Promise.reject(new xn.Ki(e));const l=I.tn.toDataTransfer(i,(async i=>(await this._proxy.$resolveDropFileData(e,t,i)).buffer));return s===e&&a&&await this.addAdditionalTransferItems(l,c,a,r,o),c.onDrop(l,n,r)}async addAdditionalTransferItems(e,t,i,n,r){const o=this.treeDragAndDropService.removeDragOperationTransfer(r);if(o)(await o)?.forEach(((t,i)=>{t&&e.set(i,t)}));else if(r&&t.handleDrag){const o=t.handleDrag(i,e,n);this.treeDragAndDropService.addDragOperationTransfer(r,o),await o}return e}async $handleDrag(e,t,i,n){const r=this.treeViews.get(e);if(!r)return Promise.reject(new xn.Ki(e));const o=await this.addAdditionalTransferItems(new x.tnH,r,t,n,i);return o&&!n.isCancellationRequested?I.tn.from(o):void 0}async $hasResolve(e){const t=this.treeViews.get(e);if(!t)throw new xn.Ki(e);return t.hasResolve}$resolve(e,t,i){const n=this.treeViews.get(e);if(!n)throw new xn.Ki(e);return n.resolveTreeItem(t,i)}$setExpanded(e,t,i){const n=this.treeViews.get(e);if(!n)throw new xn.Ki(e);n.setExpanded(t,i)}$setSelectionAndFocus(e,t,i){const n=this.treeViews.get(e);if(!n)throw new xn.Ki(e);n.setSelectionAndFocus(t,i)}$setVisible(e,t){const i=this.treeViews.get(e);if(!i){if(!t)return;throw new xn.Ki(e)}i.setVisible(t)}$changeCheckboxState(e,t){const i=this.treeViews.get(e);if(!i)throw new xn.Ki(e);i.setCheckboxState(t)}createExtHostTreeView(e,t,i){const n=this._register(new Dn(e,t,this._proxy,this.commands.converter,this.logService,i));return this.treeViews.set(e,n),n}convertArgument(e){const t=this.treeViews.get(e.$treeViewId);return t&&"$treeItemHandle"in e?t.getExtensionElement(e.$treeItemHandle):t&&"$focusedTreeItem"in e&&e.$focusedTreeItem?t.focusedElement:null}}class Dn extends s.JT{static{this.LABEL_HANDLE_PREFIX="0"}static{this.ID_HANDLE_PREFIX="1"}get visible(){return this._visible}get selectedElements(){return this._selectedHandles.map((e=>this.getExtensionElement(e))).filter((e=>!(0,V.Jp)(e)))}get focusedElement(){return this._focusedHandle?this.getExtensionElement(this._focusedHandle):void 0}constructor(e,t,i,r,s,a){if(super(),this.viewId=e,this.proxy=i,this.commands=r,this.logService=s,this.extension=a,this.roots=void 0,this.elements=new Map,this.nodes=new Map,this._visible=!1,this._selectedHandles=[],this._focusedHandle=void 0,this._onDidExpandElement=this._register(new o.Q5),this.onDidExpandElement=this._onDidExpandElement.event,this._onDidCollapseElement=this._register(new o.Q5),this.onDidCollapseElement=this._onDidCollapseElement.event,this._onDidChangeSelection=this._register(new o.Q5),this.onDidChangeSelection=this._onDidChangeSelection.event,this._onDidChangeActiveItem=this._register(new o.Q5),this.onDidChangeActiveItem=this._onDidChangeActiveItem.event,this._onDidChangeVisibility=this._register(new o.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._onDidChangeCheckboxState=this._register(new o.Q5),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this._onDidChangeData=this._register(new o.Q5),this.refreshPromise=Promise.resolve(),this.refreshQueue=Promise.resolve(),this._message="",this._title="",this._refreshCancellationSource=new n.AU,a.contributes&&a.contributes.views)for(const t in a.contributes.views)for(const i of a.contributes.views[t])i.id===e&&(this._title=i.name);let c,l;this.dataProvider=t.treeDataProvider,this.dndController=t.dragAndDropController,this.dataProvider.onDidChangeTreeData&&this._register(this.dataProvider.onDidChangeTreeData((e=>{Array.isArray(e)&&0===e.length||this._onDidChangeData.fire({message:!1,element:e})})));const d=o.ju.debounce(this._onDidChangeData.event,((e,t)=>(e||(e={message:!1,elements:[]}),!1!==t.element&&(c||(c=new Promise((e=>l=e)),this.refreshPromise=this.refreshPromise.then((()=>c))),Array.isArray(t.element)?e.elements.push(...t.element):e.elements.push(t.element)),t.message&&(e.message=!0),e)),200,!0);this._register(d((({message:e,elements:t})=>{t.length&&(this.refreshQueue=this.refreshQueue.then((()=>{const e=l;return c=null,this.refresh(t).then((()=>e()))}))),e&&this.proxy.$setMessage(this.viewId,I.W5.fromStrict(this._message)??"")})))}async getChildren(e){const t=e?this.getExtensionElement(e):void 0;if(e&&!t)return this.logService.error(`No tree item with id '${e}' found.`),Promise.resolve([]);let i=this.getChildrenNodes(e);return i||(i=await this.fetchChildrenNodes(t)),i?i.map((e=>e.item)):void 0}getExtensionElement(e){return this.elements.get(e)}reveal(e,t){t=t||{select:!0,focus:!1};const i=!!(0,V.Jp)(t.select)||t.select,n=!(0,V.Jp)(t.focus)&&t.focus,r=!(0,V.Jp)(t.expand)&&t.expand;return"function"!=typeof this.dataProvider.getParent?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):e?this.refreshPromise.then((()=>this.resolveUnknownParentChain(e))).then((t=>this.resolveTreeNode(e,t[t.length-1]).then((e=>this.proxy.$reveal(this.viewId,{item:e.item,parentChain:t.map((e=>e.item))},{select:i,focus:n,expand:r})))),(e=>this.logService.error(e))):this.proxy.$reveal(this.viewId,void 0,{select:i,focus:n,expand:r})}get message(){return this._message}set message(e){this._message=e,this._onDidChangeData.fire({message:!0,element:!1})}get title(){return this._title}set title(e){this._title=e,this.proxy.$setTitle(this.viewId,e,this._description)}get description(){return this._description}set description(e){this._description=e,this.proxy.$setTitle(this.viewId,this._title,e)}get badge(){return this._badge}set badge(e){this._badge?.value===e?.value&&this._badge?.tooltip===e?.tooltip||(this._badge=I.z0.from(e),this.proxy.$setBadge(this.viewId,e))}setExpanded(e,t){const i=this.getExtensionElement(e);i&&(t?this._onDidExpandElement.fire(Object.freeze({element:i})):this._onDidCollapseElement.fire(Object.freeze({element:i})))}setSelectionAndFocus(e,t){const i=!(0,E.fS)(this._selectedHandles,e);this._selectedHandles=e;const n=this._focusedHandle!==t;this._focusedHandle=t,i&&this._onDidChangeSelection.fire(Object.freeze({selection:this.selectedElements})),n&&this._onDidChangeActiveItem.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(e){e!==this._visible&&(this._visible=e,this._onDidChangeVisibility.fire(Object.freeze({visible:this._visible})))}async setCheckboxState(e){const t=(await Promise.all(e.map((async e=>{const t=this.getExtensionElement(e.treeItemHandle);return t?{extensionItem:t,treeItem:await this.dataProvider.getTreeItem(t),newState:e.newState?x.KHd.Checked:x.KHd.Unchecked}:Promise.resolve(void 0)})))).filter((e=>void 0!==e));t.forEach((e=>{e.treeItem.checkboxState=e.newState?x.KHd.Checked:x.KHd.Unchecked})),this._onDidChangeCheckboxState.fire({items:t.map((e=>[e.extensionItem,e.newState]))})}async handleDrag(e,t,i){const n=[];for(const t of e){const e=this.getExtensionElement(t);e&&n.push(e)}if(this.dndController?.handleDrag&&0!==n.length)return await this.dndController.handleDrag(n,t,i),t}get hasHandleDrag(){return!!this.dndController?.handleDrag}async onDrop(e,t,i){const n=t?this.getExtensionElement(t):void 0;if((n||!t)&&this.dndController?.handleDrop)return(0,H.OH)((()=>this.dndController?.handleDrop?this.dndController.handleDrop(n,e,i):void 0))}get hasResolve(){return!!this.dataProvider.resolveTreeItem}async resolveTreeItem(e,t){if(!this.dataProvider.resolveTreeItem)return;const i=this.elements.get(e);if(i){const e=this.nodes.get(i);if(e){const n=await this.dataProvider.resolveTreeItem(e.extensionItem,i,t)??e.extensionItem;return this.validateTreeItem(n),e.item.tooltip=this.getTooltip(n.tooltip),e.item.command=this.getCommand(e.disposableStore,n.command),e.item}}}resolveUnknownParentChain(e){return this.resolveParent(e).then((e=>e?this.resolveUnknownParentChain(e).then((t=>this.resolveTreeNode(e,t[t.length-1]).then((e=>(t.push(e),t))))):Promise.resolve([])))}resolveParent(e){const t=this.nodes.get(e);return t?Promise.resolve(t.parent?this.elements.get(t.parent.item.handle):void 0):(0,H.OH)((()=>this.dataProvider.getParent(e)))}resolveTreeNode(e,t){const i=this.nodes.get(e);return i?Promise.resolve(i):(0,H.OH)((()=>this.dataProvider.getTreeItem(e))).then((i=>this.createHandle(e,i,t,!0))).then((e=>this.getChildren(t?t.item.handle:void 0).then((()=>{const t=this.getExtensionElement(e);if(t){const e=this.nodes.get(t);if(e)return Promise.resolve(e)}throw new Error(`Cannot resolve tree item for element ${e} from extension ${this.extension.identifier.value}`)}))))}getChildrenNodes(e){if(e){let t;if("string"==typeof e){const i=this.getExtensionElement(e);t=i?this.nodes.get(i):void 0}else t=e;return t&&t.children||void 0}return this.roots}async fetchChildrenNodes(e){this.clearChildren(e);const t=new n.AU(this._refreshCancellationSource.token);try{const i=e?this.nodes.get(e):void 0,n=await this.dataProvider.getChildren(e);if(t.token.isCancellationRequested)return;const r=(0,E.kX)(n||[]),o=await Promise.all((0,E.kX)(r).map((e=>this.dataProvider.getTreeItem(e))));if(t.token.isCancellationRequested)return;const s=o.map(((e,t)=>e?this.createAndRegisterTreeNode(r[t],e,i):null));return(0,E.kX)(s)}finally{t.dispose()}}refresh(e){if(e.some((e=>!e)))return this._refreshCancellationSource.dispose(!0),this._refreshCancellationSource=new n.AU,this.clearAll(),this.proxy.$refresh(this.viewId);{const t=this.getHandlesToRefresh(e);if(t.length)return this.refreshHandles(t)}return Promise.resolve(void 0)}getHandlesToRefresh(e){const t=new Set,i=e.map((e=>this.nodes.get(e)));for(const e of i)if(e&&!t.has(e.item.handle)){let n=e;for(;n&&n.parent&&-1===i.findIndex((e=>n&&n.parent&&e&&e.item.handle===n.parent.item.handle));){const e=this.elements.get(n.parent.item.handle);n=e?this.nodes.get(e):void 0}n&&!n.parent&&t.add(e.item.handle)}const n=[];return t.forEach((e=>{const i=this.elements.get(e);if(i){const r=this.nodes.get(i);!r||r.parent&&t.has(r.parent.item.handle)||n.push(e)}})),n}refreshHandles(e){const t={};return Promise.all(e.map((e=>this.refreshNode(e).then((i=>{i&&(t[e]=i.item)}))))).then((()=>Object.keys(t).length?this.proxy.$refresh(this.viewId,t):void 0))}refreshNode(e){const t=this.getExtensionElement(e);if(t){const e=this.nodes.get(t);if(e)return this.clearChildren(t),(0,H.OH)((()=>this.dataProvider.getTreeItem(t))).then((i=>{if(i){const n=this.createTreeNode(t,i,e.parent);return this.updateNodeCache(t,n,e,e.parent),e.dispose(),n}return null}))}return Promise.resolve(null)}createAndRegisterTreeNode(e,t,i){const n=this.createTreeNode(e,t,i);if(t.id&&this.elements.has(n.item.handle))throw new Error((0,Pe.C$)("vs/workbench/api/common/extHostTreeViews",0,"Element with id {0} is already registered",t.id));return this.addNodeToCache(e,n),this.addNodeToParentCache(n,i),n}getTooltip(e){return x.W5C.isMarkdownString(e)?I.W5.from(e):e}getCommand(e,t){return t?{...this.commands.toInternal(t,e),originalId:t.command}:void 0}getCheckbox(e){if(void 0===e.checkboxState)return;let t,i,n;return"number"==typeof e.checkboxState?t=e.checkboxState:(t=e.checkboxState.state,i=e.checkboxState.tooltip,n=e.checkboxState.accessibilityInformation),{isChecked:t===x.KHd.Checked,tooltip:i,accessibilityInformation:n}}validateTreeItem(e){if(!x.kfG.isTreeItem(e,this.extension))throw new Error(`Extension ${this.extension.identifier.value} has provided an invalid tree item.`)}createTreeNode(e,t,i){this.validateTreeItem(t);const n=this._register(new s.SL),r=this.createHandle(e,t,i),o=this.getLightIconPath(t);return{item:{handle:r,parentHandle:i?i.item.handle:void 0,label:En(t.label),description:t.description,resourceUri:t.resourceUri,tooltip:this.getTooltip(t.tooltip),command:this.getCommand(n,t.command),contextValue:t.contextValue,icon:o,iconDark:this.getDarkIconPath(t)||o,themeIcon:this.getThemeIcon(t),collapsibleState:(0,V.Jp)(t.collapsibleState)?x.oCf.None:t.collapsibleState,accessibilityInformation:t.accessibilityInformation,checkbox:this.getCheckbox(t)},extensionItem:t,parent:i,children:void 0,disposableStore:n,dispose(){n.dispose()}}}getThemeIcon(e){return e.iconPath instanceof x.kS8?e.iconPath:void 0}createHandle(e,{id:t,label:i,resourceUri:n},r,o){if(t)return`${Dn.ID_HANDLE_PREFIX}/${t}`;const s=En(i),a=r?r.item.handle:Dn.LABEL_HANDLE_PREFIX;let c=s?s.label:n?(0,ue.EZ)(n):"";c=-1!==c.indexOf("/")?c.replace("/","//"):c;const l=this.nodes.has(e)?this.nodes.get(e).item.handle:void 0,d=this.getChildrenNodes(r)||[];let u,h=0;do{if(u=`${a}/${h}:${c}`,o||!this.elements.has(u)||l===u)break;h++}while(h<=d.length);return u}getLightIconPath(e){if(e.iconPath&&!(e.iconPath instanceof x.kS8))return"string"==typeof e.iconPath||l.ov.isUri(e.iconPath)?this.getIconPath(e.iconPath):this.getIconPath(e.iconPath.light)}getDarkIconPath(e){if(e.iconPath&&!(e.iconPath instanceof x.kS8)&&e.iconPath.dark)return this.getIconPath(e.iconPath.dark)}getIconPath(e){return l.ov.isUri(e)?e:l.ov.file(e)}addNodeToCache(e,t){this.elements.set(t.item.handle,e),this.nodes.set(e,t)}updateNodeCache(e,t,i,n){this.elements.delete(t.item.handle),this.nodes.delete(e),t.item.handle!==i.item.handle&&this.elements.delete(i.item.handle),this.addNodeToCache(e,t);const r=this.getChildrenNodes(n)||[],o=r.filter((e=>e.item.handle===i.item.handle))[0];o&&r.splice(r.indexOf(o),1,t)}addNodeToParentCache(e,t){t?(t.children||(t.children=[]),t.children.push(e)):(this.roots||(this.roots=[]),this.roots.push(e))}clearChildren(e){if(e){const t=this.nodes.get(e);if(t){if(t.children)for(const e of t.children){const t=this.elements.get(e.item.handle);t&&this.clear(t)}t.children=void 0}}else this.clearAll()}clear(e){const t=this.nodes.get(e);if(t){if(t.children)for(const e of t.children){const t=this.elements.get(e.item.handle);t&&this.clear(t)}this.nodes.delete(e),this.elements.delete(t.item.handle),t.dispose()}}clearAll(){this.roots=void 0,this.elements.clear(),this.nodes.forEach((e=>e.dispose())),this.nodes.clear()}dispose(){super.dispose(),this._refreshCancellationSource.dispose(),this.clearAll(),this.proxy.$disposeTree(this.viewId)}}var Tn=i(80974);class kn{static{this.supportedSchemes=new Set([a.lg.http,a.lg.https])}constructor(e){this._openers=new Map,this._proxy=e.getProxy(w.Tr.MainThreadUriOpeners)}registerExternalUriOpener(e,t,i,n){if(this._openers.has(t))throw new Error(`Opener with id '${t}' already registered`);const r=n.schemes.find((e=>!kn.supportedSchemes.has(e)));if(r)throw new Error(`Scheme '${r}' is not supported. Only http and https are currently supported.`);return this._openers.set(t,i),this._proxy.$registerUriOpener(t,n.schemes,e,n.label),(0,s.OF)((()=>{this._openers.delete(t),this._proxy.$unregisterUriOpener(t)}))}async $canOpenUri(e,t,i){const n=this._openers.get(e);if(!n)throw new Error(`Unknown opener with id: ${e}`);const r=l.ov.revive(t);return n.canOpenExternalUri(r,i)}async $openUri(e,t,i){const n=this._openers.get(e);if(!n)throw new Error(`Unknown opener id: '${e}'`);return n.openExternalUri(l.ov.revive(t.resolvedUri),{sourceUri:l.ov.revive(t.sourceUri)},i)}}var In=i(76221);class Pn{static{this.HandlePool=0}constructor(e){this.handles=new m.o$,this.handlers=new Map,this._proxy=e.getProxy(w.Tr.MainThreadUrls)}registerUriHandler(e,t){const i=e.identifier;if(this.handles.has(i))throw new Error(`Protocol handler already registered for extension ${i}`);const n=Pn.HandlePool++;return this.handles.add(i),this.handlers.set(n,t),this._proxy.$registerUriHandler(n,i,e.displayName||e.name),(0,s.OF)((()=>{this.handles.delete(i),this.handlers.delete(n),this._proxy.$unregisterUriHandler(n)}))}$handleExternalUri(e,t){const i=this.handlers.get(e);if(!i)return Promise.resolve(void 0);try{i.handleUri(l.ov.revive(t))}catch(e){(0,r.dL)(e)}return Promise.resolve(void 0)}async createAppUri(e){return l.ov.revive(await this._proxy.$createAppUri(e))}}var An=i(92004);class Rn extends s.JT{#v;#e;#N;#$;#E;#O;#F;#M;#U;#H;#S;#z;#B;constructor(e,t,i,n){super(),this.#M=void 0,this.#U=!0,this.#S=!1,this.#z=this._register(new o.Q5),this.onDidDispose=this.#z.event,this.#B=this._register(new o.Q5),this.onDidChangeViewState=this.#B.event,this.#v=e,this.#e=t,this.#$=i,this.#N=n.viewType,this.#E=n.panelOptions,this.#M=n.viewColumn,this.#O=n.title,this.#H=n.active}dispose(){this.#S||(this.#S=!0,this.#z.fire(),this.#e.$disposeWebview(this.#v),this.#$.dispose(),super.dispose())}get webview(){return this.assertNotDisposed(),this.#$}get viewType(){return this.assertNotDisposed(),this.#N}get title(){return this.assertNotDisposed(),this.#O}set title(e){this.assertNotDisposed(),this.#O!==e&&(this.#O=e,this.#e.$setTitle(this.#v,e))}get iconPath(){return this.assertNotDisposed(),this.#F}set iconPath(e){this.assertNotDisposed(),this.#F!==e&&(this.#F=e,this.#e.$setIconPath(this.#v,l.ov.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#E}get viewColumn(){if(this.assertNotDisposed(),!("number"==typeof this.#M&&this.#M<0))return this.#M}get active(){return this.assertNotDisposed(),this.#H}get visible(){return this.assertNotDisposed(),this.#U}_updateViewState(e){this.#S||this.active===e.active&&this.visible===e.visible&&this.viewColumn===e.viewColumn||(this.#H=e.active,this.#U=e.visible,this.#M=e.viewColumn,this.#B.fire({webviewPanel:this}))}reveal(e,t){this.assertNotDisposed(),this.#e.$reveal(this.#v,{viewColumn:void 0===e?void 0:I.eI.from(e),preserveFocus:!!t})}assertNotDisposed(){if(this.#S)throw new Error("Webview is disposed")}}class Ln extends s.JT{static newHandle(){return(0,An.R)()}constructor(e,t,i){super(),this.webviews=t,this.workspace=i,this._webviewPanels=new Map,this._serializers=new Map,this._proxy=e.getProxy(w.Tr.MainThreadWebviewPanels)}dispose(){super.dispose(),this._webviewPanels.forEach((e=>e.dispose())),this._webviewPanels.clear()}createWebviewPanel(e,t,i,n,r={}){const o="object"==typeof n?n.viewColumn:n,s={viewColumn:I.eI.from(o),preserveFocus:"object"==typeof n&&!!n.preserveFocus},a=fe(e),c=Ln.newHandle();this._proxy.$createWebviewPanel(ve(e),c,t,{title:i,panelOptions:Nn(r),webviewOptions:be(e,this.workspace,r),serializeBuffersForPostMessage:a},s);const l=this.webviews.createNewWebview(c,r,e);return this.createNewWebviewPanel(c,t,i,o,r,l,!0)}$onDidChangeWebviewPanelViewStates(e){const t=Object.keys(e);t.sort(((t,i)=>{const n=e[t],r=e[i];return n.active?1:r.active?-1:+n.visible-+r.visible}));for(const i of t){const t=this.getWebviewPanel(i);if(!t)continue;const n=e[i];t._updateViewState({active:n.active,visible:n.visible,viewColumn:I.eI.to(n.position)})}}async $onDidDisposeWebviewPanel(e){const t=this.getWebviewPanel(e);t?.dispose(),this._webviewPanels.delete(e),this.webviews.deleteWebview(e)}registerWebviewPanelSerializer(e,t,i){if(this._serializers.has(t))throw new Error(`Serializer for '${t}' already registered`);return this._serializers.set(t,{serializer:i,extension:e}),this._proxy.$registerSerializer(t,{serializeBuffersForPostMessage:fe(e)}),new x.JTr((()=>{this._serializers.delete(t),this._proxy.$unregisterSerializer(t)}))}async $deserializeWebviewPanel(e,t,i,n){const r=this._serializers.get(t);if(!r)throw new Error(`No serializer found for '${t}'`);const{serializer:o,extension:s}=r,a=this.webviews.createNewWebview(e,i.webviewOptions,s),c=this.createNewWebviewPanel(e,t,i.title,n,i.panelOptions,a,i.active);await o.deserializeWebviewPanel(c,i.state)}createNewWebviewPanel(e,t,i,n,r,o,s){const a=new Rn(e,this._proxy,o,{viewType:t,title:i,viewColumn:n,panelOptions:r,active:s});return this._webviewPanels.set(e,a),a}getWebviewPanel(e){return this._webviewPanels.get(e)}}function Nn(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}class $n extends s.JT{#v;#e;#N;#$;#S;#W;#O;#V;#q;constructor(e,t,i,n,r,s){super(),this.#S=!1,this.#j=this._register(new o.Q5),this.onDidChangeVisibility=this.#j.event,this.#z=this._register(new o.Q5),this.onDidDispose=this.#z.event,this.#N=i,this.#O=n,this.#v=e,this.#e=t,this.#$=r,this.#W=s}dispose(){this.#S||(this.#S=!0,this.#z.fire(),this.#$.dispose(),super.dispose())}#j;#z;get title(){return this.assertNotDisposed(),this.#O}set title(e){this.assertNotDisposed(),this.#O!==e&&(this.#O=e,this.#e.$setWebviewViewTitle(this.#v,e))}get description(){return this.assertNotDisposed(),this.#V}set description(e){this.assertNotDisposed(),this.#V!==e&&(this.#V=e,this.#e.$setWebviewViewDescription(this.#v,e))}get visible(){return this.#W}get webview(){return this.#$}get viewType(){return this.#N}_setVisible(e){e===this.#W||this.#S||(this.#W=e,this.#j.fire())}get badge(){return this.assertNotDisposed(),this.#q}set badge(e){this.assertNotDisposed(),e?.value===this.#q?.value&&e?.tooltip===this.#q?.tooltip||(this.#q=I.z0.from(e),this.#e.$setWebviewViewBadge(this.#v,e))}show(e){this.assertNotDisposed(),this.#e.$show(this.#v,!!e)}assertNotDisposed(){if(this.#S)throw new Error("Webview is disposed")}}class On{constructor(e,t){this._extHostWebview=t,this._viewProviders=new Map,this._webviewViews=new Map,this._proxy=e.getProxy(w.Tr.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,i,n){if(this._viewProviders.has(t))throw new Error(`View provider for '${t}' already registered`);return this._viewProviders.set(t,{provider:i,extension:e}),this._proxy.$registerWebviewViewProvider(ve(e),t,{retainContextWhenHidden:n?.retainContextWhenHidden,serializeBuffersForPostMessage:fe(e)}),new x.JTr((()=>{this._viewProviders.delete(t),this._proxy.$unregisterWebviewViewProvider(t)}))}async $resolveWebviewView(e,t,i,n,r){const o=this._viewProviders.get(t);if(!o)throw new Error(`No view provider found for '${t}'`);const{provider:s,extension:a}=o,c=this._extHostWebview.createNewWebview(e,{},a),l=new $n(e,this._proxy,t,i,c,!0);this._webviewViews.set(e,l),await s.resolveWebviewView(l,{state:n},r)}async $onDidChangeWebviewViewVisibility(e,t){this.getWebviewView(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.getWebviewView(e);this._webviewViews.delete(e),t.dispose(),this._extHostWebview.deleteWebview(e)}getWebviewView(e){const t=this._webviewViews.get(e);if(!t)throw new Error("No webview found");return t}}var Fn=i(72124),Mn=i(89608),Un=i(13973),Hn=i(14879),zn=i(97258);function Bn(e){const t=e.get(ot.$),i=e.get(Le.G),E=e.get(Ye.a),S=e.get(Ke.k2),D=e.get(Mn.w),T=e.get(hn.fv),P=e.get(le.E1),R=e.get(In.F),L=e.get(F.O),O=e.get(ln.W),M=e.get(dn.L),H=e.get(_.y),z=e.get(_.V),B=e.get(Tn.rd),W=e.get(N.J),V=e.get(Fn.V),q=e.get(tn.Z),K=e.get(Ve.v),Q=e.get(ri.W),J=e.get($.E),X=e.get(ti.X);L.set(w.D.ExtHostFileSystemInfo,i),L.set(w.D.ExtHostLogLevelServiceShape,H),L.set(w.D.ExtHostWorkspace,D),L.set(w.D.ExtHostConfiguration,P),L.set(w.D.ExtHostExtensionService,S),L.set(w.D.ExtHostStorage,O),L.set(w.D.ExtHostTunnelService,B),L.set(w.D.ExtHostWindow,V),L.set(w.D.ExtHostSecretState,q),L.set(w.D.ExtHostTelemetry,T),L.set(w.D.ExtHostEditorTabs,K),L.set(w.D.ExtHostManagedSockets,Q),L.set(w.D.ExtHostAuthentication,J),L.set(w.D.ExtHostChatProvider,X);const ee=L.set(w.D.ExtHostDecorations,e.get(Ie.W)),te=L.set(w.D.ExtHostDocumentsAndEditors,e.get(We.T)),ie=L.set(w.D.ExtHostCommands,e.get(k.f7)),ne=L.set(w.D.ExtHostTerminalService,e.get(pn.$3)),re=L.set(w.D.ExtHostTerminalShellIntegration,e.get(mn.P)),se=L.set(w.D.ExtHostDebugService,e.get(ke.gM)),ce=L.set(w.D.ExtHostSearch,e.get(en.FR)),de=L.set(w.D.ExtHostTask,e.get(un.h2)),ue=L.set(w.D.ExtHostOutputService,e.get(Ai.U)),he=L.set(w.D.ExtHostLocalization,e.get(ni.O)),pe=L.set(w.D.ExtHostUrls,new Pn(L)),me=L.set(w.D.ExtHostDocuments,new Be(L,te)),ge=L.set(w.D.ExtHostDocumentContentProviders,new Me(L,te,z)),fe=L.set(w.D.ExtHostDocumentSaveParticipant,new He(z,me,L.getProxy(w.Tr.MainThreadBulkEdits))),ve=L.set(w.D.ExtHostNotebook,new vi(L,ie,te,me,E,ce,z)),be=L.set(w.D.ExtHostNotebookDocuments,new yi(ve)),ye=L.set(w.D.ExtHostNotebookEditors,new wi(z,ve)),we=L.set(w.D.ExtHostNotebookKernels,new Ci(L,t,ve,ie,z)),xe=L.set(w.D.ExtHostNotebookRenderers,new Pi(L,ve)),Ce=L.set(w.D.ExtHostNotebookDocumentSaveParticipant,new bi(z,ve,L.getProxy(w.Tr.MainThreadBulkEdits))),Ee=L.set(w.D.ExtHostEditors,new _n(L,te)),De=L.set(w.D.ExtHostTreeViews,new Sn(L.getProxy(w.Tr.MainThreadTreeViews),ie,z)),Te=L.set(w.D.ExtHostEditorInsets,new oe(L.getProxy(w.Tr.MainThreadEditorInsets),Ee,t.remote)),Pe=L.set(w.D.ExtHostDiagnostics,new $e(L,z,i,te)),Ae=L.set(w.D.ExtHostLanguages,new ii(L,me,ie.converter,R)),Re=L.set(w.D.ExtHostLanguageFeatures,new Yt(L,R,me,ie,Pe,z,W,T)),Ne=L.set(w.D.ExtHostFileSystem,new Xe(L,Re)),Fe=L.set(w.D.ExtHostFileSystemEventService,new rt(L,z,te)),Ue=L.set(w.D.ExtHostQuickOpen,Mi(L,D,ie)),ze=L.set(w.D.ExtHostSCM,new Yi(L,ie,me,z)),Ge=L.set(w.D.ExtHostQuickDiff,new Fi(L,R)),Qe=L.set(w.D.ExtHostShare,new nn(L,R)),Je=L.set(w.D.ExtHostComments,ae(L,ie,me)),Ze=L.set(w.D.ExtHostProgress,new $i(L.getProxy(w.Tr.MainThreadProgress))),et=L.set(w.D.ExtHostLabelService,new at(L)),tt=L.set(w.D.ExtHostTheming,new vn(L)),it=L.set(w.D.ExtHostTimeline,new yn(L,ie)),nt=L.set(w.D.ExtHostWebviews,new _e(L,t.remote,D,z,W)),ct=L.set(w.D.ExtHostWebviewPanels,new Ln(L,nt,D)),lt=L.set(w.D.ExtHostCustomEditors,new Se(L,me,M,nt,ct)),dt=L.set(w.D.ExtHostWebviewViews,new On(L,nt)),ut=L.set(w.D.ExtHostTesting,e.get(gn.s7)),ht=L.set(w.D.ExtHostUriOpeners,new kn(L)),pt=L.set(w.D.ExtHostProfileContentHandlers,new Ri(L));L.set(w.D.ExtHostInteractive,new st(L,ve,te,ie,z));const mt=L.set(w.D.ExtHostChatAgents2,new G(L,z,ie)),gt=L.set(w.D.ExtHostChatVariables,new Z(L)),ft=L.set(w.D.ExtHostLanguageModelTools,new ei(L)),_t=L.set(w.D.ExtHostAiRelatedInformation,new C(L)),vt=L.set(w.D.ExtHostAiEmbeddingVector,new je(L)),bt=L.set(w.D.ExtHostStatusBar,new cn(L,ie.converter)),yt=L.set(w.D.ExtHostSpeech,new rn(L)),wt=L.set(w.D.ExtHostEmbeddings,new qe(L)),xt=Object.values(w.D);L.assertRegistered(xt);const Ct=new U(L,te),Et=new Y(L),St=new oi(L,z),Dt=new Oe(L);return A.register(ie),function(e,i,_){function C(t){return(i,n,o)=>{const s=t((t=>{try{i.call(n,t)}catch(t){(0,r.Cp)(new Error(`[ExtensionListenerError] Extension '${e.identifier.value}' FAILED to handle event: ${t.toString()}`,{cause:t})),T.onExtensionError(e.identifier,t)}}));return o?.push(s),s}}const k=function(){let t=!e.isUnderDevelopment;function i(){t||(z.info(`Extension '${e.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),t=!0)}return function t(n){if(Array.isArray(n))n.forEach(t);else if("string"==typeof n)i();else{const t=n;void 0===t.scheme&&i(),"boolean"==typeof t.exclusive&&(0,j.H5)(e,"documentFiltersExclusive")}return n}}(),P={getSession(t,i,n){return"object"==typeof n?.forceNewSession&&n.forceNewSession.learnMore&&(0,j.H5)(e,"authLearnMore"),n?.account&&(0,j.H5)(e,"authGetSessions"),J.getSession(e,t,i,n)},getAccounts(t){return(0,j.H5)(e,"authGetSessions"),J.getAccounts(t)},async hasSession(t,i){return(0,j.H5)(e,"authSession"),!!await J.getSession(e,t,i,{silent:!0})},get onDidChangeSessions(){return C(J.onDidChangeSessions)},registerAuthenticationProvider(e,t,i,n){return J.registerAuthenticationProvider(e,t,i,n)}},A={registerCommand(t,i,n){return ie.registerCommand(!0,t,i,n,void 0,e)},registerTextEditorCommand(t,i,n){return ie.registerCommand(!0,t,((...e)=>{const r=Ee.getActiveTextEditor();if(r)return r.edit((t=>{i.apply(n,[r,t,...e])})).then((e=>{e||z.warn("Edits from command "+t+" were not applied.")}),(e=>{z.warn("An error occurred while running command "+t,e)}));z.warn("Cannot execute "+t+" because there is no active text editor.")}),void 0,void 0,e)},registerDiffInformationCommand:(t,i,n)=>((0,j.H5)(e,"diffCommand"),ie.registerCommand(!0,t,(async(...e)=>{const r=te.activeEditor(!0);if(!r)return void z.warn("Cannot execute "+t+" because there is no active text editor.");const o=await Ee.getDiffInformation(r.id);i.apply(n,[o,...e])}),void 0,void 0,e)),executeCommand(e,...t){return ie.executeCommand(e,...t)},getCommands(e=!1){return ie.getCommands(e)}},R={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return Et.value},get shell(){return ne.getDefaultShell(!1)},get onDidChangeShell(){return C(ne.onDidChangeShell)},get isTelemetryEnabled(){return T.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return C(T.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return(0,j.H5)(e,"telemetry"),T.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return(0,j.H5)(e,"telemetry"),C(T.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return(0,hn.oI)(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(t,i){return hn.jQ.validateSender(t),T.instantiateLogger(e,t,i)},openExternal(e,i){return V.openUri(e,{allowTunneling:!!t.remote.authority,allowContributedOpeners:i?.allowContributedOpeners})},async asExternalUri(e){if(e.scheme===t.environment.appUriScheme)return pe.createAppUri(e);try{return await V.asExternalUri(e,{allowTunneling:!!t.remote.authority})}catch(t){if((0,a.xn)(e,a.lg.http)||(0,a.xn)(e,a.lg.https))return e;throw t}},get remoteName(){return(0,v.WX)(t.remote.authority)},get remoteAuthority(){return(0,j.H5)(e,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return z.getLevel()},get onDidChangeLogLevel(){return C(z.onDidChangeLogLevel)},get appQuality(){return(0,j.H5)(e,"resolvers"),t.quality},get appCommit(){return(0,j.H5)(e,"resolvers"),t.commit}},L={createTestController(t,i,n){return ut.createTestController(e,t,i,n)},createTestObserver(){return(0,j.H5)(e,"testObserver"),ut.createTestObserver()},runTests(t){return(0,j.H5)(e,"testObserver"),ut.runTests(t)},registerTestFollowupProvider(t){return(0,j.H5)(e,"testObserver"),ut.registerTestFollowupProvider(t)},get onDidChangeTestResults(){return(0,j.H5)(e,"testObserver"),C(ut.onResultsChanged)},get testResults(){return(0,j.H5)(e,"testObserver"),ut.results}},N=t.remote.isRemote?x.TPH.Workspace:x.TPH.UI,$={getExtension(t,n){(0,j.$x)(e,"extensionsAny")||(n=!1);const r=i.mine.getExtensionDescription(t);if(r)return new Ke.hj(S,e.identifier,r,N,!1);if(n){const n=i.all.getExtensionDescription(t);if(n)return new Ke.hj(S,e.identifier,n,N,!0)}},get all(){const t=[];for(const n of i.mine.getAllExtensionDescriptions())t.push(new Ke.hj(S,e.identifier,n,N,!1));return t},get allAcrossExtensionHosts(){(0,j.H5)(e,"extensionsAny");const t=new m.o$(i.mine.getAllExtensionDescriptions().map((e=>e.identifier))),n=[];for(const r of i.all.getAllExtensionDescriptions()){const i=!t.has(r.identifier);n.push(new Ke.hj(S,e.identifier,r,N,i))}return n},get onDidChange(){return(0,j.$x)(e,"extensionsAny")?C(o.ju.any(i.mine.onDidChange,i.all.onDidChange)):C(i.mine.onDidChange)}},O={createDiagnosticCollection(t){return Pe.createDiagnosticCollection(e.identifier,t)},get onDidChangeDiagnostics(){return C(Pe.onDidChangeDiagnostics)},getDiagnostics:e=>Pe.getDiagnostics(e),getLanguages(){return Ae.getLanguages()},setTextDocumentLanguage(e,t){return Ae.changeLanguage(e.uri,t)},match(e,t){const i=I.$z.from(e);let n;return(0,u.J)(i)&&(n=ve.notebookDocuments.find((e=>e.apiNotebook.getCells().find((e=>e.document===t))))?.apiNotebook),(0,u.G)(i,t.uri,t.languageId,!0,n?.uri,n?.notebookType)},registerCodeActionsProvider(t,i,n){return Re.registerCodeActionProvider(e,k(t),i,n)},registerDocumentPasteEditProvider(t,i,n){return(0,j.H5)(e,"documentPaste"),Re.registerDocumentPasteEditProvider(e,k(t),i,n)},registerCodeLensProvider(t,i){return Re.registerCodeLensProvider(e,k(t),i)},registerDefinitionProvider(t,i){return Re.registerDefinitionProvider(e,k(t),i)},registerDeclarationProvider(t,i){return Re.registerDeclarationProvider(e,k(t),i)},registerImplementationProvider(t,i){return Re.registerImplementationProvider(e,k(t),i)},registerTypeDefinitionProvider(t,i){return Re.registerTypeDefinitionProvider(e,k(t),i)},registerHoverProvider(t,i){return Re.registerHoverProvider(e,k(t),i,e.identifier)},registerEvaluatableExpressionProvider(t,i){return Re.registerEvaluatableExpressionProvider(e,k(t),i,e.identifier)},registerInlineValuesProvider(t,i){return Re.registerInlineValuesProvider(e,k(t),i,e.identifier)},registerDocumentHighlightProvider(t,i){return Re.registerDocumentHighlightProvider(e,k(t),i)},registerMultiDocumentHighlightProvider(t,i){return Re.registerMultiDocumentHighlightProvider(e,k(t),i)},registerLinkedEditingRangeProvider(t,i){return Re.registerLinkedEditingRangeProvider(e,k(t),i)},registerReferenceProvider(t,i){return Re.registerReferenceProvider(e,k(t),i)},registerRenameProvider(t,i){return Re.registerRenameProvider(e,k(t),i)},registerNewSymbolNamesProvider(t,i){return(0,j.H5)(e,"newSymbolNamesProvider"),Re.registerNewSymbolNamesProvider(e,k(t),i)},registerDocumentSymbolProvider(t,i,n){return Re.registerDocumentSymbolProvider(e,k(t),i,n)},registerWorkspaceSymbolProvider(t){return Re.registerWorkspaceSymbolProvider(e,t)},registerDocumentFormattingEditProvider(t,i){return Re.registerDocumentFormattingEditProvider(e,k(t),i)},registerDocumentRangeFormattingEditProvider(t,i){return Re.registerDocumentRangeFormattingEditProvider(e,k(t),i)},registerOnTypeFormattingEditProvider(t,i,n,...r){return Re.registerOnTypeFormattingEditProvider(e,k(t),i,[n].concat(r))},registerDocumentSemanticTokensProvider(t,i,n){return Re.registerDocumentSemanticTokensProvider(e,k(t),i,n)},registerDocumentRangeSemanticTokensProvider(t,i,n){return Re.registerDocumentRangeSemanticTokensProvider(e,k(t),i,n)},registerSignatureHelpProvider(t,i,n,...r){return"object"==typeof n?Re.registerSignatureHelpProvider(e,k(t),i,n):Re.registerSignatureHelpProvider(e,k(t),i,void 0===n?[]:[n,...r])},registerCompletionItemProvider(t,i,...n){return Re.registerCompletionItemProvider(e,k(t),i,n)},registerInlineCompletionItemProvider(t,i,n){return i.handleDidShowCompletionItem&&(0,j.H5)(e,"inlineCompletionsAdditions"),i.handleDidPartiallyAcceptCompletionItem&&(0,j.H5)(e,"inlineCompletionsAdditions"),n&&(0,j.H5)(e,"inlineCompletionsAdditions"),Re.registerInlineCompletionsProvider(e,k(t),i,n)},registerInlineEditProvider(t,i){return(0,j.H5)(e,"inlineEdit"),Re.registerInlineEditProvider(e,k(t),i)},registerDocumentLinkProvider(t,i){return Re.registerDocumentLinkProvider(e,k(t),i)},registerColorProvider(t,i){return Re.registerColorProvider(e,k(t),i)},registerFoldingRangeProvider(t,i){return Re.registerFoldingRangeProvider(e,k(t),i)},registerSelectionRangeProvider(t,i){return Re.registerSelectionRangeProvider(e,t,i)},registerCallHierarchyProvider(t,i){return Re.registerCallHierarchyProvider(e,t,i)},registerTypeHierarchyProvider(t,i){return Re.registerTypeHierarchyProvider(e,t,i)},setLanguageConfiguration:(t,i)=>Re.setLanguageConfiguration(e,t,i),getTokenInformationAtPosition(t,i){return(0,j.H5)(e,"tokenInformation"),Ae.tokenAtPosition(t,i)},registerInlayHintsProvider(t,i){return Re.registerInlayHintsProvider(e,t,i)},createLanguageStatusItem(t,i){return Ae.createLanguageStatusItem(e,t,i)},registerDocumentDropEditProvider(t,i,n){return Re.registerDocumentOnDropEditProvider(e,t,i,(0,j.$x)(e,"documentPaste")?n:void 0)}},F={get activeTextEditor(){return Ee.getActiveTextEditor()},get visibleTextEditors(){return Ee.getVisibleTextEditors()},get activeTerminal(){return ne.activeTerminal},get terminals(){return ne.terminals},async showTextDocument(t,i,n){l.ov.isUri(t)&&t.scheme===a.lg.vscodeRemote&&!t.authority&&W.report("workspace.showTextDocument",e,"A URI of 'vscode-remote' scheme requires an authority.");const r=await(l.ov.isUri(t)?Promise.resolve(M.openTextDocument(t)):Promise.resolve(t));return Ee.showTextDocument(r,i,n)},createTextEditorDecorationType(t){return Ee.createTextEditorDecorationType(e,t)},onDidChangeActiveTextEditor(e,t,i){return C(Ee.onDidChangeActiveTextEditor)(e,t,i)},onDidChangeVisibleTextEditors(e,t,i){return C(Ee.onDidChangeVisibleTextEditors)(e,t,i)},onDidChangeTextEditorSelection(e,t,i){return C(Ee.onDidChangeTextEditorSelection)(e,t,i)},onDidChangeTextEditorOptions(e,t,i){return C(Ee.onDidChangeTextEditorOptions)(e,t,i)},onDidChangeTextEditorVisibleRanges(e,t,i){return C(Ee.onDidChangeTextEditorVisibleRanges)(e,t,i)},onDidChangeTextEditorViewColumn(e,t,i){return C(Ee.onDidChangeTextEditorViewColumn)(e,t,i)},onDidCloseTerminal(e,t,i){return C(ne.onDidCloseTerminal)(e,t,i)},onDidOpenTerminal(e,t,i){return C(ne.onDidOpenTerminal)(e,t,i)},onDidChangeActiveTerminal(e,t,i){return C(ne.onDidChangeActiveTerminal)(e,t,i)},onDidChangeTerminalDimensions(t,i,n){return(0,j.H5)(e,"terminalDimensions"),C(ne.onDidChangeTerminalDimensions)(t,i,n)},onDidChangeTerminalState(e,t,i){return C(ne.onDidChangeTerminalState)(e,t,i)},onDidWriteTerminalData(t,i,n){return(0,j.H5)(e,"terminalDataWriteEvent"),C(ne.onDidWriteTerminalData)(t,i,n)},onDidExecuteTerminalCommand(t,i,n){return(0,j.H5)(e,"terminalExecuteCommandEvent"),C(ne.onDidExecuteTerminalCommand)(t,i,n)},onDidChangeTerminalShellIntegration(t,i,n){return(0,j.H5)(e,"terminalShellIntegration"),C(re.onDidChangeTerminalShellIntegration)(t,i,n)},onDidStartTerminalShellExecution(t,i,n){return(0,j.H5)(e,"terminalShellIntegration"),C(re.onDidStartTerminalShellExecution)(t,i,n)},onDidEndTerminalShellExecution(t,i,n){return(0,j.H5)(e,"terminalShellIntegration"),C(re.onDidEndTerminalShellExecution)(t,i,n)},get state(){return V.getState()},onDidChangeWindowState(e,t,i){return C(V.onDidChangeWindowState)(e,t,i)},showInformationMessage(t,...i){return St.showMessage(e,c.Z.Info,t,i[0],i.slice(1))},showWarningMessage(t,...i){return St.showMessage(e,c.Z.Warning,t,i[0],i.slice(1))},showErrorMessage(t,...i){return St.showMessage(e,c.Z.Error,t,i[0],i.slice(1))},showQuickPick(t,i,n){return Ue.showQuickPick(e,t,i,n)},showWorkspaceFolderPick(e){return Ue.showWorkspaceFolderPick(e)},showInputBox(e,t){return Ue.showInput(e,t)},showOpenDialog(t){return Dt.showOpenDialog(e,t)},showSaveDialog(e){return Dt.showSaveDialog(e)},createStatusBarItem(t,i,n){let r,o,s;return"string"==typeof t?(r=t,o=i,s=n):(o=t,s=i),bt.createStatusBarEntry(e,r,o,s)},setStatusBarMessage(e,t){return bt.setStatusBarMessage(e,t)},withScmProgress(t){return W.report("window.withScmProgress",e,"Use 'withProgress' instead."),Ze.withProgress(e,{location:x.uTI.SourceControl},((e,i)=>t({report(e){}})))},withProgress(t,i){return Ze.withProgress(e,t,i)},createOutputChannel(t,i){return ue.createOutputChannel(t,i,e)},createWebviewPanel(t,i,n,r){return ct.createWebviewPanel(e,t,i,n,r)},createWebviewTextEditorInset(t,i,n,r){return(0,j.H5)(e,"editorInsets"),Te.createWebviewEditorInset(t,i,n,r,e)},createTerminal(e,t,i){return"object"==typeof e?"pty"in e?ne.createExtensionTerminal(e):ne.createTerminalFromOptions(e):ne.createTerminal(e,t,i)},registerTerminalLinkProvider(e){return ne.registerLinkProvider(e)},registerTerminalProfileProvider(t,i){return ne.registerProfileProvider(e,t,i)},registerTerminalQuickFixProvider(t,i){return(0,j.H5)(e,"terminalQuickFixProvider"),ne.registerTerminalQuickFixProvider(t,e.identifier.value,i)},registerTreeDataProvider(t,i){return De.registerTreeDataProvider(t,i,e)},createTreeView(t,i){return De.createTreeView(t,i,e)},registerWebviewPanelSerializer:(t,i)=>ct.registerWebviewPanelSerializer(e,t,i),registerCustomEditorProvider:(t,i,n={})=>lt.registerCustomEditorProvider(e,t,i,n),registerFileDecorationProvider(t){return ee.registerFileDecorationProvider(t,e)},registerUriHandler(t){return pe.registerUriHandler(e,t)},createQuickPick(){return Ue.createQuickPick(e)},createInputBox(){return Ue.createInputBox(e)},get activeColorTheme(){return tt.activeColorTheme},onDidChangeActiveColorTheme(e,t,i){return C(tt.onDidChangeActiveColorTheme)(e,t,i)},registerWebviewViewProvider(t,i,n){return dt.registerWebviewViewProvider(e,t,i,n?.webviewOptions)},get activeNotebookEditor(){return ve.activeNotebookEditor},onDidChangeActiveNotebookEditor(e,t,i){return C(ve.onDidChangeActiveNotebookEditor)(e,t,i)},get visibleNotebookEditors(){return ve.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return C(ve.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(e,t,i){return C(ye.onDidChangeNotebookEditorSelection)(e,t,i)},onDidChangeNotebookEditorVisibleRanges(e,t,i){return C(ye.onDidChangeNotebookEditorVisibleRanges)(e,t,i)},showNotebookDocument(e,t){return ve.showNotebookDocument(e,t)},registerExternalUriOpener(t,i,n){return(0,j.H5)(e,"externalUriOpener"),ht.registerExternalUriOpener(e.identifier,t,i,n)},registerProfileContentHandler(t,i){return(0,j.H5)(e,"profileContentHandlers"),pt.registerProfileContentHandler(e,t,i)},registerQuickDiffProvider(t,i,n,r){return(0,j.H5)(e,"quickDiffProvider"),Ge.registerQuickDiffProvider(k(t),i,n,r)},get tabGroups(){return K.tabGroups},registerShareProvider(t,i){return(0,j.H5)(e,"shareProvider"),Qe.registerShareProvider(k(t),i)}},M={get rootPath(){return W.report("workspace.rootPath",e,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),D.getPath()},set rootPath(e){throw new r.Tu("rootPath")},getWorkspaceFolder(e){return D.getWorkspaceFolder(e)},get workspaceFolders(){return D.getWorkspaceFolders()},get name(){return D.name},set name(e){throw new r.Tu("name")},get workspaceFile(){return D.workspaceFile},set workspaceFile(e){throw new r.Tu("workspaceFile")},updateWorkspaceFolders:(t,i,...n)=>D.updateWorkspaceFolders(e,t,i||0,...n),onDidChangeWorkspaceFolders:function(e,t,i){return C(D.onDidChangeWorkspace)(e,t,i)},asRelativePath:(e,t)=>D.getRelativePath(e,t),findFiles:(t,i,n,r)=>D.findFiles(t,i,n,e.identifier,r),findFiles2:(t,i,n)=>((0,j.H5)(e,"findFiles2"),D.findFiles2(t,i,e.identifier,n)),findTextInFiles:(t,i,n,r)=>{let o,s;return(0,j.H5)(e,"findTextInFiles"),"object"==typeof i?(o=i,s=n):(o={},s=i,r=n),D.findTextInFiles(t,o||{},s,e.identifier,r)},save:e=>D.save(e),saveAs:e=>D.saveAs(e),saveAll:e=>D.saveAll(e),applyEdit(t,i){return Ct.applyWorkspaceEdit(t,e,i)},createFileSystemWatcher:(t,i,n,r)=>{let o;return"boolean"==typeof i?o={ignoreCreateEvents:Boolean(i),ignoreChangeEvents:Boolean(n),ignoreDeleteEvents:Boolean(r),correlate:!1}:i&&((0,j.H5)(e,"createFileSystemWatcher"),o={...i,correlate:!0}),Fe.createFileSystemWatcher(D,e,t,o)},get textDocuments(){return me.getAllDocumentData().map((e=>e.document))},set textDocuments(e){throw new r.Tu("textDocuments")},openTextDocument(t){let i;const n=t;if("string"==typeof t)i=Promise.resolve(l.ov.file(t));else if(l.ov.isUri(t))i=Promise.resolve(t);else{if(n&&"object"!=typeof n)throw new Error("illegal argument - uriOrFileNameOrOptions");i=me.createDocumentData(n)}return i.then((t=>(t.scheme!==a.lg.vscodeRemote||t.authority||W.report("workspace.openTextDocument",e,"A URI of 'vscode-remote' scheme requires an authority."),me.ensureDocumentData(t).then((e=>e.document)))))},onDidOpenTextDocument:(e,t,i)=>C(me.onDidAddDocument)(e,t,i),onDidCloseTextDocument:(e,t,i)=>C(me.onDidRemoveDocument)(e,t,i),onDidChangeTextDocument:(e,t,i)=>C(me.onDidChangeDocument)(e,t,i),onDidSaveTextDocument:(e,t,i)=>C(me.onDidSaveDocument)(e,t,i),onWillSaveTextDocument:(t,i,n)=>C(fe.getOnWillSaveTextDocumentEvent(e))(t,i,n),get notebookDocuments(){return ve.notebookDocuments.map((e=>e.apiNotebook))},async openNotebookDocument(e,t){let i;if(l.ov.isUri(e))i=e,await ve.openNotebookDocument(e);else{if("string"!=typeof e)throw new Error("Invalid arguments");i=l.ov.revive(await ve.createNotebookDocument({viewType:e,content:t}))}return ve.getNotebookDocument(i).apiNotebook},onDidSaveNotebookDocument(e,t,i){return C(be.onDidSaveNotebookDocument)(e,t,i)},onDidChangeNotebookDocument(e,t,i){return C(be.onDidChangeNotebookDocument)(e,t,i)},onWillSaveNotebookDocument(t,i,n){return C(Ce.getOnWillSaveNotebookDocumentEvent(e))(t,i,n)},get onDidOpenNotebookDocument(){return C(ve.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return C(ve.onDidCloseNotebookDocument)},registerNotebookSerializer(t,i,n,r){return ve.registerNotebookSerializer(e,t,i,n,(0,j.$x)(e,"notebookLiveShare")?r:void 0)},onDidChangeConfiguration:(e,t,i)=>C(_.onDidChangeConfiguration)(e,t,i),getConfiguration(t,i){return i=1===arguments.length?void 0:i,_.getConfiguration(t,i,e)},registerTextDocumentContentProvider(e,t){return ge.registerTextDocumentContentProvider(e,t)},registerTaskProvider:(t,i)=>(W.report("window.registerTaskProvider",e,"Use the corresponding function on the 'tasks' namespace instead"),de.registerTaskProvider(e,t,i)),registerFileSystemProvider(t,i,n){return(0,s.F8)(Ne.registerFileSystemProvider(e,t,i,n),E.addFileSystemProvider(t,i,n))},get fs(){return E.value},registerFileSearchProvider:(t,i)=>((0,j.H5)(e,"fileSearchProvider"),ce.registerFileSearchProvider(t,i)),registerTextSearchProvider:(t,i)=>((0,j.H5)(e,"textSearchProvider"),ce.registerTextSearchProvider(t,i)),registerAITextSearchProvider:(t,i)=>((0,j.H5)(e,"aiTextSearchProvider"),(0,j.H5)(e,"textSearchProvider"),ce.registerAITextSearchProvider(t,i)),registerRemoteAuthorityResolver:(t,i)=>((0,j.H5)(e,"resolvers"),S.registerRemoteAuthorityResolver(t,i)),registerResourceLabelFormatter:t=>((0,j.H5)(e,"resolvers"),et.$registerResourceLabelFormatter(t)),getRemoteExecServer:t=>((0,j.H5)(e,"resolvers"),S.getRemoteExecServer(t)),onDidCreateFiles:(e,t,i)=>C(Fe.onDidCreateFile)(e,t,i),onDidDeleteFiles:(e,t,i)=>C(Fe.onDidDeleteFile)(e,t,i),onDidRenameFiles:(e,t,i)=>C(Fe.onDidRenameFile)(e,t,i),onWillCreateFiles:(t,i,n)=>C(Fe.getOnWillCreateFileEvent(e))(t,i,n),onWillDeleteFiles:(t,i,n)=>C(Fe.getOnWillDeleteFileEvent(e))(t,i,n),onWillRenameFiles:(t,i,n)=>C(Fe.getOnWillRenameFileEvent(e))(t,i,n),openTunnel:t=>((0,j.H5)(e,"tunnels"),B.openTunnel(e,t).then((e=>{if(!e)throw new Error("cannot open tunnel");return e}))),get tunnels(){return(0,j.H5)(e,"tunnels"),B.getTunnels()},onDidChangeTunnels:(t,i,n)=>((0,j.H5)(e,"tunnels"),C(B.onDidChangeTunnels)(t,i,n)),registerPortAttributesProvider:(t,i)=>((0,j.H5)(e,"portsAttributes"),B.registerPortsAttributesProvider(t,i)),registerTunnelProvider:(t,i)=>((0,j.H5)(e,"tunnelFactory"),B.registerTunnelProvider(t,i)),registerTimelineProvider:(t,i)=>((0,j.H5)(e,"timeline"),it.registerTimelineProvider(t,i,e.identifier,ie.converter)),get isTrusted(){return D.trusted},requestWorkspaceTrust:t=>((0,j.H5)(e,"workspaceTrust"),D.requestWorkspaceTrust(t)),onDidGrantWorkspaceTrust:(e,t,i)=>C(D.onDidGrantWorkspaceTrust)(e,t,i),registerEditSessionIdentityProvider:(t,i)=>((0,j.H5)(e,"editSessionIdentityProvider"),D.registerEditSessionIdentityProvider(t,i)),onWillCreateEditSessionIdentity:(t,i,n)=>((0,j.H5)(e,"editSessionIdentityProvider"),C(D.getOnWillCreateEditSessionIdentityEvent(e))(t,i,n)),registerCanonicalUriProvider:(t,i)=>((0,j.H5)(e,"canonicalUriProvider"),D.registerCanonicalUriProvider(t,i)),getCanonicalUri:(t,i,n)=>((0,j.H5)(e,"canonicalUriProvider"),D.provideCanonicalUri(t,i,n))},U={get inputBox(){return W.report("scm.inputBox",e,"Use 'SourceControl.inputBox' instead"),ze.getLastInputBox(e)},createSourceControl(t,i,n){return ze.createSourceControl(e,t,i,n)}},H={createCommentController(t,i){return Je.createCommentController(e,t,i)}},q={get activeDebugSession(){return se.activeDebugSession},get activeDebugConsole(){return se.activeDebugConsole},get breakpoints(){return se.breakpoints},get activeStackItem(){return se.activeStackItem},registerDebugVisualizationProvider(t,i){return(0,j.H5)(e,"debugVisualization"),se.registerDebugVisualizationProvider(e,t,i)},registerDebugVisualizationTreeProvider(t,i){return(0,j.H5)(e,"debugVisualization"),se.registerDebugVisualizationTree(e,t,i)},onDidStartDebugSession(e,t,i){return C(se.onDidStartDebugSession)(e,t,i)},onDidTerminateDebugSession(e,t,i){return C(se.onDidTerminateDebugSession)(e,t,i)},onDidChangeActiveDebugSession(e,t,i){return C(se.onDidChangeActiveDebugSession)(e,t,i)},onDidReceiveDebugSessionCustomEvent(e,t,i){return C(se.onDidReceiveDebugSessionCustomEvent)(e,t,i)},onDidChangeBreakpoints(e,t,i){return C(se.onDidChangeBreakpoints)(e,t,i)},onDidChangeActiveStackItem(e,t,i){return C(se.onDidChangeActiveStackItem)(e,t,i)},registerDebugConfigurationProvider(e,t,i){return se.registerDebugConfigurationProvider(e,t,i||Un.j4.Initial)},registerDebugAdapterDescriptorFactory(t,i){return se.registerDebugAdapterDescriptorFactory(e,t,i)},registerDebugAdapterTrackerFactory(e,t){return se.registerDebugAdapterTrackerFactory(e,t)},startDebugging(e,t,i){return!i||"object"==typeof i&&"configuration"in i?se.startDebugging(e,t,{parentSession:i}):se.startDebugging(e,t,i||{})},stopDebugging(e){return se.stopDebugging(e)},addBreakpoints(e){return se.addBreakpoints(e)},removeBreakpoints(e){return se.removeBreakpoints(e)},asDebugSourceUri(e,t){return se.asDebugSourceUri(e,t)}},G={registerTaskProvider:(t,i)=>de.registerTaskProvider(e,t,i),fetchTasks:e=>de.fetchTasks(e),executeTask:t=>de.executeTask(e,t),get taskExecutions(){return de.taskExecutions},onDidStartTask:(e,t,i)=>C(de.onDidStartTask)(e,t,i),onDidEndTask:(e,t,i)=>C(de.onDidEndTask)(e,t,i),onDidStartTaskProcess:(e,t,i)=>C(de.onDidStartTaskProcess)(e,t,i),onDidEndTaskProcess:(e,t,i)=>C(de.onDidEndTaskProcess)(e,t,i)},Q={createNotebookController(t,i,n,r,o){return we.createNotebookController(e,t,i,n,r,(0,j.$x)(e,"notebookMessaging")?o:void 0)},registerNotebookCellStatusBarItemProvider:(t,i)=>ve.registerNotebookCellStatusBarItemProvider(e,t,i),createRendererMessaging(t){return xe.createRendererMessaging(e,t)},createNotebookControllerDetectionTask(t){return(0,j.H5)(e,"notebookKernelSource"),we.createNotebookControllerDetectionTask(e,t)},registerKernelSourceActionProvider(t,i){return(0,j.H5)(e,"notebookKernelSource"),we.registerKernelSourceActionProvider(e,t,i)},onDidChangeNotebookCellExecutionState(t,i,n){return(0,j.H5)(e,"notebookCellExecutionState"),C(we.onDidChangeNotebookCellExecutionState)(t,i,n)}},Z={t(...t){if("string"==typeof t[0]){const i=t.shift(),n=t&&"object"==typeof t[0]?t[0]:t;return he.getMessage(e.identifier.value,{message:i,args:n})}return he.getMessage(e.identifier.value,t[0])},get bundle(){return he.getBundle(e.identifier.value)},get uri(){return he.getBundleUri(e.identifier.value)}},Y={_version:1,transferActiveChat(t){return(0,j.H5)(e,"interactive"),mt.transferActiveChat(t)}},oe={getRelatedInformation(t,i){return(0,j.H5)(e,"aiRelatedInformation"),_t.getRelatedInformation(e,t,i)},registerRelatedInformationProvider(t,i){return(0,j.H5)(e,"aiRelatedInformation"),_t.registerRelatedInformationProvider(e,t,i)},registerEmbeddingVectorProvider(t,i){return(0,j.H5)(e,"aiRelatedInformation"),vt.registerEmbeddingVectorProvider(e,t,i)}},ae={_version:1,registerChatResponseProvider(t,i,n){return(0,j.H5)(e,"chatProvider"),X.registerLanguageModel(e,t,i,n)},registerChatVariableResolver(t,i,n,r,o,s,a,c){return(0,j.H5)(e,"chatVariableResolver"),gt.registerVariableResolver(e,t,i,n,r,o,s,a,c?.id)},registerMappedEditsProvider(t,i){return(0,j.H5)(e,"mappedEditsProvider"),Re.registerMappedEditsProvider(e,t,i)},createChatParticipant(t,i){return mt.createChatAgent(e,t,i)},createDynamicChatParticipant(t,i,n){return(0,j.H5)(e,"chatParticipantPrivate"),mt.createDynamicChatAgent(e,t,i,n)}},le={selectChatModels:t=>X.selectLanguageModels(e,t??{}),onDidChangeChatModels:(e,t,i)=>X.onDidChangeProviders(e,t,i),registerChatModelProvider:(t,i,n)=>((0,j.H5)(e,"chatProvider"),X.registerLanguageModel(e,t,i,n)),get embeddingModels(){return(0,j.H5)(e,"embeddings"),wt.embeddingsModels},onDidChangeEmbeddingModels:(t,i,n)=>((0,j.H5)(e,"embeddings"),wt.onDidChange(t,i,n)),registerEmbeddingsProvider(t,i){return(0,j.H5)(e,"embeddings"),wt.registerEmbeddingsProvider(e,t,i)},async computeEmbeddings(t,i,n){return(0,j.H5)(e,"embeddings"),wt.computeEmbeddings(t,i,n)},registerTool(t,i){return(0,j.H5)(e,"lmTools"),ft.registerTool(e,t,i)},invokeTool(t,i,n){return(0,j.H5)(e,"lmTools"),ft.invokeTool(t,i,n)},get tools(){return(0,j.H5)(e,"lmTools"),ft.tools}},_e={registerSpeechProvider(t,i){return(0,j.H5)(e,"speech"),yt.registerProvider(e.identifier,t,i)}};return{version:t.version,ai:oe,authentication:P,commands:A,comments:H,chat:ae,debug:q,env:R,extensions:$,interactive:Y,l10n:Z,languages:O,lm:le,notebooks:Q,scm:U,speech:_e,tasks:G,tests:L,window:F,workspace:M,Breakpoint:x.UoH,TerminalOutputAnchor:x.vvd,ChatResultFeedbackKind:x.u8m,ChatVariableLevel:x.Xfu,ChatCompletionItem:x.uOQ,CallHierarchyIncomingCall:x.MPI,CallHierarchyItem:x.llk,CallHierarchyOutgoingCall:x.RVV,CancellationError:r.FU,CancellationTokenSource:n.AU,CandidatePortSource:w.H_,CodeAction:x.B2n,CodeActionKind:x.yNd,CodeActionTriggerKind:x.CDv,CodeLens:x.JFR,Color:x.Ilk,ColorInformation:x.pr0,ColorPresentation:x.oi2,ColorThemeKind:x.bZY,CommentMode:x._AT,CommentState:x.N$N,CommentThreadCollapsibleState:x.xKz,CommentThreadState:x.OTk,CommentThreadApplicability:x.dql,CompletionItem:x.FGT,CompletionItemKind:x.cmM,CompletionItemTag:x.weh,CompletionList:x.Ub$,CompletionTriggerKind:x.IjA,ConfigurationTarget:x.JDx,CustomExecution:x.mgN,DebugAdapterExecutable:x.FLm,DebugAdapterInlineImplementation:x.yr7,DebugAdapterNamedPipeServer:x.HGt,DebugAdapterServer:x.cZI,DebugConfigurationProviderTriggerKind:Un.j4,DebugConsoleMode:x.lZM,DebugVisualization:x.yzl,DecorationRangeBehavior:x.TED,Diagnostic:x.R9_,DiagnosticRelatedInformation:x.va0,DiagnosticSeverity:x.H_B,DiagnosticTag:x.$uQ,Disposable:x.JTr,DocumentHighlight:x.ehQ,DocumentHighlightKind:x.MYA,MultiDocumentHighlight:x.lMH,DocumentLink:x.jWy,DocumentSymbol:x.w6Q,EndOfLine:x.b6q,EnvironmentVariableMutatorType:x.vGG,EvaluatableExpression:x.hfl,InlineValueText:x.$KE,InlineValueVariableLookup:x.wJF,InlineValueEvaluatableExpression:x.rLr,InlineCompletionTriggerKind:x.bwv,EventEmitter:o.Q5,ExtensionKind:x.TPH,ExtensionMode:x.UCC,ExternalUriOpenerPriority:x.cYW,FileChangeType:x.zR2,FileDecoration:x.unW,FileDecoration2:x.unW,FileSystemError:x.yNx,FileType:g.Tv,FilePermission:g.rM,FoldingRange:x.sof,FoldingRangeKind:x.ADb,FunctionBreakpoint:x.TpX,InlineCompletionItem:x.Coj,InlineCompletionList:x.tfP,Hover:x.TMw,VerboseHover:x.GLX,HoverVerbosityAction:x.bqK,IndentAction:h.wU,Location:x.YeX,MarkdownString:x.W5C,OverviewRulerLane:p.sh,ParameterInformation:x.M$5,PortAutoForwardAction:x.pdQ,Position:x.Lyo,ProcessExecution:x.OLe,ProgressLocation:x.uTI,QuickInputButtons:x.ApZ,Range:x.e6w,RelativePattern:x.sUC,Selection:x.Y19,SelectionRange:x.xm7,SemanticTokens:x.Uzh,SemanticTokensBuilder:x.n2H,SemanticTokensEdit:x.FR$,SemanticTokensEdits:x.JQb,SemanticTokensLegend:x.Pts,ShellExecution:x.yGk,ShellQuoting:x.WBl,SignatureHelp:x.vyX,SignatureHelpTriggerKind:x.WW0,SignatureInformation:x.qIz,SnippetString:x.EG5,SourceBreakpoint:x.TGJ,StandardTokenType:x.xJH,StatusBarAlignment:x.MIn,SymbolInformation:x.JNW,SymbolKind:x.cRn,SymbolTag:x.r4c,Task:x.iQE,TaskGroup:x.p5U,TaskPanelKind:x.e2j,TaskRevealKind:x.FZl,TaskScope:x.qNe,TerminalLink:x.TWf,TerminalQuickFixTerminalCommand:x.t5,TerminalQuickFixOpener:x.QII,TerminalLocation:x.i23,TerminalProfile:x.JCu,TerminalExitReason:x._x0,TerminalShellExecutionCommandLineConfidence:x.I82,TextDocumentSaveReason:x.wDJ,TextEdit:x.PYv,SnippetTextEdit:x.M0$,TextEditorCursorStyle:d.d2,TextEditorLineNumbersStyle:x.lP6,TextEditorRevealType:x._VK,TextEditorSelectionChangeKind:x.dWA,SyntaxTokenType:x.wxO,TextDocumentChangeReason:x.bur,ThemeColor:x.tPk,ThemeIcon:x.kS8,TreeItem:x.kfG,TreeItemCheckboxState:x.KHd,TreeItemCollapsibleState:x.oCf,TypeHierarchyItem:x.fQK,UIKind:Hn.D$,Uri:l.ov,ViewColumn:x.eIC,WorkspaceEdit:x.DbP,DocumentPasteTriggerKind:x.NqL,DocumentDropEdit:x.DKv,DocumentDropOrPasteEditKind:x.MXZ,DocumentPasteEdit:x.xwm,InlayHint:x.t7_,InlayHintLabelPart:x.qR,InlayHintKind:x.gl,RemoteAuthorityResolverError:x.qaI,ResolvedAuthority:x.sz_,ManagedResolvedAuthority:x.ryi,SourceControlInputBoxValidationType:x.TMt,ExtensionRuntime:x.Usx,TimelineItem:x.jqr,NotebookRange:x.XsU,NotebookCellKind:x.wUy,NotebookCellExecutionState:x.KPz,NotebookCellData:x.Ul,NotebookData:x.c4G,NotebookRendererScript:x.xTW,NotebookCellStatusBarAlignment:x.F3Y,NotebookEditorRevealType:x.Ay,NotebookCellOutput:x.JOq,NotebookCellOutputItem:x.x$B,NotebookCellStatusBarItem:x.sfZ,NotebookControllerAffinity:x.YjK,NotebookControllerAffinity2:x.Hu0,NotebookEdit:x.HCM,NotebookKernelSourceAction:x.acJ,NotebookVariablesRequestKind:x.rbC,PortAttributes:x.AIo,LinkedEditingRanges:x.YED,TestResultState:x.ZMD,TestRunRequest:x.$hL,TestMessage:x.ltp,TestTag:x.LdD,TestRunProfileKind:x.InX,TextSearchCompleteMessageType:zn.a,DataTransfer:x.tnH,DataTransferItem:x.lSh,TestCoverageCount:x.qRu,FileCoverage:x.XuI,FileCoverage2:x.XuI,StatementCoverage:x.xmj,BranchCoverage:x.fyj,DeclarationCoverage:x.dEe,WorkspaceTrustState:x.Y0F,LanguageStatusSeverity:x.Rxm,QuickPickItemKind:x.qlg,InputBoxValidationSeverity:x.S$x,TabInputText:x.Y_o,TabInputTextDiff:x.lF4,TabInputTextMerge:x.kiP,TabInputCustom:x.zwE,TabInputNotebook:x.IAb,TabInputNotebookDiff:x.ogl,TabInputWebview:x.kU2,TabInputTerminal:x.UyC,TabInputInteractiveWindow:x.Ngc,TabInputChat:x.XgO,TabInputTextMultiDiff:x.UwW,TelemetryTrustedValue:b.NE,LogLevel:f.in,EditSessionIdentityMatch:y.i,InteractiveSessionVoteDirection:x.IAe,ChatCopyKind:x.EU7,InteractiveEditorResponseFeedbackKind:x.ySx,DebugStackFrame:x.U07,DebugThread:x.hNq,RelatedInformationType:x.azK,SpeechToTextStatus:x.xJu,TextToSpeechStatus:x.V8w,PartialAcceptTriggerKind:x.NAb,KeywordRecognitionStatus:x.$R,ChatResponseMarkdownPart:x.HYr,ChatResponseFileTreePart:x.Y08,ChatResponseAnchorPart:x.trJ,ChatResponseProgressPart:x.Gli,ChatResponseProgressPart2:x.meY,ChatResponseReferencePart:x.Ht3,ChatResponseWarningPart:x.fkf,ChatResponseTextEditPart:x.cGf,ChatResponseMarkdownWithVulnerabilitiesPart:x.Zgy,ChatResponseCommandButtonPart:x.WTw,ChatResponseDetectedParticipantPart:x.s8P,ChatResponseConfirmationPart:x.Ik8,ChatRequestTurn:x.eg0,ChatResponseTurn:x.IQN,ChatLocation:x.oYl,LanguageModelChatMessageRole:x.grl,LanguageModelChatMessage:x.xf$,LanguageModelChatMessageFunctionResultPart:x.DHf,LanguageModelChatResponseTextPart:x.NEU,LanguageModelChatResponseFunctionUsePart:x._n6,LanguageModelChatMessage2:x.xf$,LanguageModelChatSystemMessage:x.ORh,LanguageModelChatUserMessage:x.Tax,LanguageModelChatAssistantMessage:x.I01,LanguageModelError:x.tHl,NewSymbolName:x.Xdk,NewSymbolNameTag:x.wa0,NewSymbolNameTriggerKind:x.Llw,InlineEdit:x.Cgf,InlineEditTriggerKind:x.rnR}}}var Wn,Vn=i(61826);let qn=class{constructor(e,t,i,n,r,o,s){this._apiFactory=e,this._extensionRegistry=t,this._instaService=i,this._extHostConfiguration=n,this._extHostExtensionService=r,this._initData=o,this._logService=s,this._factories=new Map,this._alternatives=[]}async install(){this._installInterceptor(),(0,Vn.B)("code/extHost/willWaitForConfig");const e=await this._extHostConfiguration.getConfigProvider();(0,Vn.B)("code/extHost/didWaitForConfig");const t=await this._extHostExtensionService.getExtensionPathIndex();this.register(new Kn(this._apiFactory,t,this._extensionRegistry,e,this._logService)),this.register(this._instaService.createInstance(jn)),this._initData.remote.isRemote&&this.register(this._instaService.createInstance(Gn,t,this._initData.environment.appUriScheme))}register(e){if("nodeModuleName"in e)if(Array.isArray(e.nodeModuleName))for(const t of e.nodeModuleName)this._factories.set(t,e);else this._factories.set(e.nodeModuleName,e);"function"==typeof e.alternativeModuleName&&this._alternatives.push((t=>e.alternativeModuleName(t)))}};qn=(0,O.g)([(0,O.f)(2,bn.TG),(0,O.f)(3,le.E1),(0,O.f)(4,Ke.k2),(0,O.f)(5,ot.$),(0,O.f)(6,_.V)],qn);let jn=class{static{Wn=this}static{this.aliased=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(e){if(e.environment.appRoot&&Wn.aliased.size){const t=(0,Fe.ec)(this.forceForwardSlashes(e.environment.appRoot.fsPath)),i="[a-z0-9_.-]",n=`@${i}+\\/${i}+|${i}+`,r="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.re=new RegExp(`^(${t}/${r}\\/)(${n})(.*)$`,"i")}}alternativeModuleName(e){if(!this.re)return;const t=this.re.exec(this.forceForwardSlashes(e));if(!t)return;const[,i,n,r]=t,o=Wn.aliased.get(n);return void 0!==o?(console.warn(`${n} as been renamed to ${o}, please update your imports`),i+o+r):void 0}forceForwardSlashes(e){return e.replace(/\\/g,"/")}};jn=Wn=(0,O.g)([(0,O.f)(0,ot.$)],jn);class Kn{constructor(e,t,i,n,r){this._apiFactory=e,this._extensionPaths=t,this._extensionRegistry=i,this._configProvider=n,this._logService=r,this.nodeModuleName="vscode",this._extApiImpl=new m.C1}load(e,t){const i=this._extensionPaths.findSubstr(t);if(i){let e=this._extApiImpl.get(i.identifier);return e||(e=this._apiFactory(i,this._extensionRegistry,this._configProvider),this._extApiImpl.set(i.identifier,e)),e}if(!this._defaultApiImpl){let e="";this._extensionPaths.forEach(((t,i)=>e+=`\t${i} -> ${t.identifier.value}\n`)),this._logService.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: \n${e}`),this._defaultApiImpl=this._apiFactory(j.nF,this._extensionRegistry,this._configProvider)}return this._defaultApiImpl}}let Gn=class{constructor(e,t,i){this._extensionPaths=e,this._appUriScheme=t,this.nodeModuleName=["open","opn"],this._mainThreadTelemetry=i.getProxy(w.Tr.MainThreadTelemetry);const n=i.getProxy(w.Tr.MainThreadWindow);this._impl=(e,t)=>{const i=l.ov.parse(e);return t?this.callOriginal(e,t):"http"===i.scheme||"https"===i.scheme?n.$openUri(i,e,{allowTunneling:!0}):"mailto"===i.scheme||i.scheme===this._appUriScheme?n.$openUri(i,e,{}):this.callOriginal(e,t)}}load(e,t,i){const n=this._extensionPaths.findSubstr(t);return n&&(this._extensionId=n.identifier.value,this.sendShimmingTelemetry()),this._original=i(e),this._impl}callOriginal(e,t){return this.sendNoForwardTelemetry(),this._original(e,t)}sendShimmingTelemetry(){this._extensionId&&this._mainThreadTelemetry.$publicLog2("shimming.open",{extension:this._extensionId})}sendNoForwardTelemetry(){this._extensionId&&this._mainThreadTelemetry.$publicLog2("shimming.open.call.noForward",{extension:this._extensionId})}};Gn=(0,O.g)([(0,O.f)(2,F.O)],Gn);let Qn=class{constructor(e,t){this._mainThreadConsole=e.getProxy(w.Tr.MainThreadConsole),this._includeStack=t.consoleForward.includeStack,this._logNative=t.consoleForward.logNative,this._wrapConsoleMethod("info","log"),this._wrapConsoleMethod("log","log"),this._wrapConsoleMethod("warn","warn"),this._wrapConsoleMethod("debug","debug"),this._wrapConsoleMethod("error","error")}_wrapConsoleMethod(e,t){const i=this,n=console[e];Object.defineProperty(console,e,{set:()=>{},get:()=>function(){i._handleConsoleCall(e,t,n,arguments)}})}_handleConsoleCall(e,t,i,n){this._mainThreadConsole.$logExtensionHostMessage({type:"__$console",severity:t,arguments:Zn(n,this._includeStack)}),this._logNative&&this._nativeConsoleLogMessage(e,i,n)}};Qn=(0,O.g)([(0,O.f)(0,F.O),(0,O.f)(1,ot.$)],Qn);const Jn=1e5;function Zn(e,t){const i=[];if(e.length)for(let t=0;t<e.length;t++){let n=e[t];if(void 0===n)n="undefined";else if(n instanceof Error){const e=n;n=e.stack?e.stack:e.toString()}i.push(n)}if(t){const e=(new Error).stack;e&&i.push({__$stack:e.split("\n").slice(3).join("\n")})}try{const e=(0,he.or)(i);return e.length>Jn?"Output omitted for a large object that exceeds the limits":e}catch(e){return`Output omitted for an object that cannot be inspected ('${e.toString()}')`}}let Xn=class extends Qn{constructor(e,t){super(e,t)}_nativeConsoleLogMessage(e,t,i){t.apply(console,i)}};Xn=(0,O.g)([(0,O.f)(0,F.O),(0,O.f)(1,ot.$)],Xn);class Yn extends qn{_installInterceptor(){}getModule(e,t){for(const t of this._alternatives){const i=t(e);if(i){e=i;break}}if(this._factories.has(e))return this._factories.get(e).load(e,t,(()=>{throw new Error("CANNOT LOAD MODULE from here.")}))}}class er extends Ke.Qx{constructor(){super(...arguments),this.extensionRuntime=x.Usx.Webworker}async _beforeAlmostReadyToRunExtensions(){zi.n2&&this._instaService.createInstance(Xn),this._apiFactory=this._instaService.invokeFunction(Bn),this._fakeModules=this._instaService.createInstance(Yn,this._apiFactory,{mine:this._myRegistry,all:this._globalRegistry}),await this._fakeModules.install(),performance.mark("code/extHost/didInitAPI"),await this._waitForDebuggerAttachment()}_getEntryPoint(e){return e.browser}async _loadCommonJSModule(e,t,i){var n,r;t=t.with({path:(n=t.path,r=".js",n.endsWith(r)?n:n+r)});const o=e?.identifier.value;o&&performance.mark(`code/extHost/willFetchExtensionCode/${o}`);const s=l.ov.revive(await this._mainThreadExtensionsProxy.$asBrowserUri(t)),a=await fetch(s.toString(!0));if(o&&performance.mark(`code/extHost/didFetchExtensionCode/${o}`),200!==a.status)throw new Error(a.statusText);const c=`${await a.text()}\n//# sourceURL=${`${t.toString(!0)}#vscode-extension`}`;let d;try{d=new Function("module","exports","require",c)}catch(e){throw o?console.error(`Loading code for extension ${o} failed: ${e.message}`):console.error(`Loading code failed: ${e.message}`),console.error(`${t.toString(!0)}${"number"==typeof e.line?` line ${e.line}`:""}${"number"==typeof e.column?` column ${e.column}`:""}`),console.error(e),e}e&&await this._extHostLocalizationService.initializeLocalizedMessages(e);const u={},h={exports:u},p=e=>{const i=this._fakeModules.getModule(e,t);if(void 0===i)throw new Error(`Cannot load module '${e}'`);return i};try{return i.codeLoadingStart(),o&&performance.mark(`code/extHost/willLoadExtensionCode/${o}`),d(h,u,p),h.exports!==u?h.exports:u}finally{o&&performance.mark(`code/extHost/didLoadExtensionCode/${o}`),i.codeLoadingStop()}}async $setRemoteEnvironment(e){}async _waitForDebuggerAttachment(e=5e3){if(!this._initData.environment.isExtensionDevelopmentDebug)return;const t=Date.now()+e;for(;Date.now()<t&&!("__jsDebugIsReady"in globalThis);)await(0,H.Vs)(10)}}},47862:function(e,t,i){i.d(t,{o:function(){return s}});var n=i(81557),r=i(35820),o=i(67525);class s{constructor(){this.pendingRequests=new Map,this.queue=[],this._onError=new n.Q5,this._onExit=new n.Q5,this.sequence=1}get onError(){return this._onError.event}get onExit(){return this._onExit.event}onMessage(e){this.messageCallback&&this._onError.fire(new Error("attempt to set more than one 'Message' callback")),this.messageCallback=e}onEvent(e){this.eventCallback&&this._onError.fire(new Error("attempt to set more than one 'Event' callback")),this.eventCallback=e}onRequest(e){this.requestCallback&&this._onError.fire(new Error("attempt to set more than one 'Request' callback")),this.requestCallback=e}sendResponse(e){e.seq>0?this._onError.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.internalSend("response",e)}sendRequest(e,t,i,n){const r={command:e};if(t&&Object.keys(t).length>0&&(r.arguments=t),this.internalSend("request",r),"number"==typeof n){const t=setTimeout((()=>{clearTimeout(t);const i=this.pendingRequests.get(r.seq);if(i){this.pendingRequests.delete(r.seq);i({type:"response",seq:0,request_seq:r.seq,success:!1,command:e,message:(0,o.C$)("vs/workbench/contrib/debug/common/abstractDebugAdapter",0,"Timeout after {0} ms for '{1}'",n,e)})}}),n)}return i&&this.pendingRequests.set(r.seq,i),r.seq}acceptMessage(e){this.messageCallback?this.messageCallback(e):(this.queue.push(e),1===this.queue.length&&this.processQueue())}needsTaskBoundaryBetween(e,t){return"event"!==e.type||"event"!==t.type}async processQueue(){let e;for(;this.queue.length;){if(e&&!this.needsTaskBoundaryBetween(this.queue[0],e)||await(0,r.Vs)(0),e=this.queue.shift(),!e)return;switch(e.type){case"event":this.eventCallback?.(e);break;case"request":this.requestCallback?.(e);break;case"response":{const t=e,i=this.pendingRequests.get(t.request_seq);i&&(this.pendingRequests.delete(t.request_seq),i(t));break}}}}internalSend(e,t){t.type=e,t.seq=this.sequence++,this.sendMessage(t)}async cancelPendingRequests(){if(0===this.pendingRequests.size)return Promise.resolve();const e=new Map;this.pendingRequests.forEach(((t,i)=>e.set(i,t))),await(0,r.Vs)(500),e.forEach(((e,t)=>{e({type:"response",seq:0,request_seq:t,success:!1,command:"canceled",message:"canceled"}),this.pendingRequests.delete(t)}))}getPendingRequestIds(){return Array.from(this.pendingRequests.keys())}dispose(){this.queue=[]}}},17248:function(e,t,i){var n;i.d(t,{W:function(){return n}}),function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"}(n||(n={}))},21455:function(e,t,i){i.d(t,{Z:function(){return p}});var n=i(67525),r=i(47635),o=i(82998),s=i(23783),a=i(83101),c=i(81557);const l="vs/workbench/contrib/tasks/common/taskDefinitionRegistry",d={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:(0,n.C$)(l,0,"The actual task type. Please note that types starting with a '$' are reserved for internal usage.")},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:(0,n.C$)(l,1,"Additional properties of the task type"),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:(0,n.C$)(l,2,"Condition which must be true to enable this type of task. Consider using `shellExecutionSupported`, `processExecutionSupported`, and `customExecutionSupported` as appropriate for this task definition. See the [API documentation](https://code.visualstudio.com/api/extension-guides/task-provider#when-clause) for more information."),default:""}}};var u;!function(e){e.from=function(e,t,i){if(!e)return;const s=(0,r.HD)(e.type)?e.type:void 0;if(!s||0===s.length)return void i.error((0,n.C$)(l,3,"The task type configuration is missing the required 'taskType' property"));const c=[];if(Array.isArray(e.required))for(const t of e.required)(0,r.HD)(t)&&c.push(t);return{extensionId:t.value,taskType:s,required:c,properties:e.properties?(0,o.I8)(e.properties):{},when:e.when?a.Ao.deserialize(e.when):void 0}}}(u||(u={}));const h=s.ut.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const i of e)i.type&&t.push(`onTaskType:${i.type}`)},jsonSchema:{description:(0,n.C$)(l,4,"Contributes task kinds"),type:"array",items:d}});const p=new class{constructor(){this._onDefinitionsChanged=new c.Q5,this.onDefinitionsChanged=this._onDefinitionsChanged.event,this.taskTypes=Object.create(null),this.readyPromise=new Promise(((e,t)=>{h.setHandler(((t,i)=>{this._schema=void 0;try{for(const e of i.removed){const t=e.value;for(const e of t)this.taskTypes&&e.type&&this.taskTypes[e.type]&&delete this.taskTypes[e.type]}for(const e of i.added){const t=e.value;for(const i of t){const t=u.from(i,e.description.identifier,e.collector);t&&(this.taskTypes[t.taskType]=t)}}(i.removed.length>0||i.added.length>0)&&this._onDefinitionsChanged.fire()}catch(e){}e(void 0)}))}))}onReady(){return this.readyPromise}get(e){return this.taskTypes[e]}all(){return Object.keys(this.taskTypes).map((e=>this.taskTypes[e]))}getJsonSchema(){if(void 0===this._schema){const e=[];for(const t of this.all()){const i={type:"object",additionalProperties:!1};t.required.length>0&&(i.required=t.required.slice(0)),void 0!==t.properties?i.properties=(0,o.I8)(t.properties):i.properties=Object.create(null),i.properties.type={type:"string",enum:[t.taskType]},e.push(i)}this._schema={oneOf:e}}return this._schema}}},45675:function(e,t,i){var n,r;i.d(t,{Y5:function(){return r},nc:function(){return n},u0:function(){return o}}),function(e){e.Delimiter="\0"}(n||(n={})),function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"}(r||(r={}));class o{static fromExtHostTestItem(e,t,i=e.parent){if(e._isRoot)return new o([t]);const n=[e.id];for(let e=i;e&&e.id!==t;e=e.parent)n.push(e.id);return n.push(t),new o(n.reverse())}static isRoot(e){return!e.includes(n.Delimiter)}static root(e){const t=e.indexOf(n.Delimiter);return-1===t?e:e.slice(0,t)}static fromString(e){return new o(e.split(n.Delimiter))}static join(e,t){return new o([...e.path,t])}static joinToString(e,t){return e.toString()+n.Delimiter+t}static parentId(e){const t=e.lastIndexOf(n.Delimiter);return-1===t?void 0:e.slice(0,t)}static localId(e){const t=e.lastIndexOf(n.Delimiter);return-1===t?e:e.slice(t+n.Delimiter.length)}static isChild(e,t){return t.startsWith(e)&&t[e.length]===n.Delimiter}static compare(e,t){return e===t?r.IsSame:o.isChild(e,t)?r.IsChild:o.isChild(t,e)?r.IsParent:r.Disconnected}static getLengthOfCommonPrefix(e,t){if(0===e)return 0;let i=0;for(;i<e-1;){for(let n=1;n<e;n++){const e=t(n-1),r=t(n);if(e.path[i]!==r.path[i])return i}i++}return i}constructor(e,t=e.length){if(this.path=e,this.viewEnd=t,0===e.length||t<1)throw new Error("cannot create test with empty path")}get rootId(){return new o(this.path,1)}get parentId(){return this.viewEnd>1?new o(this.path,this.viewEnd-1):void 0}get localId(){return this.path[this.viewEnd-1]}get controllerId(){return this.path[0]}get isRoot(){return 1===this.viewEnd}*idsFromRoot(){for(let e=1;e<=this.viewEnd;e++)yield new o(this.path,e)}*idsToRoot(){for(let e=this.viewEnd;e>0;e--)yield new o(this.path,e)}compare(e){if("string"==typeof e)return o.compare(this.toString(),e);for(let t=0;t<e.viewEnd&&t<this.viewEnd;t++)if(e.path[t]!==this.path[t])return r.Disconnected;return e.viewEnd>this.viewEnd?r.IsChild:e.viewEnd<this.viewEnd?r.IsParent:r.IsSame}toJSON(){return this.toString()}toString(){if(!this.stringifed){this.stringifed=this.path[0];for(let e=1;e<this.viewEnd;e++)this.stringifed+=n.Delimiter,this.stringifed+=this.path[e]}return this.stringifed}}},44383:function(e,t,i){i.d(t,{$z:function(){return p},Hx:function(){return _},Mh:function(){return g},NU:function(){return n}});var n,r=i(35820),o=i(81557),s=i(7428),a=i(23088),c=i(33089),l=i(45675);!function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"}(n||(n={}));const d=(e,t)=>e===t,u={range:(e,t)=>e===t||!(!e||!t)&&e.equalsRange(t),busy:d,label:d,description:d,error:d,sortText:d,tags:(e,t)=>e.length===t.length&&!e.some((e=>!t.includes(e)))},h=Object.entries(u);class p extends s.JT{get root(){return this.options.root}constructor(e){super(),this.options=e,this.debounceSendDiff=this._register(new r.pY((()=>this.flushDiff()),200)),this.diffOpEmitter=this._register(new o.Q5),this.tree=new Map,this.tags=new Map,this.diff=[],this.onDidGenerateDiff=this.diffOpEmitter.event,this.root.canResolveChildren=!0,this.upsertItem(this.root,void 0)}set resolveHandler(e){this._resolveHandler=e;for(const e of this.tree.values())this.updateExpandability(e)}get resolveHandler(){return this._resolveHandler}collectDiff(){const e=this.diff;return this.diff=[],e}pushDiff(e){switch(e.op){case c.rq.DocumentSynced:for(const t of this.diff)if(t.op===c.rq.DocumentSynced&&t.uri===e.uri)return void(t.docv=e.docv);break;case c.rq.Update:{const t=this.diff[this.diff.length-1];if(t){if(t.op===c.rq.Update&&t.item.extId===e.item.extId)return void(0,c.Gn)(t.item,e.item);if(t.op===c.rq.Add&&t.item.item.extId===e.item.extId)return void(0,c.Gn)(t.item,e.item)}break}}this.diff.push(e),this.debounceSendDiff.isScheduled()||this.debounceSendDiff.schedule()}expand(e,t){const i=this.tree.get(e);if(i){if((void 0===i.expandLevels||t>i.expandLevels)&&(i.expandLevels=t),i.expand===c.Dd.Expandable){const e=this.resolveChildren(i);return e.isOpen()?this.expandChildren(i,t-1):e.wait().then((()=>this.expandChildren(i,t-1)))}return i.expand===c.Dd.Expanded?!1===i.resolveBarrier?.isOpen()?i.resolveBarrier.wait().then((()=>this.expandChildren(i,t-1))):this.expandChildren(i,t-1):void 0}}dispose(){for(const e of this.tree.values())this.options.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.diff=[],super.dispose()}onTestItemEvent(e,t){switch(t.op){case n.RemoveChild:this.removeItem(l.u0.joinToString(e.fullId,t.id));break;case n.Upsert:this.upsertItem(t.item,e);break;case n.Bulk:for(const i of t.ops)this.onTestItemEvent(e,i);break;case n.SetTags:this.diffTagRefs(t.new,t.old,e.fullId.toString());break;case n.UpdateCanResolveChildren:this.updateExpandability(e);break;case n.SetProp:this.pushDiff({op:c.rq.Update,item:{extId:e.fullId.toString(),item:t.update}});break;case n.DocumentSynced:this.documentSynced(e.actual.uri);break;default:(0,a.vE)()}}documentSynced(e){e&&this.pushDiff({op:c.rq.DocumentSynced,uri:e,docv:this.options.getDocumentVersion(e)})}upsertItem(e,t){const i=l.u0.fromExtHostTestItem(e,this.root.id,t?.actual),r=this.options.getApiFor(e);r.parent&&r.parent!==t?.actual&&this.options.getChildren(r.parent).delete(e.id);let o=this.tree.get(i.toString());if(!o)return o={fullId:i,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:c.Dd.NotExpandable},e.tags.forEach(this.incrementTagRefs,this),this.tree.set(o.fullId.toString(),o),this.setItemParent(e,t),this.pushDiff({op:c.rq.Add,item:{controllerId:this.options.controllerId,expand:o.expand,item:this.options.toITestItem(e)}}),void this.connectItemAndChildren(e,o,t);if(o.actual===e)return void this.connectItem(e,o,t);if(o.actual.uri?.toString()!==e.uri?.toString())return this.removeItem(i.toString()),this.upsertItem(e,t);const s=this.options.getChildren(o.actual),a=o.actual,d=((e,t)=>{let i;for(const[n,r]of h)r(e[n],t[n])||(i?i[n]=t[n]:i={[n]:t[n]});return i})(this.options.toITestItem(a),this.options.toITestItem(e));this.options.getApiFor(a).listener=void 0,o.actual=e,o.resolveBarrier=void 0,o.expand=c.Dd.NotExpandable,d&&(d.hasOwnProperty("tags")&&(this.diffTagRefs(e.tags,a.tags,i.toString()),delete d.tags),this.onTestItemEvent(o,{op:n.SetProp,update:d})),this.connectItemAndChildren(e,o,t);for(const[t,n]of s)this.options.getChildren(e).get(n.id)||this.removeItem(l.u0.joinToString(i,n.id));const u=o.expandLevels;void 0!==u&&queueMicrotask((()=>{o.expand===c.Dd.Expandable&&(o.expandLevels=void 0,this.expand(i.toString(),u))})),this.documentSynced(o.actual.uri)}diffTagRefs(e,t,i){const n=new Set(t.map((e=>e.id)));for(const t of e)n.delete(t.id)||this.incrementTagRefs(t);this.pushDiff({op:c.rq.Update,item:{extId:i,item:{tags:e.map((e=>(0,c.B2)(this.options.controllerId,e.id)))}}}),n.forEach(this.decrementTagRefs,this)}incrementTagRefs(e){const t=this.tags.get(e.id);t?t.refCount++:(this.tags.set(e.id,{refCount:1}),this.pushDiff({op:c.rq.AddTag,tag:{id:(0,c.B2)(this.options.controllerId,e.id)}}))}decrementTagRefs(e){const t=this.tags.get(e);t&&! --t.refCount&&(this.tags.delete(e),this.pushDiff({op:c.rq.RemoveTag,id:(0,c.B2)(this.options.controllerId,e)}))}setItemParent(e,t){this.options.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}connectItem(e,t,i){this.setItemParent(e,i);const n=this.options.getApiFor(e);n.parent=i?.actual,n.listener=e=>this.onTestItemEvent(t,e),this.updateExpandability(t)}connectItemAndChildren(e,t,i){this.connectItem(e,t,i);for(const[i,n]of this.options.getChildren(e))this.upsertItem(n,t)}updateExpandability(e){let t;t=this._resolveHandler?e.resolveBarrier?e.resolveBarrier.isOpen()?c.Dd.Expanded:c.Dd.BusyExpanding:e.actual.canResolveChildren?c.Dd.Expandable:c.Dd.NotExpandable:c.Dd.NotExpandable,t!==e.expand&&(e.expand=t,this.pushDiff({op:c.rq.Update,item:{extId:e.fullId.toString(),expand:t}}),t===c.Dd.Expandable&&void 0!==e.expandLevels&&this.resolveChildren(e))}expandChildren(e,t){if(t<0)return;const i=[];for(const[n,o]of this.options.getChildren(e.actual)){const n=this.expand(l.u0.joinToString(e.fullId,o.id),t);(0,r.J8)(n)&&i.push(n)}return i.length?Promise.all(i).then((()=>{})):void 0}resolveChildren(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this._resolveHandler){const e=new r.U8;return e.open(),e}e.expand=c.Dd.BusyExpanding,this.pushExpandStateUpdate(e);const t=e.resolveBarrier=new r.U8,i=e=>{console.error(`Unhandled error in resolveHandler of test controller "${this.options.controllerId}"`,e)};let n;try{n=this._resolveHandler(e.actual===this.root?void 0:e.actual)}catch(e){i(e)}return(0,r.J8)(n)?n.catch(i).then((()=>{t.open(),this.updateExpandability(e)})):(t.open(),this.updateExpandability(e)),e.resolveBarrier}pushExpandStateUpdate(e){this.pushDiff({op:c.rq.Update,item:{extId:e.fullId.toString(),expand:e.expand}})}removeItem(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:c.rq.Remove,itemId:e});const i=[t];for(;i.length;){const e=i.pop();if(e){this.options.getApiFor(e.actual).listener=void 0;for(const t of e.actual.tags)this.decrementTagRefs(t.id);this.tree.delete(e.fullId.toString());for(const[t,n]of this.options.getChildren(e.actual))i.push(this.tree.get(l.u0.joinToString(e.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.diffOpEmitter.fire(e)}}class m extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}}class g extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}}class f extends Error{constructor(e,t,i){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${i}".`)}}const _=(e,t,i)=>{let r=new Map;return{get size(){return r.size},forEach(e,t){for(const i of r.values())e.call(t,i,this)},[Symbol.iterator](){return r.entries()},replace(o){const s=new Map,a=new Set(r.keys()),c={op:n.Bulk,ops:[]};for(const r of o){if(!(r instanceof i))throw new g(r.id);const o=t(r).controllerId;if(o!==e.controllerId)throw new f(r.id,o,e.controllerId);if(s.has(r.id))throw new m(r.id);s.set(r.id,r),a.delete(r.id),c.ops.push({op:n.Upsert,item:r})}for(const e of a.keys())c.ops.push({op:n.RemoveChild,id:e});e.listener?.(c),r=s},add(t){if(!(t instanceof i))throw new g(t.id);r.set(t.id,t),e.listener?.({op:n.Upsert,item:t})},delete(t){r.delete(t)&&e.listener?.({op:n.RemoveChild,id:t})},get(e){return r.get(e)},toJSON(){return Array.from(r.values())}}}},22837:function(e,t,i){i.d(t,{b:function(){return n}});const n="__"},35908:function(e,t,i){i.d(t,{M9:function(){return m},OP:function(){return h}});var n=i(22200),r=i(59301),o=i(15229),s=i(81647),a=i(67525),c=i(55406),l=i(77264);const d=i(88001).B.as(l.IP.Configuration),u={...c.p6,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:(0,a.C$)("vs/workbench/services/editor/common/editorResolverService",0,'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) to editors (for example `"*.hex": "hexEditor.hexedit"`). These have precedence over the default behavior.'),additionalProperties:{type:"string"}}}};var h,p;function m(e,t){if(new Set([r.lg.extension,r.lg.webviewPanel,r.lg.vscodeWorkspaceTrust,r.lg.vscodeSettings]).has(t.scheme))return!1;const i="string"==typeof e&&e.indexOf(o.KR.sep)>=0?`${t.scheme}:${t.path}`:(0,s.EZ)(t);return(0,n.EQ)("string"==typeof e?e.toLowerCase():e,i.toLowerCase())}d.registerConfiguration(u),function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"}(h||(h={})),function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"}(p||(p={}))},13377:function(e,t,i){i.d(t,{Q:function(){return n}});const n=(0,i(28019).yh)("extensionService")},27799:function(e,t,i){i.d(t,{d:function(){return r},y:function(){return o}});var n=i(54316);class r{constructor(){this._actual=null,this._actualOk=null,this._actualErr=null,this._hasValue=!1,this._value=null,this._hasErr=!1,this._err=null}get[Symbol.toStringTag](){return this.toString()}_ensureActual(){return this._actual||(this._actual=new Promise(((e,t)=>{this._actualOk=e,this._actualErr=t,this._hasValue&&this._actualOk(this._value),this._hasErr&&this._actualErr(this._err)}))),this._actual}resolveOk(e){this._hasValue||this._hasErr||(this._hasValue=!0,this._value=e,this._actual&&this._actualOk(e))}resolveErr(e){this._hasValue||this._hasErr||(this._hasErr=!0,this._err=e,this._actual?this._actualErr(e):(0,n.dL)(e))}then(e,t){return this._ensureActual().then(e,t)}catch(e){return this._ensureActual().then(void 0,e)}finally(e){return this._ensureActual().finally(e)}}class o extends r{constructor(){super(),this._hasErr=!0,this._err=new n.FU}}},92962:function(e,t,i){i.d(t,{CU:function(){return o},IB:function(){return s},ky:function(){return a},uv:function(){return n}});class n{static{this.count=0}constructor(e){this._proxyIdentifierBrand=void 0,this.sid=e,this.nid=++n.count}}const r=[];function o(e){const t=new n(e);return r[t.nid]=t,t}function s(e){return r[e].sid}class a{constructor(e){this.value=e}}},83464:function(e,t,i){i.d(t,{Qc:function(){return c},R_:function(){return l}});var n=i(53976),r=(i(18910),i(59301));i(20658),i(28019);const o=["W","X","Y","Z","a","b","c","d","e","f"],s=new RegExp(`^[${o.join("")}]+`),a=7;function c(e){if(e.scheme!==r.lg.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const i=parseInt(e.fragment.substring(0,t).replace(s,""),a),o=(0,n.NV)(e.fragment.substring(t+1)).toString();return isNaN(i)?void 0:{handle:i,notebook:e.with({scheme:o,fragment:null})}}function l(e,t){const i=t.toString(a),s=`${i.length<o.length?o[i.length-1]:"z"}${i}s${(0,n.oF)(n.KN.fromString(e.scheme),!0,!0)}`;return e.with({scheme:r.lg.vscodeNotebookCell,fragment:s})}},97258:function(e,t,i){var n;i.d(t,{a:function(){return n}}),function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"}(n||(n={}))}}]);